function CS(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function N2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xp={exports:{}},Eu={},vp={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function AS(){if(Ry)return yt;Ry=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function v(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function T(q,se,z){this.props=q,this.context=se,this.refs=_,this.updater=z||w}T.prototype.isReactComponent={},T.prototype.setState=function(q,se){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,se,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function D(){}D.prototype=T.prototype;function U(q,se,z){this.props=q,this.context=se,this.refs=_,this.updater=z||w}var k=U.prototype=new D;k.constructor=U,N(k,T.prototype),k.isPureReactComponent=!0;var F=Array.isArray,J=Object.prototype.hasOwnProperty,ee={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(q,se,z){var te,Q={},Z=null,ue=null;if(se!=null)for(te in se.ref!==void 0&&(ue=se.ref),se.key!==void 0&&(Z=""+se.key),se)J.call(se,te)&&!S.hasOwnProperty(te)&&(Q[te]=se[te]);var Ce=arguments.length-2;if(Ce===1)Q.children=z;else if(1<Ce){for(var oe=Array(Ce),pe=0;pe<Ce;pe++)oe[pe]=arguments[pe+2];Q.children=oe}if(q&&q.defaultProps)for(te in Ce=q.defaultProps,Ce)Q[te]===void 0&&(Q[te]=Ce[te]);return{$$typeof:r,type:q,key:Z,ref:ue,props:Q,_owner:ee.current}}function A(q,se){return{$$typeof:r,type:q.type,key:se,ref:q.ref,props:q.props,_owner:q._owner}}function j(q){return typeof q=="object"&&q!==null&&q.$$typeof===r}function L(q){var se={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(z){return se[z]})}var V=/\/+/g;function O(q,se){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):se.toString(36)}function Be(q,se,z,te,Q){var Z=typeof q;(Z==="undefined"||Z==="boolean")&&(q=null);var ue=!1;if(q===null)ue=!0;else switch(Z){case"string":case"number":ue=!0;break;case"object":switch(q.$$typeof){case r:case e:ue=!0}}if(ue)return ue=q,Q=Q(ue),q=te===""?"."+O(ue,0):te,F(Q)?(z="",q!=null&&(z=q.replace(V,"$&/")+"/"),Be(Q,se,z,"",function(pe){return pe})):Q!=null&&(j(Q)&&(Q=A(Q,z+(!Q.key||ue&&ue.key===Q.key?"":(""+Q.key).replace(V,"$&/")+"/")+q)),se.push(Q)),1;if(ue=0,te=te===""?".":te+":",F(q))for(var Ce=0;Ce<q.length;Ce++){Z=q[Ce];var oe=te+O(Z,Ce);ue+=Be(Z,se,z,oe,Q)}else if(oe=v(q),typeof oe=="function")for(q=oe.call(q),Ce=0;!(Z=q.next()).done;)Z=Z.value,oe=te+O(Z,Ce++),ue+=Be(Z,se,z,oe,Q);else if(Z==="object")throw se=String(q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ue}function De(q,se,z){if(q==null)return q;var te=[],Q=0;return Be(q,te,"","",function(Z){return se.call(z,Z,Q++)}),te}function Se(q){if(q._status===-1){var se=q._result;se=se(),se.then(function(z){(q._status===0||q._status===-1)&&(q._status=1,q._result=z)},function(z){(q._status===0||q._status===-1)&&(q._status=2,q._result=z)}),q._status===-1&&(q._status=0,q._result=se)}if(q._status===1)return q._result.default;throw q._result}var We={current:null},Ne={transition:null},Ee={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:ee};return yt.Children={map:De,forEach:function(q,se,z){De(q,function(){se.apply(this,arguments)},z)},count:function(q){var se=0;return De(q,function(){se++}),se},toArray:function(q){return De(q,function(se){return se})||[]},only:function(q){if(!j(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},yt.Component=T,yt.Fragment=t,yt.Profiler=s,yt.PureComponent=U,yt.StrictMode=n,yt.Suspense=h,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,yt.cloneElement=function(q,se,z){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var te=N({},q.props),Q=q.key,Z=q.ref,ue=q._owner;if(se!=null){if(se.ref!==void 0&&(Z=se.ref,ue=ee.current),se.key!==void 0&&(Q=""+se.key),q.type&&q.type.defaultProps)var Ce=q.type.defaultProps;for(oe in se)J.call(se,oe)&&!S.hasOwnProperty(oe)&&(te[oe]=se[oe]===void 0&&Ce!==void 0?Ce[oe]:se[oe])}var oe=arguments.length-2;if(oe===1)te.children=z;else if(1<oe){Ce=Array(oe);for(var pe=0;pe<oe;pe++)Ce[pe]=arguments[pe+2];te.children=Ce}return{$$typeof:r,type:q.type,key:Q,ref:Z,props:te,_owner:ue}},yt.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:a,_context:q},q.Consumer=q},yt.createElement=I,yt.createFactory=function(q){var se=I.bind(null,q);return se.type=q,se},yt.createRef=function(){return{current:null}},yt.forwardRef=function(q){return{$$typeof:u,render:q}},yt.isValidElement=j,yt.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:Se}},yt.memo=function(q,se){return{$$typeof:f,type:q,compare:se===void 0?null:se}},yt.startTransition=function(q){var se=Ne.transition;Ne.transition={};try{q()}finally{Ne.transition=se}},yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},yt.useCallback=function(q,se){return We.current.useCallback(q,se)},yt.useContext=function(q){return We.current.useContext(q)},yt.useDebugValue=function(){},yt.useDeferredValue=function(q){return We.current.useDeferredValue(q)},yt.useEffect=function(q,se){return We.current.useEffect(q,se)},yt.useId=function(){return We.current.useId()},yt.useImperativeHandle=function(q,se,z){return We.current.useImperativeHandle(q,se,z)},yt.useInsertionEffect=function(q,se){return We.current.useInsertionEffect(q,se)},yt.useLayoutEffect=function(q,se){return We.current.useLayoutEffect(q,se)},yt.useMemo=function(q,se){return We.current.useMemo(q,se)},yt.useReducer=function(q,se,z){return We.current.useReducer(q,se,z)},yt.useRef=function(q){return We.current.useRef(q)},yt.useState=function(q){return We.current.useState(q)},yt.useSyncExternalStore=function(q,se,z){return We.current.useSyncExternalStore(q,se,z)},yt.useTransition=function(){return We.current.useTransition()},yt.version="18.2.0",yt}var Py;function Fg(){return Py||(Py=1,vp.exports=AS()),vp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function IS(){if(jy)return Eu;jy=1;var r=Fg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(u,h,f){var p,x={},v=null,w=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)n.call(h,p)&&!a.hasOwnProperty(p)&&(x[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)x[p]===void 0&&(x[p]=h[p]);return{$$typeof:e,type:u,key:v,ref:w,props:x,_owner:s.current}}return Eu.Fragment=t,Eu.jsx=o,Eu.jsxs=o,Eu}var Dy;function kS(){return Dy||(Dy=1,xp.exports=IS()),xp.exports}var c=kS(),Bh={},yp={exports:{}},es={},wp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function RS(){return Oy||(Oy=1,(function(r){function e(Ne,Ee){var q=Ne.length;Ne.push(Ee);e:for(;0<q;){var se=q-1>>>1,z=Ne[se];if(0<s(z,Ee))Ne[se]=Ee,Ne[q]=z,q=se;else break e}}function t(Ne){return Ne.length===0?null:Ne[0]}function n(Ne){if(Ne.length===0)return null;var Ee=Ne[0],q=Ne.pop();if(q!==Ee){Ne[0]=q;e:for(var se=0,z=Ne.length,te=z>>>1;se<te;){var Q=2*(se+1)-1,Z=Ne[Q],ue=Q+1,Ce=Ne[ue];if(0>s(Z,q))ue<z&&0>s(Ce,Z)?(Ne[se]=Ce,Ne[ue]=q,se=ue):(Ne[se]=Z,Ne[Q]=q,se=Q);else if(ue<z&&0>s(Ce,q))Ne[se]=Ce,Ne[ue]=q,se=ue;else break e}}return Ee}function s(Ne,Ee){var q=Ne.sortIndex-Ee.sortIndex;return q!==0?q:Ne.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();r.unstable_now=function(){return o.now()-u}}var h=[],f=[],p=1,x=null,v=3,w=!1,N=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Ne){for(var Ee=t(f);Ee!==null;){if(Ee.callback===null)n(f);else if(Ee.startTime<=Ne)n(f),Ee.sortIndex=Ee.expirationTime,e(h,Ee);else break;Ee=t(f)}}function F(Ne){if(_=!1,k(Ne),!N)if(t(h)!==null)N=!0,Se(J);else{var Ee=t(f);Ee!==null&&We(F,Ee.startTime-Ne)}}function J(Ne,Ee){N=!1,_&&(_=!1,D(I),I=-1),w=!0;var q=v;try{for(k(Ee),x=t(h);x!==null&&(!(x.expirationTime>Ee)||Ne&&!L());){var se=x.callback;if(typeof se=="function"){x.callback=null,v=x.priorityLevel;var z=se(x.expirationTime<=Ee);Ee=r.unstable_now(),typeof z=="function"?x.callback=z:x===t(h)&&n(h),k(Ee)}else n(h);x=t(h)}if(x!==null)var te=!0;else{var Q=t(f);Q!==null&&We(F,Q.startTime-Ee),te=!1}return te}finally{x=null,v=q,w=!1}}var ee=!1,S=null,I=-1,A=5,j=-1;function L(){return!(r.unstable_now()-j<A)}function V(){if(S!==null){var Ne=r.unstable_now();j=Ne;var Ee=!0;try{Ee=S(!0,Ne)}finally{Ee?O():(ee=!1,S=null)}}else ee=!1}var O;if(typeof U=="function")O=function(){U(V)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,De=Be.port2;Be.port1.onmessage=V,O=function(){De.postMessage(null)}}else O=function(){T(V,0)};function Se(Ne){S=Ne,ee||(ee=!0,O())}function We(Ne,Ee){I=T(function(){Ne(r.unstable_now())},Ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ne){Ne.callback=null},r.unstable_continueExecution=function(){N||w||(N=!0,Se(J))},r.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Ne?Math.floor(1e3/Ne):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(Ne){switch(v){case 1:case 2:case 3:var Ee=3;break;default:Ee=v}var q=v;v=Ee;try{return Ne()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ne,Ee){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var q=v;v=Ne;try{return Ee()}finally{v=q}},r.unstable_scheduleCallback=function(Ne,Ee,q){var se=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,Ne){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,Ne={id:p++,callback:Ee,priorityLevel:Ne,startTime:q,expirationTime:z,sortIndex:-1},q>se?(Ne.sortIndex=q,e(f,Ne),t(h)===null&&Ne===t(f)&&(_?(D(I),I=-1):_=!0,We(F,q-se))):(Ne.sortIndex=z,e(h,Ne),N||w||(N=!0,Se(J))),Ne},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(Ne){var Ee=v;return function(){var q=v;v=Ee;try{return Ne.apply(this,arguments)}finally{v=q}}}})(_p)),_p}var Fy;function PS(){return Fy||(Fy=1,wp.exports=RS()),wp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function jS(){if(Ly)return es;Ly=1;var r=Fg(),e=PS();function t(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,l){o(i,l),o(i+"Capture",l)}function o(i,l){for(s[i]=l,i=0;i<l.length;i++)n.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},x={};function v(i){return h.call(x,i)?!0:h.call(p,i)?!1:f.test(i)?x[i]=!0:(p[i]=!0,!1)}function w(i,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,l,d,g){if(l===null||typeof l>"u"||w(i,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(i,l,d,g,y,b,R){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=b,this.removeEmptyString=R}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new _(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];T[l]=new _(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new _(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new _(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new _(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new _(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new _(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new _(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new _(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(D,U);T[l]=new _(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(D,U);T[l]=new _(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(D,U);T[l]=new _(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new _(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new _(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,l,d,g){var y=T.hasOwnProperty(l)?T[l]:null;(y!==null?y.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(N(l,d,y,g)&&(d=null),g||y===null?v(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(l=y.attributeName,g=y.attributeNamespace,d===null?i.removeAttribute(l):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,g?i.setAttributeNS(g,l,d):i.setAttribute(l,d))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),ee=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),Ne=Symbol.iterator;function Ee(i){return i===null||typeof i!="object"?null:(i=Ne&&i[Ne]||i["@@iterator"],typeof i=="function"?i:null)}var q=Object.assign,se;function z(i){if(se===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);se=l&&l[1]||""}return`
`+se+i}var te=!1;function Q(i,l){if(!i||te)return"";te=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(me){var g=me}Reflect.construct(i,[],l)}else{try{l.call()}catch(me){g=me}i.call(l.prototype)}else{try{throw Error()}catch(me){g=me}i()}}catch(me){if(me&&g&&typeof me.stack=="string"){for(var y=me.stack.split(`
`),b=g.stack.split(`
`),R=y.length-1,X=b.length-1;1<=R&&0<=X&&y[R]!==b[X];)X--;for(;1<=R&&0<=X;R--,X--)if(y[R]!==b[X]){if(R!==1||X!==1)do if(R--,X--,0>X||y[R]!==b[X]){var re=`
`+y[R].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=R&&0<=X);break}}}finally{te=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?z(i):""}function Z(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=Q(i.type,!1),i;case 11:return i=Q(i.type.render,!1),i;case 1:return i=Q(i.type,!0),i;default:return""}}function ue(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case ee:return"Portal";case A:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case Be:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case V:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case De:return l=i.displayName||null,l!==null?l:ue(i.type)||"Memo";case Se:l=i._payload,i=i._init;try{return ue(i(l))}catch{}}return null}function Ce(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function pe(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ge(i){var l=pe(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return y.call(this)},set:function(R){g=""+R,b.call(this,R)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Xe(i){i._valueTracker||(i._valueTracker=ge(i))}function tt(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return i&&(g=pe(i)?i.checked?"true":"false":i.value),i=g,i!==d?(l.setValue(i),!0):!1}function mt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function it(i,l){var d=l.checked;return q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function tr(i,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=oe(l.value!=null?l.value:d),i._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ct(i,l){l=l.checked,l!=null&&k(i,"checked",l,!1)}function ze(i,l){Ct(i,l);var d=oe(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Rr(i,l.type,d):l.hasOwnProperty("defaultValue")&&Rr(i,l.type,oe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function fr(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Rr(i,l,d){(l!=="number"||mt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var Tr=Array.isArray;function Nr(i,l,d,g){if(i=i.options,l){l={};for(var y=0;y<d.length;y++)l["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=l.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&g&&(i[d].defaultSelected=!0)}else{for(d=""+oe(d),l=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,g&&(i[y].defaultSelected=!0);return}l!==null||i[y].disabled||(l=i[y])}l!==null&&(l.selected=!0)}}function As(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function _n(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(Tr(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:oe(d)}}function Sr(i,l){var d=oe(l.value),g=oe(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),g!=null&&(i.defaultValue=""+g)}function cs(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Gt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Gt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Yt,Is=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,y){MSApp.execUnsafeLocalFunction(function(){return i(l,d,g,y)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Yt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function En(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var He={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];Object.keys(He).forEach(function(i){bt.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),He[l]=He[i]})});function At(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||He.hasOwnProperty(i)&&He[i]?(""+l).trim():l+"px"}function Pr(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,y=At(d,l[d],g);d==="float"&&(d="cssFloat"),g?i.setProperty(d,y):i[d]=y}}var us=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(i,l){if(l){if(us[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function rr(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function Ze(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vt=null,gt=null,Tt=null;function Nt(i){if(i=ou(i)){if(typeof vt!="function")throw Error(t(280));var l=i.stateNode;l&&(l=rh(l),vt(i.stateNode,i.type,l))}}function Jt(i){gt?Tt?Tt.push(i):Tt=[i]:gt=i}function nr(){if(gt){var i=gt,l=Tt;if(Tt=gt=null,Nt(i),l)for(i=0;i<l.length;i++)Nt(l[i])}}function Gn(i,l){return i(l)}function No(){}var Ws=!1;function So(i,l,d){if(Ws)return i(l,d);Ws=!0;try{return Gn(i,l,d)}finally{Ws=!1,(gt!==null||Tt!==null)&&(No(),nr())}}function mr(i,l){var d=i.stateNode;if(d===null)return null;var g=rh(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Ea=!1;if(u)try{var On={};Object.defineProperty(On,"passive",{get:function(){Ea=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{Ea=!1}function Bi(i,l,d,g,y,b,R,X,re){var me=Array.prototype.slice.call(arguments,3);try{l.apply(d,me)}catch(ke){this.onError(ke)}}var zi=!1,ba=null,P=!1,G=null,W={onError:function(i){zi=!0,ba=i}};function H(i,l,d,g,y,b,R,X,re){zi=!1,ba=null,Bi.apply(W,arguments)}function K(i,l,d,g,y,b,R,X,re){if(H.apply(this,arguments),zi){if(zi){var me=ba;zi=!1,ba=null}else throw Error(t(198));P||(P=!0,G=me)}}function Y(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function le(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function ve(i){if(Y(i)!==i)throw Error(t(188))}function ce(i){var l=i.alternate;if(!l){if(l=Y(i),l===null)throw Error(t(188));return l!==i?null:i}for(var d=i,g=l;;){var y=d.return;if(y===null)break;var b=y.alternate;if(b===null){if(g=y.return,g!==null){d=g;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===d)return ve(y),i;if(b===g)return ve(y),l;b=b.sibling}throw Error(t(188))}if(d.return!==g.return)d=y,g=b;else{for(var R=!1,X=y.child;X;){if(X===d){R=!0,d=y,g=b;break}if(X===g){R=!0,g=y,d=b;break}X=X.sibling}if(!R){for(X=b.child;X;){if(X===d){R=!0,d=b,g=y;break}if(X===g){R=!0,g=b,d=y;break}X=X.sibling}if(!R)throw Error(t(189))}}if(d.alternate!==g)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:l}function he(i){return i=ce(i),i!==null?fe(i):null}function fe(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=fe(i);if(l!==null)return l;i=i.sibling}return null}var Re=e.unstable_scheduleCallback,Me=e.unstable_cancelCallback,Ge=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Pe=e.unstable_now,ut=e.unstable_getCurrentPriorityLevel,Ot=e.unstable_ImmediatePriority,Pt=e.unstable_UserBlockingPriority,Vt=e.unstable_NormalPriority,Hs=e.unstable_LowPriority,gi=e.unstable_IdlePriority,ds=null,Cr=null;function Ta(i){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(ds,i,void 0,(i.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:Dd,Hc=Math.log,jd=Math.LN2;function Dd(i){return i>>>=0,i===0?32:31-(Hc(i)/jd|0)|0}var bl=64,Tl=4194304;function Na(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Co(i,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,y=i.suspendedLanes,b=i.pingedLanes,R=d&268435455;if(R!==0){var X=R&~y;X!==0?g=Na(X):(b&=R,b!==0&&(g=Na(b)))}else R=d&~y,R!==0?g=Na(R):b!==0&&(g=Na(b));if(g===0)return 0;if(l!==0&&l!==g&&(l&y)===0&&(y=g&-g,b=l&-l,y>=b||y===16&&(b&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)d=31-sr(l),y=1<<d,g|=i[d],l&=~y;return g}function q0(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(i,l){for(var d=i.suspendedLanes,g=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes;0<b;){var R=31-sr(b),X=1<<R,re=y[R];re===-1?((X&d)===0||(X&g)!==0)&&(y[R]=q0(X,l)):re<=l&&(i.expiredLanes|=X),b&=~X}}function hs(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ao(){var i=bl;return bl<<=1,(bl&4194240)===0&&(bl=64),i}function Sa(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function Ca(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-sr(l),i[l]=d}function Xt(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-sr(d),b=1<<y;l[y]=0,g[y]=-1,i[y]=-1,d&=~b}}function Aa(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var g=31-sr(d),y=1<<g;y&l|i[g]&l&&(i[g]|=l),d&=~y}}var St=0;function Ia(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Od,Nl,Fd,Ld,Md,Gc=!1,xi=[],cn=null,Gs=null,qs=null,ka=new Map,ks=new Map,vi=[],K0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ud(i,l){switch(i){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":ka.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(l.pointerId)}}function qn(i,l,d,g,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:b,targetContainers:[y]},l!==null&&(l=ou(l),l!==null&&Nl(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),i)}function Y0(i,l,d,g,y){switch(l){case"focusin":return cn=qn(cn,i,l,d,g,y),!0;case"dragenter":return Gs=qn(Gs,i,l,d,g,y),!0;case"mouseover":return qs=qn(qs,i,l,d,g,y),!0;case"pointerover":var b=y.pointerId;return ka.set(b,qn(ka.get(b)||null,i,l,d,g,y)),!0;case"gotpointercapture":return b=y.pointerId,ks.set(b,qn(ks.get(b)||null,i,l,d,g,y)),!0}return!1}function Vd(i){var l=jo(i.target);if(l!==null){var d=Y(l);if(d!==null){if(l=d.tag,l===13){if(l=le(d),l!==null){i.blockedOn=l,Md(i.priority,function(){Fd(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Wi(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Sl(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var g=new d.constructor(d.type,d);ye=g,d.target.dispatchEvent(g),ye=null}else return l=ou(d),l!==null&&Nl(l),i.blockedOn=d,!1;l.shift()}return!0}function Io(i,l,d){Wi(i)&&d.delete(l)}function Bd(){Gc=!1,cn!==null&&Wi(cn)&&(cn=null),Gs!==null&&Wi(Gs)&&(Gs=null),qs!==null&&Wi(qs)&&(qs=null),ka.forEach(Io),ks.forEach(Io)}function Ks(i,l){i.blockedOn===l&&(i.blockedOn=null,Gc||(Gc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bd)))}function Ys(i){function l(y){return Ks(y,i)}if(0<xi.length){Ks(xi[0],i);for(var d=1;d<xi.length;d++){var g=xi[d];g.blockedOn===i&&(g.blockedOn=null)}}for(cn!==null&&Ks(cn,i),Gs!==null&&Ks(Gs,i),qs!==null&&Ks(qs,i),ka.forEach(l),ks.forEach(l),d=0;d<vi.length;d++)g=vi[d],g.blockedOn===i&&(g.blockedOn=null);for(;0<vi.length&&(d=vi[0],d.blockedOn===null);)Vd(d),d.blockedOn===null&&vi.shift()}var Hi=F.ReactCurrentBatchConfig,Ra=!0;function lr(i,l,d,g){var y=St,b=Hi.transition;Hi.transition=null;try{St=1,qc(i,l,d,g)}finally{St=y,Hi.transition=b}}function X0(i,l,d,g){var y=St,b=Hi.transition;Hi.transition=null;try{St=4,qc(i,l,d,g)}finally{St=y,Hi.transition=b}}function qc(i,l,d,g){if(Ra){var y=Sl(i,l,d,g);if(y===null)om(i,l,g,ko,d),Ud(i,g);else if(Y0(y,i,l,d,g))g.stopPropagation();else if(Ud(i,g),l&4&&-1<K0.indexOf(i)){for(;y!==null;){var b=ou(y);if(b!==null&&Od(b),b=Sl(i,l,d,g),b===null&&om(i,l,g,ko,d),b===y)break;y=b}y!==null&&g.stopPropagation()}else om(i,l,g,null,d)}}var ko=null;function Sl(i,l,d,g){if(ko=null,i=Ze(g),i=jo(i),i!==null)if(l=Y(i),l===null)i=null;else if(d=l.tag,d===13){if(i=le(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return ko=i,null}function Kc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ut()){case Ot:return 1;case Pt:return 4;case Vt:case Hs:return 16;case gi:return 536870912;default:return 16}default:return 16}}var fs=null,Cl=null,Kn=null;function Yc(){if(Kn)return Kn;var i,l=Cl,d=l.length,g,y="value"in fs?fs.value:fs.textContent,b=y.length;for(i=0;i<d&&l[i]===y[i];i++);var R=d-i;for(g=1;g<=R&&l[d-g]===y[b-g];g++);return Kn=y.slice(i,1<g?1-g:void 0)}function Al(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function yi(){return!0}function Xc(){return!1}function un(i){function l(d,g,y,b,R){this._reactName=d,this._targetInst=y,this.type=g,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var X in i)i.hasOwnProperty(X)&&(d=i[X],this[X]=d?d(b):b[X]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?yi:Xc,this.isPropagationStopped=Xc,this}return q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),l}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=un(Xs),wi=q({},Xs,{view:0,detail:0}),Q0=un(wi),kl,Gi,Pa,Ro=q({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Pa&&(Pa&&i.type==="mousemove"?(kl=i.screenX-Pa.screenX,Gi=i.screenY-Pa.screenY):Gi=kl=0,Pa=i),kl)},movementY:function(i){return"movementY"in i?i.movementY:Gi}}),Rl=un(Ro),Qc=q({},Ro,{dataTransfer:0}),zd=un(Qc),Pl=q({},wi,{relatedTarget:0}),jl=un(Pl),$d=q({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),qi=un($d),Wd=q({},Xs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Hd=un(Wd),Gd=q({},Xs,{data:0}),Jc=un(Gd),Dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=qd[i])?!!l[i]:!1}function _i(){return Kd}var m=q({},wi,{key:function(i){if(i.key){var l=Dl[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Al(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(i){return i.type==="keypress"?Al(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Al(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),E=un(m),C=q({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B=un(C),ie=q({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),xe=un(ie),Ve=q({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bt=un(Ve),Wr=q({},Ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),It=un(Wr),Qr=[9,13,27,32],jr=u&&"CompositionEvent"in window,Rs=null;u&&"documentMode"in document&&(Rs=document.documentMode);var ms=u&&"TextEvent"in window&&!Rs,Po=u&&(!jr||Rs&&8<Rs&&11>=Rs),Ol=" ",Tv=!1;function Nv(i,l){switch(i){case"keyup":return Qr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fl=!1;function T4(i,l){switch(i){case"compositionend":return Sv(l);case"keypress":return l.which!==32?null:(Tv=!0,Ol);case"textInput":return i=l.data,i===Ol&&Tv?null:i;default:return null}}function N4(i,l){if(Fl)return i==="compositionend"||!jr&&Nv(i,l)?(i=Yc(),Kn=Cl=fs=null,Fl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Po&&l.locale!=="ko"?null:l.data;default:return null}}var S4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!S4[i.type]:l==="textarea"}function Av(i,l,d,g){Jt(g),l=Zd(l,"onChange"),0<l.length&&(d=new Il("onChange","change",null,d,g),i.push({event:d,listeners:l}))}var Zc=null,eu=null;function C4(i){Gv(i,0)}function Yd(i){var l=Bl(i);if(tt(l))return i}function A4(i,l){if(i==="change")return l}var Iv=!1;if(u){var J0;if(u){var Z0="oninput"in document;if(!Z0){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),Z0=typeof kv.oninput=="function"}J0=Z0}else J0=!1;Iv=J0&&(!document.documentMode||9<document.documentMode)}function Rv(){Zc&&(Zc.detachEvent("onpropertychange",Pv),eu=Zc=null)}function Pv(i){if(i.propertyName==="value"&&Yd(eu)){var l=[];Av(l,eu,i,Ze(i)),So(C4,l)}}function I4(i,l,d){i==="focusin"?(Rv(),Zc=l,eu=d,Zc.attachEvent("onpropertychange",Pv)):i==="focusout"&&Rv()}function k4(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yd(eu)}function R4(i,l){if(i==="click")return Yd(l)}function P4(i,l){if(i==="input"||i==="change")return Yd(l)}function j4(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Qs=typeof Object.is=="function"?Object.is:j4;function tu(i,l){if(Qs(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var y=d[g];if(!h.call(l,y)||!Qs(i[y],l[y]))return!1}return!0}function jv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Dv(i,l){var d=jv(i);i=0;for(var g;d;){if(d.nodeType===3){if(g=i+d.textContent.length,i<=l&&g>=l)return{node:d,offset:l-i};i=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=jv(d)}}function Ov(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Ov(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Fv(){for(var i=window,l=mt();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=mt(i.document)}return l}function em(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function D4(i){var l=Fv(),d=i.focusedElem,g=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&Ov(d.ownerDocument.documentElement,d)){if(g!==null&&em(d)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,b=Math.min(g.start,y);g=g.end===void 0?b:Math.min(g.end,y),!i.extend&&b>g&&(y=g,g=b,b=y),y=Dv(d,b);var R=Dv(d,g);y&&R&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==R.node||i.focusOffset!==R.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),i.removeAllRanges(),b>g?(i.addRange(l),i.extend(R.node,R.offset)):(l.setEnd(R.node,R.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var O4=u&&"documentMode"in document&&11>=document.documentMode,Ll=null,tm=null,ru=null,rm=!1;function Lv(i,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rm||Ll==null||Ll!==mt(g)||(g=Ll,"selectionStart"in g&&em(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ru&&tu(ru,g)||(ru=g,g=Zd(tm,"onSelect"),0<g.length&&(l=new Il("onSelect","select",null,l,d),i.push({event:l,listeners:g}),l.target=Ll)))}function Xd(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var Ml={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},nm={},Mv={};u&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Qd(i){if(nm[i])return nm[i];if(!Ml[i])return i;var l=Ml[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in Mv)return nm[i]=l[d];return i}var Uv=Qd("animationend"),Vv=Qd("animationiteration"),Bv=Qd("animationstart"),zv=Qd("transitionend"),$v=new Map,Wv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(i,l){$v.set(i,l),a(l,[i])}for(var sm=0;sm<Wv.length;sm++){var im=Wv[sm],F4=im.toLowerCase(),L4=im[0].toUpperCase()+im.slice(1);ja(F4,"on"+L4)}ja(Uv,"onAnimationEnd"),ja(Vv,"onAnimationIteration"),ja(Bv,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(zv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M4=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function Hv(i,l,d){var g=i.type||"unknown-event";i.currentTarget=d,K(g,l,void 0,i),i.currentTarget=null}function Gv(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var g=i[d],y=g.event;g=g.listeners;e:{var b=void 0;if(l)for(var R=g.length-1;0<=R;R--){var X=g[R],re=X.instance,me=X.currentTarget;if(X=X.listener,re!==b&&y.isPropagationStopped())break e;Hv(y,X,me),b=re}else for(R=0;R<g.length;R++){if(X=g[R],re=X.instance,me=X.currentTarget,X=X.listener,re!==b&&y.isPropagationStopped())break e;Hv(y,X,me),b=re}}}if(P)throw i=G,P=!1,G=null,i}function ir(i,l){var d=l[fm];d===void 0&&(d=l[fm]=new Set);var g=i+"__bubble";d.has(g)||(qv(l,i,2,!1),d.add(g))}function am(i,l,d){var g=0;l&&(g|=4),qv(d,i,g,l)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function su(i){if(!i[Jd]){i[Jd]=!0,n.forEach(function(d){d!=="selectionchange"&&(M4.has(d)||am(d,!1,i),am(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Jd]||(l[Jd]=!0,am("selectionchange",!1,l))}}function qv(i,l,d,g){switch(Kc(l)){case 1:var y=lr;break;case 4:y=X0;break;default:y=qc}d=y.bind(null,l,d,i),y=void 0,!Ea||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),g?y!==void 0?i.addEventListener(l,d,{capture:!0,passive:y}):i.addEventListener(l,d,!0):y!==void 0?i.addEventListener(l,d,{passive:y}):i.addEventListener(l,d,!1)}function om(i,l,d,g,y){var b=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var X=g.stateNode.containerInfo;if(X===y||X.nodeType===8&&X.parentNode===y)break;if(R===4)for(R=g.return;R!==null;){var re=R.tag;if((re===3||re===4)&&(re=R.stateNode.containerInfo,re===y||re.nodeType===8&&re.parentNode===y))return;R=R.return}for(;X!==null;){if(R=jo(X),R===null)return;if(re=R.tag,re===5||re===6){g=b=R;continue e}X=X.parentNode}}g=g.return}So(function(){var me=b,ke=Ze(d),je=[];e:{var Ae=$v.get(i);if(Ae!==void 0){var qe=Il,Qe=i;switch(i){case"keypress":if(Al(d)===0)break e;case"keydown":case"keyup":qe=E;break;case"focusin":Qe="focus",qe=jl;break;case"focusout":Qe="blur",qe=jl;break;case"beforeblur":case"afterblur":qe=jl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=xe;break;case Uv:case Vv:case Bv:qe=qi;break;case zv:qe=Bt;break;case"scroll":qe=Q0;break;case"wheel":qe=It;break;case"copy":case"cut":case"paste":qe=Hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=B}var Je=(l&4)!==0,Ar=!Je&&i==="scroll",ae=Je?Ae!==null?Ae+"Capture":null:Ae;Je=[];for(var ne=me,de;ne!==null;){de=ne;var Fe=de.stateNode;if(de.tag===5&&Fe!==null&&(de=Fe,ae!==null&&(Fe=mr(ne,ae),Fe!=null&&Je.push(iu(ne,Fe,de)))),Ar)break;ne=ne.return}0<Je.length&&(Ae=new qe(Ae,Qe,null,d,ke),je.push({event:Ae,listeners:Je}))}}if((l&7)===0){e:{if(Ae=i==="mouseover"||i==="pointerover",qe=i==="mouseout"||i==="pointerout",Ae&&d!==ye&&(Qe=d.relatedTarget||d.fromElement)&&(jo(Qe)||Qe[Ki]))break e;if((qe||Ae)&&(Ae=ke.window===ke?ke:(Ae=ke.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,qe?(Qe=d.relatedTarget||d.toElement,qe=me,Qe=Qe?jo(Qe):null,Qe!==null&&(Ar=Y(Qe),Qe!==Ar||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(qe=null,Qe=me),qe!==Qe)){if(Je=Rl,Fe="onMouseLeave",ae="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(Je=B,Fe="onPointerLeave",ae="onPointerEnter",ne="pointer"),Ar=qe==null?Ae:Bl(qe),de=Qe==null?Ae:Bl(Qe),Ae=new Je(Fe,ne+"leave",qe,d,ke),Ae.target=Ar,Ae.relatedTarget=de,Fe=null,jo(ke)===me&&(Je=new Je(ae,ne+"enter",Qe,d,ke),Je.target=de,Je.relatedTarget=Ar,Fe=Je),Ar=Fe,qe&&Qe)t:{for(Je=qe,ae=Qe,ne=0,de=Je;de;de=Ul(de))ne++;for(de=0,Fe=ae;Fe;Fe=Ul(Fe))de++;for(;0<ne-de;)Je=Ul(Je),ne--;for(;0<de-ne;)ae=Ul(ae),de--;for(;ne--;){if(Je===ae||ae!==null&&Je===ae.alternate)break t;Je=Ul(Je),ae=Ul(ae)}Je=null}else Je=null;qe!==null&&Kv(je,Ae,qe,Je,!1),Qe!==null&&Ar!==null&&Kv(je,Ar,Qe,Je,!0)}}e:{if(Ae=me?Bl(me):window,qe=Ae.nodeName&&Ae.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Ae.type==="file")var et=A4;else if(Cv(Ae))if(Iv)et=P4;else{et=k4;var at=I4}else(qe=Ae.nodeName)&&qe.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(et=R4);if(et&&(et=et(i,me))){Av(je,et,d,ke);break e}at&&at(i,Ae,me),i==="focusout"&&(at=Ae._wrapperState)&&at.controlled&&Ae.type==="number"&&Rr(Ae,"number",Ae.value)}switch(at=me?Bl(me):window,i){case"focusin":(Cv(at)||at.contentEditable==="true")&&(Ll=at,tm=me,ru=null);break;case"focusout":ru=tm=Ll=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,Lv(je,d,ke);break;case"selectionchange":if(O4)break;case"keydown":case"keyup":Lv(je,d,ke)}var ot;if(jr)e:{switch(i){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Fl?Nv(i,d)&&(dt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(dt="onCompositionStart");dt&&(Po&&d.locale!=="ko"&&(Fl||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Fl&&(ot=Yc()):(fs=ke,Cl="value"in fs?fs.value:fs.textContent,Fl=!0)),at=Zd(me,dt),0<at.length&&(dt=new Jc(dt,i,null,d,ke),je.push({event:dt,listeners:at}),ot?dt.data=ot:(ot=Sv(d),ot!==null&&(dt.data=ot)))),(ot=ms?T4(i,d):N4(i,d))&&(me=Zd(me,"onBeforeInput"),0<me.length&&(ke=new Jc("onBeforeInput","beforeinput",null,d,ke),je.push({event:ke,listeners:me}),ke.data=ot))}Gv(je,l)})}function iu(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Zd(i,l){for(var d=l+"Capture",g=[];i!==null;){var y=i,b=y.stateNode;y.tag===5&&b!==null&&(y=b,b=mr(i,d),b!=null&&g.unshift(iu(i,b,y)),b=mr(i,l),b!=null&&g.push(iu(i,b,y))),i=i.return}return g}function Ul(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Kv(i,l,d,g,y){for(var b=l._reactName,R=[];d!==null&&d!==g;){var X=d,re=X.alternate,me=X.stateNode;if(re!==null&&re===g)break;X.tag===5&&me!==null&&(X=me,y?(re=mr(d,b),re!=null&&R.unshift(iu(d,re,X))):y||(re=mr(d,b),re!=null&&R.push(iu(d,re,X)))),d=d.return}R.length!==0&&i.push({event:l,listeners:R})}var U4=/\r\n?/g,V4=/\u0000|\uFFFD/g;function Yv(i){return(typeof i=="string"?i:""+i).replace(U4,`
`).replace(V4,"")}function eh(i,l,d){if(l=Yv(l),Yv(i)!==l&&d)throw Error(t(425))}function th(){}var lm=null,cm=null;function um(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var dm=typeof setTimeout=="function"?setTimeout:void 0,B4=typeof clearTimeout=="function"?clearTimeout:void 0,Xv=typeof Promise=="function"?Promise:void 0,z4=typeof queueMicrotask=="function"?queueMicrotask:typeof Xv<"u"?function(i){return Xv.resolve(null).then(i).catch($4)}:dm;function $4(i){setTimeout(function(){throw i})}function hm(i,l){var d=l,g=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(g===0){i.removeChild(y),Ys(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=y}while(d);Ys(l)}function Da(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Qv(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var Vl=Math.random().toString(36).slice(2),Ei="__reactFiber$"+Vl,au="__reactProps$"+Vl,Ki="__reactContainer$"+Vl,fm="__reactEvents$"+Vl,W4="__reactListeners$"+Vl,H4="__reactHandles$"+Vl;function jo(i){var l=i[Ei];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ki]||d[Ei]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=Qv(i);i!==null;){if(d=i[Ei])return d;i=Qv(i)}return l}i=d,d=i.parentNode}return null}function ou(i){return i=i[Ei]||i[Ki],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Bl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function rh(i){return i[au]||null}var mm=[],zl=-1;function Oa(i){return{current:i}}function ar(i){0>zl||(i.current=mm[zl],mm[zl]=null,zl--)}function Zt(i,l){zl++,mm[zl]=i.current,i.current=l}var Fa={},Tn=Oa(Fa),Yn=Oa(!1),Do=Fa;function $l(i,l){var d=i.type.contextTypes;if(!d)return Fa;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var y={},b;for(b in d)y[b]=l[b];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=y),y}function Xn(i){return i=i.childContextTypes,i!=null}function nh(){ar(Yn),ar(Tn)}function Jv(i,l,d){if(Tn.current!==Fa)throw Error(t(168));Zt(Tn,l),Zt(Yn,d)}function Zv(i,l,d){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var y in g)if(!(y in l))throw Error(t(108,Ce(i)||"Unknown",y));return q({},d,g)}function sh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Fa,Do=Tn.current,Zt(Tn,i),Zt(Yn,Yn.current),!0}function e1(i,l,d){var g=i.stateNode;if(!g)throw Error(t(169));d?(i=Zv(i,l,Do),g.__reactInternalMemoizedMergedChildContext=i,ar(Yn),ar(Tn),Zt(Tn,i)):ar(Yn),Zt(Yn,d)}var Yi=null,ih=!1,pm=!1;function t1(i){Yi===null?Yi=[i]:Yi.push(i)}function G4(i){ih=!0,t1(i)}function La(){if(!pm&&Yi!==null){pm=!0;var i=0,l=St;try{var d=Yi;for(St=1;i<d.length;i++){var g=d[i];do g=g(!0);while(g!==null)}Yi=null,ih=!1}catch(y){throw Yi!==null&&(Yi=Yi.slice(i+1)),Re(Ot,La),y}finally{St=l,pm=!1}}return null}var Wl=[],Hl=0,ah=null,oh=0,Ps=[],js=0,Oo=null,Xi=1,Qi="";function Fo(i,l){Wl[Hl++]=oh,Wl[Hl++]=ah,ah=i,oh=l}function r1(i,l,d){Ps[js++]=Xi,Ps[js++]=Qi,Ps[js++]=Oo,Oo=i;var g=Xi;i=Qi;var y=32-sr(g)-1;g&=~(1<<y),d+=1;var b=32-sr(l)+y;if(30<b){var R=y-y%5;b=(g&(1<<R)-1).toString(32),g>>=R,y-=R,Xi=1<<32-sr(l)+y|d<<y|g,Qi=b+i}else Xi=1<<b|d<<y|g,Qi=i}function gm(i){i.return!==null&&(Fo(i,1),r1(i,1,0))}function xm(i){for(;i===ah;)ah=Wl[--Hl],Wl[Hl]=null,oh=Wl[--Hl],Wl[Hl]=null;for(;i===Oo;)Oo=Ps[--js],Ps[js]=null,Qi=Ps[--js],Ps[js]=null,Xi=Ps[--js],Ps[js]=null}var ps=null,gs=null,cr=!1,Js=null;function n1(i,l){var d=Ls(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function s1(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,ps=i,gs=Da(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,ps=i,gs=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Oo!==null?{id:Xi,overflow:Qi}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Ls(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,ps=i,gs=null,!0):!1;default:return!1}}function vm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ym(i){if(cr){var l=gs;if(l){var d=l;if(!s1(i,l)){if(vm(i))throw Error(t(418));l=Da(d.nextSibling);var g=ps;l&&s1(i,l)?n1(g,d):(i.flags=i.flags&-4097|2,cr=!1,ps=i)}}else{if(vm(i))throw Error(t(418));i.flags=i.flags&-4097|2,cr=!1,ps=i}}}function i1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ps=i}function lh(i){if(i!==ps)return!1;if(!cr)return i1(i),cr=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!um(i.type,i.memoizedProps)),l&&(l=gs)){if(vm(i))throw a1(),Error(t(418));for(;l;)n1(i,l),l=Da(l.nextSibling)}if(i1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){gs=Da(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}gs=null}}else gs=ps?Da(i.stateNode.nextSibling):null;return!0}function a1(){for(var i=gs;i;)i=Da(i.nextSibling)}function Gl(){gs=ps=null,cr=!1}function wm(i){Js===null?Js=[i]:Js.push(i)}var q4=F.ReactCurrentBatchConfig;function Zs(i,l){if(i&&i.defaultProps){l=q({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}var ch=Oa(null),uh=null,ql=null,_m=null;function Em(){_m=ql=uh=null}function bm(i){var l=ch.current;ar(ch),i._currentValue=l}function Tm(i,l,d){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===d)break;i=i.return}}function Kl(i,l){uh=i,_m=ql=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Qn=!0),i.firstContext=null)}function Ds(i){var l=i._currentValue;if(_m!==i)if(i={context:i,memoizedValue:l,next:null},ql===null){if(uh===null)throw Error(t(308));ql=i,uh.dependencies={lanes:0,firstContext:i}}else ql=ql.next=i;return l}var Lo=null;function Nm(i){Lo===null?Lo=[i]:Lo.push(i)}function o1(i,l,d,g){var y=l.interleaved;return y===null?(d.next=d,Nm(l)):(d.next=y.next,y.next=d),l.interleaved=d,Ji(i,g)}function Ji(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Ma=!1;function Sm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Zi(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Ua(i,l,d){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Rt&2)!==0){var y=g.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),g.pending=l,Ji(i,d)}return y=g.interleaved,y===null?(l.next=l,Nm(g)):(l.next=y.next,y.next=l),g.interleaved=l,Ji(i,d)}function dh(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,Aa(i,d)}}function c1(i,l){var d=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var y=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var R={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?y=b=R:b=b.next=R,d=d.next}while(d!==null);b===null?y=b=l:b=b.next=l}else y=b=l;d={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:g.shared,effects:g.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function hh(i,l,d,g){var y=i.updateQueue;Ma=!1;var b=y.firstBaseUpdate,R=y.lastBaseUpdate,X=y.shared.pending;if(X!==null){y.shared.pending=null;var re=X,me=re.next;re.next=null,R===null?b=me:R.next=me,R=re;var ke=i.alternate;ke!==null&&(ke=ke.updateQueue,X=ke.lastBaseUpdate,X!==R&&(X===null?ke.firstBaseUpdate=me:X.next=me,ke.lastBaseUpdate=re))}if(b!==null){var je=y.baseState;R=0,ke=me=re=null,X=b;do{var Ae=X.lane,qe=X.eventTime;if((g&Ae)===Ae){ke!==null&&(ke=ke.next={eventTime:qe,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Qe=i,Je=X;switch(Ae=l,qe=d,Je.tag){case 1:if(Qe=Je.payload,typeof Qe=="function"){je=Qe.call(qe,je,Ae);break e}je=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Je.payload,Ae=typeof Qe=="function"?Qe.call(qe,je,Ae):Qe,Ae==null)break e;je=q({},je,Ae);break e;case 2:Ma=!0}}X.callback!==null&&X.lane!==0&&(i.flags|=64,Ae=y.effects,Ae===null?y.effects=[X]:Ae.push(X))}else qe={eventTime:qe,lane:Ae,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ke===null?(me=ke=qe,re=je):ke=ke.next=qe,R|=Ae;if(X=X.next,X===null){if(X=y.shared.pending,X===null)break;Ae=X,X=Ae.next,Ae.next=null,y.lastBaseUpdate=Ae,y.shared.pending=null}}while(!0);if(ke===null&&(re=je),y.baseState=re,y.firstBaseUpdate=me,y.lastBaseUpdate=ke,l=y.shared.interleaved,l!==null){y=l;do R|=y.lane,y=y.next;while(y!==l)}else b===null&&(y.shared.lanes=0);Vo|=R,i.lanes=R,i.memoizedState=je}}function u1(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],y=g.callback;if(y!==null){if(g.callback=null,g=d,typeof y!="function")throw Error(t(191,y));y.call(g)}}}var d1=new r.Component().refs;function Cm(i,l,d,g){l=i.memoizedState,d=d(g,l),d=d==null?l:q({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var fh={isMounted:function(i){return(i=i._reactInternals)?Y(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var g=Mn(),y=$a(i),b=Zi(g,y);b.payload=l,d!=null&&(b.callback=d),l=Ua(i,b,y),l!==null&&(ri(l,i,y,g),dh(l,i,y))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var g=Mn(),y=$a(i),b=Zi(g,y);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=Ua(i,b,y),l!==null&&(ri(l,i,y,g),dh(l,i,y))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=Mn(),g=$a(i),y=Zi(d,g);y.tag=2,l!=null&&(y.callback=l),l=Ua(i,y,g),l!==null&&(ri(l,i,g,d),dh(l,i,g))}};function h1(i,l,d,g,y,b,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,b,R):l.prototype&&l.prototype.isPureReactComponent?!tu(d,g)||!tu(y,b):!0}function f1(i,l,d){var g=!1,y=Fa,b=l.contextType;return typeof b=="object"&&b!==null?b=Ds(b):(y=Xn(l)?Do:Tn.current,g=l.contextTypes,b=(g=g!=null)?$l(i,y):Fa),l=new l(d,b),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=fh,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=b),l}function m1(i,l,d,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==i&&fh.enqueueReplaceState(l,l.state,null)}function Am(i,l,d,g){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs=d1,Sm(i);var b=l.contextType;typeof b=="object"&&b!==null?y.context=Ds(b):(b=Xn(l)?Do:Tn.current,y.context=$l(i,b)),y.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Cm(i,l,b,d),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&fh.enqueueReplaceState(y,y.state,null),hh(i,d,y,g),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function lu(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var g=d.stateNode}if(!g)throw Error(t(147,i));var y=g,b=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(R){var X=y.refs;X===d1&&(X=y.refs={}),R===null?delete X[b]:X[b]=R},l._stringRef=b,l)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function mh(i,l){throw i=Object.prototype.toString.call(l),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function p1(i){var l=i._init;return l(i._payload)}function g1(i){function l(ae,ne){if(i){var de=ae.deletions;de===null?(ae.deletions=[ne],ae.flags|=16):de.push(ne)}}function d(ae,ne){if(!i)return null;for(;ne!==null;)l(ae,ne),ne=ne.sibling;return null}function g(ae,ne){for(ae=new Map;ne!==null;)ne.key!==null?ae.set(ne.key,ne):ae.set(ne.index,ne),ne=ne.sibling;return ae}function y(ae,ne){return ae=Ha(ae,ne),ae.index=0,ae.sibling=null,ae}function b(ae,ne,de){return ae.index=de,i?(de=ae.alternate,de!==null?(de=de.index,de<ne?(ae.flags|=2,ne):de):(ae.flags|=2,ne)):(ae.flags|=1048576,ne)}function R(ae){return i&&ae.alternate===null&&(ae.flags|=2),ae}function X(ae,ne,de,Fe){return ne===null||ne.tag!==6?(ne=dp(de,ae.mode,Fe),ne.return=ae,ne):(ne=y(ne,de),ne.return=ae,ne)}function re(ae,ne,de,Fe){var et=de.type;return et===S?ke(ae,ne,de.props.children,Fe,de.key):ne!==null&&(ne.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Se&&p1(et)===ne.type)?(Fe=y(ne,de.props),Fe.ref=lu(ae,ne,de),Fe.return=ae,Fe):(Fe=jh(de.type,de.key,de.props,null,ae.mode,Fe),Fe.ref=lu(ae,ne,de),Fe.return=ae,Fe)}function me(ae,ne,de,Fe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=hp(de,ae.mode,Fe),ne.return=ae,ne):(ne=y(ne,de.children||[]),ne.return=ae,ne)}function ke(ae,ne,de,Fe,et){return ne===null||ne.tag!==7?(ne=Wo(de,ae.mode,Fe,et),ne.return=ae,ne):(ne=y(ne,de),ne.return=ae,ne)}function je(ae,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=dp(""+ne,ae.mode,de),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case J:return de=jh(ne.type,ne.key,ne.props,null,ae.mode,de),de.ref=lu(ae,null,ne),de.return=ae,de;case ee:return ne=hp(ne,ae.mode,de),ne.return=ae,ne;case Se:var Fe=ne._init;return je(ae,Fe(ne._payload),de)}if(Tr(ne)||Ee(ne))return ne=Wo(ne,ae.mode,de,null),ne.return=ae,ne;mh(ae,ne)}return null}function Ae(ae,ne,de,Fe){var et=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return et!==null?null:X(ae,ne,""+de,Fe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case J:return de.key===et?re(ae,ne,de,Fe):null;case ee:return de.key===et?me(ae,ne,de,Fe):null;case Se:return et=de._init,Ae(ae,ne,et(de._payload),Fe)}if(Tr(de)||Ee(de))return et!==null?null:ke(ae,ne,de,Fe,null);mh(ae,de)}return null}function qe(ae,ne,de,Fe,et){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return ae=ae.get(de)||null,X(ne,ae,""+Fe,et);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case J:return ae=ae.get(Fe.key===null?de:Fe.key)||null,re(ne,ae,Fe,et);case ee:return ae=ae.get(Fe.key===null?de:Fe.key)||null,me(ne,ae,Fe,et);case Se:var at=Fe._init;return qe(ae,ne,de,at(Fe._payload),et)}if(Tr(Fe)||Ee(Fe))return ae=ae.get(de)||null,ke(ne,ae,Fe,et,null);mh(ne,Fe)}return null}function Qe(ae,ne,de,Fe){for(var et=null,at=null,ot=ne,dt=ne=0,en=null;ot!==null&&dt<de.length;dt++){ot.index>dt?(en=ot,ot=null):en=ot.sibling;var jt=Ae(ae,ot,de[dt],Fe);if(jt===null){ot===null&&(ot=en);break}i&&ot&&jt.alternate===null&&l(ae,ot),ne=b(jt,ne,dt),at===null?et=jt:at.sibling=jt,at=jt,ot=en}if(dt===de.length)return d(ae,ot),cr&&Fo(ae,dt),et;if(ot===null){for(;dt<de.length;dt++)ot=je(ae,de[dt],Fe),ot!==null&&(ne=b(ot,ne,dt),at===null?et=ot:at.sibling=ot,at=ot);return cr&&Fo(ae,dt),et}for(ot=g(ae,ot);dt<de.length;dt++)en=qe(ot,ae,dt,de[dt],Fe),en!==null&&(i&&en.alternate!==null&&ot.delete(en.key===null?dt:en.key),ne=b(en,ne,dt),at===null?et=en:at.sibling=en,at=en);return i&&ot.forEach(function(Ga){return l(ae,Ga)}),cr&&Fo(ae,dt),et}function Je(ae,ne,de,Fe){var et=Ee(de);if(typeof et!="function")throw Error(t(150));if(de=et.call(de),de==null)throw Error(t(151));for(var at=et=null,ot=ne,dt=ne=0,en=null,jt=de.next();ot!==null&&!jt.done;dt++,jt=de.next()){ot.index>dt?(en=ot,ot=null):en=ot.sibling;var Ga=Ae(ae,ot,jt.value,Fe);if(Ga===null){ot===null&&(ot=en);break}i&&ot&&Ga.alternate===null&&l(ae,ot),ne=b(Ga,ne,dt),at===null?et=Ga:at.sibling=Ga,at=Ga,ot=en}if(jt.done)return d(ae,ot),cr&&Fo(ae,dt),et;if(ot===null){for(;!jt.done;dt++,jt=de.next())jt=je(ae,jt.value,Fe),jt!==null&&(ne=b(jt,ne,dt),at===null?et=jt:at.sibling=jt,at=jt);return cr&&Fo(ae,dt),et}for(ot=g(ae,ot);!jt.done;dt++,jt=de.next())jt=qe(ot,ae,dt,jt.value,Fe),jt!==null&&(i&&jt.alternate!==null&&ot.delete(jt.key===null?dt:jt.key),ne=b(jt,ne,dt),at===null?et=jt:at.sibling=jt,at=jt);return i&&ot.forEach(function(SS){return l(ae,SS)}),cr&&Fo(ae,dt),et}function Ar(ae,ne,de,Fe){if(typeof de=="object"&&de!==null&&de.type===S&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case J:e:{for(var et=de.key,at=ne;at!==null;){if(at.key===et){if(et=de.type,et===S){if(at.tag===7){d(ae,at.sibling),ne=y(at,de.props.children),ne.return=ae,ae=ne;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Se&&p1(et)===at.type){d(ae,at.sibling),ne=y(at,de.props),ne.ref=lu(ae,at,de),ne.return=ae,ae=ne;break e}d(ae,at);break}else l(ae,at);at=at.sibling}de.type===S?(ne=Wo(de.props.children,ae.mode,Fe,de.key),ne.return=ae,ae=ne):(Fe=jh(de.type,de.key,de.props,null,ae.mode,Fe),Fe.ref=lu(ae,ne,de),Fe.return=ae,ae=Fe)}return R(ae);case ee:e:{for(at=de.key;ne!==null;){if(ne.key===at)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){d(ae,ne.sibling),ne=y(ne,de.children||[]),ne.return=ae,ae=ne;break e}else{d(ae,ne);break}else l(ae,ne);ne=ne.sibling}ne=hp(de,ae.mode,Fe),ne.return=ae,ae=ne}return R(ae);case Se:return at=de._init,Ar(ae,ne,at(de._payload),Fe)}if(Tr(de))return Qe(ae,ne,de,Fe);if(Ee(de))return Je(ae,ne,de,Fe);mh(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ne!==null&&ne.tag===6?(d(ae,ne.sibling),ne=y(ne,de),ne.return=ae,ae=ne):(d(ae,ne),ne=dp(de,ae.mode,Fe),ne.return=ae,ae=ne),R(ae)):d(ae,ne)}return Ar}var Yl=g1(!0),x1=g1(!1),cu={},bi=Oa(cu),uu=Oa(cu),du=Oa(cu);function Mo(i){if(i===cu)throw Error(t(174));return i}function Im(i,l){switch(Zt(du,l),Zt(uu,i),Zt(bi,cu),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:qt(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=qt(l,i)}ar(bi),Zt(bi,l)}function Xl(){ar(bi),ar(uu),ar(du)}function v1(i){Mo(du.current);var l=Mo(bi.current),d=qt(l,i.type);l!==d&&(Zt(uu,i),Zt(bi,d))}function km(i){uu.current===i&&(ar(bi),ar(uu))}var pr=Oa(0);function ph(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Rm=[];function Pm(){for(var i=0;i<Rm.length;i++)Rm[i]._workInProgressVersionPrimary=null;Rm.length=0}var gh=F.ReactCurrentDispatcher,jm=F.ReactCurrentBatchConfig,Uo=0,gr=null,Hr=null,Jr=null,xh=!1,hu=!1,fu=0,K4=0;function Nn(){throw Error(t(321))}function Dm(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!Qs(i[d],l[d]))return!1;return!0}function Om(i,l,d,g,y,b){if(Uo=b,gr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,gh.current=i===null||i.memoizedState===null?J4:Z4,i=d(g,y),hu){b=0;do{if(hu=!1,fu=0,25<=b)throw Error(t(301));b+=1,Jr=Hr=null,l.updateQueue=null,gh.current=eS,i=d(g,y)}while(hu)}if(gh.current=wh,l=Hr!==null&&Hr.next!==null,Uo=0,Jr=Hr=gr=null,xh=!1,l)throw Error(t(300));return i}function Fm(){var i=fu!==0;return fu=0,i}function Ti(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?gr.memoizedState=Jr=i:Jr=Jr.next=i,Jr}function Os(){if(Hr===null){var i=gr.alternate;i=i!==null?i.memoizedState:null}else i=Hr.next;var l=Jr===null?gr.memoizedState:Jr.next;if(l!==null)Jr=l,Hr=i;else{if(i===null)throw Error(t(310));Hr=i,i={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},Jr===null?gr.memoizedState=Jr=i:Jr=Jr.next=i}return Jr}function mu(i,l){return typeof l=="function"?l(i):l}function Lm(i){var l=Os(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var g=Hr,y=g.baseQueue,b=d.pending;if(b!==null){if(y!==null){var R=y.next;y.next=b.next,b.next=R}g.baseQueue=y=b,d.pending=null}if(y!==null){b=y.next,g=g.baseState;var X=R=null,re=null,me=b;do{var ke=me.lane;if((Uo&ke)===ke)re!==null&&(re=re.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),g=me.hasEagerState?me.eagerState:i(g,me.action);else{var je={lane:ke,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};re===null?(X=re=je,R=g):re=re.next=je,gr.lanes|=ke,Vo|=ke}me=me.next}while(me!==null&&me!==b);re===null?R=g:re.next=X,Qs(g,l.memoizedState)||(Qn=!0),l.memoizedState=g,l.baseState=R,l.baseQueue=re,d.lastRenderedState=g}if(i=d.interleaved,i!==null){y=i;do b=y.lane,gr.lanes|=b,Vo|=b,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Mm(i){var l=Os(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var g=d.dispatch,y=d.pending,b=l.memoizedState;if(y!==null){d.pending=null;var R=y=y.next;do b=i(b,R.action),R=R.next;while(R!==y);Qs(b,l.memoizedState)||(Qn=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,g]}function y1(){}function w1(i,l){var d=gr,g=Os(),y=l(),b=!Qs(g.memoizedState,y);if(b&&(g.memoizedState=y,Qn=!0),g=g.queue,Um(b1.bind(null,d,g,i),[i]),g.getSnapshot!==l||b||Jr!==null&&Jr.memoizedState.tag&1){if(d.flags|=2048,pu(9,E1.bind(null,d,g,y,l),void 0,null),Zr===null)throw Error(t(349));(Uo&30)!==0||_1(d,l,y)}return y}function _1(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=gr.updateQueue,l===null?(l={lastEffect:null,stores:null},gr.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function E1(i,l,d,g){l.value=d,l.getSnapshot=g,T1(l)&&N1(i)}function b1(i,l,d){return d(function(){T1(l)&&N1(i)})}function T1(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!Qs(i,d)}catch{return!0}}function N1(i){var l=Ji(i,1);l!==null&&ri(l,i,1,-1)}function S1(i){var l=Ti();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:i},l.queue=i,i=i.dispatch=Q4.bind(null,gr,i),[l.memoizedState,i]}function pu(i,l,d,g){return i={tag:i,create:l,destroy:d,deps:g,next:null},l=gr.updateQueue,l===null?(l={lastEffect:null,stores:null},gr.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(g=d.next,d.next=i,i.next=g,l.lastEffect=i)),i}function C1(){return Os().memoizedState}function vh(i,l,d,g){var y=Ti();gr.flags|=i,y.memoizedState=pu(1|l,d,void 0,g===void 0?null:g)}function yh(i,l,d,g){var y=Os();g=g===void 0?null:g;var b=void 0;if(Hr!==null){var R=Hr.memoizedState;if(b=R.destroy,g!==null&&Dm(g,R.deps)){y.memoizedState=pu(l,d,b,g);return}}gr.flags|=i,y.memoizedState=pu(1|l,d,b,g)}function A1(i,l){return vh(8390656,8,i,l)}function Um(i,l){return yh(2048,8,i,l)}function I1(i,l){return yh(4,2,i,l)}function k1(i,l){return yh(4,4,i,l)}function R1(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function P1(i,l,d){return d=d!=null?d.concat([i]):null,yh(4,4,R1.bind(null,l,i),d)}function Vm(){}function j1(i,l){var d=Os();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Dm(l,g[1])?g[0]:(d.memoizedState=[i,l],i)}function D1(i,l){var d=Os();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Dm(l,g[1])?g[0]:(i=i(),d.memoizedState=[i,l],i)}function O1(i,l,d){return(Uo&21)===0?(i.baseState&&(i.baseState=!1,Qn=!0),i.memoizedState=d):(Qs(d,l)||(d=Ao(),gr.lanes|=d,Vo|=d,i.baseState=!0),l)}function Y4(i,l){var d=St;St=d!==0&&4>d?d:4,i(!0);var g=jm.transition;jm.transition={};try{i(!1),l()}finally{St=d,jm.transition=g}}function F1(){return Os().memoizedState}function X4(i,l,d){var g=$a(i);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},L1(i))M1(l,d);else if(d=o1(i,l,d,g),d!==null){var y=Mn();ri(d,i,g,y),U1(d,l,g)}}function Q4(i,l,d){var g=$a(i),y={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(L1(i))M1(l,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var R=l.lastRenderedState,X=b(R,d);if(y.hasEagerState=!0,y.eagerState=X,Qs(X,R)){var re=l.interleaved;re===null?(y.next=y,Nm(l)):(y.next=re.next,re.next=y),l.interleaved=y;return}}catch{}finally{}d=o1(i,l,y,g),d!==null&&(y=Mn(),ri(d,i,g,y),U1(d,l,g))}}function L1(i){var l=i.alternate;return i===gr||l!==null&&l===gr}function M1(i,l){hu=xh=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function U1(i,l,d){if((d&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,Aa(i,d)}}var wh={readContext:Ds,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},J4={readContext:Ds,useCallback:function(i,l){return Ti().memoizedState=[i,l===void 0?null:l],i},useContext:Ds,useEffect:A1,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,vh(4194308,4,R1.bind(null,l,i),d)},useLayoutEffect:function(i,l){return vh(4194308,4,i,l)},useInsertionEffect:function(i,l){return vh(4,2,i,l)},useMemo:function(i,l){var d=Ti();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var g=Ti();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=X4.bind(null,gr,i),[g.memoizedState,i]},useRef:function(i){var l=Ti();return i={current:i},l.memoizedState=i},useState:S1,useDebugValue:Vm,useDeferredValue:function(i){return Ti().memoizedState=i},useTransition:function(){var i=S1(!1),l=i[0];return i=Y4.bind(null,i[1]),Ti().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var g=gr,y=Ti();if(cr){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),Zr===null)throw Error(t(349));(Uo&30)!==0||_1(g,l,d)}y.memoizedState=d;var b={value:d,getSnapshot:l};return y.queue=b,A1(b1.bind(null,g,b,i),[i]),g.flags|=2048,pu(9,E1.bind(null,g,b,d,l),void 0,null),d},useId:function(){var i=Ti(),l=Zr.identifierPrefix;if(cr){var d=Qi,g=Xi;d=(g&~(1<<32-sr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=fu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=K4++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},Z4={readContext:Ds,useCallback:j1,useContext:Ds,useEffect:Um,useImperativeHandle:P1,useInsertionEffect:I1,useLayoutEffect:k1,useMemo:D1,useReducer:Lm,useRef:C1,useState:function(){return Lm(mu)},useDebugValue:Vm,useDeferredValue:function(i){var l=Os();return O1(l,Hr.memoizedState,i)},useTransition:function(){var i=Lm(mu)[0],l=Os().memoizedState;return[i,l]},useMutableSource:y1,useSyncExternalStore:w1,useId:F1,unstable_isNewReconciler:!1},eS={readContext:Ds,useCallback:j1,useContext:Ds,useEffect:Um,useImperativeHandle:P1,useInsertionEffect:I1,useLayoutEffect:k1,useMemo:D1,useReducer:Mm,useRef:C1,useState:function(){return Mm(mu)},useDebugValue:Vm,useDeferredValue:function(i){var l=Os();return Hr===null?l.memoizedState=i:O1(l,Hr.memoizedState,i)},useTransition:function(){var i=Mm(mu)[0],l=Os().memoizedState;return[i,l]},useMutableSource:y1,useSyncExternalStore:w1,useId:F1,unstable_isNewReconciler:!1};function Ql(i,l){try{var d="",g=l;do d+=Z(g),g=g.return;while(g);var y=d}catch(b){y=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:l,stack:y,digest:null}}function Bm(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function zm(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function V1(i,l,d){d=Zi(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){Ch||(Ch=!0,np=g),zm(i,l)},d}function B1(i,l,d){d=Zi(-1,d),d.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var y=l.value;d.payload=function(){return g(y)},d.callback=function(){zm(i,l)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){zm(i,l),typeof g!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})}),d}function z1(i,l,d){var g=i.pingCache;if(g===null){g=i.pingCache=new tS;var y=new Set;g.set(l,y)}else y=g.get(l),y===void 0&&(y=new Set,g.set(l,y));y.has(d)||(y.add(d),i=pS.bind(null,i,l,d),l.then(i,i))}function $1(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function W1(i,l,d,g,y){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Zi(-1,1),l.tag=2,Ua(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var rS=F.ReactCurrentOwner,Qn=!1;function Ln(i,l,d,g){l.child=i===null?x1(l,null,d,g):Yl(l,i.child,d,g)}function H1(i,l,d,g,y){d=d.render;var b=l.ref;return Kl(l,y),g=Om(i,l,d,g,b,y),d=Fm(),i!==null&&!Qn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~y,ea(i,l,y)):(cr&&d&&gm(l),l.flags|=1,Ln(i,l,g,y),l.child)}function G1(i,l,d,g,y){if(i===null){var b=d.type;return typeof b=="function"&&!up(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=b,q1(i,l,b,g,y)):(i=jh(d.type,null,g,l,l.mode,y),i.ref=l.ref,i.return=l,l.child=i)}if(b=i.child,(i.lanes&y)===0){var R=b.memoizedProps;if(d=d.compare,d=d!==null?d:tu,d(R,g)&&i.ref===l.ref)return ea(i,l,y)}return l.flags|=1,i=Ha(b,g),i.ref=l.ref,i.return=l,l.child=i}function q1(i,l,d,g,y){if(i!==null){var b=i.memoizedProps;if(tu(b,g)&&i.ref===l.ref)if(Qn=!1,l.pendingProps=g=b,(i.lanes&y)!==0)(i.flags&131072)!==0&&(Qn=!0);else return l.lanes=i.lanes,ea(i,l,y)}return $m(i,l,d,g,y)}function K1(i,l,d){var g=l.pendingProps,y=g.children,b=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(Zl,xs),xs|=d;else{if((d&1073741824)===0)return i=b!==null?b.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Zt(Zl,xs),xs|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:d,Zt(Zl,xs),xs|=g}else b!==null?(g=b.baseLanes|d,l.memoizedState=null):g=d,Zt(Zl,xs),xs|=g;return Ln(i,l,y,d),l.child}function Y1(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function $m(i,l,d,g,y){var b=Xn(d)?Do:Tn.current;return b=$l(l,b),Kl(l,y),d=Om(i,l,d,g,b,y),g=Fm(),i!==null&&!Qn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~y,ea(i,l,y)):(cr&&g&&gm(l),l.flags|=1,Ln(i,l,d,y),l.child)}function X1(i,l,d,g,y){if(Xn(d)){var b=!0;sh(l)}else b=!1;if(Kl(l,y),l.stateNode===null)Eh(i,l),f1(l,d,g),Am(l,d,g,y),g=!0;else if(i===null){var R=l.stateNode,X=l.memoizedProps;R.props=X;var re=R.context,me=d.contextType;typeof me=="object"&&me!==null?me=Ds(me):(me=Xn(d)?Do:Tn.current,me=$l(l,me));var ke=d.getDerivedStateFromProps,je=typeof ke=="function"||typeof R.getSnapshotBeforeUpdate=="function";je||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(X!==g||re!==me)&&m1(l,R,g,me),Ma=!1;var Ae=l.memoizedState;R.state=Ae,hh(l,g,R,y),re=l.memoizedState,X!==g||Ae!==re||Yn.current||Ma?(typeof ke=="function"&&(Cm(l,d,ke,g),re=l.memoizedState),(X=Ma||h1(l,d,X,g,Ae,re,me))?(je||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(l.flags|=4194308)):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=re),R.props=g,R.state=re,R.context=me,g=X):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{R=l.stateNode,l1(i,l),X=l.memoizedProps,me=l.type===l.elementType?X:Zs(l.type,X),R.props=me,je=l.pendingProps,Ae=R.context,re=d.contextType,typeof re=="object"&&re!==null?re=Ds(re):(re=Xn(d)?Do:Tn.current,re=$l(l,re));var qe=d.getDerivedStateFromProps;(ke=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(X!==je||Ae!==re)&&m1(l,R,g,re),Ma=!1,Ae=l.memoizedState,R.state=Ae,hh(l,g,R,y);var Qe=l.memoizedState;X!==je||Ae!==Qe||Yn.current||Ma?(typeof qe=="function"&&(Cm(l,d,qe,g),Qe=l.memoizedState),(me=Ma||h1(l,d,me,g,Ae,Qe,re)||!1)?(ke||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(g,Qe,re),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(g,Qe,re)),typeof R.componentDidUpdate=="function"&&(l.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof R.componentDidUpdate!="function"||X===i.memoizedProps&&Ae===i.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||X===i.memoizedProps&&Ae===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Qe),R.props=g,R.state=Qe,R.context=re,g=me):(typeof R.componentDidUpdate!="function"||X===i.memoizedProps&&Ae===i.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||X===i.memoizedProps&&Ae===i.memoizedState||(l.flags|=1024),g=!1)}return Wm(i,l,d,g,b,y)}function Wm(i,l,d,g,y,b){Y1(i,l);var R=(l.flags&128)!==0;if(!g&&!R)return y&&e1(l,d,!1),ea(i,l,b);g=l.stateNode,rS.current=l;var X=R&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&R?(l.child=Yl(l,i.child,null,b),l.child=Yl(l,null,X,b)):Ln(i,l,X,b),l.memoizedState=g.state,y&&e1(l,d,!0),l.child}function Q1(i){var l=i.stateNode;l.pendingContext?Jv(i,l.pendingContext,l.pendingContext!==l.context):l.context&&Jv(i,l.context,!1),Im(i,l.containerInfo)}function J1(i,l,d,g,y){return Gl(),wm(y),l.flags|=256,Ln(i,l,d,g),l.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function Gm(i){return{baseLanes:i,cachePool:null,transitions:null}}function Z1(i,l,d){var g=l.pendingProps,y=pr.current,b=!1,R=(l.flags&128)!==0,X;if((X=R)||(X=i!==null&&i.memoizedState===null?!1:(y&2)!==0),X?(b=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Zt(pr,y&1),i===null)return ym(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(R=g.children,i=g.fallback,b?(g=l.mode,b=l.child,R={mode:"hidden",children:R},(g&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=R):b=Dh(R,g,0,null),i=Wo(i,g,d,null),b.return=l,i.return=l,b.sibling=i,l.child=b,l.child.memoizedState=Gm(d),l.memoizedState=Hm,i):qm(l,R));if(y=i.memoizedState,y!==null&&(X=y.dehydrated,X!==null))return nS(i,l,R,g,X,y,d);if(b){b=g.fallback,R=l.mode,y=i.child,X=y.sibling;var re={mode:"hidden",children:g.children};return(R&1)===0&&l.child!==y?(g=l.child,g.childLanes=0,g.pendingProps=re,l.deletions=null):(g=Ha(y,re),g.subtreeFlags=y.subtreeFlags&14680064),X!==null?b=Ha(X,b):(b=Wo(b,R,d,null),b.flags|=2),b.return=l,g.return=l,g.sibling=b,l.child=g,g=b,b=l.child,R=i.child.memoizedState,R=R===null?Gm(d):{baseLanes:R.baseLanes|d,cachePool:null,transitions:R.transitions},b.memoizedState=R,b.childLanes=i.childLanes&~d,l.memoizedState=Hm,g}return b=i.child,i=b.sibling,g=Ha(b,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=g,l.memoizedState=null,g}function qm(i,l){return l=Dh({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function _h(i,l,d,g){return g!==null&&wm(g),Yl(l,i.child,null,d),i=qm(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function nS(i,l,d,g,y,b,R){if(d)return l.flags&256?(l.flags&=-257,g=Bm(Error(t(422))),_h(i,l,R,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(b=g.fallback,y=l.mode,g=Dh({mode:"visible",children:g.children},y,0,null),b=Wo(b,y,R,null),b.flags|=2,g.return=l,b.return=l,g.sibling=b,l.child=g,(l.mode&1)!==0&&Yl(l,i.child,null,R),l.child.memoizedState=Gm(R),l.memoizedState=Hm,b);if((l.mode&1)===0)return _h(i,l,R,null);if(y.data==="$!"){if(g=y.nextSibling&&y.nextSibling.dataset,g)var X=g.dgst;return g=X,b=Error(t(419)),g=Bm(b,g,void 0),_h(i,l,R,g)}if(X=(R&i.childLanes)!==0,Qn||X){if(g=Zr,g!==null){switch(R&-R){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(g.suspendedLanes|R))!==0?0:y,y!==0&&y!==b.retryLane&&(b.retryLane=y,Ji(i,y),ri(g,i,y,-1))}return cp(),g=Bm(Error(t(421))),_h(i,l,R,g)}return y.data==="$?"?(l.flags|=128,l.child=i.child,l=gS.bind(null,i),y._reactRetry=l,null):(i=b.treeContext,gs=Da(y.nextSibling),ps=l,cr=!0,Js=null,i!==null&&(Ps[js++]=Xi,Ps[js++]=Qi,Ps[js++]=Oo,Xi=i.id,Qi=i.overflow,Oo=l),l=qm(l,g.children),l.flags|=4096,l)}function ey(i,l,d){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),Tm(i.return,l,d)}function Km(i,l,d,g,y){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:y}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=d,b.tailMode=y)}function ty(i,l,d){var g=l.pendingProps,y=g.revealOrder,b=g.tail;if(Ln(i,l,g.children,d),g=pr.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ey(i,d,l);else if(i.tag===19)ey(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Zt(pr,g),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(d=l.child,y=null;d!==null;)i=d.alternate,i!==null&&ph(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=l.child,l.child=null):(y=d.sibling,d.sibling=null),Km(l,!1,y,d,b);break;case"backwards":for(d=null,y=l.child,l.child=null;y!==null;){if(i=y.alternate,i!==null&&ph(i)===null){l.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}Km(l,!0,d,null,b);break;case"together":Km(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Eh(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function ea(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Vo|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(t(153));if(l.child!==null){for(i=l.child,d=Ha(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=Ha(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function sS(i,l,d){switch(l.tag){case 3:Q1(l),Gl();break;case 5:v1(l);break;case 1:Xn(l.type)&&sh(l);break;case 4:Im(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,y=l.memoizedProps.value;Zt(ch,g._currentValue),g._currentValue=y;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Zt(pr,pr.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?Z1(i,l,d):(Zt(pr,pr.current&1),i=ea(i,l,d),i!==null?i.sibling:null);Zt(pr,pr.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(i.flags&128)!==0){if(g)return ty(i,l,d);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Zt(pr,pr.current),g)break;return null;case 22:case 23:return l.lanes=0,K1(i,l,d)}return ea(i,l,d)}var ry,Ym,ny,sy;ry=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Ym=function(){},ny=function(i,l,d,g){var y=i.memoizedProps;if(y!==g){i=l.stateNode,Mo(bi.current);var b=null;switch(d){case"input":y=it(i,y),g=it(i,g),b=[];break;case"select":y=q({},y,{value:void 0}),g=q({},g,{value:void 0}),b=[];break;case"textarea":y=As(i,y),g=As(i,g),b=[];break;default:typeof y.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=th)}bn(d,g);var R;d=null;for(me in y)if(!g.hasOwnProperty(me)&&y.hasOwnProperty(me)&&y[me]!=null)if(me==="style"){var X=y[me];for(R in X)X.hasOwnProperty(R)&&(d||(d={}),d[R]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(s.hasOwnProperty(me)?b||(b=[]):(b=b||[]).push(me,null));for(me in g){var re=g[me];if(X=y!=null?y[me]:void 0,g.hasOwnProperty(me)&&re!==X&&(re!=null||X!=null))if(me==="style")if(X){for(R in X)!X.hasOwnProperty(R)||re&&re.hasOwnProperty(R)||(d||(d={}),d[R]="");for(R in re)re.hasOwnProperty(R)&&X[R]!==re[R]&&(d||(d={}),d[R]=re[R])}else d||(b||(b=[]),b.push(me,d)),d=re;else me==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,X=X?X.__html:void 0,re!=null&&X!==re&&(b=b||[]).push(me,re)):me==="children"?typeof re!="string"&&typeof re!="number"||(b=b||[]).push(me,""+re):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(s.hasOwnProperty(me)?(re!=null&&me==="onScroll"&&ir("scroll",i),b||X===re||(b=[])):(b=b||[]).push(me,re))}d&&(b=b||[]).push("style",d);var me=b;(l.updateQueue=me)&&(l.flags|=4)}},sy=function(i,l,d,g){d!==g&&(l.flags|=4)};function gu(i,l){if(!cr)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Sn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,g=0;if(l)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags&14680064,g|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=g,i.childLanes=d,l}function iS(i,l,d){var g=l.pendingProps;switch(xm(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(l),null;case 1:return Xn(l.type)&&nh(),Sn(l),null;case 3:return g=l.stateNode,Xl(),ar(Yn),ar(Tn),Pm(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(lh(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Js!==null&&(ap(Js),Js=null))),Ym(i,l),Sn(l),null;case 5:km(l);var y=Mo(du.current);if(d=l.type,i!==null&&l.stateNode!=null)ny(i,l,d,g,y),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Sn(l),null}if(i=Mo(bi.current),lh(l)){g=l.stateNode,d=l.type;var b=l.memoizedProps;switch(g[Ei]=l,g[au]=b,i=(l.mode&1)!==0,d){case"dialog":ir("cancel",g),ir("close",g);break;case"iframe":case"object":case"embed":ir("load",g);break;case"video":case"audio":for(y=0;y<nu.length;y++)ir(nu[y],g);break;case"source":ir("error",g);break;case"img":case"image":case"link":ir("error",g),ir("load",g);break;case"details":ir("toggle",g);break;case"input":tr(g,b),ir("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},ir("invalid",g);break;case"textarea":_n(g,b),ir("invalid",g)}bn(d,b),y=null;for(var R in b)if(b.hasOwnProperty(R)){var X=b[R];R==="children"?typeof X=="string"?g.textContent!==X&&(b.suppressHydrationWarning!==!0&&eh(g.textContent,X,i),y=["children",X]):typeof X=="number"&&g.textContent!==""+X&&(b.suppressHydrationWarning!==!0&&eh(g.textContent,X,i),y=["children",""+X]):s.hasOwnProperty(R)&&X!=null&&R==="onScroll"&&ir("scroll",g)}switch(d){case"input":Xe(g),fr(g,b,!0);break;case"textarea":Xe(g),cs(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=th)}g=y,l.updateQueue=g,g!==null&&(l.flags|=4)}else{R=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Gt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=R.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=R.createElement(d,{is:g.is}):(i=R.createElement(d),d==="select"&&(R=i,g.multiple?R.multiple=!0:g.size&&(R.size=g.size))):i=R.createElementNS(i,d),i[Ei]=l,i[au]=g,ry(i,l,!1,!1),l.stateNode=i;e:{switch(R=rr(d,g),d){case"dialog":ir("cancel",i),ir("close",i),y=g;break;case"iframe":case"object":case"embed":ir("load",i),y=g;break;case"video":case"audio":for(y=0;y<nu.length;y++)ir(nu[y],i);y=g;break;case"source":ir("error",i),y=g;break;case"img":case"image":case"link":ir("error",i),ir("load",i),y=g;break;case"details":ir("toggle",i),y=g;break;case"input":tr(i,g),y=it(i,g),ir("invalid",i);break;case"option":y=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},y=q({},g,{value:void 0}),ir("invalid",i);break;case"textarea":_n(i,g),y=As(i,g),ir("invalid",i);break;default:y=g}bn(d,y),X=y;for(b in X)if(X.hasOwnProperty(b)){var re=X[b];b==="style"?Pr(i,re):b==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&Is(i,re)):b==="children"?typeof re=="string"?(d!=="textarea"||re!=="")&&En(i,re):typeof re=="number"&&En(i,""+re):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?re!=null&&b==="onScroll"&&ir("scroll",i):re!=null&&k(i,b,re,R))}switch(d){case"input":Xe(i),fr(i,g,!1);break;case"textarea":Xe(i),cs(i);break;case"option":g.value!=null&&i.setAttribute("value",""+oe(g.value));break;case"select":i.multiple=!!g.multiple,b=g.value,b!=null?Nr(i,!!g.multiple,b,!1):g.defaultValue!=null&&Nr(i,!!g.multiple,g.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=th)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Sn(l),null;case 6:if(i&&l.stateNode!=null)sy(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(d=Mo(du.current),Mo(bi.current),lh(l)){if(g=l.stateNode,d=l.memoizedProps,g[Ei]=l,(b=g.nodeValue!==d)&&(i=ps,i!==null))switch(i.tag){case 3:eh(g.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&eh(g.nodeValue,d,(i.mode&1)!==0)}b&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Ei]=l,l.stateNode=g}return Sn(l),null;case 13:if(ar(pr),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(cr&&gs!==null&&(l.mode&1)!==0&&(l.flags&128)===0)a1(),Gl(),l.flags|=98560,b=!1;else if(b=lh(l),g!==null&&g.dehydrated!==null){if(i===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[Ei]=l}else Gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Sn(l),b=!1}else Js!==null&&(ap(Js),Js=null),b=!0;if(!b)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(pr.current&1)!==0?Gr===0&&(Gr=3):cp())),l.updateQueue!==null&&(l.flags|=4),Sn(l),null);case 4:return Xl(),Ym(i,l),i===null&&su(l.stateNode.containerInfo),Sn(l),null;case 10:return bm(l.type._context),Sn(l),null;case 17:return Xn(l.type)&&nh(),Sn(l),null;case 19:if(ar(pr),b=l.memoizedState,b===null)return Sn(l),null;if(g=(l.flags&128)!==0,R=b.rendering,R===null)if(g)gu(b,!1);else{if(Gr!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(R=ph(i),R!==null){for(l.flags|=128,gu(b,!1),g=R.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)b=d,i=g,b.flags&=14680066,R=b.alternate,R===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=R.childLanes,b.lanes=R.lanes,b.child=R.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=R.memoizedProps,b.memoizedState=R.memoizedState,b.updateQueue=R.updateQueue,b.type=R.type,i=R.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Zt(pr,pr.current&1|2),l.child}i=i.sibling}b.tail!==null&&Pe()>ec&&(l.flags|=128,g=!0,gu(b,!1),l.lanes=4194304)}else{if(!g)if(i=ph(R),i!==null){if(l.flags|=128,g=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),gu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!R.alternate&&!cr)return Sn(l),null}else 2*Pe()-b.renderingStartTime>ec&&d!==1073741824&&(l.flags|=128,g=!0,gu(b,!1),l.lanes=4194304);b.isBackwards?(R.sibling=l.child,l.child=R):(d=b.last,d!==null?d.sibling=R:l.child=R,b.last=R)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Pe(),l.sibling=null,d=pr.current,Zt(pr,g?d&1|2:d&1),l):(Sn(l),null);case 22:case 23:return lp(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(xs&1073741824)!==0&&(Sn(l),l.subtreeFlags&6&&(l.flags|=8192)):Sn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function aS(i,l){switch(xm(l),l.tag){case 1:return Xn(l.type)&&nh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Xl(),ar(Yn),ar(Tn),Pm(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return km(l),null;case 13:if(ar(pr),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Gl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return ar(pr),null;case 4:return Xl(),null;case 10:return bm(l.type._context),null;case 22:case 23:return lp(),null;case 24:return null;default:return null}}var bh=!1,Cn=!1,oS=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Jl(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){yr(i,l,g)}else d.current=null}function Xm(i,l,d){try{d()}catch(g){yr(i,l,g)}}var iy=!1;function lS(i,l){if(lm=Ra,i=Fv(),em(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var y=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var R=0,X=-1,re=-1,me=0,ke=0,je=i,Ae=null;t:for(;;){for(var qe;je!==d||y!==0&&je.nodeType!==3||(X=R+y),je!==b||g!==0&&je.nodeType!==3||(re=R+g),je.nodeType===3&&(R+=je.nodeValue.length),(qe=je.firstChild)!==null;)Ae=je,je=qe;for(;;){if(je===i)break t;if(Ae===d&&++me===y&&(X=R),Ae===b&&++ke===g&&(re=R),(qe=je.nextSibling)!==null)break;je=Ae,Ae=je.parentNode}je=qe}d=X===-1||re===-1?null:{start:X,end:re}}else d=null}d=d||{start:0,end:0}}else d=null;for(cm={focusedElem:i,selectionRange:d},Ra=!1,Ye=l;Ye!==null;)if(l=Ye,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Ye=i;else for(;Ye!==null;){l=Ye;try{var Qe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var Je=Qe.memoizedProps,Ar=Qe.memoizedState,ae=l.stateNode,ne=ae.getSnapshotBeforeUpdate(l.elementType===l.type?Je:Zs(l.type,Je),Ar);ae.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var de=l.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Fe){yr(l,l.return,Fe)}if(i=l.sibling,i!==null){i.return=l.return,Ye=i;break}Ye=l.return}return Qe=iy,iy=!1,Qe}function xu(i,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var y=g=g.next;do{if((y.tag&i)===i){var b=y.destroy;y.destroy=void 0,b!==void 0&&Xm(l,d,b)}y=y.next}while(y!==g)}}function Th(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Qm(i){var l=i.ref;if(l!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof l=="function"?l(i):l.current=i}}function ay(i){var l=i.alternate;l!==null&&(i.alternate=null,ay(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Ei],delete l[au],delete l[fm],delete l[W4],delete l[H4])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function oy(i){return i.tag===5||i.tag===3||i.tag===4}function ly(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||oy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jm(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=th));else if(g!==4&&(i=i.child,i!==null))for(Jm(i,l,d),i=i.sibling;i!==null;)Jm(i,l,d),i=i.sibling}function Zm(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Zm(i,l,d),i=i.sibling;i!==null;)Zm(i,l,d),i=i.sibling}var dn=null,ei=!1;function Va(i,l,d){for(d=d.child;d!==null;)cy(i,l,d),d=d.sibling}function cy(i,l,d){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(ds,d)}catch{}switch(d.tag){case 5:Cn||Jl(d,l);case 6:var g=dn,y=ei;dn=null,Va(i,l,d),dn=g,ei=y,dn!==null&&(ei?(i=dn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):dn.removeChild(d.stateNode));break;case 18:dn!==null&&(ei?(i=dn,d=d.stateNode,i.nodeType===8?hm(i.parentNode,d):i.nodeType===1&&hm(i,d),Ys(i)):hm(dn,d.stateNode));break;case 4:g=dn,y=ei,dn=d.stateNode.containerInfo,ei=!0,Va(i,l,d),dn=g,ei=y;break;case 0:case 11:case 14:case 15:if(!Cn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){y=g=g.next;do{var b=y,R=b.destroy;b=b.tag,R!==void 0&&((b&2)!==0||(b&4)!==0)&&Xm(d,l,R),y=y.next}while(y!==g)}Va(i,l,d);break;case 1:if(!Cn&&(Jl(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(X){yr(d,l,X)}Va(i,l,d);break;case 21:Va(i,l,d);break;case 22:d.mode&1?(Cn=(g=Cn)||d.memoizedState!==null,Va(i,l,d),Cn=g):Va(i,l,d);break;default:Va(i,l,d)}}function uy(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new oS),l.forEach(function(g){var y=xS.bind(null,i,g);d.has(g)||(d.add(g),g.then(y,y))})}}function ti(i,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var y=d[g];try{var b=i,R=l,X=R;e:for(;X!==null;){switch(X.tag){case 5:dn=X.stateNode,ei=!1;break e;case 3:dn=X.stateNode.containerInfo,ei=!0;break e;case 4:dn=X.stateNode.containerInfo,ei=!0;break e}X=X.return}if(dn===null)throw Error(t(160));cy(b,R,y),dn=null,ei=!1;var re=y.alternate;re!==null&&(re.return=null),y.return=null}catch(me){yr(y,l,me)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)dy(l,i),l=l.sibling}function dy(i,l){var d=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ti(l,i),Ni(i),g&4){try{xu(3,i,i.return),Th(3,i)}catch(Je){yr(i,i.return,Je)}try{xu(5,i,i.return)}catch(Je){yr(i,i.return,Je)}}break;case 1:ti(l,i),Ni(i),g&512&&d!==null&&Jl(d,d.return);break;case 5:if(ti(l,i),Ni(i),g&512&&d!==null&&Jl(d,d.return),i.flags&32){var y=i.stateNode;try{En(y,"")}catch(Je){yr(i,i.return,Je)}}if(g&4&&(y=i.stateNode,y!=null)){var b=i.memoizedProps,R=d!==null?d.memoizedProps:b,X=i.type,re=i.updateQueue;if(i.updateQueue=null,re!==null)try{X==="input"&&b.type==="radio"&&b.name!=null&&Ct(y,b),rr(X,R);var me=rr(X,b);for(R=0;R<re.length;R+=2){var ke=re[R],je=re[R+1];ke==="style"?Pr(y,je):ke==="dangerouslySetInnerHTML"?Is(y,je):ke==="children"?En(y,je):k(y,ke,je,me)}switch(X){case"input":ze(y,b);break;case"textarea":Sr(y,b);break;case"select":var Ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!b.multiple;var qe=b.value;qe!=null?Nr(y,!!b.multiple,qe,!1):Ae!==!!b.multiple&&(b.defaultValue!=null?Nr(y,!!b.multiple,b.defaultValue,!0):Nr(y,!!b.multiple,b.multiple?[]:"",!1))}y[au]=b}catch(Je){yr(i,i.return,Je)}}break;case 6:if(ti(l,i),Ni(i),g&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,b=i.memoizedProps;try{y.nodeValue=b}catch(Je){yr(i,i.return,Je)}}break;case 3:if(ti(l,i),Ni(i),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Ys(l.containerInfo)}catch(Je){yr(i,i.return,Je)}break;case 4:ti(l,i),Ni(i);break;case 13:ti(l,i),Ni(i),y=i.child,y.flags&8192&&(b=y.memoizedState!==null,y.stateNode.isHidden=b,!b||y.alternate!==null&&y.alternate.memoizedState!==null||(rp=Pe())),g&4&&uy(i);break;case 22:if(ke=d!==null&&d.memoizedState!==null,i.mode&1?(Cn=(me=Cn)||ke,ti(l,i),Cn=me):ti(l,i),Ni(i),g&8192){if(me=i.memoizedState!==null,(i.stateNode.isHidden=me)&&!ke&&(i.mode&1)!==0)for(Ye=i,ke=i.child;ke!==null;){for(je=Ye=ke;Ye!==null;){switch(Ae=Ye,qe=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:xu(4,Ae,Ae.return);break;case 1:Jl(Ae,Ae.return);var Qe=Ae.stateNode;if(typeof Qe.componentWillUnmount=="function"){g=Ae,d=Ae.return;try{l=g,Qe.props=l.memoizedProps,Qe.state=l.memoizedState,Qe.componentWillUnmount()}catch(Je){yr(g,d,Je)}}break;case 5:Jl(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){my(je);continue}}qe!==null?(qe.return=Ae,Ye=qe):my(je)}ke=ke.sibling}e:for(ke=null,je=i;;){if(je.tag===5){if(ke===null){ke=je;try{y=je.stateNode,me?(b=y.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(X=je.stateNode,re=je.memoizedProps.style,R=re!=null&&re.hasOwnProperty("display")?re.display:null,X.style.display=At("display",R))}catch(Je){yr(i,i.return,Je)}}}else if(je.tag===6){if(ke===null)try{je.stateNode.nodeValue=me?"":je.memoizedProps}catch(Je){yr(i,i.return,Je)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===i)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===i)break e;for(;je.sibling===null;){if(je.return===null||je.return===i)break e;ke===je&&(ke=null),je=je.return}ke===je&&(ke=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:ti(l,i),Ni(i),g&4&&uy(i);break;case 21:break;default:ti(l,i),Ni(i)}}function Ni(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(oy(d)){var g=d;break e}d=d.return}throw Error(t(160))}switch(g.tag){case 5:var y=g.stateNode;g.flags&32&&(En(y,""),g.flags&=-33);var b=ly(i);Zm(i,b,y);break;case 3:case 4:var R=g.stateNode.containerInfo,X=ly(i);Jm(i,X,R);break;default:throw Error(t(161))}}catch(re){yr(i,i.return,re)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function cS(i,l,d){Ye=i,hy(i)}function hy(i,l,d){for(var g=(i.mode&1)!==0;Ye!==null;){var y=Ye,b=y.child;if(y.tag===22&&g){var R=y.memoizedState!==null||bh;if(!R){var X=y.alternate,re=X!==null&&X.memoizedState!==null||Cn;X=bh;var me=Cn;if(bh=R,(Cn=re)&&!me)for(Ye=y;Ye!==null;)R=Ye,re=R.child,R.tag===22&&R.memoizedState!==null?py(y):re!==null?(re.return=R,Ye=re):py(y);for(;b!==null;)Ye=b,hy(b),b=b.sibling;Ye=y,bh=X,Cn=me}fy(i)}else(y.subtreeFlags&8772)!==0&&b!==null?(b.return=y,Ye=b):fy(i)}}function fy(i){for(;Ye!==null;){var l=Ye;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Cn||Th(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Cn)if(d===null)g.componentDidMount();else{var y=l.elementType===l.type?d.memoizedProps:Zs(l.type,d.memoizedProps);g.componentDidUpdate(y,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&u1(l,b,g);break;case 3:var R=l.updateQueue;if(R!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}u1(l,R,d)}break;case 5:var X=l.stateNode;if(d===null&&l.flags&4){d=X;var re=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&d.focus();break;case"img":re.src&&(d.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var me=l.alternate;if(me!==null){var ke=me.memoizedState;if(ke!==null){var je=ke.dehydrated;je!==null&&Ys(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Cn||l.flags&512&&Qm(l)}catch(Ae){yr(l,l.return,Ae)}}if(l===i){Ye=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function my(i){for(;Ye!==null;){var l=Ye;if(l===i){Ye=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ye=d;break}Ye=l.return}}function py(i){for(;Ye!==null;){var l=Ye;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Th(4,l)}catch(re){yr(l,d,re)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var y=l.return;try{g.componentDidMount()}catch(re){yr(l,y,re)}}var b=l.return;try{Qm(l)}catch(re){yr(l,b,re)}break;case 5:var R=l.return;try{Qm(l)}catch(re){yr(l,R,re)}}}catch(re){yr(l,l.return,re)}if(l===i){Ye=null;break}var X=l.sibling;if(X!==null){X.return=l.return,Ye=X;break}Ye=l.return}}var uS=Math.ceil,Nh=F.ReactCurrentDispatcher,ep=F.ReactCurrentOwner,Fs=F.ReactCurrentBatchConfig,Rt=0,Zr=null,Dr=null,hn=0,xs=0,Zl=Oa(0),Gr=0,vu=null,Vo=0,Sh=0,tp=0,yu=null,Jn=null,rp=0,ec=1/0,ta=null,Ch=!1,np=null,Ba=null,Ah=!1,za=null,Ih=0,wu=0,sp=null,kh=-1,Rh=0;function Mn(){return(Rt&6)!==0?Pe():kh!==-1?kh:kh=Pe()}function $a(i){return(i.mode&1)===0?1:(Rt&2)!==0&&hn!==0?hn&-hn:q4.transition!==null?(Rh===0&&(Rh=Ao()),Rh):(i=St,i!==0||(i=window.event,i=i===void 0?16:Kc(i.type)),i)}function ri(i,l,d,g){if(50<wu)throw wu=0,sp=null,Error(t(185));Ca(i,d,g),((Rt&2)===0||i!==Zr)&&(i===Zr&&((Rt&2)===0&&(Sh|=d),Gr===4&&Wa(i,hn)),Zn(i,g),d===1&&Rt===0&&(l.mode&1)===0&&(ec=Pe()+500,ih&&La()))}function Zn(i,l){var d=i.callbackNode;$i(i,l);var g=Co(i,i===Zr?hn:0);if(g===0)d!==null&&Me(d),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(d!=null&&Me(d),l===1)i.tag===0?G4(xy.bind(null,i)):t1(xy.bind(null,i)),z4(function(){(Rt&6)===0&&La()}),d=null;else{switch(Ia(g)){case 1:d=Ot;break;case 4:d=Pt;break;case 16:d=Vt;break;case 536870912:d=gi;break;default:d=Vt}d=Ny(d,gy.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function gy(i,l){if(kh=-1,Rh=0,(Rt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(tc()&&i.callbackNode!==d)return null;var g=Co(i,i===Zr?hn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=Ph(i,g);else{l=g;var y=Rt;Rt|=2;var b=yy();(Zr!==i||hn!==l)&&(ta=null,ec=Pe()+500,zo(i,l));do try{fS();break}catch(X){vy(i,X)}while(!0);Em(),Nh.current=b,Rt=y,Dr!==null?l=0:(Zr=null,hn=0,l=Gr)}if(l!==0){if(l===2&&(y=hs(i),y!==0&&(g=y,l=ip(i,y))),l===1)throw d=vu,zo(i,0),Wa(i,g),Zn(i,Pe()),d;if(l===6)Wa(i,g);else{if(y=i.current.alternate,(g&30)===0&&!dS(y)&&(l=Ph(i,g),l===2&&(b=hs(i),b!==0&&(g=b,l=ip(i,b))),l===1))throw d=vu,zo(i,0),Wa(i,g),Zn(i,Pe()),d;switch(i.finishedWork=y,i.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:$o(i,Jn,ta);break;case 3:if(Wa(i,g),(g&130023424)===g&&(l=rp+500-Pe(),10<l)){if(Co(i,0)!==0)break;if(y=i.suspendedLanes,(y&g)!==g){Mn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=dm($o.bind(null,i,Jn,ta),l);break}$o(i,Jn,ta);break;case 4:if(Wa(i,g),(g&4194240)===g)break;for(l=i.eventTimes,y=-1;0<g;){var R=31-sr(g);b=1<<R,R=l[R],R>y&&(y=R),g&=~b}if(g=y,g=Pe()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*uS(g/1960))-g,10<g){i.timeoutHandle=dm($o.bind(null,i,Jn,ta),g);break}$o(i,Jn,ta);break;case 5:$o(i,Jn,ta);break;default:throw Error(t(329))}}}return Zn(i,Pe()),i.callbackNode===d?gy.bind(null,i):null}function ip(i,l){var d=yu;return i.current.memoizedState.isDehydrated&&(zo(i,l).flags|=256),i=Ph(i,l),i!==2&&(l=Jn,Jn=d,l!==null&&ap(l)),i}function ap(i){Jn===null?Jn=i:Jn.push.apply(Jn,i)}function dS(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var y=d[g],b=y.getSnapshot;y=y.value;try{if(!Qs(b(),y))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wa(i,l){for(l&=~tp,l&=~Sh,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-sr(l),g=1<<d;i[d]=-1,l&=~g}}function xy(i){if((Rt&6)!==0)throw Error(t(327));tc();var l=Co(i,0);if((l&1)===0)return Zn(i,Pe()),null;var d=Ph(i,l);if(i.tag!==0&&d===2){var g=hs(i);g!==0&&(l=g,d=ip(i,g))}if(d===1)throw d=vu,zo(i,0),Wa(i,l),Zn(i,Pe()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,$o(i,Jn,ta),Zn(i,Pe()),null}function op(i,l){var d=Rt;Rt|=1;try{return i(l)}finally{Rt=d,Rt===0&&(ec=Pe()+500,ih&&La())}}function Bo(i){za!==null&&za.tag===0&&(Rt&6)===0&&tc();var l=Rt;Rt|=1;var d=Fs.transition,g=St;try{if(Fs.transition=null,St=1,i)return i()}finally{St=g,Fs.transition=d,Rt=l,(Rt&6)===0&&La()}}function lp(){xs=Zl.current,ar(Zl)}function zo(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,B4(d)),Dr!==null)for(d=Dr.return;d!==null;){var g=d;switch(xm(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&nh();break;case 3:Xl(),ar(Yn),ar(Tn),Pm();break;case 5:km(g);break;case 4:Xl();break;case 13:ar(pr);break;case 19:ar(pr);break;case 10:bm(g.type._context);break;case 22:case 23:lp()}d=d.return}if(Zr=i,Dr=i=Ha(i.current,null),hn=xs=l,Gr=0,vu=null,tp=Sh=Vo=0,Jn=yu=null,Lo!==null){for(l=0;l<Lo.length;l++)if(d=Lo[l],g=d.interleaved,g!==null){d.interleaved=null;var y=g.next,b=d.pending;if(b!==null){var R=b.next;b.next=y,g.next=R}d.pending=g}Lo=null}return i}function vy(i,l){do{var d=Dr;try{if(Em(),gh.current=wh,xh){for(var g=gr.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}xh=!1}if(Uo=0,Jr=Hr=gr=null,hu=!1,fu=0,ep.current=null,d===null||d.return===null){Gr=1,vu=l,Dr=null;break}e:{var b=i,R=d.return,X=d,re=l;if(l=hn,X.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var me=re,ke=X,je=ke.tag;if((ke.mode&1)===0&&(je===0||je===11||je===15)){var Ae=ke.alternate;Ae?(ke.updateQueue=Ae.updateQueue,ke.memoizedState=Ae.memoizedState,ke.lanes=Ae.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var qe=$1(R);if(qe!==null){qe.flags&=-257,W1(qe,R,X,b,l),qe.mode&1&&z1(b,me,l),l=qe,re=me;var Qe=l.updateQueue;if(Qe===null){var Je=new Set;Je.add(re),l.updateQueue=Je}else Qe.add(re);break e}else{if((l&1)===0){z1(b,me,l),cp();break e}re=Error(t(426))}}else if(cr&&X.mode&1){var Ar=$1(R);if(Ar!==null){(Ar.flags&65536)===0&&(Ar.flags|=256),W1(Ar,R,X,b,l),wm(Ql(re,X));break e}}b=re=Ql(re,X),Gr!==4&&(Gr=2),yu===null?yu=[b]:yu.push(b),b=R;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var ae=V1(b,re,l);c1(b,ae);break e;case 1:X=re;var ne=b.type,de=b.stateNode;if((b.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Ba===null||!Ba.has(de)))){b.flags|=65536,l&=-l,b.lanes|=l;var Fe=B1(b,X,l);c1(b,Fe);break e}}b=b.return}while(b!==null)}_y(d)}catch(et){l=et,Dr===d&&d!==null&&(Dr=d=d.return);continue}break}while(!0)}function yy(){var i=Nh.current;return Nh.current=wh,i===null?wh:i}function cp(){(Gr===0||Gr===3||Gr===2)&&(Gr=4),Zr===null||(Vo&268435455)===0&&(Sh&268435455)===0||Wa(Zr,hn)}function Ph(i,l){var d=Rt;Rt|=2;var g=yy();(Zr!==i||hn!==l)&&(ta=null,zo(i,l));do try{hS();break}catch(y){vy(i,y)}while(!0);if(Em(),Rt=d,Nh.current=g,Dr!==null)throw Error(t(261));return Zr=null,hn=0,Gr}function hS(){for(;Dr!==null;)wy(Dr)}function fS(){for(;Dr!==null&&!Ge();)wy(Dr)}function wy(i){var l=Ty(i.alternate,i,xs);i.memoizedProps=i.pendingProps,l===null?_y(i):Dr=l,ep.current=null}function _y(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=iS(d,l,xs),d!==null){Dr=d;return}}else{if(d=aS(d,l),d!==null){d.flags&=32767,Dr=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Gr=6,Dr=null;return}}if(l=l.sibling,l!==null){Dr=l;return}Dr=l=i}while(l!==null);Gr===0&&(Gr=5)}function $o(i,l,d){var g=St,y=Fs.transition;try{Fs.transition=null,St=1,mS(i,l,d,g)}finally{Fs.transition=y,St=g}return null}function mS(i,l,d,g){do tc();while(za!==null);if((Rt&6)!==0)throw Error(t(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var b=d.lanes|d.childLanes;if(Xt(i,b),i===Zr&&(Dr=Zr=null,hn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Ah||(Ah=!0,Ny(Vt,function(){return tc(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=Fs.transition,Fs.transition=null;var R=St;St=1;var X=Rt;Rt|=4,ep.current=null,lS(i,d),dy(d,i),D4(cm),Ra=!!lm,cm=lm=null,i.current=d,cS(d),Oe(),Rt=X,St=R,Fs.transition=b}else i.current=d;if(Ah&&(Ah=!1,za=i,Ih=y),b=i.pendingLanes,b===0&&(Ba=null),Ta(d.stateNode),Zn(i,Pe()),l!==null)for(g=i.onRecoverableError,d=0;d<l.length;d++)y=l[d],g(y.value,{componentStack:y.stack,digest:y.digest});if(Ch)throw Ch=!1,i=np,np=null,i;return(Ih&1)!==0&&i.tag!==0&&tc(),b=i.pendingLanes,(b&1)!==0?i===sp?wu++:(wu=0,sp=i):wu=0,La(),null}function tc(){if(za!==null){var i=Ia(Ih),l=Fs.transition,d=St;try{if(Fs.transition=null,St=16>i?16:i,za===null)var g=!1;else{if(i=za,za=null,Ih=0,(Rt&6)!==0)throw Error(t(331));var y=Rt;for(Rt|=4,Ye=i.current;Ye!==null;){var b=Ye,R=b.child;if((Ye.flags&16)!==0){var X=b.deletions;if(X!==null){for(var re=0;re<X.length;re++){var me=X[re];for(Ye=me;Ye!==null;){var ke=Ye;switch(ke.tag){case 0:case 11:case 15:xu(8,ke,b)}var je=ke.child;if(je!==null)je.return=ke,Ye=je;else for(;Ye!==null;){ke=Ye;var Ae=ke.sibling,qe=ke.return;if(ay(ke),ke===me){Ye=null;break}if(Ae!==null){Ae.return=qe,Ye=Ae;break}Ye=qe}}}var Qe=b.alternate;if(Qe!==null){var Je=Qe.child;if(Je!==null){Qe.child=null;do{var Ar=Je.sibling;Je.sibling=null,Je=Ar}while(Je!==null)}}Ye=b}}if((b.subtreeFlags&2064)!==0&&R!==null)R.return=b,Ye=R;else e:for(;Ye!==null;){if(b=Ye,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:xu(9,b,b.return)}var ae=b.sibling;if(ae!==null){ae.return=b.return,Ye=ae;break e}Ye=b.return}}var ne=i.current;for(Ye=ne;Ye!==null;){R=Ye;var de=R.child;if((R.subtreeFlags&2064)!==0&&de!==null)de.return=R,Ye=de;else e:for(R=ne;Ye!==null;){if(X=Ye,(X.flags&2048)!==0)try{switch(X.tag){case 0:case 11:case 15:Th(9,X)}}catch(et){yr(X,X.return,et)}if(X===R){Ye=null;break e}var Fe=X.sibling;if(Fe!==null){Fe.return=X.return,Ye=Fe;break e}Ye=X.return}}if(Rt=y,La(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(ds,i)}catch{}g=!0}return g}finally{St=d,Fs.transition=l}}return!1}function Ey(i,l,d){l=Ql(d,l),l=V1(i,l,1),i=Ua(i,l,1),l=Mn(),i!==null&&(Ca(i,1,l),Zn(i,l))}function yr(i,l,d){if(i.tag===3)Ey(i,i,d);else for(;l!==null;){if(l.tag===3){Ey(l,i,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ba===null||!Ba.has(g))){i=Ql(d,i),i=B1(l,i,1),l=Ua(l,i,1),i=Mn(),l!==null&&(Ca(l,1,i),Zn(l,i));break}}l=l.return}}function pS(i,l,d){var g=i.pingCache;g!==null&&g.delete(l),l=Mn(),i.pingedLanes|=i.suspendedLanes&d,Zr===i&&(hn&d)===d&&(Gr===4||Gr===3&&(hn&130023424)===hn&&500>Pe()-rp?zo(i,0):tp|=d),Zn(i,l)}function by(i,l){l===0&&((i.mode&1)===0?l=1:(l=Tl,Tl<<=1,(Tl&130023424)===0&&(Tl=4194304)));var d=Mn();i=Ji(i,l),i!==null&&(Ca(i,l,d),Zn(i,d))}function gS(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),by(i,d)}function xS(i,l){var d=0;switch(i.tag){case 13:var g=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),by(i,d)}var Ty;Ty=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||Yn.current)Qn=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return Qn=!1,sS(i,l,d);Qn=(i.flags&131072)!==0}else Qn=!1,cr&&(l.flags&1048576)!==0&&r1(l,oh,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Eh(i,l),i=l.pendingProps;var y=$l(l,Tn.current);Kl(l,d),y=Om(null,l,g,i,y,d);var b=Fm();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Xn(g)?(b=!0,sh(l)):b=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Sm(l),y.updater=fh,l.stateNode=y,y._reactInternals=l,Am(l,g,i,d),l=Wm(null,l,g,!0,b,d)):(l.tag=0,cr&&b&&gm(l),Ln(null,l,y,d),l=l.child),l;case 16:g=l.elementType;e:{switch(Eh(i,l),i=l.pendingProps,y=g._init,g=y(g._payload),l.type=g,y=l.tag=yS(g),i=Zs(g,i),y){case 0:l=$m(null,l,g,i,d);break e;case 1:l=X1(null,l,g,i,d);break e;case 11:l=H1(null,l,g,i,d);break e;case 14:l=G1(null,l,g,Zs(g.type,i),d);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Zs(g,y),$m(i,l,g,y,d);case 1:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Zs(g,y),X1(i,l,g,y,d);case 3:e:{if(Q1(l),i===null)throw Error(t(387));g=l.pendingProps,b=l.memoizedState,y=b.element,l1(i,l),hh(l,g,null,d);var R=l.memoizedState;if(g=R.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){y=Ql(Error(t(423)),l),l=J1(i,l,g,d,y);break e}else if(g!==y){y=Ql(Error(t(424)),l),l=J1(i,l,g,d,y);break e}else for(gs=Da(l.stateNode.containerInfo.firstChild),ps=l,cr=!0,Js=null,d=x1(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Gl(),g===y){l=ea(i,l,d);break e}Ln(i,l,g,d)}l=l.child}return l;case 5:return v1(l),i===null&&ym(l),g=l.type,y=l.pendingProps,b=i!==null?i.memoizedProps:null,R=y.children,um(g,y)?R=null:b!==null&&um(g,b)&&(l.flags|=32),Y1(i,l),Ln(i,l,R,d),l.child;case 6:return i===null&&ym(l),null;case 13:return Z1(i,l,d);case 4:return Im(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Yl(l,null,g,d):Ln(i,l,g,d),l.child;case 11:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Zs(g,y),H1(i,l,g,y,d);case 7:return Ln(i,l,l.pendingProps,d),l.child;case 8:return Ln(i,l,l.pendingProps.children,d),l.child;case 12:return Ln(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,y=l.pendingProps,b=l.memoizedProps,R=y.value,Zt(ch,g._currentValue),g._currentValue=R,b!==null)if(Qs(b.value,R)){if(b.children===y.children&&!Yn.current){l=ea(i,l,d);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var X=b.dependencies;if(X!==null){R=b.child;for(var re=X.firstContext;re!==null;){if(re.context===g){if(b.tag===1){re=Zi(-1,d&-d),re.tag=2;var me=b.updateQueue;if(me!==null){me=me.shared;var ke=me.pending;ke===null?re.next=re:(re.next=ke.next,ke.next=re),me.pending=re}}b.lanes|=d,re=b.alternate,re!==null&&(re.lanes|=d),Tm(b.return,d,l),X.lanes|=d;break}re=re.next}}else if(b.tag===10)R=b.type===l.type?null:b.child;else if(b.tag===18){if(R=b.return,R===null)throw Error(t(341));R.lanes|=d,X=R.alternate,X!==null&&(X.lanes|=d),Tm(R,d,l),R=b.sibling}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===l){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}Ln(i,l,y.children,d),l=l.child}return l;case 9:return y=l.type,g=l.pendingProps.children,Kl(l,d),y=Ds(y),g=g(y),l.flags|=1,Ln(i,l,g,d),l.child;case 14:return g=l.type,y=Zs(g,l.pendingProps),y=Zs(g.type,y),G1(i,l,g,y,d);case 15:return q1(i,l,l.type,l.pendingProps,d);case 17:return g=l.type,y=l.pendingProps,y=l.elementType===g?y:Zs(g,y),Eh(i,l),l.tag=1,Xn(g)?(i=!0,sh(l)):i=!1,Kl(l,d),f1(l,g,y),Am(l,g,y,d),Wm(null,l,g,!0,i,d);case 19:return ty(i,l,d);case 22:return K1(i,l,d)}throw Error(t(156,l.tag))};function Ny(i,l){return Re(i,l)}function vS(i,l,d,g){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(i,l,d,g){return new vS(i,l,d,g)}function up(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yS(i){if(typeof i=="function")return up(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===De)return 14}return 2}function Ha(i,l){var d=i.alternate;return d===null?(d=Ls(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function jh(i,l,d,g,y,b){var R=2;if(g=i,typeof i=="function")up(i)&&(R=1);else if(typeof i=="string")R=5;else e:switch(i){case S:return Wo(d.children,y,b,l);case I:R=8,y|=8;break;case A:return i=Ls(12,d,l,y|2),i.elementType=A,i.lanes=b,i;case O:return i=Ls(13,d,l,y),i.elementType=O,i.lanes=b,i;case Be:return i=Ls(19,d,l,y),i.elementType=Be,i.lanes=b,i;case We:return Dh(d,y,b,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:R=10;break e;case L:R=9;break e;case V:R=11;break e;case De:R=14;break e;case Se:R=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return l=Ls(R,d,l,y),l.elementType=i,l.type=g,l.lanes=b,l}function Wo(i,l,d,g){return i=Ls(7,i,g,l),i.lanes=d,i}function Dh(i,l,d,g){return i=Ls(22,i,g,l),i.elementType=We,i.lanes=d,i.stateNode={isHidden:!1},i}function dp(i,l,d){return i=Ls(6,i,null,l),i.lanes=d,i}function hp(i,l,d){return l=Ls(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function wS(i,l,d,g,y){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=g,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function fp(i,l,d,g,y,b,R,X,re){return i=new wS(i,l,d,X,re),l===1?(l=1,b===!0&&(l|=8)):l=0,b=Ls(3,null,null,l),i.current=b,b.stateNode=i,b.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(b),i}function _S(i,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:g==null?null:""+g,children:i,containerInfo:l,implementation:d}}function Sy(i){if(!i)return Fa;i=i._reactInternals;e:{if(Y(i)!==i||i.tag!==1)throw Error(t(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Xn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(Xn(d))return Zv(i,d,l)}return l}function Cy(i,l,d,g,y,b,R,X,re){return i=fp(d,g,!0,i,y,b,R,X,re),i.context=Sy(null),d=i.current,g=Mn(),y=$a(d),b=Zi(g,y),b.callback=l??null,Ua(d,b,y),i.current.lanes=y,Ca(i,y,g),Zn(i,g),i}function Oh(i,l,d,g){var y=l.current,b=Mn(),R=$a(y);return d=Sy(d),l.context===null?l.context=d:l.pendingContext=d,l=Zi(b,R),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=Ua(y,l,R),i!==null&&(ri(i,y,R,b),dh(i,y,R)),R}function Fh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Ay(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function mp(i,l){Ay(i,l),(i=i.alternate)&&Ay(i,l)}function ES(){return null}var Iy=typeof reportError=="function"?reportError:function(i){console.error(i)};function pp(i){this._internalRoot=i}Lh.prototype.render=pp.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(t(409));Oh(i,l,null,null)},Lh.prototype.unmount=pp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Bo(function(){Oh(null,i,null,null)}),l[Ki]=null}};function Lh(i){this._internalRoot=i}Lh.prototype.unstable_scheduleHydration=function(i){if(i){var l=Ld();i={blockedOn:null,target:i,priority:l};for(var d=0;d<vi.length&&l!==0&&l<vi[d].priority;d++);vi.splice(d,0,i),d===0&&Vd(i)}};function gp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Mh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ky(){}function bS(i,l,d,g,y){if(y){if(typeof g=="function"){var b=g;g=function(){var me=Fh(R);b.call(me)}}var R=Cy(l,g,i,0,null,!1,!1,"",ky);return i._reactRootContainer=R,i[Ki]=R.current,su(i.nodeType===8?i.parentNode:i),Bo(),R}for(;y=i.lastChild;)i.removeChild(y);if(typeof g=="function"){var X=g;g=function(){var me=Fh(re);X.call(me)}}var re=fp(i,0,!1,null,null,!1,!1,"",ky);return i._reactRootContainer=re,i[Ki]=re.current,su(i.nodeType===8?i.parentNode:i),Bo(function(){Oh(l,re,d,g)}),re}function Uh(i,l,d,g,y){var b=d._reactRootContainer;if(b){var R=b;if(typeof y=="function"){var X=y;y=function(){var re=Fh(R);X.call(re)}}Oh(l,R,i,y)}else R=bS(d,l,i,y,g);return Fh(R)}Od=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=Na(l.pendingLanes);d!==0&&(Aa(l,d|1),Zn(l,Pe()),(Rt&6)===0&&(ec=Pe()+500,La()))}break;case 13:Bo(function(){var g=Ji(i,1);if(g!==null){var y=Mn();ri(g,i,1,y)}}),mp(i,1)}},Nl=function(i){if(i.tag===13){var l=Ji(i,134217728);if(l!==null){var d=Mn();ri(l,i,134217728,d)}mp(i,134217728)}},Fd=function(i){if(i.tag===13){var l=$a(i),d=Ji(i,l);if(d!==null){var g=Mn();ri(d,i,l,g)}mp(i,l)}},Ld=function(){return St},Md=function(i,l){var d=St;try{return St=i,l()}finally{St=d}},vt=function(i,l,d){switch(l){case"input":if(ze(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==i&&g.form===i.form){var y=rh(g);if(!y)throw Error(t(90));tt(g),ze(g,y)}}}break;case"textarea":Sr(i,d);break;case"select":l=d.value,l!=null&&Nr(i,!!d.multiple,l,!1)}},Gn=op,No=Bo;var TS={usingClientEntryPoint:!1,Events:[ou,Bl,rh,Jt,nr,op]},_u={findFiberByHostInstance:jo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NS={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=he(i),i===null?null:i.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{ds=Vh.inject(NS),Cr=Vh}catch{}}return es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS,es.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gp(l))throw Error(t(200));return _S(i,l,null,d)},es.createRoot=function(i,l){if(!gp(i))throw Error(t(299));var d=!1,g="",y=Iy;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=fp(i,1,!1,null,null,d,!1,g,y),i[Ki]=l.current,su(i.nodeType===8?i.parentNode:i),new pp(l)},es.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=he(l),i=i===null?null:i.stateNode,i},es.flushSync=function(i){return Bo(i)},es.hydrate=function(i,l,d){if(!Mh(l))throw Error(t(200));return Uh(null,i,l,!0,d)},es.hydrateRoot=function(i,l,d){if(!gp(i))throw Error(t(405));var g=d!=null&&d.hydratedSources||null,y=!1,b="",R=Iy;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(R=d.onRecoverableError)),l=Cy(l,null,i,1,d??null,y,!1,b,R),i[Ki]=l.current,su(i),g)for(i=0;i<g.length;i++)d=g[i],y=d._getVersion,y=y(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,y]:l.mutableSourceEagerHydrationData.push(d,y);return new Lh(l)},es.render=function(i,l,d){if(!Mh(l))throw Error(t(200));return Uh(null,i,l,!1,d)},es.unmountComponentAtNode=function(i){if(!Mh(i))throw Error(t(40));return i._reactRootContainer?(Bo(function(){Uh(null,null,i,!1,function(){i._reactRootContainer=null,i[Ki]=null})}),!0):!1},es.unstable_batchedUpdates=op,es.unstable_renderSubtreeIntoContainer=function(i,l,d,g){if(!Mh(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Uh(i,l,d,!1,g)},es.version="18.2.0-next-9e3b772b8-20220608",es}var My;function S2(){if(My)return yp.exports;My=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yp.exports=jS(),yp.exports}var Uy;function DS(){if(Uy)return Bh;Uy=1;var r=S2();return Bh.createRoot=r.createRoot,Bh.hydrateRoot=r.hydrateRoot,Bh}var OS=DS();const FS=N2(OS);var M=Fg();const ju=N2(M),LS=CS({__proto__:null,default:ju},[M]);S2();/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ku(){return Ku=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ku.apply(this,arguments)}var eo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(eo||(eo={}));const Vy="popstate";function MS(r){r===void 0&&(r={});function e(s,a){let{pathname:o="/",search:u="",hash:h=""}=cl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Jp("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let o=s.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let h=s.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof a=="string"?a:Ef(a))}function n(s,a){Lg(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return VS(e,t,n,r)}function kr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lg(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function US(){return Math.random().toString(36).substr(2,8)}function By(r,e){return{usr:r.state,key:r.key,idx:e}}function Jp(r,e,t,n){return t===void 0&&(t=null),Ku({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?cl(e):e,{state:t,key:e&&e.key||n||US()})}function Ef(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function cl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function VS(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,u=eo.Pop,h=null,f=p();f==null&&(f=0,o.replaceState(Ku({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function x(){u=eo.Pop;let T=p(),D=T==null?null:T-f;f=T,h&&h({action:u,location:_.location,delta:D})}function v(T,D){u=eo.Push;let U=Jp(_.location,T,D);t&&t(U,T),f=p()+1;let k=By(U,f),F=_.createHref(U);try{o.pushState(k,"",F)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;s.location.assign(F)}a&&h&&h({action:u,location:_.location,delta:1})}function w(T,D){u=eo.Replace;let U=Jp(_.location,T,D);t&&t(U,T),f=p();let k=By(U,f),F=_.createHref(U);o.replaceState(k,"",F),a&&h&&h({action:u,location:_.location,delta:0})}function N(T){let D=s.location.origin!=="null"?s.location.origin:s.location.href,U=typeof T=="string"?T:Ef(T);return U=U.replace(/ $/,"%20"),kr(D,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,D)}let _={get action(){return u},get location(){return r(s,o)},listen(T){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Vy,x),h=T,()=>{s.removeEventListener(Vy,x),h=null}},createHref(T){return e(s,T)},createURL:N,encodeLocation(T){let D=N(T);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:v,replace:w,go(T){return o.go(T)}};return _}var zy;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(zy||(zy={}));function BS(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?cl(e):e,s=Mg(n.pathname||"/",t);if(s==null)return null;let a=C2(r);zS(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let h=eC(s);o=QS(a[u],h)}return o}function C2(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(a,o,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};h.relativePath.startsWith("/")&&(kr(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=so([n,h.relativePath]),p=t.concat(h);a.children&&a.children.length>0&&(kr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),C2(a.children,e,p,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:YS(f,a.index),routesMeta:p})};return r.forEach((a,o)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,o);else for(let h of A2(a.path))s(a,o,h)}),e}function A2(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=A2(n.join("/")),u=[];return u.push(...o.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...o),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function zS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:XS(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const $S=/^:[\w-]+$/,WS=3,HS=2,GS=1,qS=10,KS=-2,$y=r=>r==="*";function YS(r,e){let t=r.split("/"),n=t.length;return t.some($y)&&(n+=KS),e&&(n+=HS),t.filter(s=>!$y(s)).reduce((s,a)=>s+($S.test(a)?WS:a===""?GS:qS),n)}function XS(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function QS(r,e){let{routesMeta:t}=r,n={},s="/",a=[];for(let o=0;o<t.length;++o){let u=t[o],h=o===t.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=JS({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f);if(!p)return null;Object.assign(n,p.params);let x=u.route;a.push({params:n,pathname:so([s,p.pathname]),pathnameBase:sC(so([s,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(s=so([s,p.pathnameBase]))}return a}function JS(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=ZS(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,p,x)=>{let{paramName:v,isOptional:w}=p;if(v==="*"){let _=u[x]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const N=u[x];return w&&!N?f[v]=void 0:f[v]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:r}}function ZS(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Lg(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function eC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lg(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Mg(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function tC(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?cl(r):r;return{pathname:t?t.startsWith("/")?t:rC(t,e):e,search:iC(n),hash:aC(s)}}function rC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ep(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ug(r,e){let t=nC(r);return e?t.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Vg(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=cl(r):(s=Ku({},r),kr(!s.pathname||!s.pathname.includes("?"),Ep("?","pathname","search",s)),kr(!s.pathname||!s.pathname.includes("#"),Ep("#","pathname","hash",s)),kr(!s.search||!s.search.includes("#"),Ep("#","search","hash",s)));let a=r===""||s.pathname==="",o=a?"/":s.pathname,u;if(o==null)u=t;else{let x=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),x-=1;s.pathname=v.join("/")}u=x>=0?e[x]:"/"}let h=tC(s,u),f=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const so=r=>r.join("/").replace(/\/\/+/g,"/"),sC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),iC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,aC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function oC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const I2=["post","put","patch","delete"];new Set(I2);const lC=["get",...I2];new Set(lC);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Yu.apply(this,arguments)}const Bg=M.createContext(null),cC=M.createContext(null),_o=M.createContext(null),a0=M.createContext(null),wa=M.createContext({outlet:null,matches:[],isDataRoute:!1}),k2=M.createContext(null);function uC(r,e){let{relative:t}=e===void 0?{}:e;jc()||kr(!1);let{basename:n,navigator:s}=M.useContext(_o),{hash:a,pathname:o,search:u}=P2(r,{relative:t}),h=o;return n!=="/"&&(h=o==="/"?n:so([n,o])),s.createHref({pathname:h,search:u,hash:a})}function jc(){return M.useContext(a0)!=null}function ul(){return jc()||kr(!1),M.useContext(a0).location}function R2(r){M.useContext(_o).static||M.useLayoutEffect(r)}function zs(){let{isDataRoute:r}=M.useContext(wa);return r?bC():dC()}function dC(){jc()||kr(!1);let r=M.useContext(Bg),{basename:e,future:t,navigator:n}=M.useContext(_o),{matches:s}=M.useContext(wa),{pathname:a}=ul(),o=JSON.stringify(Ug(s,t.v7_relativeSplatPath)),u=M.useRef(!1);return R2(()=>{u.current=!0}),M.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){n.go(f);return}let x=Vg(f,JSON.parse(o),a,p.relative==="path");r==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:so([e,x.pathname])),(p.replace?n.replace:n.push)(x,p.state,p)},[e,n,o,a,r])}function bp(){let{matches:r}=M.useContext(wa),e=r[r.length-1];return e?e.params:{}}function P2(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=M.useContext(_o),{matches:s}=M.useContext(wa),{pathname:a}=ul(),o=JSON.stringify(Ug(s,n.v7_relativeSplatPath));return M.useMemo(()=>Vg(r,JSON.parse(o),a,t==="path"),[r,o,a,t])}function hC(r,e){return fC(r,e)}function fC(r,e,t,n){jc()||kr(!1);let{navigator:s}=M.useContext(_o),{matches:a}=M.useContext(wa),o=a[a.length-1],u=o?o.params:{};o&&o.pathname;let h=o?o.pathnameBase:"/";o&&o.route;let f=ul(),p;if(e){var x;let T=typeof e=="string"?cl(e):e;h==="/"||(x=T.pathname)!=null&&x.startsWith(h)||kr(!1),p=T}else p=f;let v=p.pathname||"/",w=v;if(h!=="/"){let T=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=BS(r,{pathname:w}),_=vC(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:so([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:so([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,t,n);return e&&_?M.createElement(a0.Provider,{value:{location:Yu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:eo.Pop}},_):_}function mC(){let r=EC(),e=oC(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,null)}const pC=M.createElement(mC,null);class gC extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(wa.Provider,{value:this.props.routeContext},M.createElement(k2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xC(r){let{routeContext:e,match:t,children:n}=r,s=M.useContext(Bg);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(wa.Provider,{value:e},n)}function vC(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var a;if((a=t)!=null&&a.errors)r=t.matches;else return null}let o=r,u=(s=t)==null?void 0:s.errors;if(u!=null){let p=o.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);p>=0||kr(!1),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,f=-1;if(t&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let x=o[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=p),x.route.id){let{loaderData:v,errors:w}=t,N=x.route.loader&&v[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||N){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,x,v)=>{let w,N=!1,_=null,T=null;t&&(w=u&&x.route.id?u[x.route.id]:void 0,_=x.route.errorElement||pC,h&&(f<0&&v===0?(TC("route-fallback"),N=!0,T=null):f===v&&(N=!0,T=x.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,v+1)),U=()=>{let k;return w?k=_:N?k=T:x.route.Component?k=M.createElement(x.route.Component,null):x.route.element?k=x.route.element:k=p,M.createElement(xC,{match:x,routeContext:{outlet:p,matches:D,isDataRoute:t!=null},children:k})};return t&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?M.createElement(gC,{location:t.location,revalidation:t.revalidation,component:_,error:w,children:U(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):U()},null)}var j2=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(j2||{}),D2=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(D2||{});function yC(r){let e=M.useContext(Bg);return e||kr(!1),e}function wC(r){let e=M.useContext(cC);return e||kr(!1),e}function _C(r){let e=M.useContext(wa);return e||kr(!1),e}function O2(r){let e=_C(),t=e.matches[e.matches.length-1];return t.route.id||kr(!1),t.route.id}function EC(){var r;let e=M.useContext(k2),t=wC(),n=O2();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function bC(){let{router:r}=yC(j2.UseNavigateStable),e=O2(D2.UseNavigateStable),t=M.useRef(!1);return R2(()=>{t.current=!0}),M.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Yu({fromRouteId:e},a)))},[r,e])}const Wy={};function TC(r,e,t){Wy[r]||(Wy[r]=!0)}function Ho(r){let{to:e,replace:t,state:n,relative:s}=r;jc()||kr(!1);let{future:a,static:o}=M.useContext(_o),{matches:u}=M.useContext(wa),{pathname:h}=ul(),f=zs(),p=Vg(e,Ug(u,a.v7_relativeSplatPath),h,s==="path"),x=JSON.stringify(p);return M.useEffect(()=>f(JSON.parse(x),{replace:t,state:n,relative:s}),[f,x,s,t,n]),null}function rs(r){kr(!1)}function NC(r){let{basename:e="/",children:t=null,location:n,navigationType:s=eo.Pop,navigator:a,static:o=!1,future:u}=r;jc()&&kr(!1);let h=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:h,navigator:a,static:o,future:Yu({v7_relativeSplatPath:!1},u)}),[h,u,a,o]);typeof n=="string"&&(n=cl(n));let{pathname:p="/",search:x="",hash:v="",state:w=null,key:N="default"}=n,_=M.useMemo(()=>{let T=Mg(p,h);return T==null?null:{location:{pathname:T,search:x,hash:v,state:w,key:N},navigationType:s}},[h,p,x,v,w,N,s]);return _==null?null:M.createElement(_o.Provider,{value:f},M.createElement(a0.Provider,{children:t,value:_}))}function SC(r){let{children:e,location:t}=r;return hC(Zp(e),t)}new Promise(()=>{});function Zp(r,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(r,(n,s)=>{if(!M.isValidElement(n))return;let a=[...e,s];if(n.type===M.Fragment){t.push.apply(t,Zp(n.props.children,a));return}n.type!==rs&&kr(!1),!n.props.index||!n.props.children||kr(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zp(n.props.children,a)),t.push(o)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eg.apply(this,arguments)}function CC(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function AC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function IC(r,e){return r.button===0&&(!e||e==="_self")&&!AC(r)}const kC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],RC="6";try{window.__reactRouterVersion=RC}catch{}const PC="startTransition",Hy=LS[PC];function jC(r){let{basename:e,children:t,future:n,window:s}=r,a=M.useRef();a.current==null&&(a.current=MS({window:s,v5Compat:!0}));let o=a.current,[u,h]=M.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},p=M.useCallback(x=>{f&&Hy?Hy(()=>h(x)):h(x)},[h,f]);return M.useLayoutEffect(()=>o.listen(p),[o,p]),M.createElement(NC,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:o,future:n})}const DC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mr=M.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:u,target:h,to:f,preventScrollReset:p,unstable_viewTransition:x}=e,v=CC(e,kC),{basename:w}=M.useContext(_o),N,_=!1;if(typeof f=="string"&&OC.test(f)&&(N=f,DC))try{let k=new URL(window.location.href),F=f.startsWith("//")?new URL(k.protocol+f):new URL(f),J=Mg(F.pathname,w);F.origin===k.origin&&J!=null?f=J+F.search+F.hash:_=!0}catch{}let T=uC(f,{relative:s}),D=FC(f,{replace:o,state:u,target:h,preventScrollReset:p,relative:s,unstable_viewTransition:x});function U(k){n&&n(k),k.defaultPrevented||D(k)}return M.createElement("a",eg({},v,{href:N||T,onClick:_||a?n:U,ref:t,target:h}))});var Gy;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Gy||(Gy={}));var qy;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qy||(qy={}));function FC(r,e){let{target:t,replace:n,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:u}=e===void 0?{}:e,h=zs(),f=ul(),p=P2(r,{relative:o});return M.useCallback(x=>{if(IC(x,t)){x.preventDefault();let v=n!==void 0?n:Ef(f)===Ef(p);h(r,{replace:v,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:u})}},[f,h,p,n,s,t,r,a,o,u])}const LC=()=>{};var Ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},MC=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=r[t++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=r[t++],o=r[t++],u=r[t++],h=((s&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const a=r[t++],o=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},L2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const a=r[s],o=s+1<r.length,u=o?r[s+1]:0,h=s+2<r.length,f=h?r[s+2]:0,p=a>>2,x=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,o||(v=64)),n.push(t[p],t[x],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(F2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const a=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const x=s<r.length?t[r.charAt(s)]:64;if(++s,a==null||u==null||f==null||x==null)throw new UC;const v=a<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),x!==64){const N=f<<6&192|x;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VC=function(r){const e=F2(r);return L2.encodeByteArray(e,!0)},bf=function(r){return VC(r).replace(/\./g,"")},M2=function(r){try{return L2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=()=>BC().__FIREBASE_DEFAULTS__,$C=()=>{if(typeof process>"u"||typeof Ky>"u")return;const r=Ky.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},WC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&M2(r[1]);return e&&JSON.parse(e)},o0=()=>{try{return LC()||zC()||$C()||WC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},U2=r=>{var e,t;return(t=(e=o0())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},zg=r=>{const e=U2(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},V2=()=>{var r;return(r=o0())==null?void 0:r.config},B2=r=>{var e;return(e=o0())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...r};return[bf(JSON.stringify(t)),bf(JSON.stringify(o)),""].join(".")}const Du={};function GC(){const r={prod:[],emulator:[]};for(const e of Object.keys(Du))Du[e]?r.emulator.push(e):r.prod.push(e);return r}function qC(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Yy=!1;function c0(r,e){if(typeof window>"u"||typeof document>"u"||!Fi(window.location.host)||Du[r]===e||Du[r]||Yy)return;Du[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",a=GC().prod.length>0;function o(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Yy=!0,o()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=qC(n),w=t("text"),N=document.getElementById(w)||document.createElement("span"),_=t("learnmore"),T=document.getElementById(_)||document.createElement("a"),D=t("preprendIcon"),U=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;u(k),p(T,_);const F=f();h(U,D),k.append(U,N,T,F),document.body.appendChild(k)}a?(N.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function YC(){var e;const r=(e=o0())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function JC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZC(){const r=Dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function eA(){return!YC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tA(){try{return typeof indexedDB=="object"}catch{return!1}}function rA(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="FirebaseError";class pi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=nA,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hd.prototype.create)}}class hd{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?sA(a,n):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new pi(s,u,n)}}function sA(r,e){return r.replace(iA,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const iA=/\{\$([^}]+)}/g;function aA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ha(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const a=r[s],o=e[s];if(Xy(a)&&Xy(o)){if(!ha(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Xy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Nu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Su(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oA(r,e){const t=new lA(r,e);return t.subscribe.bind(t)}class lA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");cA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Tp),s.error===void 0&&(s.error=Tp),s.complete===void 0&&(s.complete=Tp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r){return r&&r._delegate?r._delegate:r}class fa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new HC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hA(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&o.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:dA(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dA(r){return r===qo?void 0:r}function hA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(wt||(wt={}));const mA={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},pA=wt.INFO,gA={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},xA=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=gA[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $g{constructor(e){this.name=e,this._logLevel=pA,this._logHandler=xA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const vA=(r,e)=>e.some(t=>r instanceof t);let Qy,Jy;function yA(){return Qy||(Qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wA(){return Jy||(Jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $2=new WeakMap,tg=new WeakMap,W2=new WeakMap,Np=new WeakMap,Wg=new WeakMap;function _A(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",a),r.removeEventListener("error",o)},a=()=>{t(io(r.result)),s()},o=()=>{n(r.error),s()};r.addEventListener("success",a),r.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&$2.set(t,r)}).catch(()=>{}),Wg.set(e,r),e}function EA(r){if(tg.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",o),r.removeEventListener("abort",o)},a=()=>{t(),s()},o=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",a),r.addEventListener("error",o),r.addEventListener("abort",o)});tg.set(r,e)}let rg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return tg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||W2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return io(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bA(r){rg=r(rg)}function TA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Sp(this),e,...t);return W2.set(n,e.sort?e.sort():[e]),io(n)}:wA().includes(r)?function(...e){return r.apply(Sp(this),e),io($2.get(this))}:function(...e){return io(r.apply(Sp(this),e))}}function NA(r){return typeof r=="function"?TA(r):(r instanceof IDBTransaction&&EA(r),vA(r,yA())?new Proxy(r,rg):r)}function io(r){if(r instanceof IDBRequest)return _A(r);if(Np.has(r))return Np.get(r);const e=NA(r);return e!==r&&(Np.set(r,e),Wg.set(e,r)),e}const Sp=r=>Wg.get(r);function SA(r,e,{blocked:t,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(r,e),u=io(o);return n&&o.addEventListener("upgradeneeded",h=>{n(io(o.result),h.oldVersion,h.newVersion,io(o.transaction),h)}),t&&o.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const CA=["get","getKey","getAll","getAllKeys","count"],AA=["put","add","delete","clear"],Cp=new Map;function Zy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Cp.get(e))return Cp.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=AA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||CA.includes(t)))return;const a=async function(o,...u){const h=this.transaction(o,s?"readwrite":"readonly");let f=h.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&h.done]))[0]};return Cp.set(e,a),a}bA(r=>({...r,get:(e,t,n)=>Zy(e,t)||r.get(e,t,n),has:(e,t)=>!!Zy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kA(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function kA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ng="@firebase/app",ew="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new $g("@firebase/app"),RA="@firebase/app-compat",PA="@firebase/analytics-compat",jA="@firebase/analytics",DA="@firebase/app-check-compat",OA="@firebase/app-check",FA="@firebase/auth",LA="@firebase/auth-compat",MA="@firebase/database",UA="@firebase/data-connect",VA="@firebase/database-compat",BA="@firebase/functions",zA="@firebase/functions-compat",$A="@firebase/installations",WA="@firebase/installations-compat",HA="@firebase/messaging",GA="@firebase/messaging-compat",qA="@firebase/performance",KA="@firebase/performance-compat",YA="@firebase/remote-config",XA="@firebase/remote-config-compat",QA="@firebase/storage",JA="@firebase/storage-compat",ZA="@firebase/firestore",eI="@firebase/ai",tI="@firebase/firestore-compat",rI="firebase",nI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="[DEFAULT]",sI={[ng]:"fire-core",[RA]:"fire-core-compat",[jA]:"fire-analytics",[PA]:"fire-analytics-compat",[OA]:"fire-app-check",[DA]:"fire-app-check-compat",[FA]:"fire-auth",[LA]:"fire-auth-compat",[MA]:"fire-rtdb",[UA]:"fire-data-connect",[VA]:"fire-rtdb-compat",[BA]:"fire-fn",[zA]:"fire-fn-compat",[$A]:"fire-iid",[WA]:"fire-iid-compat",[HA]:"fire-fcm",[GA]:"fire-fcm-compat",[qA]:"fire-perf",[KA]:"fire-perf-compat",[YA]:"fire-rc",[XA]:"fire-rc-compat",[QA]:"fire-gcs",[JA]:"fire-gcs-compat",[ZA]:"fire-fst",[tI]:"fire-fst-compat",[eI]:"fire-vertex","fire-js":"fire-js",[rI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new Map,iI=new Map,ig=new Map;function tw(r,e){try{r.container.addComponent(e)}catch(t){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function uo(r){const e=r.name;if(ig.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,r);for(const t of Tf.values())tw(t,r);for(const t of iI.values())tw(t,r);return!0}function md(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function $n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new hd("app","Firebase",aI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=nI;function H2(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:sg,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ao.create("bad-app-name",{appName:String(s)});if(t||(t=V2()),!t)throw ao.create("no-options");const a=Tf.get(s);if(a){if(ha(t,a.options)&&ha(n,a.config))return a;throw ao.create("duplicate-app",{appName:s})}const o=new fA(s);for(const h of ig.values())o.addComponent(h);const u=new oI(t,n,o);return Tf.set(s,u),u}function u0(r=sg){const e=Tf.get(r);if(!e&&r===sg&&V2())return H2();if(!e)throw ao.create("no-app",{appName:r});return e}function Vs(r,e,t){let n=sI[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(o.join(" "));return}uo(new fa(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebase-heartbeat-database",cI=1,Xu="firebase-heartbeat-store";let Ap=null;function G2(){return Ap||(Ap=SA(lI,cI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ao.create("idb-open",{originalErrorMessage:r.message})})),Ap}async function uI(r){try{const t=(await G2()).transaction(Xu),n=await t.objectStore(Xu).get(q2(r));return await t.done,n}catch(e){if(e instanceof pi)ma.warn(e.message);else{const t=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(t.message)}}}async function rw(r,e){try{const n=(await G2()).transaction(Xu,"readwrite");await n.objectStore(Xu).put(e,q2(r)),await n.done}catch(t){if(t instanceof pi)ma.warn(t.message);else{const n=ao.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ma.warn(n.message)}}}function q2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1024,hI=30;class fI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pI(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>hI){const o=gI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ma.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nw(),{heartbeatsToSend:n,unsentEntries:s}=mI(this._heartbeatsCache.heartbeats),a=bf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ma.warn(t),""}}}function nw(){return new Date().toISOString().substring(0,10)}function mI(r,e=dI){const t=[];let n=r.slice();for(const s of r){const a=t.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),sw(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),sw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class pI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tA()?rA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return rw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function sw(r){return bf(JSON.stringify({version:2,heartbeats:r})).length}function gI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(r){uo(new fa("platform-logger",e=>new IA(e),"PRIVATE")),uo(new fa("heartbeat",e=>new fI(e),"PRIVATE")),Vs(ng,ew,r),Vs(ng,ew,"esm2020"),Vs("fire-js","")}xI("");function K2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vI=K2,Y2=new hd("auth","Firebase",K2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new $g("@firebase/auth");function yI(r,...e){Nf.logLevel<=wt.WARN&&Nf.warn(`Auth (${dl}): ${r}`,...e)}function hf(r,...e){Nf.logLevel<=wt.ERROR&&Nf.error(`Auth (${dl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(r,...e){throw Gg(r,...e)}function ui(r,...e){return Gg(r,...e)}function Hg(r,e,t){const n={...vI(),[e]:t};return new hd("auth","Firebase",n).create(e,{appName:r.name})}function oa(r){return Hg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wI(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ss(r,"argument-error"),Hg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Y2.create(r,...e)}function st(r,e,...t){if(!r)throw Gg(e,...t)}function ia(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hf(e),new Error(e)}function pa(r,e){r||ia(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function _I(){return iw()==="http:"||iw()==="https:"}function iw(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_I()||QC()||"connection"in navigator)?navigator.onLine:!0}function bI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.shortDelay=e,this.longDelay=t,pa(t>e,"Short delay should be less than long delay!"),this.isMobile=KC()||JC()}get(){return EI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(r,e){pa(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SI=new pd(3e4,6e4);function Li(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Mi(r,e,t,n,s={}){return Q2(r,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const u=fd({key:r.config.apiKey,...o}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:h,...a};return XC()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Fi(r.emulatorConfig.host)&&(f.credentials="include"),X2.fetch()(await J2(r,r.config.apiHost,t,u),f)})}async function Q2(r,e,t){r._canInitEmulator=!1;const n={...TI,...e};try{const s=new AI(r),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw zh(r,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(r,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw zh(r,"email-already-in-use",o);if(h==="USER_DISABLED")throw zh(r,"user-disabled",o);const p=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Hg(r,p,f);Ss(r,p)}}catch(s){if(s instanceof pi)throw s;Ss(r,"network-request-failed",{message:String(s)})}}async function gd(r,e,t,n,s={}){const a=await Mi(r,e,t,n,s);return"mfaPendingCredential"in a&&Ss(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function J2(r,e,t,n){const s=`${e}${t}?${n}`,a=r,o=a.config.emulator?qg(r.config,s):`${r.config.apiScheme}://${s}`;return NI.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function CI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ui(this.auth,"network-request-failed")),SI.get())})}}function zh(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=ui(r,e,n);return s.customData._tokenResponse=t,s}function aw(r){return r!==void 0&&r.enterprise!==void 0}class II{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kI(r,e){return Mi(r,"GET","/v2/recaptchaConfig",Li(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,e){return Mi(r,"POST","/v1/accounts:delete",e)}async function Sf(r,e){return Mi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PI(r,e=!1){const t=Ut(r),n=await t.getIdToken(e),s=Kg(n);st(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:Ou(Ip(s.auth_time)),issuedAtTime:Ou(Ip(s.iat)),expirationTime:Ou(Ip(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ip(r){return Number(r)*1e3}function Kg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const s=M2(t);return s?JSON.parse(s):(hf("Failed to decode base64 JWT payload"),null)}catch(s){return hf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ow(r){const e=Kg(r);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof pi&&jI(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function jI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(r){var x;const e=r.auth,t=await r.getIdToken(),n=await Qu(r,Sf(e,{idToken:t}));st(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const a=(x=s.providerUserInfo)!=null&&x.length?Z2(s.providerUserInfo):[],o=FI(r.providerData,a),u=r.isAnonymous,h=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),f=u?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new og(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,p)}async function OI(r){const e=Ut(r);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FI(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Z2(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(r,e){const t=await Q2(r,{},async()=>{const n=fd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=r.config,o=await J2(r,s,"/v1/token",`key=${a}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:n};return r.emulatorConfig&&Fi(r.emulatorConfig.host)&&(h.credentials="include"),X2.fetch()(o,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MI(r,e){return Mi(r,"POST","/v2/accounts:revokeToken",Li(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ow(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=ow(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:a}=await LI(e,t);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:a}=t,o=new fc;return n&&(st(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(st(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(st(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fc,this.toJSON())}_performRefresh(){return ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(r,e){st(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new DI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new og(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qu(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PI(this,e)}reload(){return OI(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Cf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await Qu(this,RI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:x,emailVerified:v,isAnonymous:w,providerData:N,stsTokenManager:_}=t;st(x&&_,e,"internal-error");const T=fc.fromJSON(this.name,_);st(typeof x=="string",e,"internal-error"),qa(n,e.name),qa(s,e.name),st(typeof v=="boolean",e,"internal-error"),st(typeof w=="boolean",e,"internal-error"),qa(a,e.name),qa(o,e.name),qa(u,e.name),qa(h,e.name),qa(f,e.name),qa(p,e.name);const D=new li({uid:x,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:o,phoneNumber:a,tenantId:u,stsTokenManager:T,createdAt:f,lastLoginAt:p});return N&&Array.isArray(N)&&(D.providerData=N.map(U=>({...U}))),h&&(D._redirectEventId=h),D}static async _fromIdTokenResponse(e,t,n=!1){const s=new fc;s.updateFromServerResponse(t);const a=new li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Cf(a),a}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];st(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Z2(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new fc;u.updateFromIdToken(n);const h=new li({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new og(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;function aa(r){pa(r instanceof Function,"Expected a class definition");let e=lw.get(r);return e?(pa(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,lw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eE.type="NONE";const cw=eE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r,e,t){return`firebase:${r}:${e}:${t}`}class mc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=ff(this.userKey,s.apiKey,a),this.fullPersistenceKey=ff("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sf(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new mc(aa(cw),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||aa(cw);const o=ff(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(o);if(p){let x;if(typeof p=="string"){const v=await Sf(e,{idToken:p}).catch(()=>{});if(!v)break;x=await li._fromGetAccountInfoResponse(e,v,p)}else x=li._fromJSON(e,p);f!==a&&(u=x),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new mc(a,e,n):(a=h[0],u&&await a._set(o,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new mc(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aE(e))return"Blackberry";if(oE(e))return"Webos";if(rE(e))return"Safari";if((e.includes("chrome/")||nE(e))&&!e.includes("edge/"))return"Chrome";if(iE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function tE(r=Dn()){return/firefox\//i.test(r)}function rE(r=Dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nE(r=Dn()){return/crios\//i.test(r)}function sE(r=Dn()){return/iemobile/i.test(r)}function iE(r=Dn()){return/android/i.test(r)}function aE(r=Dn()){return/blackberry/i.test(r)}function oE(r=Dn()){return/webos/i.test(r)}function Yg(r=Dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function UI(r=Dn()){var e;return Yg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function VI(){return ZC()&&document.documentMode===10}function lE(r=Dn()){return Yg(r)||iE(r)||oE(r)||aE(r)||/windows phone/i.test(r)||sE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r,e=[]){let t;switch(r){case"Browser":t=uw(Dn());break;case"Worker":t=`${uw(Dn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((o,u)=>{try{const h=e(a);o(h)}catch(h){u(h)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e={}){return Mi(r,"GET","/v2/passwordPolicy",Li(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class WI{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$I,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dw(this),this.idTokenSubscription=new dw(this),this.beforeStateQueue=new BI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=aa(t)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await mc.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sf(this,{idToken:e}),n=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if($n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,u=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&(h!=null&&h.user)&&(n=h.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(oa(this));const t=e?Ut(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zI(this),t=new WI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hd("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await MI(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&aa(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await mc.create(this,[aa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(u,this,"internal-error"),u.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,s);return()=>{o=!0,h()}}else{const h=e.addObserver(t);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ui(r){return Ut(r)}class dw{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GI(r){d0=r}function uE(r){return d0.loadJS(r)}function qI(){return d0.recaptchaEnterpriseScript}function KI(){return d0.gapiScript}function YI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class XI{constructor(){this.enterprise=new QI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class QI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const JI="recaptcha-enterprise",dE="NO_RECAPTCHA";class ZI{constructor(e){this.type=JI,this.auth=Ui(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,u)=>{kI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new II(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,o,u){const h=window.grecaptcha;aw(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(dE)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XI().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(u=>{if(!t&&aw(window.grecaptcha))s(u,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let h=qI();h.length!==0&&(h+=u),uE(h).then(()=>{s(u,a,o)}).catch(f=>{o(f)})}}).catch(u=>{o(u)})})}}async function hw(r,e,t,n=!1,s=!1){const a=new ZI(r);let o;if(s)o=dE;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Af(r,e,t,n,s){var a;if((a=r._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await hw(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await hw(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(r,e){const t=md(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ha(a,e??{}))return s;Ss(s,"already-initialized")}return t.initialize({options:e})}function tk(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(aa);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function rk(r,e,t){const n=Ui(r);st(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=hE(e),{host:o,port:u}=nk(e),h=u===null?"":`:${u}`,f={url:`${a}//${o}${h}/`},p=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){st(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),st(ha(f,n.config.emulator)&&ha(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,Fi(o)?(l0(`${a}//${o}${h}`),c0("Auth",!0)):sk()}function hE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nk(r){const e=hE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:fw(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:fw(o)}}}function fw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function sk(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ia("not implemented")}_getIdTokenResponse(e){return ia("not implemented")}_linkToIdToken(e,t){return ia("not implemented")}_getReauthenticationResolver(e){return ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(r,e){return Mi(r,"POST","/v1/accounts:resetPassword",Li(r,e))}async function ak(r,e){return Mi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(r,e){return gd(r,"POST","/v1/accounts:signInWithPassword",Li(r,e))}async function lk(r,e){return Mi(r,"POST","/v1/accounts:sendOobCode",Li(r,e))}async function ck(r,e){return lk(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(r,e){return gd(r,"POST","/v1/accounts:signInWithEmailLink",Li(r,e))}async function dk(r,e){return gd(r,"POST","/v1/accounts:signInWithEmailLink",Li(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Xg{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ju(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ju(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Af(e,t,"signInWithPassword",ok);case"emailLink":return uk(e,{email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Af(e,n,"signUpPassword",ak);case"emailLink":return dk(e,{idToken:t,email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(r,e){return gd(r,"POST","/v1/accounts:signInWithIdp",Li(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="http://localhost";class Zo extends Xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=t;if(!n||!s)return null;const o=new Zo(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return pc(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pc(e,t)}buildRequest(){const e={requestUri:hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mk(r){const e=Nu(Su(r)).link,t=e?Nu(Su(e)).deep_link_id:null,n=Nu(Su(r)).deep_link_id;return(n?Nu(Su(n)).link:null)||n||t||e||r}class Qg{constructor(e){const t=Nu(Su(e)),n=t.apiKey??null,s=t.oobCode??null,a=fk(t.mode??null);st(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mk(e);try{return new Qg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.providerId=Dc.PROVIDER_ID}static credential(e,t){return Ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qg.parseLink(t);return st(n,"argument-error"),Ju._fromEmailAndCode(e,n.code,n.tenantId)}}Dc.PROVIDER_ID="password";Dc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Jg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends xd{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zo._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return sa.credential(t,n)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends xd{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends xd{constructor(){super("twitter.com")}static credential(e,t){return Zo._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Qa.credential(t,n)}catch{return null}}}Qa.TWITTER_SIGN_IN_METHOD="twitter.com";Qa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(r,e){return gd(r,"POST","/v1/accounts:signUp",Li(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const a=await li._fromIdTokenResponse(e,n,s),o=mw(n);return new el({user:a,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=mw(n);return new el({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function mw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends pi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new If(e,t,n,s)}}function fE(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(r,a,e,n):a})}async function gk(r,e,t=!1){const n=await Qu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return el._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(r,e,t=!1){const{auth:n}=r;if($n(n.app))return Promise.reject(oa(n));const s="reauthenticate";try{const a=await Qu(r,fE(n,s,e,r),t);st(a.idToken,n,"internal-error");const o=Kg(a.idToken);st(o,n,"internal-error");const{sub:u}=o;return st(r.uid===u,n,"user-mismatch"),el._forOperation(r,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ss(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(r,e,t=!1){if($n(r.app))return Promise.reject(oa(r));const n="signIn",s=await fE(r,n,e),a=await el._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(a.user),a}async function vk(r,e){return mE(Ui(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ex._fromServerResponse(e,t):"totpInfo"in t?tx._fromServerResponse(e,t):Ss(e,"internal-error")}}class ex extends Zg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ex(t)}}class tx extends Zg{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tx(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(r){const e=Ui(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gE(r,e,t){const n=Ui(r);await Af(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ck)}async function yk(r,e){const t=Ut(r),n=await ik(t,{oobCode:e}),s=n.requestType;switch(st(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":st(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":st(n.mfaInfo,t,"internal-error");default:st(n.email,t,"internal-error")}let a=null;return n.mfaInfo&&(a=Zg._fromServerResponse(Ui(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:a},operation:s}}async function wk(r,e){const{data:t}=await yk(Ut(r),e);return t.email}async function xE(r,e,t){if($n(r.app))return Promise.reject(oa(r));const n=Ui(r),o=await Af(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pk).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&pE(r),h}),u=await el._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(u.user),u}function _k(r,e,t){return $n(r.app)?Promise.reject(oa(r)):vk(Ut(r),Dc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&pE(r),n})}function Ek(r,e,t,n){return Ut(r).onIdTokenChanged(e,t,n)}function bk(r,e,t){return Ut(r).beforeAuthStateChanged(e,t)}function Tk(r,e,t,n){return Ut(r).onAuthStateChanged(e,t,n)}function Nk(r){return Ut(r).signOut()}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=1e3,Ck=10;class yE extends vE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,h)=>{this.notifyListeners(o,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);VI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ck):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yE.type="LOCAL";const Ak=yE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends vE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wE.type="SESSION";const _E=wE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new h0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:a}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(o).map(async f=>f(t.origin,a)),h=await Ik(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}h0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((u,h)=>{const f=rx("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(x){const v=x;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function Rk(r){ki().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function Pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Dk(){return EE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="firebaseLocalStorageDb",Ok=1,Rf="firebaseLocalStorage",TE="fbase_key";class vd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function f0(r,e){return r.transaction([Rf],e?"readwrite":"readonly").objectStore(Rf)}function Fk(){const r=indexedDB.deleteDatabase(bE);return new vd(r).toPromise()}function lg(){const r=indexedDB.open(bE,Ok);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Rf,{keyPath:TE})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Rf)?e(n):(n.close(),await Fk(),e(await lg()))})})}async function pw(r,e,t){const n=f0(r,!0).put({[TE]:e,value:t});return new vd(n).toPromise()}async function Lk(r,e){const t=f0(r,!1).get(e),n=await new vd(t).toPromise();return n===void 0?null:n.value}function gw(r,e){const t=f0(r,!0).delete(e);return new vd(t).toPromise()}const Mk=800,Uk=3;class NE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Uk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=h0._getInstance(Dk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new kk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await pw(e,kf,"1"),await gw(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pw(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Lk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=f0(s,!1).getAll();return new vd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NE.type="LOCAL";const Vk=NE;new pd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(r,e){return e?aa(e):(st(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bk(r){return mE(r.auth,new nx(r),r.bypassAuthState)}function zk(r){const{auth:e,user:t}=r;return st(t,e,"internal-error"),xk(t,new nx(r),r.bypassAuthState)}async function $k(r){const{auth:e,user:t}=r;return st(t,e,"internal-error"),gk(t,new nx(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,t,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:a,error:o,type:u}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bk;case"linkViaPopup":case"linkViaRedirect":return $k;case"reauthViaPopup":case"reauthViaRedirect":return zk;default:Ss(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new pd(2e3,1e4);async function Hk(r,e,t){if($n(r.app))return Promise.reject(ui(r,"operation-not-supported-in-this-environment"));const n=Ui(r);wI(r,e,Jg);const s=SE(n,t);return new Yo(n,"signInViaPopup",e,s).executeNotNull()}class Yo extends CE{constructor(e,t,n,s,a){super(e,t,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wk.get())};e()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="pendingRedirect",mf=new Map;class qk extends CE{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const n=await Kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kk(r,e){const t=Qk(e),n=Xk(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function Yk(r,e){mf.set(r._key(),e)}function Xk(r){return aa(r._redirectPersistence)}function Qk(r){return ff(Gk,r.config.apiKey,r.name)}async function Jk(r,e,t=!1){if($n(r.app))return Promise.reject(oa(r));const n=Ui(r),s=SE(n,e),o=await new qk(n,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=600*1e3;class eR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!AE(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(xw(e))}saveEventToCache(e){this.cachedEventUids.add(xw(e)),this.lastProcessedEventTime=Date.now()}}function xw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function AE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(r,e={}){return Mi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sR=/^https?/;async function iR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await rR(r);for(const t of e)try{if(aR(t))return}catch{}Ss(r,"unauthorized-domain")}function aR(r){const e=ag(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!sR.test(t))return!1;if(nR.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new pd(3e4,6e4);function vw(){const r=ki().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function lR(r){return new Promise((e,t)=>{var s,a,o;function n(){vw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vw(),t(ui(r,"network-request-failed"))},timeout:oR.get()})}if((a=(s=ki().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=ki().gapi)!=null&&o.load)n();else{const u=YI("iframefcb");return ki()[u]=()=>{gapi.load?n():t(ui(r,"network-request-failed"))},uE(`${KI()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw pf=null,e})}let pf=null;function cR(r){return pf=pf||lR(r),pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new pd(5e3,15e3),dR="__/auth/iframe",hR="emulator/auth/iframe",fR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pR(r){const e=r.config;st(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?qg(e,hR):`https://${r.config.authDomain}/${dR}`,n={apiKey:e.apiKey,appName:r.name,v:dl},s=mR.get(r.config.apiHost);s&&(n.eid=s);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${fd(n).slice(1)}`}async function gR(r){const e=await cR(r),t=ki().gapi;return st(t,r,"internal-error"),e.open({where:document.body,url:pR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fR,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=ui(r,"network-request-failed"),u=ki().setTimeout(()=>{a(o)},uR.get());function h(){ki().clearTimeout(u),s(n)}n.ping(h).then(h,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vR=500,yR=600,wR="_blank",_R="http://localhost";class yw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ER(r,e,t,n=vR,s=yR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h={...xR,width:n.toString(),height:s.toString(),top:a,left:o},f=Dn().toLowerCase();t&&(u=nE(f)?wR:t),tE(f)&&(e=e||_R,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[w,N])=>`${v}${w}=${N},`,"");if(UI(f)&&u!=="_self")return bR(e||"",u),new yw(null);const x=window.open(e||"",u,p);st(x,r,"popup-blocked");try{x.focus()}catch{}return new yw(x)}function bR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="__/auth/handler",NR="emulator/auth/handler",SR=encodeURIComponent("fac");async function ww(r,e,t,n,s,a){st(r.config.authDomain,r,"auth-domain-config-required"),st(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:dl,eventId:s};if(e instanceof Jg){e.setDefaultLanguage(r.languageCode),o.providerId=e.providerId||"",aA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,x]of Object.entries({}))o[p]=x}if(e instanceof xd){const p=e.getScopes().filter(x=>x!=="");p.length>0&&(o.scopes=p.join(","))}r.tenantId&&(o.tid=r.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await r._getAppCheckToken(),f=h?`#${SR}=${encodeURIComponent(h)}`:"";return`${CR(r)}?${fd(u).slice(1)}${f}`}function CR({config:r}){return r.emulator?qg(r,NR):`https://${r.authDomain}/${TR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class AR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=Jk,this._overrideRedirectResult=Yk}async _openPopup(e,t,n,s){var o;pa((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await ww(e,t,n,ag(),s);return ER(e,a,rx())}async _openRedirect(e,t,n,s){await this._originValidation(e);const a=await ww(e,t,n,ag(),s);return Rk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(pa(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gR(e),n=new eR(e);return t.register("authEvent",s=>(st(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[kp];a!==void 0&&t(!!a),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lE()||rE()||Yg()}}const IR=AR;var _w="@firebase/auth",Ew="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PR(r){uo(new fa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=n.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:o,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cE(r)},f=new HI(n,s,a,h);return tk(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),uo(new fa("auth-internal",e=>{const t=Ui(e.getProvider("auth").getImmediate());return(n=>new kR(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(_w,Ew,RR(r)),Vs(_w,Ew,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=300,DR=B2("authIdTokenMaxAge")||jR;let bw=null;const OR=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>DR)return;const s=t==null?void 0:t.token;bw!==s&&(bw=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function FR(r=u0()){const e=md(r,"auth");if(e.isInitialized())return e.getImmediate();const t=ek(r,{popupRedirectResolver:IR,persistence:[Vk,Ak,_E]}),n=B2("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=OR(a.toString());bk(t,o,()=>o(t.currentUser)),Ek(t,u=>o(u))}}const s=U2("auth");return s&&rk(t,`http://${s}`),t}function LR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}GI({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const a=ui("internal-error");a.customData=s,t(a)},n.type="text/javascript",n.charset="UTF-8",LR().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PR("Browser");var Tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,IE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function A(){}A.prototype=I.prototype,S.D=I.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(j,L,V){for(var O=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)O[Be-2]=arguments[Be];return I.prototype[L].apply(j,O)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,A){A||(A=0);var j=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)j[L]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(L=0;16>L;++L)j[L]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=S.g[0],A=S.g[1],L=S.g[2];var V=S.g[3],O=I+(V^A&(L^V))+j[0]+3614090360&4294967295;I=A+(O<<7&4294967295|O>>>25),O=V+(L^I&(A^L))+j[1]+3905402710&4294967295,V=I+(O<<12&4294967295|O>>>20),O=L+(A^V&(I^A))+j[2]+606105819&4294967295,L=V+(O<<17&4294967295|O>>>15),O=A+(I^L&(V^I))+j[3]+3250441966&4294967295,A=L+(O<<22&4294967295|O>>>10),O=I+(V^A&(L^V))+j[4]+4118548399&4294967295,I=A+(O<<7&4294967295|O>>>25),O=V+(L^I&(A^L))+j[5]+1200080426&4294967295,V=I+(O<<12&4294967295|O>>>20),O=L+(A^V&(I^A))+j[6]+2821735955&4294967295,L=V+(O<<17&4294967295|O>>>15),O=A+(I^L&(V^I))+j[7]+4249261313&4294967295,A=L+(O<<22&4294967295|O>>>10),O=I+(V^A&(L^V))+j[8]+1770035416&4294967295,I=A+(O<<7&4294967295|O>>>25),O=V+(L^I&(A^L))+j[9]+2336552879&4294967295,V=I+(O<<12&4294967295|O>>>20),O=L+(A^V&(I^A))+j[10]+4294925233&4294967295,L=V+(O<<17&4294967295|O>>>15),O=A+(I^L&(V^I))+j[11]+2304563134&4294967295,A=L+(O<<22&4294967295|O>>>10),O=I+(V^A&(L^V))+j[12]+1804603682&4294967295,I=A+(O<<7&4294967295|O>>>25),O=V+(L^I&(A^L))+j[13]+4254626195&4294967295,V=I+(O<<12&4294967295|O>>>20),O=L+(A^V&(I^A))+j[14]+2792965006&4294967295,L=V+(O<<17&4294967295|O>>>15),O=A+(I^L&(V^I))+j[15]+1236535329&4294967295,A=L+(O<<22&4294967295|O>>>10),O=I+(L^V&(A^L))+j[1]+4129170786&4294967295,I=A+(O<<5&4294967295|O>>>27),O=V+(A^L&(I^A))+j[6]+3225465664&4294967295,V=I+(O<<9&4294967295|O>>>23),O=L+(I^A&(V^I))+j[11]+643717713&4294967295,L=V+(O<<14&4294967295|O>>>18),O=A+(V^I&(L^V))+j[0]+3921069994&4294967295,A=L+(O<<20&4294967295|O>>>12),O=I+(L^V&(A^L))+j[5]+3593408605&4294967295,I=A+(O<<5&4294967295|O>>>27),O=V+(A^L&(I^A))+j[10]+38016083&4294967295,V=I+(O<<9&4294967295|O>>>23),O=L+(I^A&(V^I))+j[15]+3634488961&4294967295,L=V+(O<<14&4294967295|O>>>18),O=A+(V^I&(L^V))+j[4]+3889429448&4294967295,A=L+(O<<20&4294967295|O>>>12),O=I+(L^V&(A^L))+j[9]+568446438&4294967295,I=A+(O<<5&4294967295|O>>>27),O=V+(A^L&(I^A))+j[14]+3275163606&4294967295,V=I+(O<<9&4294967295|O>>>23),O=L+(I^A&(V^I))+j[3]+4107603335&4294967295,L=V+(O<<14&4294967295|O>>>18),O=A+(V^I&(L^V))+j[8]+1163531501&4294967295,A=L+(O<<20&4294967295|O>>>12),O=I+(L^V&(A^L))+j[13]+2850285829&4294967295,I=A+(O<<5&4294967295|O>>>27),O=V+(A^L&(I^A))+j[2]+4243563512&4294967295,V=I+(O<<9&4294967295|O>>>23),O=L+(I^A&(V^I))+j[7]+1735328473&4294967295,L=V+(O<<14&4294967295|O>>>18),O=A+(V^I&(L^V))+j[12]+2368359562&4294967295,A=L+(O<<20&4294967295|O>>>12),O=I+(A^L^V)+j[5]+4294588738&4294967295,I=A+(O<<4&4294967295|O>>>28),O=V+(I^A^L)+j[8]+2272392833&4294967295,V=I+(O<<11&4294967295|O>>>21),O=L+(V^I^A)+j[11]+1839030562&4294967295,L=V+(O<<16&4294967295|O>>>16),O=A+(L^V^I)+j[14]+4259657740&4294967295,A=L+(O<<23&4294967295|O>>>9),O=I+(A^L^V)+j[1]+2763975236&4294967295,I=A+(O<<4&4294967295|O>>>28),O=V+(I^A^L)+j[4]+1272893353&4294967295,V=I+(O<<11&4294967295|O>>>21),O=L+(V^I^A)+j[7]+4139469664&4294967295,L=V+(O<<16&4294967295|O>>>16),O=A+(L^V^I)+j[10]+3200236656&4294967295,A=L+(O<<23&4294967295|O>>>9),O=I+(A^L^V)+j[13]+681279174&4294967295,I=A+(O<<4&4294967295|O>>>28),O=V+(I^A^L)+j[0]+3936430074&4294967295,V=I+(O<<11&4294967295|O>>>21),O=L+(V^I^A)+j[3]+3572445317&4294967295,L=V+(O<<16&4294967295|O>>>16),O=A+(L^V^I)+j[6]+76029189&4294967295,A=L+(O<<23&4294967295|O>>>9),O=I+(A^L^V)+j[9]+3654602809&4294967295,I=A+(O<<4&4294967295|O>>>28),O=V+(I^A^L)+j[12]+3873151461&4294967295,V=I+(O<<11&4294967295|O>>>21),O=L+(V^I^A)+j[15]+530742520&4294967295,L=V+(O<<16&4294967295|O>>>16),O=A+(L^V^I)+j[2]+3299628645&4294967295,A=L+(O<<23&4294967295|O>>>9),O=I+(L^(A|~V))+j[0]+4096336452&4294967295,I=A+(O<<6&4294967295|O>>>26),O=V+(A^(I|~L))+j[7]+1126891415&4294967295,V=I+(O<<10&4294967295|O>>>22),O=L+(I^(V|~A))+j[14]+2878612391&4294967295,L=V+(O<<15&4294967295|O>>>17),O=A+(V^(L|~I))+j[5]+4237533241&4294967295,A=L+(O<<21&4294967295|O>>>11),O=I+(L^(A|~V))+j[12]+1700485571&4294967295,I=A+(O<<6&4294967295|O>>>26),O=V+(A^(I|~L))+j[3]+2399980690&4294967295,V=I+(O<<10&4294967295|O>>>22),O=L+(I^(V|~A))+j[10]+4293915773&4294967295,L=V+(O<<15&4294967295|O>>>17),O=A+(V^(L|~I))+j[1]+2240044497&4294967295,A=L+(O<<21&4294967295|O>>>11),O=I+(L^(A|~V))+j[8]+1873313359&4294967295,I=A+(O<<6&4294967295|O>>>26),O=V+(A^(I|~L))+j[15]+4264355552&4294967295,V=I+(O<<10&4294967295|O>>>22),O=L+(I^(V|~A))+j[6]+2734768916&4294967295,L=V+(O<<15&4294967295|O>>>17),O=A+(V^(L|~I))+j[13]+1309151649&4294967295,A=L+(O<<21&4294967295|O>>>11),O=I+(L^(A|~V))+j[4]+4149444226&4294967295,I=A+(O<<6&4294967295|O>>>26),O=V+(A^(I|~L))+j[11]+3174756917&4294967295,V=I+(O<<10&4294967295|O>>>22),O=L+(I^(V|~A))+j[2]+718787259&4294967295,L=V+(O<<15&4294967295|O>>>17),O=A+(V^(L|~I))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+L&4294967295,S.g[3]=S.g[3]+V&4294967295}n.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var A=I-this.blockSize,j=this.B,L=this.h,V=0;V<I;){if(L==0)for(;V<=A;)s(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<I;)if(j[L++]=S.charCodeAt(V++),L==this.blockSize){s(this,j),L=0;break}}else for(;V<I;)if(j[L++]=S[V++],L==this.blockSize){s(this,j),L=0;break}}this.h=L,this.o+=I},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var A=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=A&255,A/=256;for(this.u(S),S=Array(16),I=A=0;4>I;++I)for(var j=0;32>j;j+=8)S[A++]=this.g[I]>>>j&255;return S};function a(S,I){var A=u;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=I(S)}function o(S,I){this.h=I;for(var A=[],j=!0,L=S.length-1;0<=L;L--){var V=S[L]|0;j&&V==I||(A[L]=V,j=!1)}this.g=A}var u={};function h(S){return-128<=S&&128>S?a(S,function(I){return new o([I|0],0>I?-1:0)}):new o([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return x;if(0>S)return T(f(-S));for(var I=[],A=1,j=0;S>=A;j++)I[j]=S/A|0,A*=4294967296;return new o(I,0)}function p(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return T(p(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(I,8)),j=x,L=0;L<S.length;L+=8){var V=Math.min(8,S.length-L),O=parseInt(S.substring(L,L+V),I);8>V?(V=f(Math.pow(I,V)),j=j.j(V).add(f(O))):(j=j.j(A),j=j.add(f(O)))}return j}var x=h(0),v=h(1),w=h(16777216);r=o.prototype,r.m=function(){if(_(this))return-T(this).m();for(var S=0,I=1,A=0;A<this.g.length;A++){var j=this.i(A);S+=(0<=j?j:4294967296+j)*I,I*=4294967296}return S},r.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(_(this))return"-"+T(this).toString(S);for(var I=f(Math.pow(S,6)),A=this,j="";;){var L=F(A,I).g;A=D(A,L.j(I));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=L,N(A))return V+j;for(;6>V.length;)V="0"+V;j=V+j}},r.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function _(S){return S.h==-1}r.l=function(S){return S=D(this,S),_(S)?-1:N(S)?0:1};function T(S){for(var I=S.g.length,A=[],j=0;j<I;j++)A[j]=~S.g[j];return new o(A,~S.h).add(v)}r.abs=function(){return _(this)?T(this):this},r.add=function(S){for(var I=Math.max(this.g.length,S.g.length),A=[],j=0,L=0;L<=I;L++){var V=j+(this.i(L)&65535)+(S.i(L)&65535),O=(V>>>16)+(this.i(L)>>>16)+(S.i(L)>>>16);j=O>>>16,V&=65535,O&=65535,A[L]=O<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function D(S,I){return S.add(T(I))}r.j=function(S){if(N(this)||N(S))return x;if(_(this))return _(S)?T(this).j(T(S)):T(T(this).j(S));if(_(S))return T(this.j(T(S)));if(0>this.l(w)&&0>S.l(w))return f(this.m()*S.m());for(var I=this.g.length+S.g.length,A=[],j=0;j<2*I;j++)A[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<S.g.length;L++){var V=this.i(j)>>>16,O=this.i(j)&65535,Be=S.i(L)>>>16,De=S.i(L)&65535;A[2*j+2*L]+=O*De,U(A,2*j+2*L),A[2*j+2*L+1]+=V*De,U(A,2*j+2*L+1),A[2*j+2*L+1]+=O*Be,U(A,2*j+2*L+1),A[2*j+2*L+2]+=V*Be,U(A,2*j+2*L+2)}for(j=0;j<I;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=I;j<2*I;j++)A[j]=0;return new o(A,0)};function U(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function k(S,I){this.g=S,this.h=I}function F(S,I){if(N(I))throw Error("division by zero");if(N(S))return new k(x,x);if(_(S))return I=F(T(S),I),new k(T(I.g),T(I.h));if(_(I))return I=F(S,T(I)),new k(T(I.g),I.h);if(30<S.g.length){if(_(S)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var A=v,j=I;0>=j.l(S);)A=J(A),j=J(j);var L=ee(A,1),V=ee(j,1);for(j=ee(j,2),A=ee(A,2);!N(j);){var O=V.add(j);0>=O.l(S)&&(L=L.add(A),V=O),j=ee(j,1),A=ee(A,1)}return I=D(S,L.j(I)),new k(L,I)}for(L=x;0<=S.l(I);){for(A=Math.max(1,Math.floor(S.m()/I.m())),j=Math.ceil(Math.log(A)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),V=f(A),O=V.j(I);_(O)||0<O.l(S);)A-=j,V=f(A),O=V.j(I);N(V)&&(V=v),L=L.add(V),S=D(S,O)}return new k(L,S)}r.A=function(S){return F(this,S).h},r.and=function(S){for(var I=Math.max(this.g.length,S.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)&S.i(j);return new o(A,this.h&S.h)},r.or=function(S){for(var I=Math.max(this.g.length,S.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)|S.i(j);return new o(A,this.h|S.h)},r.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),A=[],j=0;j<I;j++)A[j]=this.i(j)^S.i(j);return new o(A,this.h^S.h)};function J(S){for(var I=S.g.length+1,A=[],j=0;j<I;j++)A[j]=S.i(j)<<1|S.i(j-1)>>>31;return new o(A,S.h)}function ee(S,I){var A=I>>5;I%=32;for(var j=S.g.length-A,L=[],V=0;V<j;V++)L[V]=0<I?S.i(V+A)>>>I|S.i(V+A+1)<<32-I:S.i(V+A);return new o(L,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,IE=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=p,oo=o}).apply(typeof Tw<"u"?Tw:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kE,Cu,RE,gf,cg,PE,jE,DE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,C){return m==Array.prototype||m==Object.prototype||(m[E]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var E=0;E<m.length;++E){var C=m[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=t(this);function s(m,E){if(E)e:{var C=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var ie=m[B];if(!(ie in C))break e;C=C[ie]}m=m[m.length-1],B=C[m],E=E(B),E!=B&&E!=null&&e(C,m,{configurable:!0,writable:!0,value:E})}}function a(m,E){m instanceof String&&(m+="");var C=0,B=!1,ie={next:function(){if(!B&&C<m.length){var xe=C++;return{value:E(xe,m[xe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(m){return m||function(){return a(this,function(E,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function h(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function p(m,E,C){return m.call.apply(m.bind,arguments)}function x(m,E,C){if(!m)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,B),m.apply(E,ie)}}return function(){return m.apply(E,arguments)}}function v(m,E,C){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:x,v.apply(null,arguments)}function w(m,E){var C=Array.prototype.slice.call(arguments,1);return function(){var B=C.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function N(m,E){function C(){}C.prototype=E.prototype,m.aa=E.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(B,ie,xe){for(var Ve=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Ve[Bt-2]=arguments[Bt];return E.prototype[ie].apply(B,Ve)}}function _(m){const E=m.length;if(0<E){const C=Array(E);for(let B=0;B<E;B++)C[B]=m[B];return C}return[]}function T(m,E){for(let C=1;C<arguments.length;C++){const B=arguments[C];if(h(B)){const ie=m.length||0,xe=B.length||0;m.length=ie+xe;for(let Ve=0;Ve<xe;Ve++)m[ie+Ve]=B[Ve]}else m.push(B)}}class D{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function U(m){return/^[\s\xa0]*$/.test(m)}function k(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function F(m){return F[" "](m),m}F[" "]=function(){};var J=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function ee(m,E,C){for(const B in m)E.call(C,m[B],B,m)}function S(m,E){for(const C in m)E.call(void 0,m[C],C,m)}function I(m){const E={};for(const C in m)E[C]=m[C];return E}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(m,E){let C,B;for(let ie=1;ie<arguments.length;ie++){B=arguments[ie];for(C in B)m[C]=B[C];for(let xe=0;xe<A.length;xe++)C=A[xe],Object.prototype.hasOwnProperty.call(B,C)&&(m[C]=B[C])}}function L(m){var E=1;m=m.split(":");const C=[];for(;0<E&&m.length;)C.push(m.shift()),E--;return m.length&&C.push(m.join(":")),C}function V(m){u.setTimeout(()=>{throw m},0)}function O(){var m=Ee;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Be{constructor(){this.h=this.g=null}add(E,C){const B=De.get();B.set(E,C),this.h?this.h.next=B:this.g=B,this.h=B}}var De=new D(()=>new Se,m=>m.reset());class Se{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let We,Ne=!1,Ee=new Be,q=()=>{const m=u.Promise.resolve(void 0);We=()=>{m.then(se)}};var se=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(C){V(C)}var E=De;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ne=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return m})();function Z(m,E){if(te.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(J){e:{try{F(E.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(E=null)}}else C=="mouseover"?E=m.fromElement:C=="mouseout"&&(E=m.toElement);this.relatedTarget=E,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ue[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Z.aa.h.call(this)}}N(Z,te);var ue={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),oe=0;function pe(m,E,C,B,ie){this.listener=m,this.proxy=null,this.src=E,this.type=C,this.capture=!!B,this.ha=ie,this.key=++oe,this.da=this.fa=!1}function ge(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Xe(m){this.src=m,this.g={},this.h=0}Xe.prototype.add=function(m,E,C,B,ie){var xe=m.toString();m=this.g[xe],m||(m=this.g[xe]=[],this.h++);var Ve=mt(m,E,B,ie);return-1<Ve?(E=m[Ve],C||(E.fa=!1)):(E=new pe(E,this.src,xe,!!B,ie),E.fa=C,m.push(E)),E};function tt(m,E){var C=E.type;if(C in m.g){var B=m.g[C],ie=Array.prototype.indexOf.call(B,E,void 0),xe;(xe=0<=ie)&&Array.prototype.splice.call(B,ie,1),xe&&(ge(E),m.g[C].length==0&&(delete m.g[C],m.h--))}}function mt(m,E,C,B){for(var ie=0;ie<m.length;++ie){var xe=m[ie];if(!xe.da&&xe.listener==E&&xe.capture==!!C&&xe.ha==B)return ie}return-1}var it="closure_lm_"+(1e6*Math.random()|0),tr={};function Ct(m,E,C,B,ie){if(Array.isArray(E)){for(var xe=0;xe<E.length;xe++)Ct(m,E[xe],C,B,ie);return null}return C=cs(C),m&&m[Ce]?m.K(E,C,f(B)?!!B.capture:!1,ie):ze(m,E,C,!1,B,ie)}function ze(m,E,C,B,ie,xe){if(!E)throw Error("Invalid event type");var Ve=f(ie)?!!ie.capture:!!ie,Bt=_n(m);if(Bt||(m[it]=Bt=new Xe(m)),C=Bt.add(E,C,B,Ve,xe),C.proxy)return C;if(B=fr(),C.proxy=B,B.src=m,B.listener=C,m.addEventListener)Q||(ie=Ve),ie===void 0&&(ie=!1),m.addEventListener(E.toString(),B,ie);else if(m.attachEvent)m.attachEvent(Nr(E.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return C}function fr(){function m(C){return E.call(m.src,m.listener,C)}const E=As;return m}function Rr(m,E,C,B,ie){if(Array.isArray(E))for(var xe=0;xe<E.length;xe++)Rr(m,E[xe],C,B,ie);else B=f(B)?!!B.capture:!!B,C=cs(C),m&&m[Ce]?(m=m.i,E=String(E).toString(),E in m.g&&(xe=m.g[E],C=mt(xe,C,B,ie),-1<C&&(ge(xe[C]),Array.prototype.splice.call(xe,C,1),xe.length==0&&(delete m.g[E],m.h--)))):m&&(m=_n(m))&&(E=m.g[E.toString()],m=-1,E&&(m=mt(E,C,B,ie)),(C=-1<m?E[m]:null)&&Tr(C))}function Tr(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ce])tt(E.i,m);else{var C=m.type,B=m.proxy;E.removeEventListener?E.removeEventListener(C,B,m.capture):E.detachEvent?E.detachEvent(Nr(C),B):E.addListener&&E.removeListener&&E.removeListener(B),(C=_n(E))?(tt(C,m),C.h==0&&(C.src=null,E[it]=null)):ge(m)}}}function Nr(m){return m in tr?tr[m]:tr[m]="on"+m}function As(m,E){if(m.da)m=!0;else{E=new Z(E,this);var C=m.listener,B=m.ha||m.src;m.fa&&Tr(m),m=C.call(B,E)}return m}function _n(m){return m=m[it],m instanceof Xe?m:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function cs(m){return typeof m=="function"?m:(m[Sr]||(m[Sr]=function(E){return m.handleEvent(E)}),m[Sr])}function Gt(){z.call(this),this.i=new Xe(this),this.M=this,this.F=null}N(Gt,z),Gt.prototype[Ce]=!0,Gt.prototype.removeEventListener=function(m,E,C,B){Rr(this,m,E,C,B)};function qt(m,E){var C,B=m.F;if(B)for(C=[];B;B=B.F)C.push(B);if(m=m.M,B=E.type||E,typeof E=="string")E=new te(E,m);else if(E instanceof te)E.target=E.target||m;else{var ie=E;E=new te(B,m),j(E,ie)}if(ie=!0,C)for(var xe=C.length-1;0<=xe;xe--){var Ve=E.g=C[xe];ie=Yt(Ve,B,!0,E)&&ie}if(Ve=E.g=m,ie=Yt(Ve,B,!0,E)&&ie,ie=Yt(Ve,B,!1,E)&&ie,C)for(xe=0;xe<C.length;xe++)Ve=E.g=C[xe],ie=Yt(Ve,B,!1,E)&&ie}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var C=m.g[E],B=0;B<C.length;B++)ge(C[B]);delete m.g[E],m.h--}}this.F=null},Gt.prototype.K=function(m,E,C,B){return this.i.add(String(m),E,!1,C,B)},Gt.prototype.L=function(m,E,C,B){return this.i.add(String(m),E,!0,C,B)};function Yt(m,E,C,B){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var ie=!0,xe=0;xe<E.length;++xe){var Ve=E[xe];if(Ve&&!Ve.da&&Ve.capture==C){var Bt=Ve.listener,Wr=Ve.ha||Ve.src;Ve.fa&&tt(m.i,Ve),ie=Bt.call(Wr,B)!==!1&&ie}}return ie&&!B.defaultPrevented}function Is(m,E,C){if(typeof m=="function")C&&(m=v(m,C));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function En(m){m.g=Is(()=>{m.g=null,m.i&&(m.i=!1,En(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class He extends z{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(m){z.call(this),this.h=m,this.g={}}N(bt,z);var At=[];function Pr(m){ee(m.g,function(E,C){this.g.hasOwnProperty(C)&&Tr(E)},m),m.g={}}bt.prototype.N=function(){bt.aa.N.call(this),Pr(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=u.JSON.stringify,bn=u.JSON.parse,rr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ye(){}ye.prototype.h=null;function Ze(m){return m.h||(m.h=m.i())}function vt(){}var gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tt(){te.call(this,"d")}N(Tt,te);function Nt(){te.call(this,"c")}N(Nt,te);var Jt={},nr=null;function Gn(){return nr=nr||new Gt}Jt.La="serverreachability";function No(m){te.call(this,Jt.La,m)}N(No,te);function Ws(m){const E=Gn();qt(E,new No(E))}Jt.STAT_EVENT="statevent";function So(m,E){te.call(this,Jt.STAT_EVENT,m),this.stat=E}N(So,te);function mr(m){const E=Gn();qt(E,new So(E,m))}Jt.Ma="timingevent";function Ea(m,E){te.call(this,Jt.Ma,m),this.size=E}N(Ea,te);function On(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Bi(){this.g=!0}Bi.prototype.xa=function(){this.g=!1};function zi(m,E,C,B,ie,xe){m.info(function(){if(m.g)if(xe)for(var Ve="",Bt=xe.split("&"),Wr=0;Wr<Bt.length;Wr++){var It=Bt[Wr].split("=");if(1<It.length){var Qr=It[0];It=It[1];var jr=Qr.split("_");Ve=2<=jr.length&&jr[1]=="type"?Ve+(Qr+"="+It+"&"):Ve+(Qr+"=redacted&")}}else Ve=null;else Ve=xe;return"XMLHTTP REQ ("+B+") [attempt "+ie+"]: "+E+`
`+C+`
`+Ve})}function ba(m,E,C,B,ie,xe,Ve){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ie+"]: "+E+`
`+C+`
`+xe+" "+Ve})}function P(m,E,C,B){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+W(m,C)+(B?" "+B:"")})}function G(m,E){m.info(function(){return"TIMEOUT: "+E})}Bi.prototype.info=function(){};function W(m,E){if(!m.g)return E;if(!E)return null;try{var C=JSON.parse(E);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var B=C[m];if(!(2>B.length)){var ie=B[1];if(Array.isArray(ie)&&!(1>ie.length)){var xe=ie[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var Ve=1;Ve<ie.length;Ve++)ie[Ve]=""}}}}return us(C)}catch{return E}}var H={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Y;function le(){}N(le,ye),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},Y=new le;function ve(m,E,C,B){this.j=m,this.i=E,this.l=C,this.R=B||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var he={},fe={};function Re(m,E,C){m.L=1,m.v=Aa(hs(E)),m.m=C,m.P=!0,Me(m,null)}function Me(m,E){m.F=Date.now(),Pe(m),m.A=hs(m.v);var C=m.A,B=m.R;Array.isArray(B)||(B=[String(B)]),ka(C.i,"t",B),m.C=0,C=m.j.J,m.h=new ce,m.g=Gd(m.j,C?E:null,!m.m),0<m.O&&(m.M=new He(v(m.Y,m,m.g),m.O)),E=m.U,C=m.g,B=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(At[0]=ie.toString()),ie=At);for(var xe=0;xe<ie.length;xe++){var Ve=Ct(C,ie[xe],B||E.handleEvent,!1,E.h||E);if(!Ve)break;E.g[Ve.key]=Ve}E=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),Ws(),zi(m.i,m.u,m.A,m.l,m.R,m.m)}ve.prototype.ca=function(m){m=m.target;const E=this.M;E&&Kn(m)==3?E.j():this.Y(m)},ve.prototype.Y=function(m){try{if(m==this.g)e:{const jr=Kn(this.g);var E=this.g.Ba();const Rs=this.g.Z();if(!(3>jr)&&(jr!=3||this.g&&(this.h.h||this.g.oa()||Yc(this.g)))){this.J||jr!=4||E==7||(E==8||0>=Rs?Ws(3):Ws(2)),Ot(this);var C=this.g.Z();this.X=C;t:if(Ge(this)){var B=Yc(this.g);m="";var ie=B.length,xe=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Pt(this);var Ve="";break t}this.h.i=new u.TextDecoder}for(E=0;E<ie;E++)this.h.h=!0,m+=this.h.i.decode(B[E],{stream:!(xe&&E==ie-1)});B.length=0,this.h.g+=m,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=C==200,ba(this.i,this.u,this.A,this.l,this.R,jr,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Wr=this.g;if((Bt=Wr.g?Wr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Bt)){var It=Bt;break t}}It=null}if(C=It)P(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,C);else{this.o=!1,this.s=3,mr(12),Vt(this),Pt(this);break e}}if(this.P){C=!0;let ms;for(;!this.J&&this.C<Ve.length;)if(ms=Oe(this,Ve),ms==fe){jr==4&&(this.s=4,mr(14),C=!1),P(this.i,this.l,null,"[Incomplete Response]");break}else if(ms==he){this.s=4,mr(15),P(this.i,this.l,Ve,"[Invalid Chunk]"),C=!1;break}else P(this.i,this.l,ms,null),Hs(this,ms);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jr!=4||Ve.length!=0||this.h.h||(this.s=1,mr(16),C=!1),this.o=this.o&&C,!C)P(this.i,this.l,Ve,"[Invalid Chunked Response]"),Vt(this),Pt(this);else if(0<Ve.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),Qc(Qr),Qr.M=!0,mr(11))}}else P(this.i,this.l,Ve,null),Hs(this,Ve);jr==4&&Vt(this),this.o&&!this.J&&(jr==4?jl(this.j,this):(this.o=!1,Pe(this)))}else Al(this.g),C==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,mr(12)):(this.s=0,mr(13)),Vt(this),Pt(this)}}}catch{}finally{}};function Ge(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Oe(m,E){var C=m.C,B=E.indexOf(`
`,C);return B==-1?fe:(C=Number(E.substring(C,B)),isNaN(C)?he:(B+=1,B+C>E.length?fe:(E=E.slice(B,B+C),m.C=B+C,E)))}ve.prototype.cancel=function(){this.J=!0,Vt(this)};function Pe(m){m.S=Date.now()+m.I,ut(m,m.I)}function ut(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=On(v(m.ba,m),E)}function Ot(m){m.B&&(u.clearTimeout(m.B),m.B=null)}ve.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(G(this.i,this.A),this.L!=2&&(Ws(),mr(17)),Vt(this),this.s=2,Pt(this)):ut(this,this.S-m)};function Pt(m){m.j.G==0||m.J||jl(m.j,m)}function Vt(m){Ot(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Pr(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function Hs(m,E){try{var C=m.j;if(C.G!=0&&(C.g==m||sr(C.h,m))){if(!m.K&&sr(C.h,m)&&C.G==3){try{var B=C.Da.g.parse(E)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ie=B;if(ie[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Pl(C),Xs(C);else break e;Rl(C),mr(18)}}else C.za=ie[1],0<C.za-C.T&&37500>ie[2]&&C.F&&C.v==0&&!C.C&&(C.C=On(v(C.Za,C),6e3));if(1>=Ta(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else qi(C,11)}else if((m.K||C.g==m)&&Pl(C),!U(E))for(ie=C.Da.g.parse(E),E=0;E<ie.length;E++){let It=ie[E];if(C.T=It[0],It=It[1],C.G==2)if(It[0]=="c"){C.K=It[1],C.ia=It[2];const Qr=It[3];Qr!=null&&(C.la=Qr,C.j.info("VER="+C.la));const jr=It[4];jr!=null&&(C.Aa=jr,C.j.info("SVER="+C.Aa));const Rs=It[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(B=1.5*Rs,C.L=B,C.j.info("backChannelRequestTimeoutMs_="+B)),B=C;const ms=m.g;if(ms){const Po=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var xe=B.h;xe.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Hc(xe,xe.h),xe.h=null))}if(B.D){const Ol=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Ol&&(B.ya=Ol,Xt(B.I,B.D,Ol))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),B=C;var Ve=m;if(B.qa=Hd(B,B.J?B.ia:null,B.W),Ve.K){jd(B.h,Ve);var Bt=Ve,Wr=B.L;Wr&&(Bt.I=Wr),Bt.B&&(Ot(Bt),Pe(Bt)),B.g=Ve}else Ro(B);0<C.i.length&&wi(C)}else It[0]!="stop"&&It[0]!="close"||qi(C,7);else C.G==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?qi(C,7):un(C):It[0]!="noop"&&C.l&&C.l.ta(It),C.v=0)}}Ws(4)}catch{}}var gi=class{constructor(m,E){this.g=m,this.map=E}};function ds(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ta(m){return m.h?1:m.g?m.g.size:0}function sr(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Hc(m,E){m.g?m.g.add(E):m.h=E}function jd(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}ds.prototype.cancel=function(){if(this.i=Dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Dd(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const C of m.g.values())E=E.concat(C.D);return E}return _(m.i)}function bl(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var E=[],C=m.length,B=0;B<C;B++)E.push(m[B]);return E}E=[],C=0;for(B in m)E[C++]=m[B];return E}function Tl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var E=[];m=m.length;for(var C=0;C<m;C++)E.push(C);return E}E=[],C=0;for(const B in m)E[C++]=B;return E}}}function Na(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var C=Tl(m),B=bl(m),ie=B.length,xe=0;xe<ie;xe++)E.call(void 0,B[xe],C&&C[xe],m)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q0(m,E){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var B=m[C].indexOf("="),ie=null;if(0<=B){var xe=m[C].substring(0,B);ie=m[C].substring(B+1)}else xe=m[C];E(xe,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function $i(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof $i){this.h=m.h,Ao(this,m.j),this.o=m.o,this.g=m.g,Sa(this,m.s),this.l=m.l;var E=m.i,C=new xi;C.i=E.i,E.g&&(C.g=new Map(E.g),C.h=E.h),Ca(this,C),this.m=m.m}else m&&(E=String(m).match(Co))?(this.h=!1,Ao(this,E[1]||"",!0),this.o=St(E[2]||""),this.g=St(E[3]||"",!0),Sa(this,E[4]),this.l=St(E[5]||"",!0),Ca(this,E[6]||"",!0),this.m=St(E[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}$i.prototype.toString=function(){var m=[],E=this.j;E&&m.push(Ia(E,Nl,!0),":");var C=this.g;return(C||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Ia(E,Nl,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Ia(C,C.charAt(0)=="/"?Ld:Fd,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Ia(C,Gc)),m.join("")};function hs(m){return new $i(m)}function Ao(m,E,C){m.j=C?St(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Sa(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function Ca(m,E,C){E instanceof xi?(m.i=E,vi(m.i,m.h)):(C||(E=Ia(E,Md)),m.i=new xi(E,m.h))}function Xt(m,E,C){m.i.set(E,C)}function Aa(m){return Xt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function St(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ia(m,E,C){return typeof m=="string"?(m=encodeURI(m).replace(E,Od),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Od(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Nl=/[#\/\?@]/g,Fd=/[#\?:]/g,Ld=/[#\?]/g,Md=/[#\?@]/g,Gc=/#/g;function xi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function cn(m){m.g||(m.g=new Map,m.h=0,m.i&&q0(m.i,function(E,C){m.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}r=xi.prototype,r.add=function(m,E){cn(this),this.i=null,m=ks(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(E),this.h+=1,this};function Gs(m,E){cn(m),E=ks(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function qs(m,E){return cn(m),E=ks(m,E),m.g.has(E)}r.forEach=function(m,E){cn(this),this.g.forEach(function(C,B){C.forEach(function(ie){m.call(E,ie,B,this)},this)},this)},r.na=function(){cn(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),C=[];for(let B=0;B<E.length;B++){const ie=m[B];for(let xe=0;xe<ie.length;xe++)C.push(E[B])}return C},r.V=function(m){cn(this);let E=[];if(typeof m=="string")qs(this,m)&&(E=E.concat(this.g.get(ks(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)E=E.concat(m[C])}return E},r.set=function(m,E){return cn(this),this.i=null,m=ks(this,m),qs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},r.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function ka(m,E,C){Gs(m,E),0<C.length&&(m.i=null,m.g.set(ks(m,E),_(C)),m.h+=C.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var C=0;C<E.length;C++){var B=E[C];const xe=encodeURIComponent(String(B)),Ve=this.V(B);for(B=0;B<Ve.length;B++){var ie=xe;Ve[B]!==""&&(ie+="="+encodeURIComponent(String(Ve[B]))),m.push(ie)}}return this.i=m.join("&")};function ks(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function vi(m,E){E&&!m.j&&(cn(m),m.i=null,m.g.forEach(function(C,B){var ie=B.toLowerCase();B!=ie&&(Gs(this,B),ka(this,ie,C))},m)),m.j=E}function K0(m,E){const C=new Bi;if(u.Image){const B=new Image;B.onload=w(qn,C,"TestLoadImage: loaded",!0,E,B),B.onerror=w(qn,C,"TestLoadImage: error",!1,E,B),B.onabort=w(qn,C,"TestLoadImage: abort",!1,E,B),B.ontimeout=w(qn,C,"TestLoadImage: timeout",!1,E,B),u.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else E(!1)}function Ud(m,E){const C=new Bi,B=new AbortController,ie=setTimeout(()=>{B.abort(),qn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:B.signal}).then(xe=>{clearTimeout(ie),xe.ok?qn(C,"TestPingServer: ok",!0,E):qn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ie),qn(C,"TestPingServer: error",!1,E)})}function qn(m,E,C,B,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),B(C)}catch{}}function Y0(){this.g=new rr}function Vd(m,E,C){const B=C||"";try{Na(m,function(ie,xe){let Ve=ie;f(ie)&&(Ve=us(ie)),E.push(B+xe+"="+encodeURIComponent(Ve))})}catch(ie){throw E.push(B+"type="+encodeURIComponent("_badmap")),ie}}function Wi(m){this.l=m.Ub||null,this.j=m.eb||!1}N(Wi,ye),Wi.prototype.g=function(){return new Io(this.l,this.j)},Wi.prototype.i=(function(m){return function(){return m}})({});function Io(m,E){Gt.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Io,Gt),r=Io.prototype,r.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,Ys(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},r.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bd(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bd(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}r.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ks(this):Ys(this),this.readyState==3&&Bd(this)}},r.Ra=function(m){this.g&&(this.response=this.responseText=m,Ks(this))},r.Qa=function(m){this.g&&(this.response=m,Ks(this))},r.ga=function(){this.g&&Ks(this)};function Ks(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ys(m)}r.setRequestHeader=function(m,E){this.u.append(m,E)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=E.next();return m.join(`\r
`)};function Ys(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Hi(m){let E="";return ee(m,function(C,B){E+=B,E+=":",E+=C,E+=`\r
`}),E}function Ra(m,E,C){e:{for(B in C){var B=!1;break e}B=!0}B||(C=Hi(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):Xt(m,E,C))}function lr(m){Gt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(lr,Gt);var X0=/^https?$/i,qc=["POST","PUT"];r=lr.prototype,r.Ha=function(m){this.J=m},r.ea=function(m,E,C,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Y.g(),this.v=this.o?Ze(this.o):Ze(Y),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(xe){ko(this,xe);return}if(m=C||"",C=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ie in B)C.set(ie,B[ie]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const xe of B.keys())C.set(xe,B.get(xe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(C.keys()).find(xe=>xe.toLowerCase()=="content-type"),ie=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(qc,E,void 0))||B||ie||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Ve]of C)this.g.setRequestHeader(xe,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cl(this),this.u=!0,this.g.send(m),this.u=!1}catch(xe){ko(this,xe)}};function ko(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,Sl(m),fs(m)}function Sl(m){m.A||(m.A=!0,qt(m,"complete"),qt(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,qt(this,"complete"),qt(this,"abort"),fs(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),lr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Kc(this):this.bb())},r.bb=function(){Kc(this)};function Kc(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Kn(m)!=4||m.Z()!=2)){if(m.u&&Kn(m)==4)Is(m.Ea,0,m);else if(qt(m,"readystatechange"),Kn(m)==4){m.h=!1;try{const Ve=m.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var B;if(B=Ve===0){var ie=String(m.D).match(Co)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),B=!X0.test(ie?ie.toLowerCase():"")}C=B}if(C)qt(m,"complete"),qt(m,"success");else{m.m=6;try{var xe=2<Kn(m)?m.g.statusText:""}catch{xe=""}m.l=xe+" ["+m.Z()+"]",Sl(m)}}finally{fs(m)}}}}function fs(m,E){if(m.g){Cl(m);const C=m.g,B=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||qt(m,"ready");try{C.onreadystatechange=B}catch{}}}function Cl(m){m.I&&(u.clearTimeout(m.I),m.I=null)}r.isActive=function(){return!!this.g};function Kn(m){return m.g?m.g.readyState:0}r.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),bn(E)}};function Yc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Al(m){const E={};m=(m.g&&2<=Kn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(U(m[B]))continue;var C=L(m[B]);const ie=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const xe=E[ie]||[];E[ie]=xe,xe.push(C)}S(E,function(B){return B.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(m,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||E}function Xc(m){this.Aa=0,this.i=[],this.j=new Bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,m),this.cb=yi("retryDelaySeedMs",1e4,m),this.Wa=yi("forwardChannelMaxRetries",2,m),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ds(m&&m.concurrentRequestLimit),this.Da=new Y0,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Xc.prototype,r.la=8,r.G=1,r.connect=function(m,E,C,B){mr(0),this.W=m,this.H=E||{},C&&B!==void 0&&(this.H.OSID=C,this.H.OAID=B),this.F=this.X,this.I=Hd(this,null,this.W),wi(this)};function un(m){if(Il(m),m.G==3){var E=m.U++,C=hs(m.I);if(Xt(C,"SID",m.K),Xt(C,"RID",E),Xt(C,"TYPE","terminate"),Gi(m,C),E=new ve(m,m.j,E),E.L=2,E.v=Aa(hs(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.v,C=!0),C||(E.g=Gd(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Pe(E)}Wd(m)}function Xs(m){m.g&&(Qc(m),m.g.cancel(),m.g=null)}function Il(m){Xs(m),m.u&&(u.clearTimeout(m.u),m.u=null),Pl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function wi(m){if(!Cr(m.h)&&!m.s){m.s=!0;var E=m.Ga;We||q(),Ne||(We(),Ne=!0),Ee.add(E,m),m.B=0}}function Q0(m,E){return Ta(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=On(v(m.Ga,m,E),$d(m,m.B)),m.B++,!0)}r.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new ve(this,this.j,m);let xe=this.o;if(this.S&&(xe?(xe=I(xe),j(xe,this.S)):xe=this.S),this.m!==null||this.O||(ie.H=xe,xe=null),this.P)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var B=this.i[C];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(E+=B,4096<E){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Pa(this,ie,E),C=hs(this.I),Xt(C,"RID",m),Xt(C,"CVER",22),this.D&&Xt(C,"X-HTTP-Session-Id",this.D),Gi(this,C),xe&&(this.O?E="headers="+encodeURIComponent(String(Hi(xe)))+"&"+E:this.m&&Ra(C,this.m,xe)),Hc(this.h,ie),this.Ua&&Xt(C,"TYPE","init"),this.P?(Xt(C,"$req",E),Xt(C,"SID","null"),ie.T=!0,Re(ie,C,null)):Re(ie,C,E),this.G=2}}else this.G==3&&(m?kl(this,m):this.i.length==0||Cr(this.h)||kl(this))};function kl(m,E){var C;E?C=E.l:C=m.U++;const B=hs(m.I);Xt(B,"SID",m.K),Xt(B,"RID",C),Xt(B,"AID",m.T),Gi(m,B),m.m&&m.o&&Ra(B,m.m,m.o),C=new ve(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),E&&(m.i=E.D.concat(m.i)),E=Pa(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Hc(m.h,C),Re(C,B,E)}function Gi(m,E){m.H&&ee(m.H,function(C,B){Xt(E,B,C)}),m.l&&Na({},function(C,B){Xt(E,B,C)})}function Pa(m,E,C){C=Math.min(m.i.length,C);var B=m.l?v(m.l.Na,m.l,m):null;e:{var ie=m.i;let xe=-1;for(;;){const Ve=["count="+C];xe==-1?0<C?(xe=ie[0].g,Ve.push("ofs="+xe)):xe=0:Ve.push("ofs="+xe);let Bt=!0;for(let Wr=0;Wr<C;Wr++){let It=ie[Wr].g;const Qr=ie[Wr].map;if(It-=xe,0>It)xe=Math.max(0,ie[Wr].g-100),Bt=!1;else try{Vd(Qr,Ve,"req"+It+"_")}catch{B&&B(Qr)}}if(Bt){B=Ve.join("&");break e}}}return m=m.i.splice(0,C),E.D=m,B}function Ro(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;We||q(),Ne||(We(),Ne=!0),Ee.add(E,m),m.v=0}}function Rl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=On(v(m.Fa,m),$d(m,m.v)),m.v++,!0)}r.Fa=function(){if(this.u=null,zd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=On(v(this.ab,this),m)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mr(10),Xs(this),zd(this))};function Qc(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function zd(m){m.g=new ve(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=hs(m.qa);Xt(E,"RID","rpc"),Xt(E,"SID",m.K),Xt(E,"AID",m.T),Xt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&Xt(E,"TO",m.ja),Xt(E,"TYPE","xmlhttp"),Gi(m,E),m.m&&m.o&&Ra(E,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Aa(hs(E)),C.m=null,C.P=!0,Me(C,m)}r.Za=function(){this.C!=null&&(this.C=null,Xs(this),Rl(this),mr(19))};function Pl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function jl(m,E){var C=null;if(m.g==E){Pl(m),Qc(m),m.g=null;var B=2}else if(sr(m.h,E))C=E.D,jd(m.h,E),B=1;else return;if(m.G!=0){if(E.o)if(B==1){C=E.m?E.m.length:0,E=Date.now()-E.F;var ie=m.B;B=Gn(),qt(B,new Ea(B,C)),wi(m)}else Ro(m);else if(ie=E.s,ie==3||ie==0&&0<E.X||!(B==1&&Q0(m,E)||B==2&&Rl(m)))switch(C&&0<C.length&&(E=m.h,E.i=E.i.concat(C)),ie){case 1:qi(m,5);break;case 4:qi(m,10);break;case 3:qi(m,6);break;default:qi(m,2)}}}function $d(m,E){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*E}function qi(m,E){if(m.j.info("Error code "+E),E==2){var C=v(m.fb,m),B=m.Xa;const ie=!B;B=new $i(B||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ao(B,"https"),Aa(B),ie?K0(B.toString(),C):Ud(B.toString(),C)}else mr(2);m.G=0,m.l&&m.l.sa(E),Wd(m),Il(m)}r.fb=function(m){m?(this.j.info("Successfully pinged google.com"),mr(2)):(this.j.info("Failed to ping google.com"),mr(1))};function Wd(m){if(m.G=0,m.ka=[],m.l){const E=Dd(m.h);(E.length!=0||m.i.length!=0)&&(T(m.ka,E),T(m.ka,m.i),m.h.i.length=0,_(m.i),m.i.length=0),m.l.ra()}}function Hd(m,E,C){var B=C instanceof $i?hs(C):new $i(C);if(B.g!="")E&&(B.g=E+"."+B.g),Sa(B,B.s);else{var ie=u.location;B=ie.protocol,E=E?E+"."+ie.hostname:ie.hostname,ie=+ie.port;var xe=new $i(null);B&&Ao(xe,B),E&&(xe.g=E),ie&&Sa(xe,ie),C&&(xe.l=C),B=xe}return C=m.D,E=m.ya,C&&E&&Xt(B,C,E),Xt(B,"VER",m.la),Gi(m,B),B}function Gd(m,E,C){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new lr(new Wi({eb:C})):new lr(m.pa),E.Ha(m.J),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}r=Jc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Dl(){}Dl.prototype.g=function(m,E){return new Fn(m,E)};function Fn(m,E){Gt.call(this),this.g=new Xc(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!U(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!U(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new _i(this)}N(Fn,Gt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){un(this.g)},Fn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=us(m),m=C);E.i.push(new gi(E.Ya++,m)),E.G==3&&wi(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,un(this.g),delete this.g,Fn.aa.N.call(this)};function qd(m){Tt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const C in E){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}N(qd,Tt);function Kd(){Nt.call(this),this.status=1}N(Kd,Nt);function _i(m){this.g=m}N(_i,Jc),_i.prototype.ua=function(){qt(this.g,"a")},_i.prototype.ta=function(m){qt(this.g,new qd(m))},_i.prototype.sa=function(m){qt(this.g,new Kd)},_i.prototype.ra=function(){qt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,DE=function(){return new Dl},jE=function(){return Gn()},PE=Jt,cg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},H.NO_ERROR=0,H.TIMEOUT=8,H.HTTP_ERROR=6,gf=H,K.COMPLETE="complete",RE=K,vt.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,Cu=vt,lr.prototype.listenOnce=lr.prototype.L,lr.prototype.getLastError=lr.prototype.Ka,lr.prototype.getLastErrorCode=lr.prototype.Ba,lr.prototype.getStatus=lr.prototype.Z,lr.prototype.getResponseJson=lr.prototype.Oa,lr.prototype.getResponseText=lr.prototype.oa,lr.prototype.send=lr.prototype.ea,lr.prototype.setWithCredentials=lr.prototype.Ha,kE=lr}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});const Nw="@firebase/firestore",Sw="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new $g("@firebase/firestore");function ac(){return tl.logLevel}function Ke(r,...e){if(tl.logLevel<=wt.DEBUG){const t=e.map(sx);tl.debug(`Firestore (${Oc}): ${r}`,...t)}}function ga(r,...e){if(tl.logLevel<=wt.ERROR){const t=e.map(sx);tl.error(`Firestore (${Oc}): ${r}`,...t)}}function rl(r,...e){if(tl.logLevel<=wt.WARN){const t=e.map(sx);tl.warn(`Firestore (${Oc}): ${r}`,...t)}}function sx(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,OE(r,n,t)}function OE(r,e,t){let n=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ga(n),new Error(n)}function Lt(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||OE(e,s,n)}function ht(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class MR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UR{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lt(this.o===void 0,42304);let n=this.i;const s=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let a=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ri,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ri)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Lt(typeof n.accessToken=="string",31837,{l:n}),new FE(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class VR{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BR{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new VR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lt(this.o===void 0,3512);const n=a=>{a.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const s=a=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=$R(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<t&&(n+=e.charAt(s[a]%62))}return n}}function _t(r,e){return r<e?-1:r>e?1:0}function ug(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),a=e.charAt(n);if(s!==a)return Rp(s)===Rp(a)?_t(s,a):Rp(s)?1:-1}return _t(r.length,e.length)}const WR=55296,HR=57343;function Rp(r){const e=r.charCodeAt(0);return e>=WR&&e<=HR}function Ec(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="__name__";class Ai{constructor(e,t,n){t===void 0?t=0:t>e.length&&ct(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ct(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=Ai.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return _t(e.length,t.length)}static compareSegments(e,t){const n=Ai.isNumericId(e),s=Ai.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):ug(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class Qt extends Ai{construct(e,t,n){return new Qt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new Qt(t)}static emptyPath(){return new Qt([])}}const GR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Ai{construct(e,t,n){return new rn(e,t,n)}static isValidIdentifier(e){return GR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Aw}static keyField(){return new rn([Aw])}static fromServerFormat(e){const t=[];let n="",s=0;const a=()=>{if(n.length===0)throw new $e(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new $e(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new $e(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(n+=u,s++):(a(),s++)}if(a(),o)throw new $e(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Qt.fromString(e))}static fromName(e){return new rt(Qt.fromString(e).popFirst(5))}static empty(){return new rt(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r,e,t){if(!t)throw new $e(_e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ME(r,e,t,n){if(e===!0&&n===!0)throw new $e(_e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Iw(r){if(!rt.isDocumentKey(r))throw new $e(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function kw(r){if(rt.isDocumentKey(r))throw new $e(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function UE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function p0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ct(12329,{type:typeof r})}function on(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new $e(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=p0(r);throw new $e(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(r,e){const t={typeString:r};return e&&(t.value=e),t}function yd(r,e){if(!UE(r))throw new $e(_e.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const o=r[n];if(s&&typeof o!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new $e(_e.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=-62135596800,Pw=1e6;class er{static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Pw);return new er(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rw)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pw}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:er._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,er._jsonSchema))return new er(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}er._jsonSchemaVersion="firestore/timestamp/1.0",er._jsonSchema={type:Br("string",er._jsonSchemaVersion),seconds:Br("number"),nanoseconds:Br("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new er(0,0))}static max(){return new ft(new er(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=-1;function qR(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(n===1e9?new er(t+1,0):new er(t,n));return new ho(s,rt.empty(),e)}function KR(r){return new ho(r.readTime,r.key,Zu)}class ho{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ho(ft.min(),rt.empty(),Zu)}static max(){return new ho(ft.max(),rt.empty(),Zu)}}function YR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=rt.comparator(r.documentKey,e.documentKey),t!==0?t:_t(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(r){if(r.code!==_e.FAILED_PRECONDITION||r.message!==XR)throw r;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,n)=>{t(e)}))}static reject(e){return new be(((t,n)=>{n(e)}))}static waitFor(e){return new be(((t,n)=>{let s=0,a=0,o=!1;e.forEach((u=>{++s,u.next((()=>{++a,o&&a===s&&t()}),(h=>n(h)))})),o=!0,a===s&&t()}))}static or(e){let t=be.resolve(!1);for(const n of e)t=t.next((s=>s?be.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,a)=>{n.push(t.call(this,s,a))})),this.waitFor(n)}static mapArray(e,t){return new be(((n,s)=>{const a=e.length,o=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next((p=>{o[f]=p,++u,u===a&&n(o)}),(p=>s(p)))}}))}static doWhile(e,t){return new be(((n,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):n()};a()}))}}function JR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}g0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=-1;function x0(r){return r==null}function Pf(r){return r===0&&1/r==-1/0}function ZR(r){return typeof r=="number"&&Number.isInteger(r)&&!Pf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="";function e3(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jw(e)),e=t3(r.get(t),e);return jw(e)}function t3(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const a=r.charAt(s);switch(a){case"\0":t+="";break;case VE:t+="";break;default:t+=a}}return t}function jw(r){return r+VE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Eo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function r3(r,e){const t=[];for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.push(e(r[n],n,r));return t}function BE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,n,s,a){this.key=e,this.value=t,this.color=n??pn.RED,this.left=s??pn.EMPTY,this.right=a??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,a){return new pn(e??this.key,t??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,n),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ct(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(e,t,n,s,a){return this}insert(e,t,n){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ow(this.data.getIterator())}getIteratorFrom(e){return new Ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xr(this.comparator);return t.data=e,t}}class Ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new Xr(rn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ec(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zE("Invalid base64 string: "+a):a}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const n3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(r){if(Lt(!!r,39018),typeof r=="string"){let e=0;const t=n3.exec(r);if(Lt(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ir(r.seconds),nanos:Ir(r.nanos)}}function Ir(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function mo(r){return typeof r=="string"?ln.fromBase64String(r):ln.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="server_timestamp",WE="__type__",HE="__previous_value__",GE="__local_write_time__";function ox(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[WE])==null?void 0:n.stringValue)===$E}function v0(r){const e=r.mapValue.fields[HE];return ox(e)?v0(e):e}function ed(r){const e=fo(r.mapValue.fields[GE].timestampValue);return new er(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t,n,s,a,o,u,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const jf="(default)";class bc{constructor(e,t){this.projectId=e,this.database=t||jf}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database===jf}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",i3="__max__",Hh={mapValue:{}},KE="__vector__",Df="value";function po(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ox(r)?4:o3(r)?9007199254740991:a3(r)?10:11:ct(28295,{value:r})}function Di(r,e){if(r===e)return!0;const t=po(r);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ed(r).isEqual(ed(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=fo(s.timestampValue),u=fo(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,a){return mo(s.bytesValue).isEqual(mo(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ir(s.geoPointValue.latitude)===Ir(a.geoPointValue.latitude)&&Ir(s.geoPointValue.longitude)===Ir(a.geoPointValue.longitude)})(r,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ir(s.integerValue)===Ir(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Ir(s.doubleValue),u=Ir(a.doubleValue);return o===u?Pf(o)===Pf(u):isNaN(o)&&isNaN(u)}return!1})(r,e);case 9:return Ec(r.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(s,a){const o=s.mapValue.fields||{},u=a.mapValue.fields||{};if(Dw(o)!==Dw(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(u[h]===void 0||!Di(o[h],u[h])))return!1;return!0})(r,e);default:return ct(52216,{left:r})}}function td(r,e){return(r.values||[]).find((t=>Di(t,e)))!==void 0}function Tc(r,e){if(r===e)return 0;const t=po(r),n=po(e);if(t!==n)return _t(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(r.booleanValue,e.booleanValue);case 2:return(function(a,o){const u=Ir(a.integerValue||a.doubleValue),h=Ir(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(r,e);case 3:return Fw(r.timestampValue,e.timestampValue);case 4:return Fw(ed(r),ed(e));case 5:return ug(r.stringValue,e.stringValue);case 6:return(function(a,o){const u=mo(a),h=mo(o);return u.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(a,o){const u=a.split("/"),h=o.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=_t(u[f],h[f]);if(p!==0)return p}return _t(u.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,o){const u=_t(Ir(a.latitude),Ir(o.latitude));return u!==0?u:_t(Ir(a.longitude),Ir(o.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Lw(r.arrayValue,e.arrayValue);case 10:return(function(a,o){var v,w,N,_;const u=a.fields||{},h=o.fields||{},f=(v=u[Df])==null?void 0:v.arrayValue,p=(w=h[Df])==null?void 0:w.arrayValue,x=_t(((N=f==null?void 0:f.values)==null?void 0:N.length)||0,((_=p==null?void 0:p.values)==null?void 0:_.length)||0);return x!==0?x:Lw(f,p)})(r.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Hh.mapValue&&o===Hh.mapValue)return 0;if(a===Hh.mapValue)return 1;if(o===Hh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=o.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let x=0;x<h.length&&x<p.length;++x){const v=ug(h[x],p[x]);if(v!==0)return v;const w=Tc(u[h[x]],f[p[x]]);if(w!==0)return w}return _t(h.length,p.length)})(r.mapValue,e.mapValue);default:throw ct(23264,{he:t})}}function Fw(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return _t(r,e);const t=fo(r),n=fo(e),s=_t(t.seconds,n.seconds);return s!==0?s:_t(t.nanos,n.nanos)}function Lw(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const a=Tc(t[s],n[s]);if(a)return a}return _t(t.length,n.length)}function Nc(r){return dg(r)}function dg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=fo(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return mo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return rt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const a of t.values||[])s?s=!1:n+=",",n+=dg(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${dg(t.fields[o])}`;return s+"}"})(r.mapValue):ct(61005,{value:r})}function xf(r){switch(po(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=v0(r);return e?16+xf(e):16;case 5:return 2*r.stringValue.length;case 6:return mo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,a)=>s+xf(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Eo(n.fields,((a,o)=>{s+=a.length+xf(o)})),s})(r.mapValue);default:throw ct(13486,{value:r})}}function Mw(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function hg(r){return!!r&&"integerValue"in r}function lx(r){return!!r&&"arrayValue"in r}function Uw(r){return!!r&&"nullValue"in r}function Vw(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function vf(r){return!!r&&"mapValue"in r}function a3(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[qE])==null?void 0:n.stringValue)===KE}function Fu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Eo(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Fu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fu(r.arrayValue.values[t]);return e}return{...r}}function o3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===i3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(t)}setAll(e){let t=rn.emptyPath(),n={},s=[];e.forEach(((o,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,n,s),n={},s=[],t=u.popLast()}o?n[u.lastSegment()]=Fu(o):s.push(u.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,s)}delete(e){const t=this.field(e.popLast());vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Eo(t,((s,a)=>e[s]=a));for(const s of n)delete e[s]}clone(){return new ss(Fu(this.value))}}function YE(r){const e=[];return Eo(r.fields,((t,n)=>{const s=new rn([t]);if(vf(n)){const a=YE(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)})),new Ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,n,s,a,o,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=u}static newInvalidDocument(e){return new kn(e,0,ft.min(),ft.min(),ft.min(),ss.empty(),0)}static newFoundDocument(e,t,n,s){return new kn(e,1,t,ft.min(),n,s,0)}static newNoDocument(e,t){return new kn(e,2,t,ft.min(),ft.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,ft.min(),ft.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.position=e,this.inclusive=t}}function Bw(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const a=e[s],o=r.position[s];if(a.field.isKeyField()?n=rt.comparator(rt.fromName(o.referenceValue),t.key):n=Tc(o,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function zw(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Di(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function l3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{}class Ur extends XE{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new u3(e,t,n):t==="array-contains"?new f3(e,n):t==="in"?new m3(e,n):t==="not-in"?new p3(e,n):t==="array-contains-any"?new g3(e,n):new Ur(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new d3(e,n):new h3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tc(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(Tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends XE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mi(e,t)}matches(e){return QE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QE(r){return r.op==="and"}function JE(r){return c3(r)&&QE(r)}function c3(r){for(const e of r.filters)if(e instanceof mi)return!1;return!0}function fg(r){if(r instanceof Ur)return r.field.canonicalString()+r.op.toString()+Nc(r.value);if(JE(r))return r.filters.map((e=>fg(e))).join(",");{const e=r.filters.map((t=>fg(t))).join(",");return`${r.op}(${e})`}}function ZE(r,e){return r instanceof Ur?(function(n,s){return s instanceof Ur&&n.op===s.op&&n.field.isEqual(s.field)&&Di(n.value,s.value)})(r,e):r instanceof mi?(function(n,s){return s instanceof mi&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((a,o,u)=>a&&ZE(o,s.filters[u])),!0):!1})(r,e):void ct(19439)}function eb(r){return r instanceof Ur?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nc(t.value)}`})(r):r instanceof mi?(function(t){return t.op.toString()+" {"+t.getFilters().map(eb).join(" ,")+"}"})(r):"Filter"}class u3 extends Ur{constructor(e,t,n){super(e,t,n),this.key=rt.fromName(n.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class d3 extends Ur{constructor(e,t){super(e,"in",t),this.keys=tb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class h3 extends Ur{constructor(e,t){super(e,"not-in",t),this.keys=tb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tb(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>rt.fromName(n.referenceValue)))}class f3 extends Ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lx(t)&&td(t.arrayValue,this.value)}}class m3 extends Ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&td(this.value.arrayValue,t)}}class p3 extends Ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!td(this.value.arrayValue,t)}}class g3 extends Ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lx(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>td(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t=null,n=[],s=[],a=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=u,this.Te=null}}function $w(r,e=null,t=[],n=[],s=null,a=null,o=null){return new x3(r,e,t,n,s,a,o)}function cx(r){const e=ht(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>fg(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),x0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Nc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Nc(n))).join(",")),e.Te=t}return e.Te}function ux(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!l3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ZE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zw(r.startAt,e.startAt)&&zw(r.endAt,e.endAt)}function mg(r){return rt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t=null,n=[],s=[],a=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function v3(r,e,t,n,s,a,o,u){return new hl(r,e,t,n,s,a,o,u)}function y0(r){return new hl(r)}function Ww(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rb(r){return r.collectionGroup!==null}function Lu(r){const e=ht(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Xr(rn.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new rd(a,n))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new rd(rn.keyField(),n))}return e.Ie}function Pi(r){const e=ht(r);return e.Ee||(e.Ee=nb(e,Lu(r))),e.Ee}function y3(r){const e=ht(r);return e.de||(e.de=nb(e,r.explicitOrderBy)),e.de}function nb(r,e){if(r.limitType==="F")return $w(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new rd(s.field,a)}));const t=r.endAt?new Of(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Of(r.startAt.position,r.startAt.inclusive):null;return $w(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function pg(r,e){const t=r.filters.concat([e]);return new hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function gg(r,e,t){return new hl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function w0(r,e){return ux(Pi(r),Pi(e))&&r.limitType===e.limitType}function sb(r){return`${cx(Pi(r))}|lt:${r.limitType}`}function oc(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>eb(s))).join(", ")}]`),x0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Nc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Nc(s))).join(",")),`Target(${n})`})(Pi(r))}; limitType=${r.limitType})`}function _0(r,e){return e.isFoundDocument()&&(function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):rt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,s){for(const a of Lu(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(o,u,h){const f=Bw(o,u,h);return o.inclusive?f<=0:f<0})(n.startAt,Lu(n),s)||n.endAt&&!(function(o,u,h){const f=Bw(o,u,h);return o.inclusive?f>=0:f>0})(n.endAt,Lu(n),s))})(r,e)}function w3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ib(r){return(e,t)=>{let n=!1;for(const s of Lu(r)){const a=_3(s,e,t);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function _3(r,e,t){const n=r.field.isKeyField()?rt.comparator(e.key,t.key):(function(a,o,u){const h=o.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Tc(h,f):ct(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ct(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((t,n)=>{for(const[s,a]of n)e(s,a)}))}isEmpty(){return BE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new vr(rt.comparator);function xa(){return E3}const ab=new vr(rt.comparator);function Au(...r){let e=ab;for(const t of r)e=e.insert(t.key,t);return e}function ob(r){let e=ab;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Xo(){return Mu()}function lb(){return Mu()}function Mu(){return new fl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const b3=new vr(rt.comparator),T3=new Xr(rt.comparator);function Et(...r){let e=T3;for(const t of r)e=e.add(t);return e}const N3=new Xr(_t);function S3(){return N3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pf(e)?"-0":e}}function cb(r){return{integerValue:""+r}}function C3(r,e){return ZR(e)?cb(e):dx(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this._=void 0}}function A3(r,e,t){return r instanceof nd?(function(s,a){const o={fields:{[WE]:{stringValue:$E},[GE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&ox(a)&&(a=v0(a)),a&&(o.fields[HE]=a),{mapValue:o}})(t,e):r instanceof Sc?db(r,e):r instanceof Cc?hb(r,e):(function(s,a){const o=ub(s,a),u=Hw(o)+Hw(s.Ae);return hg(o)&&hg(s.Ae)?cb(u):dx(s.serializer,u)})(r,e)}function I3(r,e,t){return r instanceof Sc?db(r,e):r instanceof Cc?hb(r,e):t}function ub(r,e){return r instanceof Ff?(function(n){return hg(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class nd extends E0{}class Sc extends E0{constructor(e){super(),this.elements=e}}function db(r,e){const t=fb(e);for(const n of r.elements)t.some((s=>Di(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Cc extends E0{constructor(e){super(),this.elements=e}}function hb(r,e){let t=fb(e);for(const n of r.elements)t=t.filter((s=>!Di(s,n)));return{arrayValue:{values:t}}}class Ff extends E0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hw(r){return Ir(r.integerValue||r.doubleValue)}function fb(r){return lx(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t){this.field=e,this.transform=t}}function k3(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Sc&&s instanceof Sc||n instanceof Cc&&s instanceof Cc?Ec(n.elements,s.elements,Di):n instanceof Ff&&s instanceof Ff?Di(n.Ae,s.Ae):n instanceof nd&&s instanceof nd})(r.transform,e.transform)}class R3{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class b0{}function mb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new T0(r.key,Wn.none()):new wd(r.key,r.data,Wn.none());{const t=r.data,n=ss.empty();let s=new Xr(rn.comparator);for(let a of e.fields)if(!s.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new bo(r.key,n,new Ts(s.toArray()),Wn.none())}}function P3(r,e,t){r instanceof wd?(function(s,a,o){const u=s.value.clone(),h=qw(s.fieldTransforms,a,o.transformResults);u.setAll(h),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(r,e,t):r instanceof bo?(function(s,a,o){if(!yf(s.precondition,a))return void a.convertToUnknownDocument(o.version);const u=qw(s.fieldTransforms,a,o.transformResults),h=a.data;h.setAll(pb(s)),h.setAll(u),a.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(r,e,t):(function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Uu(r,e,t,n){return r instanceof wd?(function(a,o,u,h){if(!yf(a.precondition,o))return u;const f=a.value.clone(),p=Kw(a.fieldTransforms,h,o);return f.setAll(p),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof bo?(function(a,o,u,h){if(!yf(a.precondition,o))return u;const f=Kw(a.fieldTransforms,h,o),p=o.data;return p.setAll(pb(a)),p.setAll(f),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(r,e,t,n):(function(a,o,u){return yf(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(r,e,t)}function j3(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),a=ub(n.transform,s||null);a!=null&&(t===null&&(t=ss.empty()),t.set(n.field,a))}return t||null}function Gw(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ec(n,s,((a,o)=>k3(a,o)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class wd extends b0{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bo extends b0{constructor(e,t,n,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pb(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function qw(r,e,t){const n=new Map;Lt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const a=r[s],o=a.transform,u=e.data.field(a.field);n.set(a.field,I3(o,u,t[s]))}return n}function Kw(r,e,t){const n=new Map;for(const s of r){const a=s.transform,o=t.data.field(s.field);n.set(s.field,A3(a,o,e))}return n}class T0 extends b0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D3 extends b0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&P3(a,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Uu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Uu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=lb();return this.mutations.forEach((s=>{const a=e.get(s.key),o=a.overlayedDocument;let u=this.applyToLocalView(o,a.mutatedFields);u=t.has(s.key)?null:u;const h=mb(o,u);h!==null&&n.set(s.key,h),o.isValidDocument()||o.convertToNoDocument(ft.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Et())}isEqual(e){return this.batchId===e.batchId&&Ec(this.mutations,e.mutations,((t,n)=>Gw(t,n)))&&Ec(this.baseMutations,e.baseMutations,((t,n)=>Gw(t,n)))}}class fx{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Lt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return b3})();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new fx(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr,kt;function U3(r){switch(r){case _e.OK:return ct(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return ct(15467,{code:r})}}function gb(r){if(r===void 0)return ga("GRPC error has no .code"),_e.UNKNOWN;switch(r){case Fr.OK:return _e.OK;case Fr.CANCELLED:return _e.CANCELLED;case Fr.UNKNOWN:return _e.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return _e.INTERNAL;case Fr.UNAVAILABLE:return _e.UNAVAILABLE;case Fr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Fr.NOT_FOUND:return _e.NOT_FOUND;case Fr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Fr.ABORTED:return _e.ABORTED;case Fr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Fr.DATA_LOSS:return _e.DATA_LOSS;default:return ct(39323,{code:r})}}(kt=Fr||(Fr={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new oo([4294967295,4294967295],0);function Yw(r){const e=V3().encode(r),t=new IE;return t.update(e),new Uint8Array(t.digest())}function Xw(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new oo([t,n],0),new oo([s,a],0)]}class mx{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Iu(`Invalid padding: ${t}`);if(n<0)throw new Iu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oo.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(oo.fromNumber(n)));return s.compare(B3)===1&&(s=new oo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Yw(e),[n,s]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);if(!this.we(o))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new mx(a,s,t);return n.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const t=Yw(e),[n,s]=Xw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,n,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,_d.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new N0(ft.min(),s,new vr(_t),xa(),Et())}}class _d{constructor(e,t,n,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new _d(n,t,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class xb{constructor(e,t){this.targetId=e,this.Ce=t}}class vb{constructor(e,t,n=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Qw{constructor(){this.ve=0,this.Fe=Jw(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Et(),t=Et(),n=Et();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:ct(38017,{changeType:a})}})),new _d(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Jw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class z3{constructor(e){this.Ge=e,this.ze=new Map,this.je=xa(),this.Je=Gh(),this.He=Gh(),this.Ye=new vr(_t)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ct(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(mg(a))if(n===0){const o=new rt(a.path);this.et(t,o,kn.newNoDocument(o,ft.min()))}else Lt(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const u=this.ut(e),h=u?this.ct(u,e,o):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=t;let o,u;try{o=mo(n).toUint8Array()}catch(h){if(h instanceof zE)return rl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new mx(o,s,a)}catch(h){return rl(h instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((a=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const u=this.ot(o);if(u){if(a.current&&mg(u.target)){const h=new rt(u.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,kn.newNoDocument(h,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let n=Et();this.He.forEach(((a,o)=>{let u=!0;o.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const s=new N0(e,t,this.Ye,this.je,n);return this.je=xa(),this.Je=Gh(),this.He=Gh(),this.Ye=new vr(_t),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Qw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xr(_t),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xr(_t),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new vr(rt.comparator)}function Jw(){return new vr(rt.comparator)}const $3={asc:"ASCENDING",desc:"DESCENDING"},W3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H3={and:"AND",or:"OR"};class G3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xg(r,e){return r.useProto3Json||x0(e)?e:{value:e}}function Lf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function q3(r,e){return Lf(r,e.toTimestamp())}function ji(r){return Lt(!!r,49232),ft.fromTimestamp((function(t){const n=fo(t);return new er(n.seconds,n.nanos)})(r))}function px(r,e){return vg(r,e).canonicalString()}function vg(r,e){const t=(function(s){return new Qt(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function wb(r){const e=Qt.fromString(r);return Lt(Sb(e),10190,{key:e.toString()}),e}function yg(r,e){return px(r.databaseId,e.path)}function Pp(r,e){const t=wb(e);if(t.get(1)!==r.databaseId.projectId)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new rt(Eb(t))}function _b(r,e){return px(r.databaseId,e)}function K3(r){const e=wb(r);return e.length===4?Qt.emptyPath():Eb(e)}function wg(r){return new Qt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Eb(r){return Lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Zw(r,e,t){return{name:yg(r,e),fields:t.value.mapValue.fields}}function Y3(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ct(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(Lt(p===void 0||typeof p=="string",58123),ln.fromBase64String(p||"")):(Lt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ln.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(f){const p=f.code===void 0?_e.UNKNOWN:gb(f.code);return new $e(p,f.message||"")})(o);t=new vb(n,s,a,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Pp(r,n.document.name),a=ji(n.document.updateTime),o=n.document.createTime?ji(n.document.createTime):ft.min(),u=new ss({mapValue:{fields:n.document.fields}}),h=kn.newFoundDocument(s,a,o,u),f=n.targetIds||[],p=n.removedTargetIds||[];t=new wf(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Pp(r,n.document),a=n.readTime?ji(n.readTime):ft.min(),o=kn.newNoDocument(s,a),u=n.removedTargetIds||[];t=new wf([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Pp(r,n.document),a=n.removedTargetIds||[];t=new wf([],a,s,null)}else{if(!("filter"in e))return ct(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new M3(s,a),u=n.targetId;t=new xb(u,o)}}return t}function X3(r,e){let t;if(e instanceof wd)t={update:Zw(r,e.key,e.value)};else if(e instanceof T0)t={delete:yg(r,e.key)};else if(e instanceof bo)t={update:Zw(r,e.key,e.data),updateMask:iP(e.fieldMask)};else{if(!(e instanceof D3))return ct(16599,{Vt:e.type});t={verify:yg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,o){const u=o.transform;if(u instanceof nd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Sc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Cc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ff)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ct(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:q3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ct(27497)})(r,e.precondition)),t}function Q3(r,e){return r&&r.length>0?(Lt(e!==void 0,14353),r.map((t=>(function(s,a){let o=s.updateTime?ji(s.updateTime):ji(a);return o.isEqual(ft.min())&&(o=ji(a)),new R3(o,s.transformResults||[])})(t,e)))):[]}function J3(r,e){return{documents:[_b(r,e.path)]}}function bb(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=_b(r,s);const a=(function(f){if(f.length!==0)return Nb(mi.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((p=>(function(v){return{field:Ja(v.field),direction:rP(v.dir)}})(p)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=xg(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function Z3(r,e,t,n){const{ft:s,parent:a}=bb(r,e),o={},u=[];let h=0;return t.forEach((f=>{const p="aggregate_"+h++;o[p]=f.alias,f.aggregateType==="count"?u.push({alias:p,count:{}}):f.aggregateType==="avg"?u.push({alias:p,avg:{field:Ja(f.fieldPath)}}):f.aggregateType==="sum"&&u.push({alias:p,sum:{field:Ja(f.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:a}}function eP(r){let e=K3(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Lt(n===1,65062);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(x){const v=Tb(x);return v instanceof mi&&JE(v)?v.getFilters():[v]})(t.where));let o=[];t.orderBy&&(o=(function(x){return x.map((v=>(function(N){return new rd(lc(N.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(x){let v;return v=typeof x=="object"?x.value:x,x0(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(x){const v=!!x.before,w=x.values||[];return new Of(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(x){const v=!x.before,w=x.values||[];return new Of(w,v)})(t.endAt)),v3(e,s,o,a,u,"F",h,f)}function tP(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tb(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=lc(t.unaryFilter.field);return Ur.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=lc(t.unaryFilter.field);return Ur.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=lc(t.unaryFilter.field);return Ur.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lc(t.unaryFilter.field);return Ur.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ur.create(lc(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return mi.create(t.compositeFilter.filters.map((n=>Tb(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ct(1026)}})(t.compositeFilter.op))})(r):ct(30097,{filter:r})}function rP(r){return $3[r]}function nP(r){return W3[r]}function sP(r){return H3[r]}function Ja(r){return{fieldPath:r.canonicalString()}}function lc(r){return rn.fromServerFormat(r.fieldPath)}function Nb(r){return r instanceof Ur?(function(t){if(t.op==="=="){if(Vw(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NAN"}};if(Uw(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vw(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NAN"}};if(Uw(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(t.field),op:nP(t.op),value:t.value}}})(r):r instanceof mi?(function(t){const n=t.getFilters().map((s=>Nb(s)));return n.length===1?n[0]:{compositeFilter:{op:sP(t.op),filters:n}}})(r):ct(54877,{filter:r})}function iP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Sb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,n,s,a=ft.min(),o=ft.min(),u=ln.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.yt=e}}function oP(r){const e=eP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.Cn=new cP}addToCollectionParentIndex(e,t){return this.Cn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(ho.min())}updateCollectionGroup(e,t,n){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class cP{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Xr(Qt.comparator),a=!s.has(n);return this.index[t]=s.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Xr(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cb=41943040;class ns{static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(Cb,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ac(0)}static cr(){return new Ac(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LruGarbageCollector",uP=1048576;function r_([r,e],[t,n]){const s=_t(r,t);return s===0?_t(e,n):s}class dP{constructor(e){this.Ir=e,this.buffer=new Xr(r_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();r_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hP{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ke(t_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lc(t)?Ke(t_,"Ignoring IndexedDB error during garbage collection: ",t):await Fc(t)}await this.Vr(3e5)}))}}class fP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(g0.ce);const n=new dP(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(e_)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,a,o,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,o=Date.now(),this.nthSequenceNumber(e,s)))).next((x=>(n=x,u=Date.now(),this.removeTargets(e,n,t)))).next((x=>(a=x,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((x=>(f=Date.now(),ac()<=wt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${x} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:x}))))}}function mP(r,e){return new fP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.changes=new fl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?be.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Uu(n.mutation,s,Ts.empty(),er.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Et()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Et()){const s=Xo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((a=>{let o=Au();return a.forEach(((u,h)=>{o=o.insert(u,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const n=Xo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Et())))}populateOverlays(e,t,n){const s=[];return n.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((o,u)=>{t.set(o,u)}))}))}computeViews(e,t,n,s){let a=xa();const o=Mu(),u=(function(){return Mu()})();return t.forEach(((h,f)=>{const p=n.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof bo)?a=a.insert(f.key,f):p!==void 0?(o.set(f.key,p.mutation.getFieldMask()),Uu(p.mutation,f,p.mutation.getFieldMask(),er.now())):o.set(f.key,Ts.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,p)=>o.set(f,p))),t.forEach(((f,p)=>u.set(f,new gP(p,o.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Mu();let s=new vr(((o,u)=>o-u)),a=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const u of o)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=n.get(h)||Ts.empty();p=u.applyToLocalView(f,p),n.set(h,p);const x=(s.get(u.batchId)||Et()).add(h);s=s.insert(u.batchId,x)}))})).next((()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,x=lb();p.forEach((v=>{if(!a.has(v)){const w=mb(t.get(v),n.get(v));w!==null&&x.set(v,w),a=a.add(v)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,x))}return be.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(o){return rt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-a.size):be.resolve(Xo());let u=Zu,h=a;return o.next((f=>be.forEach(f,((p,x)=>(u<x.largestBatchId&&(u=x.largestBatchId),a.get(p)?be.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,Et()))).next((p=>({batchId:u,changes:ob(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next((n=>{let s=Au();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const a=t.collectionGroup;let o=Au();return this.indexManager.getCollectionParents(e,a).next((u=>be.forEach(u,(h=>{const f=(function(x,v){return new hl(v,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((p=>{p.forEach(((x,v)=>{o=o.insert(x,v)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,s)))).next((o=>{a.forEach(((h,f)=>{const p=f.getKey();o.get(p)===null&&(o=o.insert(p,kn.newInvalidDocument(p)))}));let u=Au();return o.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&Uu(p.mutation,f,Ts.empty(),er.now()),_0(t,f)&&(u=u.insert(h,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return be.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ji(s.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:oP(s.bundledQuery),readTime:ji(s.readTime)}})(t)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.overlays=new vr(rt.comparator),this.qr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xo();return be.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,a)=>{this.St(e,t,a)})),be.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),be.resolve()}getOverlaysForCollection(e,t,n){const s=Xo(),a=t.length+1,o=new rt(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>n&&s.set(h.getKey(),h)}return be.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let a=new vr(((f,p)=>f-p));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let p=a.get(f.largestBatchId);p===null&&(p=Xo(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Xo(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=s)););return be.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new F3(t,n));let a=this.qr.get(t);a===void 0&&(a=Et(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.Qr=new Xr(tn.$r),this.Ur=new Xr(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new tn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new tn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new rt(new Qt([])),n=new tn(t,e),s=new tn(t,e+1),a=[];return this.Ur.forEachInRange([n,s],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new rt(new Qt([])),n=new tn(t,e),s=new tn(t,e+1);let a=Et();return this.Ur.forEachInRange([n,s],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new tn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return rt.comparator(e.key,t.key)||_t(e.Yr,t.Yr)}static Kr(e,t){return _t(e.Yr,t.Yr)||rt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xr(tn.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O3(a,t,n,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new tn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return be.resolve(o)}lookupMutationBatch(e,t){return be.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),a=s<0?0:s;return be.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?ax:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tn(t,0),s=new tn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],(o=>{const u=this.Xr(o.Yr);a.push(u)})),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xr(_t);return t.forEach((s=>{const a=new tn(s,0),o=new tn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(u=>{n=n.add(u.Yr)}))})),be.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let a=n;rt.isDocumentKey(a)||(a=a.child(""));const o=new tn(new rt(a),0);let u=new Xr(_t);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Yr)),!0)}),o),be.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return be.forEach(t.mutations,(s=>{const a=new tn(s.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new tn(t,0),s=this.Zr.firstAfterOrEqual(n);return be.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.ri=e,this.docs=(function(){return new vr(rt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),a=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return be.resolve(n?n.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let n=xa();return t.forEach((s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():kn.newInvalidDocument(s))})),be.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let a=xa();const o=t.path,u=new rt(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||YR(KR(p),n)<=0||(s.has(p.key)||_0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return be.resolve(a)}getAllFromCollectionGroup(e,t,n,s){ct(9500)}ii(e,t){return be.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new bP(this)}getSize(e){return be.resolve(this.size)}}class bP extends pP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),be.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.persistence=e,this.si=new fl((t=>cx(t)),ux),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new gx,this.targetCount=0,this.ai=Ac.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),be.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ac(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Pr(t),be.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,n){let s=0;const a=[];return this.si.forEach(((o,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),be.waitFor(a).next((()=>s))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return be.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),be.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((o=>{a.push(s.markPotentiallyOrphaned(e,o))})),be.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return be.resolve(n)}containsKey(e,t){return be.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t){this.ui={},this.overlays={},this.ci=new g0(0),this.li=!1,this.li=!0,this.hi=new wP,this.referenceDelegate=e(this),this.Pi=new TP(this),this.indexManager=new lP,this.remoteDocumentCache=(function(s){return new EP(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new aP(t),this.Ii=new vP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new _P(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ke("MemoryPersistence","Starting transaction:",e);const s=new NP(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,t){return be.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class NP extends QR{constructor(e){super(),this.currentSequenceNumber=e}}class xx{constructor(e){this.persistence=e,this.Ri=new gx,this.Vi=null}static mi(e){return new xx(e)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),be.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(n=>{const s=rt.fromPath(n);return this.gi(e,s).next((a=>{a||t.removeEntry(s,ft.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mf{constructor(e,t){this.persistence=e,this.pi=new fl((n=>e3(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=mP(this,t)}static mi(e,t){return new Mf(e,t)}Ei(){}di(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return be.forEach(this.pi,((n,s)=>this.br(e,n,s).next((a=>a?be.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((u=>{u||(n++,a.removeEntry(o,ft.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,n){return be.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return be.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Et(),s=Et();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new vx(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eA()?8:JR(Dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,s,n).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new SP;return this.Ss(e,t,o).next((u=>{if(a.result=u,this.Vs)return this.bs(e,t,o,u.size)}))})).next((()=>a.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(ac()<=wt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",oc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(ac()<=wt.DEBUG&&Ke("QueryEngine","Query:",oc(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ac()<=wt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",oc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):be.resolve())}ys(e,t){if(Ww(t))return be.resolve(null);let n=Pi(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=gg(t,null,"F"),n=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const o=Et(...a);return this.ps.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,n).next((h=>{const f=this.Ds(t,u);return this.Cs(t,f,o,h.readTime)?this.ys(e,gg(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,n,s){return Ww(t)||s.isEqual(ft.min())?be.resolve(null):this.ps.getDocuments(e,n).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,n,s)?be.resolve(null):(ac()<=wt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oc(t)),this.vs(e,o,t,qR(s,Zu)).next((u=>u)))}))}Ds(e,t){let n=new Xr(ib(e));return t.forEach(((s,a)=>{_0(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,n){return ac()<=wt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",oc(t)),this.ps.getDocumentsMatchingQuery(e,t,ho.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="LocalStore",AP=3e8;class IP{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new vr(_t),this.xs=new fl((a=>cx(a)),ux),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kP(r,e,t,n){return new IP(r,e,t,n)}async function Ib(r,e){const t=ht(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const o=[],u=[];let h=Et();for(const f of s){o.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(n,h).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:u})))}))}))}function RP(r,e){const t=ht(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const x=f.batch,v=x.keys();let w=be.resolve();return v.forEach((N=>{w=w.next((()=>p.getEntry(h,N))).next((_=>{const T=f.docVersions.get(N);Lt(T!==null,48541),_.version.compareTo(T)<0&&(x.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),p.addEntry(_)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(h,x)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let h=Et();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function kb(r){const e=ht(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function PP(r,e){const t=ht(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((p,x)=>{const v=s.get(x);if(!v)return;u.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,x))));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?w=w.withResumeToken(ln.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,n)),s=s.insert(x,w),(function(_,T,D){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=AP?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(v,w,p)&&u.push(t.Pi.updateTargetData(a,w))}));let h=xa(),f=Et();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),u.push(jP(a,o,e.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!n.isEqual(ft.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((x=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(p)}return be.waitFor(u).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(t.Ms=s,a)))}function jP(r,e,t){let n=Et(),s=Et();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let o=xa();return t.forEach(((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ft.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):Ke(yx,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{ks:o,qs:s}}))}function DP(r,e){const t=ht(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=ax),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function OP(r,e){const t=ht(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((a=>a?(s=a,be.resolve(s)):t.Pi.allocateTargetId(n).next((o=>(s=new to(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function _g(r,e,t){const n=ht(r),s=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(o=>n.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Lc(o))throw o;Ke(yx,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function n_(r,e,t){const n=ht(r);let s=ft.min(),a=Et();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,f,p){const x=ht(h),v=x.xs.get(p);return v!==void 0?be.resolve(x.Ms.get(v)):x.Pi.getTargetData(f,p)})(n,o,Pi(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,u.targetId).next((h=>{a=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(o,e,t?s:ft.min(),t?a:Et()))).next((u=>(FP(n,w3(e),u),{documents:u,Qs:a})))))}function FP(r,e,t){let n=r.Os.get(e)||ft.min();t.forEach(((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.Os.set(e,n)}class s_{constructor(){this.activeTargetIds=S3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LP{constructor(){this.Mo=new s_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new s_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="ConnectivityMonitor";class a_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(i_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ke(i_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function Eg(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",UP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===jf?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,a){const o=Eg(),u=this.zo(e,t.toUriEncodedString());Ke(jp,`Sending RPC '${e}' ${o}:`,u,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:f}=new URL(u),p=Fi(f);return this.Jo(e,u,h,n,p).then((x=>(Ke(jp,`Received RPC '${e}' ${o}: `,x),x)),(x=>{throw rl(jp,`RPC '${e}' ${o} failed with error: `,x,"url: ",u,"request:",n),x}))}Ho(e,t,n,s,a,o){return this.Go(e,t,n,s,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),n&&n.headers.forEach(((s,a)=>e[a]=s))}zo(e,t){const n=UP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class zP extends VP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,a){const o=Eg();return new Promise(((u,h)=>{const f=new kE;f.setWithCredentials(!0),f.listenOnce(RE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case gf.NO_ERROR:const x=f.getResponseJson();Ke(An,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(x)),u(x);break;case gf.TIMEOUT:Ke(An,`RPC '${e}' ${o} timed out`),h(new $e(_e.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const v=f.getStatus();if(Ke(An,`RPC '${e}' ${o} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const _=(function(D){const U=D.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN})(N.status);h(new $e(_,N.message))}else h(new $e(_e.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new $e(_e.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ke(An,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(s);Ke(An,`RPC '${e}' ${o} sending request:`,s),f.send(t,"POST",p,n,15)}))}T_(e,t,n){const s=Eg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DE(),u=jE(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const p=a.join("");Ke(An,`Creating RPC '${e}' stream ${s}: ${p}`,h);const x=o.createWebChannel(p,h);this.I_(x);let v=!1,w=!1;const N=new BP({Yo:T=>{w?Ke(An,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(v||(Ke(An,`Opening RPC '${e}' stream ${s} transport.`),x.open(),v=!0),Ke(An,`RPC '${e}' stream ${s} sending:`,T),x.send(T))},Zo:()=>x.close()}),_=(T,D,U)=>{T.listen(D,(k=>{try{U(k)}catch(F){setTimeout((()=>{throw F}),0)}}))};return _(x,Cu.EventType.OPEN,(()=>{w||(Ke(An,`RPC '${e}' stream ${s} transport opened.`),N.o_())})),_(x,Cu.EventType.CLOSE,(()=>{w||(w=!0,Ke(An,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(x))})),_(x,Cu.EventType.ERROR,(T=>{w||(w=!0,rl(An,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),N.a_(new $e(_e.UNAVAILABLE,"The operation could not be completed")))})),_(x,Cu.EventType.MESSAGE,(T=>{var D;if(!w){const U=T.data[0];Lt(!!U,16349);const k=U,F=(k==null?void 0:k.error)||((D=k[0])==null?void 0:D.error);if(F){Ke(An,`RPC '${e}' stream ${s} received error:`,F);const J=F.status;let ee=(function(A){const j=Fr[A];if(j!==void 0)return gb(j)})(J),S=F.message;ee===void 0&&(ee=_e.INTERNAL,S="Unknown error status: "+J+" with message "+F.message),w=!0,N.a_(new $e(ee,S)),x.close()}else Ke(An,`RPC '${e}' stream ${s} received:`,U),N.u_(U)}})),_(u,PE.STAT_EVENT,(T=>{T.stat===cg.PROXY?Ke(An,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===cg.NOPROXY&&Ke(An,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(r){return new G3(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&Ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="PersistentStream";class Pb{constructor(e,t,n,s,a,o,u,h){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(ga(t.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new $e(_e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ke(o_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ke(o_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $P extends Pb{constructor(e,t,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Y3(this.serializer,e),n=(function(a){if(!("targetChange"in a))return ft.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ft.min():o.readTime?ji(o.readTime):ft.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=wg(this.serializer),t.addTarget=(function(a,o){let u;const h=o.target;if(u=mg(h)?{documents:J3(a,h)}:{query:bb(a,h).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=yb(a,o.resumeToken);const f=xg(a,o.expectedCount);f!==null&&(u.expectedCount=f)}else if(o.snapshotVersion.compareTo(ft.min())>0){u.readTime=Lf(a,o.snapshotVersion.toTimestamp());const f=xg(a,o.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=tP(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=wg(this.serializer),t.removeTarget=e,this.q_(t)}}class WP extends Pb{constructor(e,t,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Q3(e.writeResults,e.commitTime),n=ji(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=wg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>X3(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{}class GP extends HP{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,vg(t,n),s,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $e(_e.UNKNOWN,a.toString())}))}Ho(e,t,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Ho(e,vg(t,n),s,o,u,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $e(_e.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ga(t),this.aa=!1):Ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class KP{constructor(e,t,n,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{n.enqueueAndForget((async()=>{ml(this)&&(Ke(nl,"Restarting streams for network reachability change."),await(async function(h){const f=ht(h);f.Ea.add(4),await Ed(f),f.Ra.set("Unknown"),f.Ea.delete(4),await C0(f)})(this))}))})),this.Ra=new qP(n,s)}}async function C0(r){if(ml(r))for(const e of r.da)await e(!0)}async function Ed(r){for(const e of r.da)await e(!1)}function jb(r,e){const t=ht(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),bx(t)?Ex(t):Mc(t).O_()&&_x(t,e))}function wx(r,e){const t=ht(r),n=Mc(t);t.Ia.delete(e),n.O_()&&Db(t,e),t.Ia.size===0&&(n.O_()?n.L_():ml(t)&&t.Ra.set("Unknown"))}function _x(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mc(r).Y_(e)}function Db(r,e){r.Va.Ue(e),Mc(r).Z_(e)}function Ex(r){r.Va=new z3({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Mc(r).start(),r.Ra.ua()}function bx(r){return ml(r)&&!Mc(r).x_()&&r.Ia.size>0}function ml(r){return ht(r).Ea.size===0}function Ob(r){r.Va=void 0}async function YP(r){r.Ra.set("Online")}async function XP(r){r.Ia.forEach(((e,t)=>{_x(r,e)}))}async function QP(r,e){Ob(r),bx(r)?(r.Ra.ha(e),Ex(r)):r.Ra.set("Unknown")}async function JP(r,e,t){if(r.Ra.set("Online"),e instanceof vb&&e.state===2&&e.cause)try{await(async function(s,a){const o=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){Ke(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Uf(r,n)}else if(e instanceof wf?r.Va.Ze(e):e instanceof xb?r.Va.st(e):r.Va.tt(e),!t.isEqual(ft.min()))try{const n=await kb(r.localStore);t.compareTo(n)>=0&&await(function(a,o){const u=a.Va.Tt(o);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,o))}})),u.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),Db(a,h);const x=new to(p.target,h,f,p.sequenceNumber);_x(a,x)})),a.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){Ke(nl,"Failed to raise snapshot:",n),await Uf(r,n)}}async function Uf(r,e,t){if(!Lc(e))throw e;r.Ea.add(1),await Ed(r),r.Ra.set("Offline"),t||(t=()=>kb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ke(nl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await C0(r)}))}function Fb(r,e){return e().catch((t=>Uf(r,t,e)))}async function A0(r){const e=ht(r),t=go(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ax;for(;ZP(e);)try{const s=await DP(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,ej(e,s)}catch(s){await Uf(e,s)}Lb(e)&&Mb(e)}function ZP(r){return ml(r)&&r.Ta.length<10}function ej(r,e){r.Ta.push(e);const t=go(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Lb(r){return ml(r)&&!go(r).x_()&&r.Ta.length>0}function Mb(r){go(r).start()}async function tj(r){go(r).ra()}async function rj(r){const e=go(r);for(const t of r.Ta)e.ea(t.mutations)}async function nj(r,e,t){const n=r.Ta.shift(),s=fx.from(n,e,t);await Fb(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await A0(r)}async function sj(r,e){e&&go(r).X_&&await(async function(n,s){if((function(o){return U3(o)&&o!==_e.ABORTED})(s.code)){const a=n.Ta.shift();go(n).B_(),await Fb(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s))),await A0(n)}})(r,e),Lb(r)&&Mb(r)}async function l_(r,e){const t=ht(r);t.asyncQueue.verifyOperationInProgress(),Ke(nl,"RemoteStore received new credentials");const n=ml(t);t.Ea.add(3),await Ed(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await C0(t)}async function ij(r,e){const t=ht(r);e?(t.Ea.delete(2),await C0(t)):e||(t.Ea.add(2),await Ed(t),t.Ra.set("Unknown"))}function Mc(r){return r.ma||(r.ma=(function(t,n,s){const a=ht(t);return a.sa(),new $P(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(r.datastore,r.asyncQueue,{Xo:YP.bind(null,r),t_:XP.bind(null,r),r_:QP.bind(null,r),H_:JP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),bx(r)?Ex(r):r.Ra.set("Unknown")):(await r.ma.stop(),Ob(r))}))),r.ma}function go(r){return r.fa||(r.fa=(function(t,n,s){const a=ht(t);return a.sa(),new WP(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:tj.bind(null,r),r_:sj.bind(null,r),ta:rj.bind(null,r),na:nj.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await A0(r)):(await r.fa.stop(),r.Ta.length>0&&(Ke(nl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,n,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,a){const o=Date.now()+n,u=new Tx(e,t,o,s,a);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nx(r,e){if(ga("AsyncQueue",`${e}: ${r}`),Lc(r))return new $e(_e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static emptySet(e){return new gc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||rt.comparator(t.key,n.key):(t,n)=>rt.comparator(t.key,n.key),this.keyedMap=Au(),this.sortedSet=new vr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new gc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.ga=new vr(rt.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ct(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ic{constructor(e,t,n,s,a,o,u,h,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,a){const o=[];return t.forEach((u=>{o.push({type:0,doc:u})})),new Ic(e,t,gc.emptySet(t),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oj{constructor(){this.queries=u_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=ht(t),a=s.queries;s.queries=u_(),a.forEach(((o,u)=>{for(const h of u.Sa)h.onError(n)}))})(this,new $e(_e.ABORTED,"Firestore shutting down"))}}function u_(){return new fl((r=>sb(r)),w0)}async function Sx(r,e){const t=ht(r);let n=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new aj,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const u=Nx(o,`Initialization of query '${oc(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Ax(t)}async function Cx(r,e){const t=ht(r),n=e.query;let s=3;const a=t.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function lj(r,e){const t=ht(r);let n=!1;for(const s of e){const a=s.query,o=t.queries.get(a);if(o){for(const u of o.Sa)u.Fa(s)&&(n=!0);o.wa=s}}n&&Ax(t)}function cj(r,e,t){const n=ht(r),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);n.queries.delete(e)}function Ax(r){r.Ca.forEach((e=>{e.next()}))}var bg,d_;(d_=bg||(bg={})).Ma="default",d_.Cache="cache";class Ix{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ic(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.key=e}}class Vb{constructor(e){this.key=e}}class uj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Et(),this.mutatedKeys=Et(),this.eu=ib(e),this.tu=new gc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new c_,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,x)=>{const v=s.get(p),w=_0(this.query,x)?x:null,N=!!v&&this.mutatedKeys.has(v.key),_=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;v&&w?v.data.isEqual(w.data)?N!==_&&(n.track({type:3,doc:w}),T=!0):this.su(v,w)||(n.track({type:2,doc:w}),T=!0,(h&&this.eu(w,h)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),T=!0):v&&!w&&(n.track({type:1,doc:v}),T=!0,(h||f)&&(u=!0)),T&&(w?(o=o.add(w),a=_?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),n.track({type:1,doc:p})}return{tu:o,iu:n,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((p,x)=>(function(w,N){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:T})}};return _(w)-_(N)})(p.type,x.type)||this.eu(p.doc,x.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,o.length!==0||f?{snapshot:new Ic(this.query,e.tu,a,o,e.mutatedKeys,h===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Et(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Vb(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Ub(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kx="SyncEngine";class dj{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hj{constructor(e){this.key=e,this.hu=!1}}class fj{constructor(e,t,n,s,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new fl((u=>sb(u)),w0),this.Iu=new Map,this.Eu=new Set,this.du=new vr(rt.comparator),this.Au=new Map,this.Ru=new gx,this.Vu={},this.mu=new Map,this.fu=Ac.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mj(r,e,t=!0){const n=Gb(r);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Bb(n,e,t,!0),s}async function pj(r,e){const t=Gb(r);await Bb(t,e,!0,!1)}async function Bb(r,e,t,n){const s=await OP(r.localStore,Pi(e)),a=s.targetId,o=r.sharedClientState.addLocalQueryTarget(a,t);let u;return n&&(u=await gj(r,e,a,o==="current",s.resumeToken)),r.isPrimaryClient&&t&&jb(r.remoteStore,s),u}async function gj(r,e,t,n,s){r.pu=(x,v,w)=>(async function(_,T,D,U){let k=T.view.ru(D);k.Cs&&(k=await n_(_.localStore,T.query,!1).then((({documents:S})=>T.view.ru(S,k))));const F=U&&U.targetChanges.get(T.targetId),J=U&&U.targetMismatches.get(T.targetId)!=null,ee=T.view.applyChanges(k,_.isPrimaryClient,F,J);return f_(_,T.targetId,ee.au),ee.snapshot})(r,x,v,w);const a=await n_(r.localStore,e,!0),o=new uj(e,a.Qs),u=o.ru(a.documents),h=_d.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=o.applyChanges(u,r.isPrimaryClient,h);f_(r,t,f.au);const p=new dj(e,t,o);return r.Tu.set(e,p),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function xj(r,e,t){const n=ht(r),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter((o=>!w0(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await _g(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&wx(n.remoteStore,s.targetId),Tg(n,s.targetId)})).catch(Fc)):(Tg(n,s.targetId),await _g(n.localStore,s.targetId,!0))}async function vj(r,e){const t=ht(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),wx(t.remoteStore,n.targetId))}async function yj(r,e,t){const n=Sj(r);try{const s=await(function(o,u){const h=ht(o),f=er.now(),p=u.reduce(((w,N)=>w.add(N.key)),Et());let x,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=xa(),_=Et();return h.Ns.getEntries(w,p).next((T=>{N=T,N.forEach(((D,U)=>{U.isValidDocument()||(_=_.add(D))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,N))).next((T=>{x=T;const D=[];for(const U of u){const k=j3(U,x.get(U.key).overlayedDocument);k!=null&&D.push(new bo(U.key,k,YE(k.value.mapValue),Wn.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,D,u)})).next((T=>{v=T;const D=T.applyToLocalDocumentSet(x,_);return h.documentOverlayCache.saveOverlays(w,T.batchId,D)}))})).then((()=>({batchId:v.batchId,changes:ob(x)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(o,u,h){let f=o.Vu[o.currentUser.toKey()];f||(f=new vr(_t)),f=f.insert(u,h),o.Vu[o.currentUser.toKey()]=f})(n,s.batchId,t),await bd(n,s.changes),await A0(n.remoteStore)}catch(s){const a=Nx(s,"Failed to persist write");t.reject(a)}}async function zb(r,e){const t=ht(r);try{const n=await PP(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const o=t.Au.get(a);o&&(Lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Lt(o.hu,14607):s.removedDocuments.size>0&&(Lt(o.hu,42227),o.hu=!1))})),await bd(t,n,e)}catch(n){await Fc(n)}}function h_(r,e,t){const n=ht(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((a,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(o,u){const h=ht(o);h.onlineState=u;let f=!1;h.queries.forEach(((p,x)=>{for(const v of x.Sa)v.va(u)&&(f=!0)})),f&&Ax(h)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function wj(r,e,t){const n=ht(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),a=s&&s.key;if(a){let o=new vr(rt.comparator);o=o.insert(a,kn.newNoDocument(a,ft.min()));const u=Et().add(a),h=new N0(ft.min(),new Map,new vr(_t),o,u);await zb(n,h),n.du=n.du.remove(a),n.Au.delete(e),Rx(n)}else await _g(n.localStore,e,!1).then((()=>Tg(n,e,t))).catch(Fc)}async function _j(r,e){const t=ht(r),n=e.batch.batchId;try{const s=await RP(t.localStore,e);Wb(t,n,null),$b(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await bd(t,s)}catch(s){await Fc(s)}}async function Ej(r,e,t){const n=ht(r);try{const s=await(function(o,u){const h=ht(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((x=>(Lt(x!==null,37113),p=x.keys(),h.mutationQueue.removeMutationBatch(f,x)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(n.localStore,e);Wb(n,e,t),$b(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await bd(n,s)}catch(s){await Fc(s)}}function $b(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Wb(r,e,t){const n=ht(r);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Tg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||Hb(r,n)}))}function Hb(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(wx(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Rx(r))}function f_(r,e,t){for(const n of t)n instanceof Ub?(r.Ru.addReference(n.key,e),bj(r,n)):n instanceof Vb?(Ke(kx,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||Hb(r,n.key)):ct(19791,{wu:n})}function bj(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Ke(kx,"New document in limbo: "+t),r.Eu.add(n),Rx(r))}function Rx(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new rt(Qt.fromString(e)),n=r.fu.next();r.Au.set(n,new hj(t)),r.du=r.du.insert(t,n),jb(r.remoteStore,new to(Pi(y0(t.path)),n,"TargetPurposeLimboResolution",g0.ce))}}async function bd(r,e,t){const n=ht(r),s=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,h)=>{o.push(n.pu(h,e,t).then((f=>{var p;if((f||t)&&n.isPrimaryClient){const x=f?!f.fromCache:(p=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:p.current;n.sharedClientState.updateQueryState(h.targetId,x?"current":"not-current")}if(f){s.push(f);const x=vx.As(h.targetId,f);a.push(x)}})))})),await Promise.all(o),n.Pu.H_(s),await(async function(h,f){const p=ht(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>be.forEach(f,(v=>be.forEach(v.Es,(w=>p.persistence.referenceDelegate.addReference(x,v.targetId,w))).next((()=>be.forEach(v.ds,(w=>p.persistence.referenceDelegate.removeReference(x,v.targetId,w)))))))))}catch(x){if(!Lc(x))throw x;Ke(yx,"Failed to update sequence numbers: "+x)}for(const x of f){const v=x.targetId;if(!x.fromCache){const w=p.Ms.get(v),N=w.snapshotVersion,_=w.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(v,_)}}})(n.localStore,a))}async function Tj(r,e){const t=ht(r);if(!t.currentUser.isEqual(e)){Ke(kx,"User change. New user:",e.toKey());const n=await Ib(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((u=>{u.forEach((h=>{h.reject(new $e(_e.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await bd(t,n.Ls)}}function Nj(r,e){const t=ht(r),n=t.Au.get(e);if(n&&n.hu)return Et().add(n.key);{let s=Et();const a=t.Iu.get(e);if(!a)return s;for(const o of a){const u=t.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function Gb(r){const e=ht(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wj.bind(null,e),e.Pu.H_=lj.bind(null,e.eventManager),e.Pu.yu=cj.bind(null,e.eventManager),e}function Sj(r){const e=ht(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_j.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ej.bind(null,e),e}class Vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=S0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kP(this.persistence,new CP,e.initialUser,this.serializer)}Cu(e){return new Ab(xx.mi,this.serializer)}Du(e){return new LP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vf.provider={build:()=>new Vf};class Cj extends Vf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Lt(this.persistence.referenceDelegate instanceof Mf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new hP(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new Ab((n=>Mf.mi(n,t)),this.serializer)}}class Ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>h_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tj.bind(null,this.syncEngine),await ij(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oj})()}createDatastore(e){const t=S0(e.databaseInfo.databaseId),n=(function(a){return new zP(a)})(e.databaseInfo);return(function(a,o,u,h){return new GP(a,o,u,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,a,o,u){return new KP(n,s,a,o,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>h_(this.syncEngine,t,0)),(function(){return a_.v()?new a_:new MP})())}createSyncEngine(e,t){return(function(s,a,o,u,h,f,p){const x=new fj(s,a,o,u,h,f);return p&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ht(s);Ke(nl,"RemoteStore shutting down."),a.Ea.add(5),await Ed(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ng.provider={build:()=>new Ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ga("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="FirestoreClient";class Aj{constructor(e,t,n,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=m0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async o=>{Ke(xo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Ke(xo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Nx(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Op(r,e){r.asyncQueue.verifyOperationInProgress(),Ke(xo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await Ib(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function m_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Ij(r);Ke(xo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>l_(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>l_(e.remoteStore,s))),r._onlineComponents=e}async function Ij(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ke(xo,"Using user provided OfflineComponentProvider");try{await Op(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;rl("Error using user provided cache. Falling back to memory cache: "+t),await Op(r,new Vf)}}else Ke(xo,"Using default OfflineComponentProvider"),await Op(r,new Cj(void 0));return r._offlineComponents}async function jx(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ke(xo,"Using user provided OnlineComponentProvider"),await m_(r,r._uninitializedComponentsProvider._online)):(Ke(xo,"Using default OnlineComponentProvider"),await m_(r,new Ng))),r._onlineComponents}function kj(r){return jx(r).then((e=>e.syncEngine))}function Rj(r){return jx(r).then((e=>e.datastore))}async function Bf(r){const e=await jx(r),t=e.eventManager;return t.onListen=mj.bind(null,e.syncEngine),t.onUnlisten=xj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vj.bind(null,e.syncEngine),t}function Pj(r,e,t={}){const n=new Ri;return r.asyncQueue.enqueueAndForget((async()=>(function(a,o,u,h,f){const p=new Px({next:v=>{p.Nu(),o.enqueueAndForget((()=>Cx(a,x)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new $e(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new $e(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new Ix(y0(u.path),p,{includeMetadataChanges:!0,qa:!0});return Sx(a,x)})(await Bf(r),r.asyncQueue,e,t,n))),n.promise}function jj(r,e,t={}){const n=new Ri;return r.asyncQueue.enqueueAndForget((async()=>(function(a,o,u,h,f){const p=new Px({next:v=>{p.Nu(),o.enqueueAndForget((()=>Cx(a,x))),v.fromCache&&h.source==="server"?f.reject(new $e(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new Ix(u,p,{includeMetadataChanges:!0,qa:!0});return Sx(a,x)})(await Bf(r),r.asyncQueue,e,t,n))),n.promise}function Dj(r,e,t){const n=new Ri;return r.asyncQueue.enqueueAndForget((async()=>{try{const s=await Rj(r);n.resolve((async function(o,u,h){var _;const f=ht(o),{request:p,gt:x,parent:v}=Z3(f.serializer,y3(u),h);f.connection.$o||delete p.parent;const w=(await f.Ho("RunAggregationQuery",f.serializer.databaseId,v,p,1)).filter((T=>!!T.result));Lt(w.length===1,64727);const N=(_=w[0].result)==null?void 0:_.aggregateFields;return Object.keys(N).reduce(((T,D)=>(T[x[D]]=N[D],T)),{})})(s,e,t))}catch(s){n.reject(s)}})),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firestore.googleapis.com",g_=!0;class x_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $e(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kb,this.ssl=g_}else this.host=e.host,this.ssl=e.ssl??g_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uP)throw new $e(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ME("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qb(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new LE;switch(n.type){case"firstParty":return new BR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $e(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=p_.get(t);n&&(Ke("ComponentProvider","Removing Datastore"),p_.delete(t),n.terminate())})(this),Promise.resolve()}}function Yb(r,e,t,n={}){var f;r=on(r,Td);const s=Fi(e),a=r._getSettings(),o={...a,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(l0(`https://${u}`),c0("Firestore",!0)),a.host!==Kb&&a.host!==u&&rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:u,ssl:s,emulatorOptions:n};if(!ha(h,o)&&(r._setSettings(h),n.mockUserToken)){let p,x;if(typeof n.mockUserToken=="string")p=n.mockUserToken,x=In.MOCK_USER;else{p=z2(n.mockUserToken,(f=r._app)==null?void 0:f.options.projectId);const v=n.mockUserToken.sub||n.mockUserToken.user_id;if(!v)throw new $e(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new In(v)}r._authCredentials=new MR(new FE(p,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class xr{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xr(this.firestore,e,this._key)}toJSON(){return{type:xr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(yd(t,xr._jsonSchema))return new xr(e,n||null,new rt(Qt.fromString(t.referencePath)))}}xr._jsonSchemaVersion="firestore/documentReference/1.0",xr._jsonSchema={type:Br("string",xr._jsonSchemaVersion),referencePath:Br("string")};class la extends Vi{constructor(e,t,n){super(e,t,y0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xr(this.firestore,null,new rt(e))}withConverter(e){return new la(this.firestore,e,this._path)}}function nt(r,e,...t){if(r=Ut(r),ix("collection","path",e),r instanceof Td){const n=Qt.fromString(e,...t);return kw(n),new la(r,null,n)}{if(!(r instanceof xr||r instanceof la))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return kw(n),new la(r.firestore,null,n)}}function Dx(r,e){if(r=on(r,Td),ix("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(r,null,(function(n){return new hl(Qt.emptyPath(),n)})(e))}function lt(r,e,...t){if(r=Ut(r),arguments.length===1&&(e=m0.newId()),ix("doc","path",e),r instanceof Td){const n=Qt.fromString(e,...t);return Iw(n),new xr(r,null,new rt(n))}{if(!(r instanceof xr||r instanceof la))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return Iw(n),new xr(r.firestore,r instanceof la?r.converter:null,new rt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rb(this,"async_queue_retry"),this._c=()=>{const n=Dp();n&&Ke(v_,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lc(e))throw e;Ke(v_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ga("INTERNAL UNHANDLED ERROR: ",w_(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Tx.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&ct(47125,{Pc:w_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function w_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1})(r,["next","error","complete"])}class Bs extends Td{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new y_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function Xb(r,e){const t=typeof r=="object"?r:u0(),n=typeof r=="string"?r:jf,s=md(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=zg("firestore");a&&Yb(s,...a)}return s}function pl(r){if(r._terminated)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Oj(r),r._firestoreClient}function Oj(r){var n,s,a;const e=r._freezeSettings(),t=(function(u,h,f,p){return new s3(u,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,qb(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Aj(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Jb{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Es(ln.fromBase64String(e))}catch(t){throw new $e(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Es(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,Es._jsonSchema))return Es.fromBase64String(e.bytes)}}Es._jsonSchemaVersion="firestore/bytes/1.0",Es._jsonSchema={type:Br("string",Es._jsonSchemaVersion),bytes:Br("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $e(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(yd(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Br("string",di._jsonSchemaVersion),latitude:Br("number"),longitude:Br("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hi(e.vectorValues);throw new $e(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:Br("string",hi._jsonSchemaVersion),vectorValues:Br("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=/^__.*__$/;class Lj{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new wd(e,this.data,t,this.fieldTransforms)}}class Zb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:r})}}class I0{constructor(e,t,n,s,a,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new I0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eT(this.Ac)&&Fj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Mj{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||S0(e)}Cc(e,t,n,s=!1){return new I0({Ac:e,methodName:t,Dc:n,path:rn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nd(r){const e=r._freezeSettings(),t=S0(r._databaseId);return new Mj(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ox(r,e,t,n,s,a={}){const o=r.Cc(a.merge||a.mergeFields?2:0,e,t,s);Ux("Data must be an object, but it was:",o,n);const u=sT(n,o);let h,f;if(a.merge)h=new Ts(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const x of a.mergeFields){const v=Sg(e,x,t);if(!o.contains(v))throw new $e(_e.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);aT(p,v)||p.push(v)}h=new Ts(p),f=o.fieldTransforms.filter((x=>h.covers(x.field)))}else h=null,f=o.fieldTransforms;return new Lj(new ss(u),h,f)}class k0 extends gl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k0}}function tT(r,e,t){return new I0({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fx extends gl{_toFieldTransform(e){return new hx(e.path,new nd)}isEqual(e){return e instanceof Fx}}class Lx extends gl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tT(this,e,!0),n=this.vc.map((a=>xl(a,t))),s=new Sc(n);return new hx(e.path,s)}isEqual(e){return e instanceof Lx&&ha(this.vc,e.vc)}}class Mx extends gl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=tT(this,e,!0),n=this.vc.map((a=>xl(a,t))),s=new Cc(n);return new hx(e.path,s)}isEqual(e){return e instanceof Mx&&ha(this.vc,e.vc)}}function rT(r,e,t,n){const s=r.Cc(1,e,t);Ux("Data must be an object, but it was:",s,n);const a=[],o=ss.empty();Eo(n,((h,f)=>{const p=Vx(e,h,t);f=Ut(f);const x=s.yc(p);if(f instanceof k0)a.push(p);else{const v=xl(f,x);v!=null&&(a.push(p),o.set(p,v))}}));const u=new Ts(a);return new Zb(o,u,s.fieldTransforms)}function nT(r,e,t,n,s,a){const o=r.Cc(1,e,t),u=[Sg(e,n,t)],h=[s];if(a.length%2!=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(Sg(e,a[v])),h.push(a[v+1]);const f=[],p=ss.empty();for(let v=u.length-1;v>=0;--v)if(!aT(f,u[v])){const w=u[v];let N=h[v];N=Ut(N);const _=o.yc(w);if(N instanceof k0)f.push(w);else{const T=xl(N,_);T!=null&&(f.push(w),p.set(w,T))}}const x=new Ts(f);return new Zb(p,x,o.fieldTransforms)}function Uj(r,e,t,n=!1){return xl(t,r.Cc(n?4:3,e))}function xl(r,e){if(iT(r=Ut(r)))return Ux("Unsupported field value:",e,r),sT(r,e);if(r instanceof gl)return(function(n,s){if(!eT(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const a=[];let o=0;for(const u of n){let h=xl(u,s.wc(o));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),o++}return{arrayValue:{values:a}}})(r,e)}return(function(n,s){if((n=Ut(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return C3(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=er.fromDate(n);return{timestampValue:Lf(s.serializer,a)}}if(n instanceof er){const a=new er(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Lf(s.serializer,a)}}if(n instanceof di)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Es)return{bytesValue:yb(s.serializer,n._byteString)};if(n instanceof xr){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:px(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof hi)return(function(o,u){return{mapValue:{fields:{[qE]:{stringValue:KE},[Df]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return dx(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${p0(n)}`)})(r,e)}function sT(r,e){const t={};return BE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(r,((n,s)=>{const a=xl(s,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function iT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof er||r instanceof di||r instanceof Es||r instanceof xr||r instanceof gl||r instanceof hi)}function Ux(r,e,t){if(!iT(t)||!UE(t)){const n=p0(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function Sg(r,e,t){if((e=Ut(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return Vx(r,e);throw zf("Field path arguments must be of type string or ",r,!1,void 0,t)}const Vj=new RegExp("[~\\*/\\[\\]]");function Vx(r,e,t){if(e.search(Vj)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function zf(r,e,t,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||o)&&(h+=" (found",a&&(h+=` in field ${n}`),o&&(h+=` in document ${s}`),h+=")"),new $e(_e.INVALID_ARGUMENT,u+r+h)}function aT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t,n,s,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(R0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Bj extends oT{data(){return super.data()}}function R0(r,e){return typeof e=="string"?Vx(r,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new $e(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bx{}class zx extends Bx{}function ur(r,e,...t){let n=[];e instanceof Bx&&n.push(e),n=n.concat(t),(function(a){const o=a.filter((h=>h instanceof P0)).length,u=a.filter((h=>h instanceof Sd)).length;if(o>1||o>0&&u>0)throw new $e(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class Sd extends zx{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sd(e,t,n)}_apply(e){const t=this._parse(e);return cT(e._query,t),new Vi(e.firestore,e.converter,pg(e._query,t))}_parse(e){const t=Nd(e.firestore);return(function(a,o,u,h,f,p,x){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){b_(x,p);const N=[];for(const _ of x)N.push(E_(h,a,_));v={arrayValue:{values:N}}}else v=E_(h,a,x)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||b_(x,p),v=Uj(u,o,x,p==="in"||p==="not-in");return Ur.create(f,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dr(r,e,t){const n=e,s=R0("where",r);return Sd._create(s,n,t)}class P0 extends Bx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new P0(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let o=s;const u=a.getFlattenedFilters();for(const h of u)cT(o,h),o=pg(o,h)})(e._query,t),new Vi(e.firestore,e.converter,pg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class j0 extends zx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new j0(e,t)}_apply(e){const t=(function(s,a,o){if(s.startAt!==null)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(a,o)})(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,(function(s,a){const o=s.explicitOrderBy.concat([a]);return new hl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function ii(r,e="asc"){const t=e,n=R0("orderBy",r);return j0._create(n,t)}function E_(r,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new $e(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rb(e)&&t.indexOf("/")!==-1)throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Qt.fromString(t));if(!rt.isDocumentKey(n))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mw(r,new rt(n))}if(t instanceof xr)return Mw(r,t._key);throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${p0(t)}.`)}function b_(r,e){if(!Array.isArray(r)||r.length===0)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cT(r,e){const t=(function(s,a){for(const o of s)for(const u of o.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new $e(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $e(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uT{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ct(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Eo(e,((s,a)=>{n[s]=this.convertValue(a,t)})),n}convertVectorValue(e){var n,s,a;const t=(a=(s=(n=e.fields)==null?void 0:n[Df].arrayValue)==null?void 0:s.values)==null?void 0:a.map((o=>Ir(o.doubleValue)));return new hi(t)}convertGeoPoint(e){return new di(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=v0(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ed(e));default:return null}}convertTimestamp(e){const t=fo(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qt.fromString(e);Lt(Sb(n),9688,{name:e});const s=new bc(n.get(1),n.get(3)),a=new rt(n.popFirst(5));return s.isEqual(t)||ga(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}function dT(){return new Qb("count")}class uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends oT{constructor(e,t,n,s,a,o){super(e,t,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(R0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:Br("string",lo._jsonSchemaVersion),bundleSource:Br("string","DocumentSnapshot"),bundleName:Br("string"),bundle:Br("string")};class Vu extends lo{data(e={}){return super.data(e)}}class co{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new uc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Vu(this._firestore,this._userDataWriter,n.key,n,new uc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((u=>{const h=new Vu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new uc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new Vu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new uc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:zj(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(r){r=on(r,xr);const e=on(r.firestore,Bs);return Pj(pl(e),r._key).then((t=>hT(e,r,t)))}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:Br("string",co._jsonSchemaVersion),bundleSource:Br("string","QuerySnapshot"),bundleName:Br("string"),bundle:Br("string")};class D0 extends uT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xr(this.firestore,null,t)}}function Mt(r){r=on(r,Vi);const e=on(r.firestore,Bs),t=pl(e),n=new D0(e);return lT(r._query),jj(t,r._query).then((s=>new co(e,n,r,s)))}function sl(r,e,t){r=on(r,xr);const n=on(r.firestore,Bs),s=$x(r.converter,e,t);return Vc(n,[Ox(Nd(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Wn.none())])}function Yr(r,e,t,...n){r=on(r,xr);const s=on(r.firestore,Bs),a=Nd(s);let o;return o=typeof(e=Ut(e))=="string"||e instanceof Uc?nT(a,"updateDoc",r._key,e,t,n):rT(a,"updateDoc",r._key,e),Vc(s,[o.toMutation(r._key,Wn.exists(!0))])}function Wx(r){return Vc(on(r.firestore,Bs),[new T0(r._key,Wn.none())])}function bs(r,e){const t=on(r.firestore,Bs),n=lt(r),s=$x(r.converter,e);return Vc(t,[Ox(Nd(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Wn.exists(!1))]).then((()=>n))}function ai(r,...e){var h,f,p;r=Ut(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||__(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(__(e[n])){const x=e[n];e[n]=(h=x.next)==null?void 0:h.bind(x),e[n+1]=(f=x.error)==null?void 0:f.bind(x),e[n+2]=(p=x.complete)==null?void 0:p.bind(x)}let a,o,u;if(r instanceof xr)o=on(r.firestore,Bs),u=y0(r._key.path),a={next:x=>{e[n]&&e[n](hT(o,r,x))},error:e[n+1],complete:e[n+2]};else{const x=on(r,Vi);o=on(x.firestore,Bs),u=x._query;const v=new D0(o);a={next:w=>{e[n]&&e[n](new co(o,v,x,w))},error:e[n+1],complete:e[n+2]},lT(r._query)}return(function(v,w,N,_){const T=new Px(_),D=new Ix(w,T,N);return v.asyncQueue.enqueueAndForget((async()=>Sx(await Bf(v),D))),()=>{T.Nu(),v.asyncQueue.enqueueAndForget((async()=>Cx(await Bf(v),D)))}})(pl(o),u,s,a)}function Vc(r,e){return(function(n,s){const a=new Ri;return n.asyncQueue.enqueueAndForget((async()=>yj(await kj(n),s,a))),a.promise})(pl(r),e)}function hT(r,e,t){const n=t.docs.get(e._key),s=new D0(r);return new lo(r,s,e._key,n,new uc(t.hasPendingWrites,t.fromCache),e.converter)}function fT(r){return mT(r,{count:dT()})}function mT(r,e){const t=on(r.firestore,Bs),n=pl(t),s=r3(e,((a,o)=>new L3(o,a.aggregateType,a._internalFieldPath)));return Dj(n,r._query,s).then((a=>(function(u,h,f){const p=new D0(u);return new Jb(h,p,f)})(t,r,a)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nd(e)}set(e,t,n){this._verifyNotCommitted();const s=Fp(e,this._firestore),a=$x(s.converter,t,n),o=Ox(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(o.toMutation(s._key,Wn.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const a=Fp(e,this._firestore);let o;return o=typeof(t=Ut(t))=="string"||t instanceof Uc?nT(this._dataReader,"WriteBatch.update",a._key,t,n,s):rT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fp(e,this._firestore);return this._mutations=this._mutations.concat(new T0(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fp(r,e){if((r=Ut(r)).firestore!==e)throw new $e(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Kr(){return new Fx("serverTimestamp")}function Cg(...r){return new Lx("arrayUnion",r)}function ku(...r){return new Mx("arrayRemove",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(r){return pl(r=on(r,Bs)),new pT(r,(e=>Vc(r,e)))}(function(e,t=!0){(function(s){Oc=s})(dl),uo(new fa("firestore",((n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),u=new Bs(new UR(n.getProvider("auth-internal")),new zR(o,n.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new $e(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(f.options.projectId,p)})(o,s),o);return a={useFetchStreams:t,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Vs(Nw,Sw,e),Vs(Nw,Sw,"esm2020")})();const $j=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:uT,AggregateField:Qb,AggregateQuerySnapshot:Jb,Bytes:Es,CollectionReference:la,DocumentReference:xr,DocumentSnapshot:lo,FieldPath:Uc,FieldValue:gl,Firestore:Bs,FirestoreError:$e,GeoPoint:di,Query:Vi,QueryCompositeFilterConstraint:P0,QueryConstraint:zx,QueryDocumentSnapshot:Vu,QueryFieldFilterConstraint:Sd,QueryOrderByConstraint:j0,QuerySnapshot:co,SnapshotMetadata:uc,Timestamp:er,VectorValue:hi,WriteBatch:pT,_AutoId:m0,_ByteString:ln,_DatabaseId:bc,_DocumentKey:rt,_EmptyAuthCredentialsProvider:LE,_FieldPath:rn,_cast:on,_logWarn:rl,_validateIsNotUsedTogether:ME,addDoc:bs,arrayRemove:ku,arrayUnion:Cg,collection:nt,collectionGroup:Dx,connectFirestoreEmulator:Yb,count:dT,deleteDoc:Wx,doc:lt,ensureFirestoreConfigured:pl,executeWrite:Vc,getAggregateFromServer:mT,getCountFromServer:fT,getDoc:Vr,getDocs:Mt,getFirestore:Xb,onSnapshot:ai,orderBy:ii,query:ur,serverTimestamp:Kr,setDoc:sl,updateDoc:Yr,where:dr,writeBatch:Ru},Symbol.toStringTag,{value:"Module"}));var Wj="firebase",Hj="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(Wj,Hj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firebasestorage.googleapis.com",xT="storageBucket",Gj=120*1e3,qj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends pi{constructor(e,t,n=0){super(Lp(e),`Firebase Storage: ${t} (${Lp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Er;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Er||(Er={}));function Lp(r){return"storage/"+r}function Hx(){const r="An unknown error occurred, please check the error payload for server response.";return new br(Er.UNKNOWN,r)}function Kj(r){return new br(Er.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function Yj(r){return new br(Er.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Xj(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new br(Er.UNAUTHENTICATED,r)}function Qj(){return new br(Er.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jj(r){return new br(Er.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function Zj(){return new br(Er.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e6(){return new br(Er.CANCELED,"User canceled the upload/download.")}function t6(r){return new br(Er.INVALID_URL,"Invalid URL '"+r+"'.")}function r6(r){return new br(Er.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function n6(){return new br(Er.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xT+"' property when initializing the app?")}function s6(){return new br(Er.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i6(){return new br(Er.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a6(r){return new br(Er.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ag(r){return new br(Er.INVALID_ARGUMENT,r)}function vT(){return new br(Er.APP_DELETED,"The Firebase app was deleted.")}function o6(r){return new br(Er.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bu(r,e){return new br(Er.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function bu(r){throw new br(Er.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ns.makeFromUrl(e,t)}catch{return new Ns(e,"")}if(n.path==="")return n;throw r6(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),h={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const p="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${x}/${p}/b/${s}/o${v}`,"i"),N={bucket:1,path:3},_=t===gT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",D=new RegExp(`^https?://${_}/${s}/${T}`,"i"),k=[{regex:u,indices:h,postModify:a},{regex:w,indices:N,postModify:f},{regex:D,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<k.length;F++){const J=k[F],ee=J.regex.exec(e);if(ee){const S=ee[J.indices.bucket];let I=ee[J.indices.path];I||(I=""),n=new Ns(S,I),J.postModify(n);break}}if(n==null)throw t6(e);return n}}class l6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(r,e,t){let n=1,s=null,a=null,o=!1,u=0;function h(){return u===2}let f=!1;function p(...T){f||(f=!0,e.apply(null,T))}function x(T){s=setTimeout(()=>{s=null,r(w,h())},T)}function v(){a&&clearTimeout(a)}function w(T,...D){if(f){v();return}if(T){v(),p.call(null,T,...D);return}if(h()||o){v(),p.call(null,T,...D);return}n<64&&(n*=2);let k;u===1?(u=2,k=0):k=(n+Math.random())*1e3,x(k)}let N=!1;function _(T){N||(N=!0,v(),!f&&(s!==null?(T||(u=2),clearTimeout(s),x(0)):T||(u=1)))}return x(0),a=setTimeout(()=>{o=!0,_(!0)},t),_}function u6(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(r){return r!==void 0}function h6(r){return typeof r=="object"&&!Array.isArray(r)}function Gx(r){return typeof r=="string"||r instanceof String}function T_(r){return qx()&&r instanceof Blob}function qx(){return typeof Blob<"u"}function N_(r,e,t,n){if(n<e)throw Ag(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw Ag(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function yT(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Qo;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Qo||(Qo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,t,n,s,a,o,u,h,f,p,x,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=x,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,_)=>{this.resolve_=N,this.reject_=_,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Kh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const u=a.getErrorCode()===Qo.NO_ERROR,h=a.getStatus();if(!u||f6(h,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===Qo.ABORT;n(!1,new Kh(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;n(!0,new Kh(f,a))})},t=(n,s)=>{const a=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());d6(h)?a(h):a()}catch(h){o(h)}else if(u!==null){const h=Hx();h.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,h)):o(h)}else if(s.canceled){const h=this.appDelete_?vT():e6();o(h)}else{const h=Zj();o(h)}};this.canceled_?t(!1,new Kh(!1,null,!0)):this.backoffId_=c6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&u6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function p6(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function g6(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x6(r,e){e&&(r["X-Firebase-GMPID"]=e)}function v6(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function y6(r,e,t,n,s,a,o=!0,u=!1){const h=yT(r.urlParams),f=r.url+h,p=Object.assign({},r.headers);return x6(p,e),p6(p,t),g6(p,a),v6(p,n),new m6(f,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _6(...r){const e=w6();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(qx())return new Blob(r);throw new br(Er.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E6(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(r){if(typeof atob>"u")throw a6("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mp{constructor(e,t){this.data=e,this.contentType=t||null}}function T6(r,e){switch(r){case Ii.RAW:return new Mp(wT(e));case Ii.BASE64:case Ii.BASE64URL:return new Mp(_T(r,e));case Ii.DATA_URL:return new Mp(S6(e),C6(e))}throw Hx()}function wT(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=r.charCodeAt(++t);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function N6(r){let e;try{e=decodeURIComponent(r)}catch{throw Bu(Ii.DATA_URL,"Malformed data URL.")}return wT(e)}function _T(r,e){switch(r){case Ii.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Bu(r,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ii.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Bu(r,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=b6(e)}catch(s){throw s.message.includes("polyfill")?s:Bu(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}class ET{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Bu(Ii.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=A6(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function S6(r){const e=new ET(r);return e.base64?_T(Ii.BASE64,e.rest):N6(e.rest)}function C6(r){return new ET(r).contentType}function A6(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){let n=0,s="";T_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(T_(this.data_)){const n=this.data_,s=E6(n,e,t);return s===null?null:new Za(s)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Za(n,!0)}}static getBlob(...e){if(qx()){const t=e.map(n=>n instanceof Za?n.data_:n);return new Za(_6.apply(null,t))}else{const t=e.map(o=>Gx(o)?T6(Ii.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let a=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)s[a++]=o[u]}),new Za(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(r){let e;try{e=JSON.parse(r)}catch{return null}return h6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function k6(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function TT(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(r,e){return e}class Un{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||R6}}let Yh=null;function P6(r){return!Gx(r)||r.length<2?r:TT(r)}function NT(){if(Yh)return Yh;const r=[];r.push(new Un("bucket")),r.push(new Un("generation")),r.push(new Un("metageneration")),r.push(new Un("name","fullPath",!0));function e(a,o){return P6(o)}const t=new Un("name");t.xform=e,r.push(t);function n(a,o){return o!==void 0?Number(o):o}const s=new Un("size");return s.xform=n,r.push(s),r.push(new Un("timeCreated")),r.push(new Un("updated")),r.push(new Un("md5Hash",null,!0)),r.push(new Un("cacheControl",null,!0)),r.push(new Un("contentDisposition",null,!0)),r.push(new Un("contentEncoding",null,!0)),r.push(new Un("contentLanguage",null,!0)),r.push(new Un("contentType",null,!0)),r.push(new Un("metadata","customMetadata",!0)),Yh=r,Yh}function j6(r,e){function t(){const n=r.bucket,s=r.fullPath,a=new Ns(n,s);return e._makeStorageReference(a)}Object.defineProperty(r,"ref",{get:t})}function D6(r,e,t){const n={};n.type="file";const s=t.length;for(let a=0;a<s;a++){const o=t[a];n[o.local]=o.xform(n,e[o.server])}return j6(n,r),n}function ST(r,e,t){const n=bT(e);return n===null?null:D6(r,n,t)}function O6(r,e,t,n){const s=bT(e);if(s===null||!Gx(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(f=>{const p=r.bucket,x=r.fullPath,v="/b/"+o(p)+"/o/"+o(x),w=Kx(v,t,n),N=yT({alt:"media",token:f});return w+N})[0]}function F6(r,e){const t={},n=e.length;for(let s=0;s<n;s++){const a=e[s];a.writable&&(t[a.server]=r[a.local])}return JSON.stringify(t)}class CT{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r){if(!r)throw Hx()}function L6(r,e){function t(n,s){const a=ST(r,s,e);return AT(a!==null),a}return t}function M6(r,e){function t(n,s){const a=ST(r,s,e);return AT(a!==null),O6(a,s,r.host,r._protocol)}return t}function IT(r){function e(t,n){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=Qj():s=Xj():t.getStatus()===402?s=Yj(r.bucket):t.getStatus()===403?s=Jj(r.path):s=n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}return e}function U6(r){const e=IT(r);function t(n,s){let a=e(n,s);return n.getStatus()===404&&(a=Kj(r.path)),a.serverResponse=s.serverResponse,a}return t}function V6(r,e,t){const n=e.fullServerUrl(),s=Kx(n,r.host,r._protocol),a="GET",o=r.maxOperationRetryTime,u=new CT(s,a,M6(r,t),o);return u.errorHandler=U6(e),u}function B6(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function z6(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=B6(null,e)),n}function $6(r,e,t,n,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let k="";for(let F=0;F<2;F++)k=k+Math.random().toString().slice(2);return k}const h=u();o["Content-Type"]="multipart/related; boundary="+h;const f=z6(e,n,s),p=F6(f,t),x="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",w=Za.getBlob(x,n,v);if(w===null)throw s6();const N={name:f.fullPath},_=Kx(a,r.host,r._protocol),T="POST",D=r.maxUploadRetryTime,U=new CT(_,T,L6(r,t),D);return U.urlParams=N,U.headers=o,U.body=w.uploadData(),U.errorHandler=IT(e),U}class W6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s,a){if(this.sent_)throw bu("cannot .send() more than once");if(Fi(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class H6 extends W6{initXhr(){this.xhr_.responseType="text"}}function kT(){return new H6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t){this._service=e,t instanceof Ns?this._location=t:this._location=Ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new il(e,t)}get root(){const e=new Ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TT(this._location.path)}get storage(){return this._service}get parent(){const e=I6(this._location.path);if(e===null)return null;const t=new Ns(this._location.bucket,e);return new il(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw o6(e)}}function G6(r,e,t){r._throwIfRoot("uploadBytes");const n=$6(r.storage,r._location,NT(),new Za(e,!0),t);return r.storage.makeRequestWithTokens(n,kT).then(s=>({metadata:s,ref:r}))}function q6(r){r._throwIfRoot("getDownloadURL");const e=V6(r.storage,r._location,NT());return r.storage.makeRequestWithTokens(e,kT).then(t=>{if(t===null)throw i6();return t})}function K6(r,e){const t=k6(r._location.path,e),n=new Ns(r._location.bucket,t);return new il(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(r){return/^[A-Za-z]+:\/\//.test(r)}function X6(r,e){return new il(r,e)}function RT(r,e){if(r instanceof Yx){const t=r;if(t._bucket==null)throw n6();const n=new il(t,t._bucket);return e!=null?RT(n,e):n}else return e!==void 0?K6(r,e):r}function Q6(r,e){if(e&&Y6(e)){if(r instanceof Yx)return X6(r,e);throw Ag("To use ref(service, url), the first argument must be a Storage instance.")}else return RT(r,e)}function S_(r,e){const t=e==null?void 0:e[xT];return t==null?null:Ns.makeFromBucketSpec(t,r)}function J6(r,e,t,n={}){r.host=`${e}:${t}`;const s=Fi(e);s&&(l0(`https://${r.host}/b`),c0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:a}=n;a&&(r._overrideAuthToken=typeof a=="string"?a:z2(a,r.app.options.projectId))}class Yx{constructor(e,t,n,s,a,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=gT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gj,this._maxUploadRetryTime=qj,this._requests=new Set,s!=null?this._bucket=Ns.makeFromBucketSpec(s,this._host):this._bucket=S_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ns.makeFromBucketSpec(this._url,e):this._bucket=S_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new il(this,e)}_makeRequest(e,t,n,s,a=!0){if(this._deleted)return new l6(vT());{const o=y6(e,this._appId,n,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const C_="@firebase/storage",A_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="storage";function Xx(r,e,t){return r=Ut(r),G6(r,e,t)}function Qx(r){return r=Ut(r),q6(r)}function Jx(r,e){return r=Ut(r),Q6(r,e)}function O0(r=u0(),e){r=Ut(r);const n=md(r,PT).getImmediate({identifier:e}),s=zg("storage");return s&&Z6(n,...s),n}function Z6(r,e,t,n={}){J6(r,e,t,n)}function eD(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new Yx(t,n,s,e,dl)}function tD(){uo(new fa(PT,eD,"PUBLIC").setMultipleInstances(!0)),Vs(C_,A_,""),Vs(C_,A_,"esm2020")}tD();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="type.googleapis.com/google.protobuf.Int64Value",nD="type.googleapis.com/google.protobuf.UInt64Value";function jT(r,e){const t={};for(const n in r)r.hasOwnProperty(n)&&(t[n]=e(r[n]));return t}function $f(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>$f(e));if(typeof r=="function"||typeof r=="object")return jT(r,e=>$f(e));throw new Error("Data cannot be encoded in JSON: "+r)}function kc(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case rD:case nD:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>kc(e)):typeof r=="function"||typeof r=="object"?jT(r,e=>kc(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class is extends pi{constructor(e,t,n){super(`${Zx}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,is.prototype)}}function sD(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Wf(r,e){let t=sD(r),n=t,s;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!I_[o])return new is("internal","internal");t=I_[o],n=o}const u=a.message;typeof u=="string"&&(n=u),s=a.details,s!==void 0&&(s=kc(s))}}catch{}return t==="ok"?null:new is(t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,n,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,$n(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="us-central1",aD=/^data: (.*?)(?:\n|$)/;function oD(r){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new is("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class lD{constructor(e,t,n,s,a=Ig,o=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new iD(e,t,n,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(a);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Ig}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function cD(r,e,t){const n=Fi(e);r.emulatorOrigin=`http${n?"s":""}://${e}:${t}`,n&&(l0(r.emulatorOrigin+"/backends"),c0("Functions",!0))}function uD(r,e,t){const n=s=>hD(r,e,s,{});return n.stream=(s,a)=>mD(r,e,s,a),n}function DT(r){return r.emulatorOrigin&&Fi(r.emulatorOrigin)?"include":void 0}async function dD(r,e,t,n,s){t["Content-Type"]="application/json";let a;try{a=await n(r,{method:"POST",body:JSON.stringify(e),headers:t,credentials:DT(s)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function OT(r,e){const t={},n=await r.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(t.Authorization="Bearer "+n.authToken),n.messagingToken&&(t["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=n.appCheckToken),t}function hD(r,e,t,n){const s=r._url(e);return fD(r,s,t,n)}async function fD(r,e,t,n){t=$f(t);const s={data:t},a=await OT(r,n),o=n.timeout||7e4,u=oD(o),h=await Promise.race([dD(e,s,a,r.fetchImpl,r),u.promise,r.cancelAllRequests]);if(u.cancel(),!h)throw new is("cancelled","Firebase Functions instance was deleted.");const f=Wf(h.status,h.json);if(f)throw f;if(!h.json)throw new is("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new is("internal","Response is missing data field.");return{data:kc(p)}}function mD(r,e,t,n){const s=r._url(e);return pD(r,s,t,n||{})}async function pD(r,e,t,n){var v;t=$f(t);const s={data:t},a=await OT(r,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await r.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:n==null?void 0:n.signal,credentials:DT(r)})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const _=new is("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const N=Wf(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let u,h;const f=new Promise((w,N)=>{u=w,h=N});(v=n==null?void 0:n.signal)==null||v.addEventListener("abort",()=>{const w=new is("cancelled","Request was cancelled.");h(w)});const p=o.body.getReader(),x=gD(p,u,h,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const w=x.getReader();return{async next(){const{value:N,done:_}=await w.read();return{value:N,done:_}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:f}}function gD(r,e,t,n){const s=(o,u)=>{const h=o.match(aD);if(!h)return;const f=h[1];try{const p=JSON.parse(f);if("result"in p){e(kc(p.result));return}if("message"in p){u.enqueue(kc(p.message));return}if("error"in p){const x=Wf(0,p);u.error(x),t(x);return}}catch(p){if(p instanceof is){u.error(p),t(p);return}}},a=new TextDecoder;return new ReadableStream({start(o){let u="";return h();async function h(){if(n!=null&&n.aborted){const f=new is("cancelled","Request was cancelled");return o.error(f),t(f),Promise.resolve()}try{const{value:f,done:p}=await r.read();if(p){u.trim()&&s(u.trim(),o),o.close();return}if(n!=null&&n.aborted){const v=new is("cancelled","Request was cancelled");o.error(v),t(v),await r.cancel();return}u+=a.decode(f,{stream:!0});const x=u.split(`
`);u=x.pop()||"";for(const v of x)v.trim()&&s(v.trim(),o);return h()}catch(f){const p=f instanceof is?f:Wf(0,null);o.error(p),t(p)}}},cancel(){return r.cancel()}})}const k_="@firebase/functions",R_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="auth-internal",vD="app-check-internal",yD="messaging-internal";function wD(r){const e=(t,{instanceIdentifier:n})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(xD),o=t.getProvider(yD),u=t.getProvider(vD);return new lD(s,a,o,u,n)};uo(new fa(Zx,e,"PUBLIC").setMultipleInstances(!0)),Vs(k_,R_,r),Vs(k_,R_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(r=u0(),e=Ig){const n=md(Ut(r),Zx).getImmediate({identifier:e}),s=zg("functions");return s&&ED(n,...s),n}function ED(r,e,t){cD(Ut(r),e,t)}function Up(r,e,t){return uD(Ut(r),e)}wD();const bD={apiKey:"AIzaSyAXI-FScHr5vfyO-sou19DdbsGUA8T_LfI",authDomain:"evnty-124fb.firebaseapp.com",projectId:"evnty-124fb",storageBucket:"evnty-124fb.firebasestorage.app",messagingSenderId:"239918583479",appId:"1:239918583479:web:39dd6cf16cac6d0f134732",measurementId:"G-KKH3K46WB8"},F0=H2(bD),zn=FR(F0),Ie=Xb(F0);O0(F0);const Vp=_D(F0),Rc=r=>{const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(n!==void 0)if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const s=Rc(n);Object.keys(s).length>0&&(e[t]=s)}else e[t]=n}),e},TD=new sa,Xh={signIn:async(r,e)=>{try{return{user:(await _k(zn,r,e)).user}}catch(t){throw new Error(t.message||"Failed to sign in")}},signUp:async(r,e)=>{try{return{user:(await xE(zn,r,e)).user}}catch(t){throw new Error(t.message||"Failed to create account")}},signInWithGoogle:async()=>{try{return{user:(await Hk(zn,TD)).user}}catch(r){throw new Error(r.message||"Failed to sign in with Google")}},signOut:async()=>{try{await Nk(zn)}catch(r){throw new Error(r.message||"Failed to sign out")}},getCurrentUser:()=>zn.currentUser,getUserDocument:async r=>{try{const e=await Vr(lt(Ie,"users",r));return e.exists()?e.data():null}catch(e){return console.error("Error getting user document:",e),null}},onAuthStateChanged:r=>Tk(zn,r)},vn={getUserProfile:async r=>{try{const e=await Vr(lt(Ie,"users",r));if(e.exists()){const t=e.data();return{id:r,name:t.name||"User",email:t.email||"",role:t.role||"student",rollNumber:t.rollNumber||void 0,year:t.year||void 0,branch:t.branch||void 0,mobile:t.mobile||void 0,isGuest:t.isGuest||!1,managedClubIds:t.managedClubIds||[]}}return null}catch(e){return console.error("Error getting user profile:",e),null}},createUserProfile:async(r,e)=>{try{const t={id:r.uid,name:e.name||r.displayName||"User",email:r.email||"",role:e.role||"student",isGuest:!1,managedClubIds:e.managedClubIds||[]};e.rollNumber!==void 0&&(t.rollNumber=e.rollNumber),e.year!==void 0&&(t.year=e.year),e.branch!==void 0&&(t.branch=e.branch),e.mobile!==void 0&&(t.mobile=e.mobile);const n=Rc(t);return await sl(lt(Ie,"users",r.uid),n),{id:r.uid,name:t.name,email:t.email,role:t.role,rollNumber:t.rollNumber,year:t.year,branch:t.branch,mobile:t.mobile,isGuest:!1,managedClubIds:t.managedClubIds}}catch(t){throw console.error("Error creating user profile:",t),t}},updateUserProfile:async(r,e)=>{try{const t=Rc(e);Object.keys(t).length>0&&await Yr(lt(Ie,"users",r),t)}catch(t){throw console.error("Error updating user profile:",t),t}}},P_=async r=>{try{let e=await vn.getUserProfile(r.uid);return e||(e=await vn.createUserProfile(r,{name:r.displayName||"User",email:r.email||"",role:"student"})),e}catch(e){return console.error("Error getting user with profile:",e),null}},ND=async r=>{try{const e=`guest_${r.email.replace(/[^a-zA-Z0-9]/g,"_")}`;console.log("Creating guest user with ID:",e),console.log("Email:",r.email),console.log("Processed email:",r.email.replace(/[^a-zA-Z0-9]/g,"_"));const t=await Vr(lt(Ie,"users",e));if(t.exists())return console.log("Guest user already exists, returning existing profile:",e),t.data();const n=new Date,s=new Date(n.getTime()+2160*60*60*1e3),a={id:e,name:r.name,email:r.email,mobile:r.phone,year:r.year,branch:r.department,collegeName:r.college,role:"guest",isGuest:!0,managedClubIds:[],expiresAt:s},o={...a,createdAt:Kr(),expiresAt:s};return console.log("Storing guest user data:",o),console.log("Document path: users/",e),await sl(lt(Ie,"users",e),o),console.log("Guest user profile created:",e),a}catch(e){throw console.error("Error creating guest user profile:",e),console.error("Guest data:",r),e instanceof Error?new Error(`Failed to create guest user profile: ${e.message}`):new Error(`Failed to create guest user profile: ${JSON.stringify(e)}`)}};var pt=(r=>(r.Past="Past",r.Ongoing="Ongoing",r.Upcoming="Upcoming",r))(pt||{});pt.Upcoming,pt.Upcoming,pt.Ongoing,pt.Upcoming,pt.Upcoming,pt.Upcoming,pt.Upcoming,pt.Past,pt.Past,pt.Past;new Date(Date.now()-7200*1e3).toISOString(),new Date(Date.now()-1440*60*1e3).toISOString(),new Date(Date.now()-300*1e3).toISOString(),new Date(Date.now()-4320*60*1e3).toISOString(),new Date(Date.now()-600*1e3).toISOString(),new Date(Date.now()-1800*1e3).toISOString();const ts={EVENTS:"events",CLUBS:"clubs",USERS:"users",LEADERSHIP:"leadership",ANNUAL_EVENTS:"annualEvents",NEWS:"news",EXTERNAL_EVENTS:"externalEvents",NOTIFICATIONS:"notifications",APPLICATIONS:"applications"},hr={getEvents:async()=>{try{const r=Dx(Ie,"clubEvents");return(await Mt(r)).docs.map(n=>{var a;const s=n.data();return{id:n.id,...s,organizerClubId:s.organizerClubId||((a=n.ref.parent.parent)==null?void 0:a.id)}})}catch(r){return console.error("Error getting events:",r),[]}},getClubEvents:async r=>{try{const e=lt(Ie,ts.CLUBS,r),t=nt(e,"clubEvents");return(await Mt(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error getting club events:",e),[]}},getClubs:async()=>{try{const r=nt(Ie,ts.CLUBS);return(await Mt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return console.error("Error getting clubs:",r),[]}},getUsers:async()=>{var r;try{const e=nt(Ie,ts.USERS);return(await Mt(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){return e.code==="permission-denied"||(r=e.message)!=null&&r.includes("permissions")?(console.warn("Users require authentication - skipping for now"),[]):(console.error("Error getting users:",e),[])}},getStudentByRollNumber:async r=>(await hr.getUsers()).find(n=>{var s;return((s=n.rollNumber)==null?void 0:s.toLowerCase())===r.toLowerCase()})||null,getLeadership:async()=>{try{const r=nt(Ie,ts.LEADERSHIP);return(await Mt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return console.error("Error getting leadership:",r),[]}},getAnnualEvents:async()=>{try{const r=nt(Ie,ts.ANNUAL_EVENTS);return(await Mt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return console.error("Error getting annual events:",r),[]}},getNews:async()=>{try{const r=nt(Ie,ts.NEWS);return(await Mt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return console.error("Error getting news:",r),[]}},getExternalEvents:async()=>{try{const r=nt(Ie,ts.EXTERNAL_EVENTS);return(await Mt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){return console.error("Error getting external events:",r),[]}},getNotifications:async()=>{var r;try{const e=nt(Ie,ts.NOTIFICATIONS);return(await Mt(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){return e.code==="permission-denied"||(r=e.message)!=null&&r.includes("permissions")?(console.warn("Notifications require authentication - skipping for now"),[]):(console.error("Error getting notifications:",e),[])}},getApplications:async()=>{var r;try{const e=nt(Ie,ts.APPLICATIONS);return(await Mt(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){return e.code==="permission-denied"||(r=e.message)!=null&&r.includes("permissions")?(console.warn("Applications require authentication - skipping for now"),[]):(console.error("Error getting applications:",e),[])}},createApplication:async r=>{try{const e=nt(Ie,ts.APPLICATIONS);return{id:(await bs(e,r)).id,...r}}catch(e){throw console.error("Error creating application:",e),e}},createClubApplication:async(r,e)=>{try{const t=lt(Ie,ts.CLUBS,r),n=nt(t,"applications"),s={...e,clubId:r};return{id:(await bs(n,s)).id,...s}}catch(t){throw console.error("Error creating club application:",t),t}},getClubApplications:async r=>{try{const e=lt(Ie,ts.CLUBS,r),t=nt(e,"applications"),n=await Mt(t);if(n.size>0)return console.log(`Fetched ${n.size} applications for club ${r} (subcollection)`),n.docs.map(u=>({id:u.id,...u.data()}));const s=nt(Ie,ts.APPLICATIONS),a=await Mt(s),o=a.docs.map(u=>({id:u.id,...u.data()})).filter(u=>String(u.clubId)===String(r));if(console.log(`Fetched ${o.length} applications for club ${r} (top-level fallback)`),o.length===0){const u=a.docs.map(h=>h.data().clubId);console.log("All clubIds in top-level applications:",u)}return o}catch(e){return console.error("Error getting club applications:",e),[]}},updateClub:async(r,e)=>{const t=lt(Ie,"clubs",r);console.log("hitted"),console.log(e);let n=e.team;if(!n){const a=await Vr(t);a.exists()?n=a.data().team||[]:n=[]}const s=Rc(e);if(s.team=Array.isArray(n)?n.filter(a=>!!a&&typeof a=="object").map(a=>{const o={};for(const u in a){const h=a[u];h!=null&&!(typeof h=="string"&&h.trim()==="")&&(o[u]=h)}return o}).filter(a=>Object.keys(a).length>0):[],Object.keys(s).forEach(a=>{s[a]===void 0&&delete s[a]}),"team"in s&&!Array.isArray(s.team)&&(s.team=[]),s.team=s.team.map(a=>{const o={};for(const u in a){const h=a[u];h!=null&&!(typeof h=="string"&&h.trim()==="")&&(o[u]=h)}if(!o.id||!o.name||!o.position)throw new Error("Each team member must have id, name, and position");return o}),await Yr(t,s),s.team&&Array.isArray(s.team)){for(const a of s.team)if(a.id)try{const o=lt(Ie,"users",a.id),u=await Vr(o);if(u.exists()){const h=u.data(),f=Array.isArray(h.managedClubIds)?Array.from(new Set([...h.managedClubIds||[],r])):[r],p=h.role==="admin"?"admin":"contributor",x={managedClubIds:f,role:p,name:a.name};"position"in x&&delete x.position,await Yr(o,x)}}catch{}}},updateClubMemberProfile:async(r,e)=>{const t=lt(Ie,"users",r);e.managedClubIds&&(e.managedClubIds=e.managedClubIds.filter(n=>typeof n=="string"&&n.trim()!=="")),Array.isArray(e.managedClubIds)&&e.managedClubIds.length===0&&(e.role="student"),"position"in e&&delete e.position,await Yr(t,e)},createClubEvent:async(r,e)=>{const t=SD(e.date),n={...e,status:t,organizerClubId:r},s=lt(Ie,"clubs",r),a=nt(s,"clubEvents");return{id:(await bs(a,n)).id,...n}},getClubById:async r=>{try{const e=lt(Ie,ts.CLUBS,r),t=await Vr(e);return t.exists()?{id:t.id,...t.data()}:(console.warn(`Club with ID ${r} not found.`),null)}catch(e){return console.error("Error getting club by ID:",e),null}},updateClubEvent:async(r,e,t)=>{const n=lt(Ie,"events",r,"clubEvents",e),s={...t};t.markAsPast&&(s.status=pt.Past),t.winnerDetails&&(s.winnerDetails=t.winnerDetails),t.eventImages&&(s.eventImages=t.eventImages),delete s.markAsPast,await Yr(n,s)}},kg={updateStatus:async(r,e,t)=>{const n=lt(Ie,"clubs",r,"applications",e),s=Qh({status:t});console.log("Updating application status:",n.path,s),await Yr(n,s)},acceptAndPromote:async(r,e)=>{const t=lt(Ie,"clubs",r,"applications",e),n=await Vr(t);if(!n.exists())throw new Error("Application not found");const s=n.data(),a=s.userId,o=s.userName,u=Qh({status:"accepted"});console.log("Accepting application:",t.path,u),await Yr(t,u);const h=lt(Ie,"clubs",r),f=await Vr(h);if(f.exists()){const p=f.data();console.log("Club data before team update:",p);const x=Array.isArray(p.team)?p.team:[];if(!x.some(w=>w.id===a)){const w={id:a||o,name:o,position:"Coordinator"},N=[...x,w];if(N.length>0){const _=Qh({team:N});console.log("Promoting user to club team:",h.path,_),await Yr(h,_)}else console.warn("Skipped team update: team array would be empty")}}if(a){const p=await vn.getUserProfile(a);if(p){const x=Array.from(new Set([...p.managedClubIds||[],r])),v=Qh({role:p.role==="admin"?"admin":"contributor",managedClubIds:x});console.log("Promoting user profile:",a,v),await vn.updateUserProfile(a,v)}}}};function Qh(r){const e={};for(const t in r)r[t]!==void 0&&r[t]!==null&&(e[t]=r[t]);return e}function SD(r){const e=new Date,t=new Date(r);return t>e?pt.Upcoming:t.toDateString()===e.toDateString()?pt.Ongoing:pt.Past}const CD=Object.freeze(Object.defineProperty({__proto__:null,clubApplicationsService:kg,firestoreDataService:hr},Symbol.toStringTag,{value:"Module"}));class AD{constructor(){this.unsubscribers=new Map}cleanup(){this.unsubscribers.forEach(e=>e()),this.unsubscribers.clear()}listenToEvents(e){const t=Dx(Ie,"clubEvents"),n=ur(t,ii("date","asc")),s=ai(n,a=>{const o=a.docs.map(u=>{var f;const h=u.data();return{id:u.id,...h,organizerClubId:h.organizerClubId||((f=u.ref.parent.parent)==null?void 0:f.id)}});e(o)},a=>{console.error("Error listening to events:",a)});return this.unsubscribers.set("events",s),s}listenToClubs(e){const t=nt(Ie,"clubs"),n=ur(t,ii("name","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to clubs:",a)});return this.unsubscribers.set("clubs",s),s}listenToLeadership(e){const t=nt(Ie,"leadership"),n=ur(t,ii("id","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to leadership:",a)});return this.unsubscribers.set("leadership",s),s}listenToAnnualEvents(e){const t=nt(Ie,"annualEvents"),n=ur(t,ii("name","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to annual events:",a)});return this.unsubscribers.set("annualEvents",s),s}listenToNews(e){const t=nt(Ie,"news"),n=ur(t,ii("date","desc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to news:",a)});return this.unsubscribers.set("news",s),s}listenToExternalEvents(e){const t=nt(Ie,"externalEvents"),n=ur(t,ii("name","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to external events:",a)});return this.unsubscribers.set("externalEvents",s),s}listenToUserNotifications(e,t){const n=nt(Ie,"notifications"),s=ur(n,dr("userId","==",e),ii("timestamp","desc")),a=ai(s,o=>{const u=o.docs.map(h=>({id:h.id,...h.data()}));t(u)},o=>{console.error("Error listening to user notifications:",o)});return this.unsubscribers.set(`notifications_${e}`,a),a}listenToUserApplications(e,t){const n=nt(Ie,"applications"),s=ur(n,dr("userId","==",e),ii("status","asc")),a=ai(s,o=>{const u=o.docs.map(h=>({id:h.id,...h.data()}));t(u)},o=>{console.error("Error listening to user applications:",o)});return this.unsubscribers.set(`applications_${e}`,a),a}listenToAllApplications(e){const t=nt(Ie,"applications"),n=ur(t,ii("status","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to all applications:",a)});return this.unsubscribers.set("allApplications",s),s}listenToAllUsers(e){const t=nt(Ie,"users"),n=ur(t,ii("name","asc")),s=ai(n,a=>{const o=a.docs.map(u=>({id:u.id,...u.data()}));e(o)},a=>{console.error("Error listening to all users:",a)});return this.unsubscribers.set("allUsers",s),s}}const ra=new AD,ID=(r,e,t=!1)=>{const n=[];return r.onEventsUpdate&&n.push(ra.listenToEvents(r.onEventsUpdate)),r.onClubsUpdate&&n.push(ra.listenToClubs(r.onClubsUpdate)),r.onLeadershipUpdate&&n.push(ra.listenToLeadership(r.onLeadershipUpdate)),r.onAnnualEventsUpdate&&n.push(ra.listenToAnnualEvents(r.onAnnualEventsUpdate)),r.onNewsUpdate&&n.push(ra.listenToNews(r.onNewsUpdate)),r.onExternalEventsUpdate&&n.push(ra.listenToExternalEvents(r.onExternalEventsUpdate)),r.onNotificationsUpdate&&e&&n.push(ra.listenToUserNotifications(e,r.onNotificationsUpdate)),r.onApplicationsUpdate&&e&&n.push(ra.listenToUserApplications(e,r.onApplicationsUpdate)),r.onUsersUpdate&&t&&n.push(ra.listenToAllUsers(r.onUsersUpdate)),()=>{n.forEach(s=>s())}},kD=({user:r,enableRealtime:e=!0})=>{const[t,n]=M.useState({events:[],clubs:[],leadership:[],annualEvents:[],news:[],externalEvents:[],users:[],notifications:[],applications:[]}),[s,a]=M.useState(!0),[o,u]=M.useState(!1),[h,f]=M.useState(!1),p=M.useRef(!1),x=M.useRef(!1),v=M.useRef(!1),w=M.useRef(null);M.useEffect(()=>{if(p.current)return;(async()=>{a(!0);try{const[k,F,J]=await Promise.all([hr.getEvents(),hr.getClubs(),hr.getLeadership()]);n(ee=>({...ee,events:k,clubs:F,leadership:J})),p.current=!0}catch(k){console.error("Failed to fetch initial data:",k)}finally{a(!1)}})()},[]);const N=M.useCallback(async()=>{if(!x.current){u(!0);try{const[U,k,F]=await Promise.all([hr.getAnnualEvents(),hr.getNews(),hr.getExternalEvents()]);n(J=>({...J,annualEvents:U,news:k,externalEvents:F})),x.current=!0}catch(U){console.error("Failed to fetch secondary data:",U)}finally{u(!1)}}},[]);M.useEffect(()=>{if(!p.current)return;const U=setTimeout(N,2e3);return()=>clearTimeout(U)},[p.current,N]),M.useEffect(()=>{if(!r||v.current)return;const k=setTimeout(async()=>{f(!0);try{const[F,J]=await Promise.all([hr.getNotifications(),hr.getApplications()]);n(ee=>({...ee,notifications:F,applications:J})),v.current=!0}catch(F){console.error("Failed to fetch user data:",F)}finally{f(!1)}},1e3);return()=>clearTimeout(k)},[r==null?void 0:r.id]),M.useEffect(()=>{!r&&v.current&&(n(U=>({...U,users:[],notifications:[],applications:[]})),v.current=!1)},[r]),M.useEffect(()=>{if(!r||!e||!p.current)return;w.current&&w.current();const U=ID({onEventsUpdate:k=>{n(F=>({...F,events:k}))},onClubsUpdate:k=>{n(F=>({...F,clubs:k}))},onNotificationsUpdate:r?k=>{n(F=>({...F,notifications:k}))}:void 0,onApplicationsUpdate:r?k=>{n(F=>({...F,applications:k}))}:void 0},r.id,r.role==="admin");return w.current=U,()=>{U&&U(),w.current=null}},[r==null?void 0:r.id,r==null?void 0:r.role,e,p.current]),M.useEffect(()=>()=>{w.current&&w.current()},[]);const _=M.useCallback(U=>{n(k=>({...k,events:U}))},[]),T=M.useCallback(U=>{n(k=>({...k,clubs:U}))},[]),D=M.useCallback(U=>{n(k=>({...k,applications:U}))},[]);return{...t,isLoading:s,isSecondaryLoading:o,isUserDataLoading:h,updateEvents:_,updateClubs:T,updateApplications:D}},RD=async(r,e,t)=>{try{const n=await vn.getUserProfile(r);if(!n)throw new Error("User not found");return await vn.updateUserProfile(r,{role:"contributor",managedClubIds:e}),console.log(`User ${n.name} has been assigned contributor role for clubs: ${e.join(", ")}`),!0}catch(n){return console.error("Error assigning contributor role:",n),!1}},ev=async(r,e,t)=>{var n;try{const s=await vn.getUserProfile(r);if(!s)throw new Error("User not found");const a=((n=s.managedClubIds)==null?void 0:n.filter(u=>u!==e))||[],o=a.length===0?"student":"contributor";return await vn.updateUserProfile(r,{role:o,managedClubIds:a}),console.log(`User ${s.name} has been revoked from club: ${e}`),!0}catch(s){return console.error("Error revoking contributor from club:",s),!1}},tv=async(r,e)=>{try{const t=await vn.getUserProfile(r);if(!t)throw new Error("User not found");return await vn.updateUserProfile(r,{role:"student",managedClubIds:[]}),console.log(`User ${t.name} has been revoked from all contributor roles`),!0}catch(t){return console.error("Error revoking all contributor access:",t),!1}},rv=async(r,e)=>{var t;try{const n=await vn.getUserProfile(r);return n?n.role==="admin"?!0:n.role==="contributor"&&((t=n.managedClubIds)==null?void 0:t.includes(e))||!1:!1}catch(n){return console.error("Error checking club management permission:",n),!1}},PD=async(r,e,t)=>{try{if(!await rv(t,r))throw new Error("Insufficient permissions to manage this club");const s=lt(Ie,"clubs",r),a=await Vr(s);if(!a.exists())throw console.warn(`Club ${r} not found in Firebase. Data may not be migrated yet.`),new Error("Club not found in database. Please migrate data first using the Data Migration tool.");const o=a.data(),u={id:`t_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:e.name,position:e.position,imageUrl:e.imageUrl||void 0},h=Rc(u);Object.keys(h).forEach(p=>{typeof h[p]=="string"&&h[p].trim()===""&&delete h[p]});const f=[...o.team||[],h];return await Yr(s,{team:f}),console.log(`Member ${e.name} added to club ${r}`),!0}catch(n){throw console.error("Error adding club member:",n),n}},jD=async(r,e,t)=>{try{if(!await rv(t,r))throw new Error("Insufficient permissions to manage this club");const s=lt(Ie,"clubs",r),a=await Vr(s);if(!a.exists())throw console.warn(`Club ${r} not found in Firebase. Data may not be migrated yet.`),new Error("Club not found in database. Please migrate data first using the Data Migration tool.");const u=(a.data().team||[]).filter(h=>h.id!==e).map(h=>{const f=Rc(h);return Object.keys(f).forEach(p=>{typeof f[p]=="string"&&f[p].trim()===""&&delete f[p]}),f});return await Yr(s,{team:u}),console.log(`Member ${e} removed from club ${r}`),!0}catch(n){throw console.error("Error removing club member:",n),n}},DD=async(r,e,t)=>{const n=await vn.getUserProfile(t);if(!n||n.role!=="admin")throw new Error("Only admins can create clubs");const s={name:r.name,tagline:r.tagline,description:r.description??"",logoUrl:r.logoUrl??"https://placehold.co/128x128?text=Club",bannerUrl:r.bannerUrl??"https://placehold.co/1200x300?text=Club+Banner",eventIds:[],achievements:r.achievements??[],team:r.team??[],recruitmentOpen:r.recruitmentOpen,recruitmentQuestions:r.recruitmentQuestions,category:r.category??"Technical"},o={id:(await bs(nt(Ie,"clubs"),s)).id,...s},u=await vn.getUserProfile(e);if(!u)throw new Error("Assigned user not found");const h=Array.from(new Set([...u.managedClubIds||[],o.id]));return await vn.updateUserProfile(e,{role:u.role==="admin"?"admin":"contributor",managedClubIds:h}),o},OD=r=>{const e=new Date(r),t=Math.floor((new Date().getTime()-e.getTime())/1e3);let n=t/31536e3;return n>1?Math.floor(n)+" years ago":(n=t/2592e3,n>1?Math.floor(n)+" months ago":(n=t/86400,n>1?Math.floor(n)+" days ago":(n=t/3600,n>1?Math.floor(n)+" hours ago":(n=t/60,n>1?Math.floor(n)+" minutes ago":Math.floor(t)+" seconds ago"))))},FD=({type:r})=>{const e="w-6 h-6";switch(r){case"application-accepted":case"event-winner":case"access-granted":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-green-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"application-rejected":case"access-revoked":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-red-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":default:return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-indigo-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},LD=({notifications:r,onMarkAsRead:e,onMarkAllAsRead:t,onClose:n})=>{const s=r.filter(h=>!h.isRead).length,a=zs(),o=h=>{h.isRead||e(h.id),h.link&&a(h.link),n()},u=[...r].sort((h,f)=>new Date(f.timestamp).getTime()-new Date(h.timestamp).getTime());return c.jsxs("div",{className:"absolute right-0 mt-2 w-80 origin-top-right bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 border border-slate-700 focus:outline-none animate-slide-down-fade flex flex-col max-h-[70vh]",children:[c.jsxs("div",{className:"p-3 border-b border-slate-700 flex justify-between items-center flex-shrink-0",children:[c.jsx("h3",{className:"text-sm font-bold text-white",children:"Notifications"}),s>0&&c.jsx("button",{onClick:t,className:"text-xs text-indigo-400 hover:text-indigo-300 font-semibold",children:"Mark all as read"})]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:u.length>0?u.map(h=>c.jsx("button",{onClick:()=>o(h),className:"w-full text-left p-3 hover:bg-slate-700/80 transition-colors border-b border-slate-700/50 last:border-b-0",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx(FD,{type:h.type})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-300",children:h.message}),c.jsx("p",{className:`mt-1 text-xs font-bold ${h.isRead?"text-gray-500":"text-indigo-400"}`,children:OD(h.timestamp)})]}),!h.isRead&&c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx("span",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full block"})})]})},h.id)):c.jsx("div",{className:"p-8 text-center",children:c.jsx("p",{className:"text-sm text-gray-400",children:"You have no new notifications."})})}),c.jsx("div",{className:"p-2 border-t border-slate-700 flex-shrink-0",children:c.jsx(Mr,{to:"/notifications",onClick:n,className:"block w-full text-center py-2 text-xs font-bold text-gray-300 hover:bg-slate-700/80 rounded",children:"View All Notifications"})})]})},Jh=({to:r,children:e,onClick:t})=>c.jsx(Mr,{to:r,onClick:t,className:"text-gray-300 hover:text-white relative after:content-[''] after:absolute after:left-0 after:bottom-[-2px] after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full px-1 py-2 text-sm font-semibold",children:e}),Go=({to:r,children:e,onClick:t})=>c.jsx(Mr,{to:r,onClick:t,className:"block text-gray-300 hover:bg-slate-800 hover:text-white px-3 py-2 rounded-md text-base font-medium transition-colors w-full text-left",children:e}),MD=({user:r,onLogout:e,applications:t,notifications:n,onMarkAsRead:s,onMarkAllAsRead:a})=>{const[o,u]=M.useState(!1),[h,f]=M.useState(!1),[p,x]=M.useState(!1),[v,w]=M.useState(!1);zs();const N=M.useRef(null),_=M.useRef(null),T=M.useRef(null),D=()=>{u(!1),f(!1),x(!1),w(!1)},U=()=>{e(),D()};M.useEffect(()=>{const ee=S=>{N.current&&!N.current.contains(S.target)&&f(!1),_.current&&!_.current.contains(S.target)&&x(!1),T.current&&!T.current.contains(S.target)&&w(!1)};return document.addEventListener("mousedown",ee),()=>{document.removeEventListener("mousedown",ee)}},[]);const k=M.useMemo(()=>!r||!r.managedClubIds?!1:t.some(ee=>r.managedClubIds.includes(ee.clubId)&&ee.status==="pending"),[r,t]),F=M.useMemo(()=>n.filter(ee=>!ee.isRead).length,[n]),J=ee=>{const S=ee.split(" ");return S.length>1?`${S[0][0]}${S[S.length-1][0]}`.toUpperCase():ee.substring(0,2).toUpperCase()};return c.jsxs("header",{className:"bg-gray-950/80 backdrop-blur-md shadow-sm sticky top-0 z-50",children:[c.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-20",children:[c.jsx("div",{className:"flex items-center",children:c.jsx(Mr,{to:"/",onClick:D,className:"flex-shrink-0 flex items-center space-x-2 group",children:c.jsx("span",{className:"text-white text-2xl font-extrabold tracking-tighter",children:"GCET"})})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"hidden md:block",children:c.jsxs("nav",{className:"ml-10 flex items-baseline space-x-4",children:[c.jsx(Jh,{to:"/",onClick:D,children:"Home"}),c.jsxs("div",{className:"relative",ref:_,children:[c.jsxs("button",{onClick:()=>x(ee=>!ee),className:"text-gray-300 hover:text-white relative after:content-[''] after:absolute after:left-0 after:bottom-[-2px] after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full px-1 py-2 text-sm font-semibold flex items-center gap-1",children:["Events",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform ${p?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),p&&c.jsxs("div",{className:"absolute left-0 mt-2 w-48 origin-top-left bg-slate-800 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 border border-slate-700 focus:outline-none animate-slide-down-fade",children:[c.jsx(Mr,{to:"/events",onClick:D,className:"w-full text-left block px-4 py-2 text-sm text-gray-300 hover:bg-slate-700/80 transition-colors",children:"All Events"}),c.jsx(Mr,{to:"/annual-events",onClick:D,className:"w-full text-left block px-4 py-2 text-sm text-gray-300 hover:bg-slate-700/80 transition-colors",children:"Annual Events"})]})]}),!(r!=null&&r.isGuest)&&c.jsx(Jh,{to:"/clubs",onClick:D,children:"Clubs"}),c.jsx(Jh,{to:"/news",onClick:D,children:"News"}),c.jsx(Jh,{to:"/opportunities",onClick:D,children:"Opportunities"})]})}),r&&c.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 md:ml-8",children:[c.jsxs("div",{className:"relative",ref:T,children:[c.jsxs("button",{onClick:()=>w(ee=>!ee),className:"relative p-2 rounded-full text-gray-400 hover:text-white hover:bg-slate-800 transition-colors focus:outline-none","aria-label":"View notifications",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),F>0&&c.jsx("span",{className:"absolute top-1 right-1 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-slate-900"})]}),v&&c.jsx(LD,{notifications:n,onMarkAsRead:s,onMarkAllAsRead:a,onClose:()=>w(!1)})]}),c.jsxs("div",{className:"hidden md:block relative",ref:N,children:[c.jsx("button",{onClick:()=>f(ee=>!ee),className:"flex items-center space-x-2 p-1 rounded-full hover:bg-slate-800 transition-colors",children:c.jsxs("div",{className:"relative w-9 h-9 rounded-full bg-indigo-600 flex items-center justify-center font-bold text-white",children:[J(r.name),k&&c.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-slate-900"})]})}),h&&c.jsxs("div",{className:"absolute right-0 mt-2 w-48 origin-top-right bg-slate-800 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 border border-slate-700 focus:outline-none animate-slide-down-fade",children:[c.jsxs(Mr,{to:"/profile",onClick:D,className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-slate-700/80 transition-colors",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"My Profile"]}),c.jsxs("button",{onClick:U,className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700/80 transition-colors",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]})]})]}),c.jsx("div",{className:"-mr-2 flex md:hidden",children:c.jsxs("button",{onClick:()=>u(!o),type:"button",className:"bg-gray-900 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white","aria-controls":"mobile-menu","aria-expanded":o,children:[c.jsx("span",{className:"sr-only",children:"Open main menu"}),o?c.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):c.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})]})}),o&&c.jsx("div",{className:"md:hidden",id:"mobile-menu",children:c.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[c.jsx(Go,{to:"/",onClick:D,children:"Home"}),c.jsx(Go,{to:"/events",onClick:D,children:"All Events"}),c.jsx(Go,{to:"/annual-events",onClick:D,children:"Annual Events"}),c.jsx(Go,{to:"/clubs",onClick:D,children:"Clubs"}),c.jsx(Go,{to:"/news",onClick:D,children:"News"}),c.jsx(Go,{to:"/opportunities",onClick:D,children:"Opportunities"}),r&&c.jsx(Go,{to:"/profile",onClick:D,children:"My Profile"}),r&&c.jsx("button",{onClick:U,className:"block text-red-400 hover:bg-slate-800 hover:text-red-300 px-3 py-2 rounded-md text-base font-medium transition-colors w-full text-left",children:"Logout"})]})})]})},UD=()=>c.jsx("footer",{className:"bg-[#1D2434] text-white pt-8 pb-4",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-8 text-center md:text-left",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("h3",{className:"text-2xl font-extrabold tracking-tighter inline-block md:inline",children:"GCET"}),c.jsx("p",{className:"mt-4 text-gray-400 max-w-xs mx-auto md:mx-0",children:"The official hub for clubs, events, and campus life at the University of Excellence."})]}),c.jsxs("div",{className:"hidden md:block",children:[c.jsx("h3",{className:"text-sm font-semibold tracking-wider uppercase text-gray-400",children:"Navigation"}),c.jsxs("ul",{className:"mt-4 space-y-3",children:[c.jsx("li",{children:c.jsx(Mr,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"})}),c.jsx("li",{children:c.jsx(Mr,{to:"/clubs",className:"text-gray-300 hover:text-white transition-colors",children:"Clubs"})}),c.jsx("li",{children:c.jsx(Mr,{to:"/events",className:"text-gray-300 hover:text-white transition-colors",children:"Events"})}),c.jsx("li",{children:c.jsx(Mr,{to:"/news",className:"text-gray-300 hover:text-white transition-colors",children:"News"})})]})]}),c.jsxs("div",{className:"hidden md:block",children:[c.jsx("h3",{className:"text-sm font-semibold tracking-wider uppercase text-gray-400",children:"Resources"}),c.jsxs("ul",{className:"mt-4 space-y-3",children:[c.jsx("li",{children:c.jsx(Mr,{to:"/opportunities",className:"text-gray-300 hover:text-white transition-colors",children:"Opportunities"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Contact Us"})})]})]}),c.jsxs("div",{className:"hidden md:block",children:[c.jsx("h3",{className:"text-sm font-semibold tracking-wider uppercase text-gray-400",children:"Social"}),c.jsxs("ul",{className:"mt-4 space-y-3",children:[c.jsx("li",{children:c.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Twitter"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Youtube"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Instagram"})})]})]})]}),c.jsxs("div",{className:"mt-8 border-t border-gray-800 pt-4 text-center text-sm text-gray-500",children:[c.jsxs("p",{children:[" ",new Date().getFullYear()," GCET. All Rights Reserved."]}),c.jsx("p",{className:"mt-2",children:"Developed & Maintained by Pavan & Paramesh"})]})]})}),VD=()=>c.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:c.jsxs("svg",{viewBox:"0 0 400 400",className:"w-full h-full",children:[c.jsxs("defs",{children:[c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"15",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"rgb(99, 102, 241)",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"rgb(168, 85, 247)",stopOpacity:1}})]}),c.jsxs("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"rgb(236, 72, 153)",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"rgb(239, 68, 68)",stopOpacity:1}})]})]}),c.jsx("circle",{cx:"200",cy:"200",r:"100",fill:"url(#grad1)",className:"animate-subtle-pulse",style:{animationDelay:"0s"},filter:"url(#glow)"}),c.jsx("path",{d:"M 100 100 Q 200 50 300 100 T 100 100",fill:"none",stroke:"url(#grad2)",strokeWidth:"8",className:"animate-subtle-float",style:{animationDelay:"1s"}}),c.jsx("circle",{cx:"120",cy:"280",r:"40",fill:"url(#grad2)",className:"animate-subtle-pulse",style:{animationDelay:"2s"}}),c.jsx("circle",{cx:"280",cy:"120",r:"30",fill:"white",className:"animate-subtle-float opacity-20",style:{animationDelay:"0.5s"}})]})}),Bp=({icon:r,title:e,description:t,color:n,className:s,style:a})=>c.jsxs("div",{className:`bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-lg hover:border-${n}-500/50 hover:-translate-y-1 transition-all duration-300 h-full ${s||""}`,style:a,children:[c.jsx("div",{className:`w-12 h-12 rounded-full bg-${n}-500/10 flex items-center justify-center mb-4`,children:c.jsx("div",{className:`text-${n}-400`,children:r})}),c.jsx("h3",{className:"text-lg font-bold text-white",children:e}),c.jsx("p",{className:"mt-1 text-sm text-gray-400",children:t})]}),BD=({onNavigate:r})=>c.jsx("section",{className:"relative bg-slate-950 text-gray-300 overflow-hidden font-sans",children:c.jsx("div",{className:"container mx-auto px-6 py-20 min-h-[90vh]",children:c.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[c.jsxs("div",{className:"relative z-10 text-center lg:text-left",children:[c.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-96 h-96 bg-indigo-600/10 rounded-full filter blur-3xl -z-10"}),c.jsxs("h1",{className:"text-5xl lg:text-6xl font-extrabold text-white leading-tight tracking-tighter animate-staggered-fade-in",style:{animationDelay:"100ms"},children:["Innovate & Connect:",c.jsx("br",{}),c.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400",children:"Your Campus Hub."})]}),c.jsx("p",{className:"mt-6 text-lg text-gray-400 max-w-lg mx-auto lg:mx-0 animate-staggered-fade-in",style:{animationDelay:"200ms"},children:"Discover events, join clubs, and shape your college experience. All in one place."}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4 animate-staggered-fade-in",style:{animationDelay:"300ms"},children:[c.jsx(Mr,{to:"/events",children:c.jsx("button",{className:"w-full sm:w-auto px-8 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-colors transform hover:scale-105 shadow-lg",children:"Explore Events"})}),c.jsx(Mr,{to:"/clubs",children:c.jsx("button",{className:"w-full sm:w-auto px-8 py-3 bg-slate-800/80 backdrop-blur-sm border border-slate-700 text-white font-semibold rounded-xl hover:bg-slate-700 transition-colors",children:"Find Clubs"})})]}),c.jsxs("div",{className:"mt-12 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx(Bp,{className:"animate-staggered-fade-in",style:{animationDelay:"400ms"},title:"Discover Events",description:"Browse workshops, competitions, and fests.",color:"indigo",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx(Bp,{className:"animate-staggered-fade-in",style:{animationDelay:"500ms"},title:"Join Clubs",description:"Find your community and get involved on campus.",color:"purple",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),c.jsx(Bp,{className:"animate-staggered-fade-in",style:{animationDelay:"600ms"},title:"Stay Updated",description:"Get the latest news on recruitments and results.",color:"pink",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3h2m-4 3H9m-7 4h15M3 15h15"})})})]})]}),c.jsx("div",{className:"relative h-[400px] lg:h-[500px] hidden md:block animate-staggered-fade-in",style:{animationDelay:"200ms"},children:c.jsx(VD,{})})]})})}),Rn=({title:r,subtitle:e,align:t="center",colorScheme:n="dark"})=>{const s=t==="left"?"text-left":"text-center",a=t==="center"?"mx-auto":"",o=n==="dark"?"text-white":"text-gray-900",u=n==="dark"?"text-gray-400":"text-gray-600";return c.jsxs("div",{className:`${s} mb-12`,children:[c.jsx("h2",{className:`text-4xl md:text-5xl font-extrabold ${o} tracking-tighter`,children:r}),e&&c.jsx("p",{className:`mt-4 max-w-2xl ${a} text-lg ${u}`,children:e})]})},zD={Technical:"bg-indigo-500/80 text-white",Cultural:"bg-pink-500/80 text-white",Workshop:"bg-yellow-500/80 text-gray-900",Sports:"bg-purple-500/80 text-white"},$D=({events:r})=>{const[e,t]=M.useState(0),n=zs(),s=r.filter(f=>f.isFeatured&&f.status!==pt.Past),a=()=>{const p=e===0?s.length-1:e-1;t(p)},o=M.useCallback(()=>{if(s.length===0)return;const p=e===s.length-1?0:e+1;t(p)},[e,s.length]),u=f=>{t(f)};if(M.useEffect(()=>{const f=setInterval(o,7e3);return()=>clearInterval(f)},[o]),!s.length)return null;const h=s[e];return c.jsx("section",{className:"py-24 bg-[#1D2434]",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(Rn,{title:"Don't Miss Out",subtitle:"Check out the major upcoming and ongoing events on campus.",colorScheme:"dark"}),c.jsxs("div",{className:"relative w-full max-w-6xl mx-auto h-[550px] rounded-2xl overflow-hidden shadow-2xl group bg-gray-900",children:[c.jsx("div",{className:"w-full h-full",children:s.map((f,p)=>c.jsx("div",{className:`absolute inset-0 w-full h-full transition-opacity duration-1000 ease-in-out ${p===e?"opacity-100":"opacity-0"}`,children:c.jsx("img",{src:f.imageUrl,alt:f.name,className:`w-full h-full object-cover ${p===e?"kenburns-active":""}`})},f.id))}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-full p-8 md:p-12 text-white",children:c.jsxs("div",{className:"animate-fade-in-content",children:[c.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-full ${zD[h.category]}`,children:h.category}),c.jsx("h3",{className:"text-3xl md:text-5xl font-extrabold mt-3 leading-tight tracking-tighter max-w-3xl",children:h.name}),c.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-gray-300",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:h.date})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{children:h.time})]})]}),c.jsxs("button",{onClick:()=>n(`/events/${h.id}`),className:"mt-8 bg-white text-gray-900 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all duration-300 flex items-center transform hover:scale-105",children:[c.jsx("span",{children:"View Details"}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})},h.id),c.jsx("button",{onClick:a,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 text-white p-3 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/50 focus:outline-none",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsx("button",{onClick:o,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 text-white p-3 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/50 focus:outline-none",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),c.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-3",children:s.map((f,p)=>c.jsx("button",{onClick:()=>u(p),className:`h-2.5 w-2.5 rounded-full transition-all duration-300 ${e===p?"bg-white w-6":"bg-white/50 hover:bg-white"}`,"aria-label":`Go to slide ${p+1}`},p))})]})]})})},WD=({member:r,index:e})=>{const t=M.useRef(null),n=a=>{if(!t.current)return;const{left:o,top:u,width:h,height:f}=t.current.getBoundingClientRect(),p=a.clientX-o,x=a.clientY-u;t.current.style.setProperty("--mouse-x",`${p}px`),t.current.style.setProperty("--mouse-y",`${x}px`);const v=(x/f-.5)*-25,w=(p/h-.5)*25;t.current.style.transform=`rotateX(${v}deg) rotateY(${w}deg) scale3d(1.03, 1.03, 1.03)`},s=()=>{t.current&&(t.current.style.transform="rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)")};return c.jsx("div",{className:"perspective-container animate-card-enter group/container",style:{animationDelay:`${e*150}ms`},onMouseMove:n,onMouseLeave:s,children:c.jsx("div",{ref:t,className:"tilt-card w-full h-full",children:c.jsx("div",{className:`spotlight-card relative rounded-xl p-[2px] h-full transition-all duration-400 
                                bg-gray-800 group-hover/container:bg-gradient-to-br from-pink-500 via-indigo-500 to-cyan-400
                                group-hover/container:shadow-[0_0_5px_rgba(236,72,153,0.5),_0_0_5px_rgba(99,102,241,0.5)]`,children:c.jsx("div",{className:"relative bg-gray-900/80 backdrop-blur-lg rounded-[10px] p-8 h-full flex flex-col items-center text-center",children:c.jsxs("div",{className:"tilt-card-inner relative z-10 flex flex-col items-center",children:[c.jsx("div",{className:`relative rounded-full p-1 transition-all duration-400 
                                           bg-gray-700 group-hover/container:bg-gradient-to-br from-pink-500 via-indigo-500 to-cyan-400
                                           group-hover/container:scale-105 `,style:{transform:"translateZ(40px)"},children:c.jsx("img",{className:"w-32 h-32 object-cover rounded-full shadow-lg border-2 border-gray-900",src:r.imageUrl,alt:r.name})}),c.jsx("h3",{className:"text-2xl font-extrabold text-white mt-6",style:{transform:"translateZ(30px)"},children:r.name}),c.jsx("p",{className:"text-lg font-bold text-indigo-400 mt-1",style:{transform:"translateZ(20px)"},children:r.title}),c.jsx("blockquote",{className:"mt-6",style:{transform:"translateZ(10px)"},children:c.jsx("div",{children:c.jsxs("p",{className:"text-md text-gray-400 italic",children:['"',r.quote,'"']})})})]})})})})})},HD=({leadership:r})=>c.jsx("section",{className:"py-24 bg-gradient-to-b from-slate-950 to-slate-900",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(Rn,{title:"Meet Our Leadership",subtitle:"Guiding the vision of tomorrow's innovators and creators."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10",children:r.map((e,t)=>c.jsx(WD,{member:e,index:t},e.id))})]})}),GD=[{question:"How can I become a club admin?",answer:"Club admin roles (Contributors) are assigned by the college administration. If you are a student leader or faculty coordinator, please contact the student affairs office to request contributor access for managing your club on the platform."},{question:"Where can I find photos or highlights from past events?",answer:"Yes! Navigate to any past event on the 'Events' page. If the organizers have uploaded highlights, you'll find a dedicated section with photo galleries, guest details, and winner announcements."},{question:"What is the difference between Events and Opportunities?",answer:"The 'Events' section lists all activities happening on our campus, organized by our own student clubs. The 'Opportunities' section features external events like national hackathons, internships, and workshops hosted by other top companies and institutions."},{question:"How do I apply to join a club?",answer:"Go to the club's detail page and look for the 'Join Us' section. If recruitment is open, you can click 'Apply Now' to fill out their application form. If it's closed, you can still send a joining request for the admins to consider later."}],qD=({faq:r,isOpen:e,onClick:t})=>c.jsxs("div",{className:"border-b border-slate-700 py-6",children:[c.jsxs("button",{onClick:t,className:"w-full flex justify-between items-center text-left",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:r.question}),c.jsx("span",{className:`transform transition-transform duration-300 ${e?"rotate-45":"rotate-0"}`,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${e?"max-h-96 mt-4":"max-h-0"}`,children:c.jsx("p",{className:"text-gray-400 max-w-3xl",children:r.answer})})]}),KD=()=>{const[r,e]=M.useState(0),t=n=>{e(r===n?null:n)};return c.jsx("section",{className:"py-16 bg-slate-900",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(Rn,{title:"Frequently Asked Questions",align:"left"}),c.jsx("div",{children:GD.map((n,s)=>c.jsx(qD,{faq:n,isOpen:r===s,onClick:()=>t(s)},s))})]})})},YD=({club:r,index:e})=>c.jsxs(Mr,{to:`/clubs/${r.id}`,className:"group relative bg-[#1D2434] rounded-2xl overflow-hidden shadow-lg border border-transparent hover:border-indigo-500/50 transition-all duration-300 transform hover:-translate-y-2 animate-card-enter block",style:{animationDelay:`${e*150}ms`},children:[c.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-2/3 bg-indigo-600/10 rounded-full filter blur-3xl opacity-50 group-hover:opacity-100 transition-opacity"}),c.jsxs("div",{className:"relative p-8 text-center",children:[c.jsx("img",{src:r.logoUrl,alt:`${r.name} logo`,className:"w-24 h-24 rounded-full mx-auto mb-5 border-4 border-slate-700 shadow-md transition-transform duration-300 group-hover:scale-110"}),c.jsx("h3",{className:"text-2xl font-extrabold text-white",children:r.name}),c.jsx("p",{className:"mt-2 text-gray-400 text-sm h-10 line-clamp-2",children:r.tagline}),c.jsx("div",{className:"mt-6",children:c.jsxs("span",{className:"text-indigo-400 font-semibold group-hover:text-indigo-300 transition-colors flex items-center justify-center",children:["Learn More",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1.5 transform group-hover:translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]}),XD=({clubs:r})=>{const e=r.slice(0,4),t=zs();return c.jsx("section",{className:"py-24 bg-slate-900",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(Rn,{title:"Find Your Community",subtitle:"From coding to culture, there's a club for everyone. Explore our diverse student organizations and get involved."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,s)=>c.jsx(YD,{club:n,index:s},n.id))}),c.jsx("div",{className:"text-center mt-12",children:c.jsx("button",{onClick:()=>t("/clubs"),className:"bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors shadow-lg hover:shadow-indigo-500/30",children:"Explore All Clubs"})})]})})},QD=[{id:1,name:"K. Parameshwara Rao",title:"Developed the Frontend and Backend of the website",imageUrl:"https://firebasestorage.googleapis.com/v0/b/evnty-124fb.firebasestorage.app/o/WhatsApp%20Image%202025-06-06%20at%2011.44.04%20(1).jpeg?alt=media&token=a9469518-ac2f-49e6-b5b0-c09e5e713f12"},{id:2,name:"Pavan Bejawada",title:"Designed and Developed the Frontend of the website",imageUrl:"https://firebasestorage.googleapis.com/v0/b/evnty-124fb.firebasestorage.app/o/pavan_image.jpeg?alt=media&token=384136d9-6282-4797-88c9-2a113b86b2ac"}],JD=({developer:r,index:e})=>{const t=M.useRef(null),n=a=>{if(!t.current)return;const{left:o,top:u,width:h,height:f}=t.current.getBoundingClientRect(),p=a.clientX-o,v=((a.clientY-u)/f-.5)*-20,w=(p/h-.5)*20;t.current.style.transform=`rotateX(${v}deg) rotateY(${w}deg)`},s=()=>{t.current&&(t.current.style.transform="rotateX(0deg) rotateY(0deg)")};return c.jsx("div",{className:"perspective-container group animate-card-enter",style:{animationDelay:`${e*150}ms`},onMouseMove:n,onMouseLeave:s,children:c.jsxs("div",{ref:t,className:"tilt-card bg-slate-900/50 p-8 rounded-2xl border border-slate-800 shadow-lg text-center transition-transform duration-300 ease-out",children:[c.jsx("img",{className:"w-40 h-40 object-cover rounded-full mb-4 shadow-lg mx-auto border-4 border-slate-800 group-hover:border-indigo-500 transition-colors",src:r.imageUrl,alt:r.name,style:{transform:"translateZ(40px)"}}),c.jsx("h3",{className:"text-xl font-extrabold text-white tracking-tight",style:{transform:"translateZ(30px)"},children:r.name}),c.jsx("p",{className:"text-base text-indigo-400 font-semibold",style:{transform:"translateZ(20px)"},children:r.title})]})})},ZD=()=>c.jsx("section",{className:"py-16 bg-slate-950",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(Rn,{title:"Meet the Developers",subtitle:"The minds behind the code, crafting a seamless campus experience for you."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-2xl mx-auto",children:QD.map((r,e)=>c.jsx(JD,{developer:r,index:e},r.id))})]})}),eO=({clubs:r,index:e})=>{const t=Math.ceil(r.length/2),n=r.slice(0,t),s=r.slice(t),a=180,o=100,u=2*Math.PI/n.length,h=2*Math.PI/n.length;return c.jsxs("section",{className:"relative py-12 bg-gradient-to-br from-gray-900 via-slate-900 to-black overflow-hidden",children:[c.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-indigo-600 rounded-full mix-blend-screen filter blur-3xl opacity-20 animate-float-subtle"}),c.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-72 h-72 bg-purple-600 rounded-full mix-blend-screen filter blur-3xl opacity-20 animate-float-subtle",style:{animationDelay:"5s"}}),c.jsx("div",{className:"absolute top-1/2 right-1/3 w-60 h-60 bg-pink-500 rounded-full mix-blend-screen filter blur-3xl opacity-10 animate-float-subtle",style:{animationDelay:"10s"}}),c.jsxs("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center z-10",children:[c.jsx(Rn,{title:"Join Our Vibrant Community",subtitle:"Discover your passion, meet new people, and be part of something bigger. Dive into a world of innovation, creativity, and friendship.",colorScheme:"dark"}),c.jsxs("div",{className:"relative w-[400px] h-[400px] flex items-center justify-center my-2 group",children:[c.jsx("div",{className:"absolute w-full h-full animate-spin-medium-reverse",children:n&&n.map((f,p)=>{const x=p*u,v=a*Math.cos(x),w=a*Math.sin(x);return c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-transform duration-500 group-hover:scale-110",style:{transform:`translate(${v}px, ${w}px)`},children:c.jsx("img",{src:f.logoUrl,alt:`${f.name} logo`,className:"w-16 h-16 object-cover rounded-full bg-white/10 p-1 shadow-lg backdrop-blur-sm border-2 border-white/20 transition-all duration-300 hover:!scale-125 hover:border-indigo-400"})},`${f.id}-outer`)})}),c.jsx("div",{className:"absolute w-full h-full animate-spin-medium",children:s&&s.map((f,p)=>{const x=p*h,v=o*Math.cos(x),w=o*Math.sin(x);return c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-transform duration-500 group-hover:scale-110",style:{transform:`translate(${v}px, ${w}px)`},children:c.jsx("img",{src:f.logoUrl,alt:`${f.name} logo`,className:"w-14 h-14 object-cover rounded-full bg-white/10 p-1 shadow-md backdrop-blur-sm border-2 border-white/20 transition-all duration-300 hover:!scale-125 hover:border-pink-400"})},`${f.id}-inner`)})}),c.jsx("div",{className:"relative w-40 h-40 rounded-full bg-gray-900/50 backdrop-blur-md flex items-center justify-center text-center z-10 border border-white/10 shadow-2xl",children:c.jsx("h2",{className:"text-5xl font-extrabold tracking-tighter bg-clip-text text-transparent bg-gradient-to-br from-white to-gray-400",children:"Clubs"})})]}),c.jsxs(Mr,{to:"/clubs",className:"button-glow-effect mt-6 bg-indigo-600 text-white font-bold py-4 px-8 rounded-full hover:bg-indigo-700 transition-all duration-300 flex items-center group shadow-lg transform hover:scale-105",children:[c.jsx("span",{children:"Explore All Clubs"}),c.jsx("div",{className:"ml-3 h-8 w-8 rounded-full bg-white/20 text-white flex items-center justify-center transform group-hover:translate-x-1 transition-transform",children:""})]})]})]})},tO=({events:r,clubs:e,leadership:t})=>c.jsxs("div",{className:"space-y-0",children:[c.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx(BD,{})}),c.jsx($D,{events:r}),c.jsx(XD,{clubs:e}),c.jsx(HD,{leadership:t}),c.jsx(eO,{clubs:e}),c.jsx(ZD,{}),c.jsx(KD,{})]}),FT=r=>r.name||r.title||"Untitled Event",rO=r=>r.description||"No description available",nO=r=>r.date||"TBD",sO=r=>r.time||"TBD",iO=r=>r.location||"TBD",sd={registerUserForEvent:async(r,e,t)=>{try{const n=Ru(Ie),s=lt(Ie,"users",r);n.update(s,{registeredEvents:Cg(e)});const a=lt(Ie,"events",t,"clubEvents",e);n.update(a,{registeredUsers:Cg(r)}),await n.commit(),console.log(` User ${r} registered for event ${e}`)}catch(n){throw console.error("Error registering user for event:",n),n}},unregisterUserFromEvent:async(r,e,t)=>{try{const n=Ru(Ie),s=lt(Ie,"users",r);n.update(s,{registeredEvents:ku(e)});const a=lt(Ie,"events",t,"clubEvents",e);n.update(a,{registeredUsers:ku(r)}),await n.commit(),console.log(` User ${r} unregistered from event ${e}`)}catch(n){throw console.error("Error unregistering user from event:",n),n}},isUserRegistered:async(r,e)=>{try{const t=lt(Ie,"users",r),n=await Vr(t);return n.exists()?(n.data().registeredEvents||[]).includes(e):!1}catch(t){return console.error("Error checking user registration:",t),!1}},getUserRegisteredEvents:async(r,e)=>{try{const t=lt(Ie,"users",r),n=await Vr(t);if(!n.exists())return[];const a=n.data().registeredEvents||[];return e.filter(o=>a.includes(o.id))}catch(t){return console.error("Error getting user registered events:",t),[]}},getEventRegistrationCount:async(r,e)=>{try{const t=lt(Ie,"events",e,"clubEvents",r),n=await Vr(t);return n.exists()?(n.data().registeredUsers||[]).length:0}catch(t){return console.error("Error getting event registration count:",t),0}},cleanupEventDeletion:async(r,e)=>{try{const t=lt(Ie,"events",e,"clubEvents",r),n=await Vr(t);if(!n.exists())return;const a=n.data().registeredUsers||[];if(a.length===0)return;const o=Ru(Ie);for(const u of a){const h=lt(Ie,"users",u);o.update(h,{registeredEvents:ku(r)})}await o.commit(),console.log(` Cleaned up event ${r} from ${a.length} users`)}catch(t){console.error("Error cleaning up event deletion:",t)}},cleanupUserDeletion:async r=>{try{const e=lt(Ie,"users",r),t=await Vr(e);if(!t.exists())return;const s=t.data().registeredEvents||[];if(s.length===0)return;const a=nt(Ie,"events"),o=await Mt(a),u=Ru(Ie);for(const h of o.docs){const f=h.id,p=nt(Ie,"events",f,"clubEvents"),x=await Mt(p);for(const v of x.docs)if(s.includes(v.id)){const w=lt(Ie,"events",f,"clubEvents",v.id);u.update(w,{registeredUsers:ku(r)})}}await u.commit(),console.log(` Cleaned up user ${r} from ${s.length} events`)}catch(e){console.error("Error cleaning up user deletion:",e)}}},aO=({children:r,fallback:e=c.jsx("div",{className:"animate-pulse bg-slate-800 rounded-lg h-32"}),threshold:t=.1,rootMargin:n="50px",className:s="",onVisible:a})=>{const[o,u]=M.useState(!1),[h,f]=M.useState(!1),p=M.useRef(null);return M.useEffect(()=>{const x=new IntersectionObserver(([v])=>{v.isIntersecting&&(u(!0),f(!0),a&&a(),x.disconnect())},{threshold:t,rootMargin:n});return p.current&&x.observe(p.current),()=>x.disconnect()},[t,n,a]),c.jsx("div",{ref:p,className:s,children:h?r:e})},oO={[pt.Upcoming]:"bg-green-500/10 text-green-400",[pt.Ongoing]:"bg-blue-500/10 text-blue-400 animate-pulse",[pt.Past]:"bg-gray-500/10 text-gray-400"},lO={Technical:"bg-indigo-500/10 text-indigo-400",Cultural:"bg-pink-500/10 text-pink-400",Workshop:"bg-yellow-500/10 text-yellow-400",Sports:"bg-purple-500/10 text-purple-400"},LT=({event:r,registrations:e=0})=>{const t=zs(),n=FT(r),s=rO(r),a=nO(r),o=sO(r),u=iO(r),h=new Date,[f,p]=ju.useState(0),[x,v]=ju.useState(!1),[w,N]=ju.useState(!1),_=async()=>{if(!w)try{v(!0);const T=await sd.getEventRegistrationCount(r.id,r.organizerClubId);p(T),N(!0)}catch(T){console.error("Error loading registration count:",T)}finally{v(!1)}};return new Date(a)>h?pt.Upcoming:new Date(a)===h?(console.log("Ongoing"),pt.Ongoing):pt.Past,c.jsxs("div",{className:"bg-[#1D2434] rounded-xl shadow-lg overflow-hidden flex flex-col md:flex-row transition-all duration-300 hover:shadow-indigo-500/20 hover:scale-[1.02]",children:[c.jsx("img",{className:"h-56 w-full object-cover md:h-auto md:w-48",src:r.imageUrl,alt:n}),c.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${lO[r.category]} flex-shrink-0`,children:r.category}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-semibold ${oO[r.status]} flex-shrink-0`,children:r.status})]}),c.jsx("h3",{className:"text-xl font-bold text-white leading-tight mt-3",children:n}),c.jsx("p",{className:"mt-2 text-gray-400 text-sm line-clamp-2",children:s})]}),c.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center justify-between",children:[c.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("span",{children:[a," at ",o]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{children:u})]})]}),c.jsxs("button",{onClick:()=>t(`/events/${r.id}`),className:"mt-4 sm:mt-0 bg-indigo-600 text-white font-bold py-2 px-4 rounded-full hover:bg-indigo-700 transition-colors duration-300 flex items-center group",children:["Learn More",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-2 transform group-hover:translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:c.jsx(aO,{fallback:c.jsxs("div",{className:"bg-slate-800 rounded-lg px-4 py-2 text-sm text-gray-400 font-semibold flex items-center justify-center w-full sm:w-auto animate-pulse",children:[c.jsx("div",{className:"h-4 w-4 mr-2 bg-gray-600 rounded"}),"Loading..."]}),onVisible:_,children:c.jsxs("div",{className:"bg-slate-800 rounded-lg px-4 py-2 text-sm text-indigo-400 font-semibold flex items-center justify-center w-full sm:w-auto",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2h5m6 0v-6a4 4 0 00-4-4V4a4 4 0 018 0v6a4 4 0 00-4 4v6z"})}),x?"Loading...":`${f} Registration${f===1?"":"s"}`]})})})})]})]})},cO=({events:r,clubs:e,registrations:t={}})=>{const[n,s]=M.useState(""),[a,o]=M.useState("all"),[u,h]=M.useState("all"),f=["Technical","Cultural","Workshop","Sports"],p=M.useMemo(()=>r.filter(w=>{const _=FT(w).toLowerCase().includes(n.toLowerCase()),T=a==="all"||w.organizerClubId===a,D=u==="all"||w.category===u;return _&&T&&D}),[n,a,u,r]);function x(w){return w.sort((N,_)=>new Date(_.date).getTime()-new Date(N.date).getTime())}const v=x(p);return c.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(Rn,{title:"All College Events",subtitle:"Your central hub for every workshop, seminar, and competition on campus."}),c.jsx("div",{className:"bg-slate-900/60 backdrop-blur-sm p-4 rounded-lg shadow-lg mb-8 sticky top-24 z-40 border border-slate-700",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx("input",{type:"text",placeholder:"Search by event name...",className:"md:col-span-2 w-full px-4 py-3 bg-slate-800 text-gray-200 border border-slate-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:n,onChange:w=>s(w.target.value)}),c.jsxs("select",{className:"w-full px-4 py-3 bg-slate-800 text-gray-200 border border-slate-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:a,onChange:w=>o(w.target.value),children:[c.jsx("option",{value:"all",children:"All Clubs"}),e.map(w=>c.jsx("option",{value:w.id,children:w.name},w.id))]}),c.jsxs("select",{className:"w-full px-4 py-3 bg-slate-800 text-gray-200 border border-slate-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:u,onChange:w=>h(w.target.value),children:[c.jsx("option",{value:"all",children:"All Categories"}),f.map(w=>c.jsx("option",{value:w,children:w},w))]})]})}),c.jsx("div",{className:"space-y-8",children:v.length>0?v.map(w=>c.jsx(LT,{event:w,registrations:t[w.id]||0},w.id)):c.jsx("div",{className:"text-center bg-slate-900 p-8 rounded-lg",children:c.jsx("p",{className:"text-gray-400",children:"No events match your criteria. Try adjusting your filters."})})})]})},uO="modulepreload",dO=function(r){return"/"+r},j_={},L0=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=o(t.map(f=>{if(f=dO(f),f in j_)return;j_[f]=!0;const p=f.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":uO,p||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),p)return new Promise((w,N)=>{v.addEventListener("load",w),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},D_=({title:r,subtitle:e,events:t,noEventsMessage:n="No events to display."})=>t.length===0?c.jsxs("div",{className:"py-8",children:[c.jsx(Rn,{title:r,subtitle:e}),c.jsx("div",{className:"text-center bg-[#10141D] p-8 rounded-lg shadow-md",children:c.jsx("p",{className:"text-gray-400",children:n})})]}):c.jsxs("section",{className:"py-8",children:[r&&c.jsx(Rn,{title:r,subtitle:e}),c.jsx("div",{className:"space-y-8",children:t.map(s=>c.jsx(LT,{event:s},s.id))})]}),na=({label:r,id:e,...t})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("input",{id:e,...t,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),Zh=({label:r,id:e,...t})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("textarea",{id:e,...t,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),O_=({label:r,id:e,children:t,...n})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("select",{id:e,...n,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:t})]}),Rg=({clubId:r,onClose:e,onCreateEvent:t,onUpdateEvent:n,eventToEdit:s})=>{var Gt,qt,Yt,Is,En;const a=!!s,[o,u]=M.useState(!1),[h,f]=M.useState(!1),[p,x]=M.useState(""),[v,w]=M.useState([]),[N,_]=M.useState((s==null?void 0:s.name)||""),[T,D]=M.useState((s==null?void 0:s.date)||""),[U,k]=M.useState((s==null?void 0:s.time)||""),[F,J]=M.useState((s==null?void 0:s.location)||""),[ee,S]=M.useState((s==null?void 0:s.description)||""),[I,A]=M.useState(((Gt=s==null?void 0:s.rules)==null?void 0:Gt.join(`
`))||""),[j,L]=M.useState((s==null?void 0:s.category)||"Technical"),[V,O]=M.useState(((qt=s==null?void 0:s.capacity)==null?void 0:qt.toString())||""),[Be,De]=M.useState(((Yt=s==null?void 0:s.specialGuests)==null?void 0:Yt.join(`
`))||""),[Se,We]=M.useState(s!=null&&s.registrationFee&&s.registrationFee>0?"paid":"free"),[Ne,Ee]=M.useState(((Is=s==null?void 0:s.registrationFee)==null?void 0:Is.toString())||""),[q,se]=M.useState((s==null?void 0:s.customSections)||[]),[z,te]=M.useState(null),[Q,Z]=M.useState(!1),[ue,Ce]=M.useState(!1),[oe,pe]=M.useState(!1),[ge,Xe]=M.useState((s==null?void 0:s.whatsappLink)||""),[tt,mt]=M.useState((s==null?void 0:s.mediaHouseAssist)||!1),[it,tr]=M.useState((s==null?void 0:s.registrationType)||"individual"),[Ct,ze]=M.useState(((En=s==null?void 0:s.maxTeamSize)==null?void 0:En.toString())||""),fr=(He,bt,At)=>{const Pr=[...q];Pr[He]={...Pr[He],[bt]:At},se(Pr)},Rr=(He,bt)=>{if(!bt)return;const At=[...q];At[He]={...At[He],files:Array.from(bt)},se(At)},Tr=()=>{se([...q,{title:"",content:""}])},Nr=He=>{se(q.filter((bt,At)=>At!==He))},As=He=>{He.target.files&&He.target.files[0]&&te(He.target.files[0])},_n=He=>{if(He.target.files){const bt=Array.from(He.target.files);w(bt)}},Sr=async He=>{He.preventDefault(),Ce(!0);let bt=(s==null?void 0:s.imageUrl)||"";if(z){Z(!0);try{const rr=O0(),ye=Jx(rr,`eventImages/${r}/${Date.now()}_${z.name}`);await Xx(ye,z),bt=await Qx(ye)}catch(rr){console.error("Error uploading image:",rr),alert("Image upload failed. Please try again."),Z(!1),Ce(!1);return}Z(!1)}const At=a?s.id:`ev${Date.now()}`;let Pr=pt.Upcoming;const us=new Date().toISOString().slice(0,10);T===us&&(Pr=pt.Ongoing);const bn={id:At,name:N,date:T,time:U,location:F,description:ee,rules:I.split(`
`).filter(rr=>rr.trim()!==""),category:j,registrationFee:Se==="paid"?Number(Ne):0,capacity:V?parseInt(V):void 0,specialGuests:Be.split(`
`).filter(rr=>rr.trim()!==""),customSections:q.filter(rr=>rr.title.trim()!==""&&rr.content.trim()!==""),imageUrl:bt,status:Pr,whatsappLink:ge,mediaHouseAssist:tt,registrationType:it,...it==="team"&&Ct?{maxTeamSize:parseInt(Ct)}:{}};if(a&&n){const rr={...s,...bn};n(rr);try{const ye=lt(Ie,"events",r,"clubEvents",At);await sl(ye,{...bn,organizerClubId:r,createdAt:s.createdAt||new Date().toISOString()}),console.log("Event updated:",{...bn,organizerClubId:r})}catch(ye){console.error("Error updating event:",ye)}Ce(!1)}else if(t){const rr={id:At,imageUrl:bt||`https://picsum.photos/seed/${Date.now()}/800/400`,status:pt.Upcoming,organizerClubId:r,coordinators:[],whatsappLink:ge,mediaHouseAssist:tt,...bn};t(rr);try{const ye=lt(Ie,"events",r,"clubEvents",At);await sl(ye,{...bn,organizerClubId:r,createdAt:new Date().toISOString()}),console.log("Event created:",{...bn,organizerClubId:r})}catch(ye){console.error("Error creating event:",ye)}Ce(!1)}},cs=async()=>{Ce(!0);try{await hr.updateClubEvent(r,s.id,{status:pt.Past}),pe(!0),alert("Event marked as completed and moved to past events."),e()}catch(He){console.log(He),alert("Failed to mark event as completed.")}Ce(!1)};return c.jsxs("div",{className:"flex flex-col flex-1 min-h-0 relative",children:[ue&&c.jsx("div",{className:"absolute inset-0 bg-black/60 z-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("p",{className:"mt-4 text-lg text-white",children:"Submitting event..."})]})}),c.jsx("div",{className:"p-6 border-b border-slate-700 flex-shrink-0",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:a?"Edit Event Details":"Host a New Event"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl",children:""})]})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:c.jsxs("form",{id:"create-event-form",onSubmit:Sr,children:[c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsx(na,{label:"Event Title",id:"name",value:N,onChange:He=>_(He.target.value),type:"text",required:!0}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(na,{label:"Date",id:"date",value:T,onChange:He=>D(He.target.value),type:"date",required:!0}),c.jsx(na,{label:"Time",id:"time",value:U,onChange:He=>k(He.target.value),type:"time",required:!0})]}),c.jsx(na,{label:"Venue / Location",id:"location",value:F,onChange:He=>J(He.target.value),type:"text",required:!0,placeholder:"e.g., Main Auditorium or Virtual"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Event Banner (Image Upload)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:As,className:"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-500 file:text-white hover:file:bg-indigo-600"}),Q&&c.jsx("p",{className:"text-indigo-400 mt-2",children:"Uploading image..."})]}),c.jsx(Zh,{label:"Description",id:"description",value:ee,onChange:He=>S(He.target.value),rows:4,required:!0}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs(O_,{label:"Category",id:"category",value:j,onChange:He=>L(He.target.value),required:!0,children:[c.jsx("option",{value:"Technical",children:"Technical"}),c.jsx("option",{value:"Cultural",children:"Cultural"}),c.jsx("option",{value:"Workshop",children:"Workshop"}),c.jsx("option",{value:"Sports",children:"Sports"})]}),c.jsx(na,{label:"Event Capacity",id:"capacity",value:V,onChange:He=>O(He.target.value),type:"number",min:"1",placeholder:"e.g., 100"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Registration Fee"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-gray-300",children:[c.jsx("input",{type:"radio",name:"feeType",value:"free",checked:Se==="free",onChange:()=>We("free"),className:"h-4 w-4 bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-slate-900"}),c.jsx("span",{children:"Free"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-gray-300",children:[c.jsx("input",{type:"radio",name:"feeType",value:"paid",checked:Se==="paid",onChange:()=>We("paid"),className:"h-4 w-4 bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-slate-900"}),c.jsx("span",{children:"Paid"})]})]})]}),Se==="paid"&&c.jsx("div",{className:"animate-tab-content-enter",children:c.jsx(na,{label:"Fee Amount ($)",id:"registrationFee",type:"number",min:"0.01",step:"0.01",placeholder:"e.g., 10",required:!0,value:Ne,onChange:He=>Ee(He.target.value)})}),c.jsx(Zh,{label:"Special Guests/Speakers (Optional)",id:"specialGuests",value:Be,onChange:He=>De(He.target.value),rows:2,placeholder:"Enter one guest per line."}),c.jsx(Zh,{label:"Rules & Guidelines (Optional)",id:"rules",value:I,onChange:He=>A(He.target.value),rows:3,placeholder:"Enter one rule per line."}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Custom Sections"}),c.jsx("div",{className:"space-y-4",children:q.map((He,bt)=>c.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg space-y-2 relative",children:[c.jsx("button",{type:"button",onClick:()=>Nr(bt),className:"absolute top-2 right-2 p-1 bg-red-600/20 text-red-400 hover:bg-red-600/50 rounded-full text-sm font-bold",children:""}),c.jsx(na,{label:"Section Title",id:`custom-title-${bt}`,value:He.title,onChange:At=>fr(bt,"title",At.target.value),placeholder:"e.g., Prizes"}),c.jsxs(O_,{label:"Section Type",id:`custom-type-${bt}`,value:He.type||"text",onChange:At=>fr(bt,"type",At.target.value),required:!0,children:[c.jsx("option",{value:"text",children:"Text"}),c.jsx("option",{value:"image",children:"Image"}),c.jsx("option",{value:"video",children:"Video"})]}),(!He.type||He.type==="text")&&c.jsx(Zh,{label:"Section Content",id:`custom-content-${bt}`,value:He.content||"",onChange:At=>fr(bt,"content",At.target.value),rows:3,placeholder:"Describe the section content..."}),(He.type==="image"||He.type==="video")&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:He.type==="image"?"Upload Images":"Upload Videos"}),c.jsx("input",{type:"file",accept:He.type==="image"?"image/*":"video/*",multiple:!0,onChange:At=>Rr(bt,At.target.files),className:"block"}),He.files&&He.files.length>0&&c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:He.files.map((At,Pr)=>c.jsx("span",{className:"text-xs text-gray-400 bg-slate-700 px-2 py-1 rounded",children:At.name},Pr))})]})]},bt))}),c.jsx("button",{type:"button",onClick:Tr,className:"mt-3 px-4 py-2 text-sm bg-slate-700 hover:bg-slate-600 rounded-md font-semibold",children:"+ Add Custom Section"})]}),o&&c.jsxs("div",{className:"mt-4",children:[c.jsx("button",{type:"button",className:"bg-gray-700 text-white px-4 py-2 rounded-lg",onClick:()=>f(!0),children:"Mark as Past Event"}),h&&c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsx("input",{type:"text",placeholder:"Winner Details",value:p,onChange:He=>x(He.target.value),className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"}),c.jsx("input",{type:"file",multiple:!0,onChange:_n,className:"block"})]})]}),c.jsx("div",{children:c.jsx(na,{label:"WhatsApp Group Link (for students to join)",id:"whatsappLink",type:"url",value:ge,onChange:He=>Xe(He.target.value),placeholder:"https://chat.whatsapp.com/...",required:!1})}),c.jsxs("div",{className:"flex items-center mt-4",children:[c.jsx("label",{htmlFor:"mediaHouseAssist",className:"text-sm font-medium text-gray-300 mr-3",children:"Do you want any assist from media house for promotions?"}),c.jsx("input",{id:"mediaHouseAssist",type:"checkbox",checked:tt,onChange:He=>mt(He.target.checked),className:"h-5 w-5 text-indigo-600 bg-slate-800 border-slate-600 rounded focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Registration Type"}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-gray-300",children:[c.jsx("input",{type:"radio",name:"registrationType",value:"individual",checked:it==="individual",onChange:()=>tr("individual"),className:"h-4 w-4 bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Individual"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-gray-300",children:[c.jsx("input",{type:"radio",name:"registrationType",value:"team",checked:it==="team",onChange:()=>tr("team"),className:"h-4 w-4 bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{children:"Team"})]})]})]}),it==="team"&&c.jsx("div",{children:c.jsx(na,{label:"Maximum Team Size",id:"maxTeamSize",type:"number",min:"2",max:"20",required:!0,value:Ct,onChange:He=>ze(He.target.value),placeholder:"e.g., 4"})})]}),c.jsx("div",{className:"p-6 border-t border-slate-700",children:c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",form:"create-event-form",className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors",children:a?"Save Changes":"Create Event"}),a&&(s==null?void 0:s.status)!==pt.Past&&c.jsx("button",{type:"button",onClick:cs,className:"px-6 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors",disabled:ue,children:"Mark Event as Completed"})]})})]})})]})},hO=({currentUser:r,club:e,contributors:t,onContributorUpdate:n})=>{const[s,a]=M.useState(!1),[o,u]=M.useState(!1),[h,f]=M.useState(null);M.useEffect(()=>{(async()=>{if(r!=null&&r.id){const N=await rv(r.id,e.id);a(N)}})()},[r,e.id]);const p=t.filter(w=>{var N;return(N=w.managedClubIds)==null?void 0:N.includes(e.id)}),x=async(w,N)=>{if(r!=null&&r.id){u(!0),f(null);try{await ev(w,e.id,r.id)?(f({text:`${N} has been revoked from ${e.name}`,type:"success"}),n()):f({text:"Failed to revoke contributor access",type:"error"})}catch{f({text:"Error revoking contributor access",type:"error"})}finally{u(!1)}}},v=async(w,N)=>{if(r!=null&&r.id){u(!0),f(null);try{await tv(w,r.id)?(f({text:`${N} has been revoked from all clubs`,type:"success"}),n()):f({text:"Failed to revoke all contributor access",type:"error"})}catch{f({text:"Error revoking all contributor access",type:"error"})}finally{u(!1)}}};return s?c.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:"Club Contributors"}),c.jsxs("span",{className:"text-sm text-gray-400",children:[p.length," contributor(s)"]})]}),h&&c.jsx("div",{className:`mb-4 p-3 rounded-md ${h.type==="success"?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:h.text}),p.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-slate-800 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),c.jsx("p",{className:"text-gray-400",children:"No contributors assigned to this club"})]}):c.jsx("div",{className:"space-y-3",children:p.map(w=>{var N,_,T;return c.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-indigo-400 font-bold text-sm",children:(_=(N=w.name)==null?void 0:N.charAt(0))==null?void 0:_.toUpperCase()})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:w.name}),c.jsx("p",{className:"text-sm text-gray-400",children:w.rollNumber})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-gray-400",children:[((T=w.managedClubIds)==null?void 0:T.length)||0," club(s)"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>x(w.id,w.name),disabled:o,className:"px-3 py-1 text-xs bg-orange-600/50 text-orange-300 hover:bg-orange-600/80 rounded-md disabled:opacity-50",children:["Revoke from ",e.name]}),w.managedClubIds&&w.managedClubIds.length>1&&c.jsx("button",{onClick:()=>v(w.id,w.name),disabled:o,className:"px-3 py-1 text-xs bg-red-600/50 text-red-300 hover:bg-red-600/80 rounded-md disabled:opacity-50",children:"Revoke All"})]})]})]},w.id)})}),c.jsx("div",{className:"mt-4 p-3 bg-slate-800/30 rounded-md",children:c.jsxs("p",{className:"text-xs text-gray-400",children:[c.jsx("strong",{children:"Note:"})," As a contributor to this club, you can revoke other contributors' access to this club. Admins can revoke access to any club."]})})]}):null},fO=({clubId:r,clubName:e,isAdmin:t})=>{const[n,s]=M.useState({name:"",email:"",phone:"",type:"route",business_type:"individual",bank_account:{name:"",ifsc:"",account_number:""}}),[a,o]=M.useState(!1),[u,h]=M.useState(!1),[f,p]=M.useState(null),[x,v]=M.useState(null),[w,N]=M.useState(!1);M.useEffect(()=>{t&&r&&_()},[t,r]);const _=async()=>{try{o(!0);const F=lt(Ie,"clubs",r,"paymentDetails","razorpay"),J=await Vr(F);if(J.exists()){const ee=J.data();s(ee),N(!0)}}catch(F){console.error("Error loading payment details:",F),p("Failed to load payment details")}finally{o(!1)}},T=(F,J)=>{if(F.includes(".")){const[ee,S]=F.split(".");s(I=>({...I,[ee]:{...I[ee],[S]:J}}))}else s(ee=>({...ee,[F]:J}))},D=()=>n.name.trim()?n.email.trim()?/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(n.email)?n.phone.trim()?n.bank_account.name.trim()?n.bank_account.ifsc.trim()?n.bank_account.account_number.trim()?!0:(p("Account number is required"),!1):(p("IFSC code is required"),!1):(p("Bank account holder name is required"),!1):(p("Phone number is required"),!1):(p("Only GCET college email addresses are allowed"),!1):(p("Email is required"),!1):(p("Vendor name is required"),!1),U=async()=>{const F=await fetch("https://us-central1-evnty-124fb.cloudfunctions.net/createRazorpaySubMerchant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!F.ok){const ee=await F.json();throw new Error(ee.error||"Failed to create sub-merchant")}return(await F.json()).linked_account_id},k=async F=>{if(F.preventDefault(),p(null),v(null),!!D())try{h(!0);let J=n.linked_account_id;J||(J=await U());const ee={...n,linked_account_id:J,status:"active",updated_at:new Date,created_at:w?n.created_at:new Date},S=lt(Ie,"clubs",r,"paymentDetails","razorpay");await sl(S,ee),s(ee),N(!0),v("Payment details saved successfully! Sub-merchant account created.")}catch(J){console.error("Error saving payment details:",J),p(J.message||"Failed to save payment details")}finally{h(!1)}};return t?a?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),c.jsx("span",{className:"ml-2",children:"Loading payment details..."})]}):c.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-lg p-6 border border-slate-700",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Payment Details Management"}),c.jsxs("p",{className:"text-gray-300",children:["Configure payment details for ",e," to enable direct payments to your account."]})]}),f&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded mb-4",children:f}),x&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded mb-4",children:x}),c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Vendor Name *"}),c.jsx("input",{type:"text",value:n.name,onChange:F=>T("name",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter vendor name",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),c.jsx("input",{type:"email",value:n.email,onChange:F=>T("email",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter email address",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number *"}),c.jsx("input",{type:"tel",value:n.phone,onChange:F=>T("phone",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter phone number",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Type *"}),c.jsxs("select",{value:n.type,onChange:F=>T("type",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"route",children:"Route"}),c.jsx("option",{value:"marketplace",children:"Marketplace"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Business Type *"}),c.jsxs("select",{value:n.business_type,onChange:F=>T("business_type",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"individual",children:"Individual"}),c.jsx("option",{value:"company",children:"Company"}),c.jsx("option",{value:"partnership",children:"Partnership"}),c.jsx("option",{value:"llp",children:"LLP"}),c.jsx("option",{value:"trust",children:"Trust"}),c.jsx("option",{value:"ngo",children:"NGO"})]})]})]}),c.jsxs("div",{className:"border-t border-slate-600 pt-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Bank Account Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Holder Name *"}),c.jsx("input",{type:"text",value:n.bank_account.name,onChange:F=>T("bank_account.name",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter account holder name",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"IFSC Code *"}),c.jsx("input",{type:"text",value:n.bank_account.ifsc,onChange:F=>T("bank_account.ifsc",F.target.value.toUpperCase()),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter IFSC code",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Number *"}),c.jsx("input",{type:"text",value:n.bank_account.account_number,onChange:F=>T("bank_account.account_number",F.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter account number",required:!0})]})]})]}),n.linked_account_id&&c.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Sub-Merchant Account Status"}),c.jsxs("p",{className:"text-blue-300",children:[c.jsx("strong",{children:"Linked Account ID:"})," ",n.linked_account_id]}),c.jsxs("p",{className:"text-blue-300",children:[c.jsx("strong",{children:"Status:"})," ",n.status||"Pending Verification"]}),c.jsxs("div",{className:"mt-3 p-3 bg-yellow-500/20 border border-yellow-500/50 rounded",children:[c.jsxs("p",{className:"text-yellow-300 text-sm",children:[c.jsx("strong",{children:"Note:"})," This is a mock sub-merchant account. To create real Razorpay sub-merchants:"]}),c.jsxs("ul",{className:"text-yellow-300 text-sm mt-2 ml-4 list-disc",children:[c.jsx("li",{children:"Set up a Razorpay Partner account"}),c.jsx("li",{children:"Use Razorpay Partners API for sub-merchant creation"}),c.jsx("li",{children:"Complete KYC process for each sub-merchant"}),c.jsx("li",{children:"Contact Razorpay support for Partner API access"})]})]})]}),c.jsxs("div",{className:"flex justify-end space-x-4",children:[c.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 border border-slate-600 rounded-md text-gray-300 hover:bg-slate-700",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Saving...":w?"Update Details":"Create Sub-Merchant"})]})]})]}):c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsx("p",{className:"text-yellow-800",children:"Only club admins can manage payment details."})})};async function mO(r,e,t){const n=O0(),s=r.name.split(".").pop()||"jpg",a=Jx(n,`clubs/${e}/${t}.${s}`);return await Xx(a,r),await Qx(a)}async function pO(r,e,t){const n=O0(),s=r.name.split(".").pop()||"jpg",a=`${Date.now()}_${Math.floor(Math.random()*1e5)}`,o=Jx(n,`events/${e}/${t}/highlights/${a}.${s}`);return await Xx(o,r),await Qx(o)}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Hf={};Hf.version="0.18.5";var MT=1252,gO=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],UT=function(r){gO.indexOf(r)!=-1&&(MT=r)};function xO(){UT(1252)}var id=function(r){UT(r)};function vO(){id(1200),xO()}var ef=function(e){return String.fromCharCode(e)},F_=function(e){return String.fromCharCode(e)},Gf,ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ad(r){for(var e="",t=0,n=0,s=0,a=0,o=0,u=0,h=0,f=0;f<r.length;)t=r.charCodeAt(f++),a=t>>2,n=r.charCodeAt(f++),o=(t&3)<<4|n>>4,s=r.charCodeAt(f++),u=(n&15)<<2|s>>6,h=s&63,isNaN(n)?u=h=64:isNaN(s)&&(h=64),e+=ro.charAt(a)+ro.charAt(o)+ro.charAt(u)+ro.charAt(h);return e}function va(r){var e="",t=0,n=0,s=0,a=0,o=0,u=0,h=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<r.length;)a=ro.indexOf(r.charAt(f++)),o=ro.indexOf(r.charAt(f++)),t=a<<2|o>>4,e+=String.fromCharCode(t),u=ro.indexOf(r.charAt(f++)),n=(o&15)<<4|u>>2,u!==64&&(e+=String.fromCharCode(n)),h=ro.indexOf(r.charAt(f++)),s=(u&3)<<6|h,h!==64&&(e+=String.fromCharCode(s));return e}var Ft=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),_a=(function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function al(r){return Ft?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function L_(r){return Ft?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var oi=function(e){return Ft?_a(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function M0(r){if(typeof ArrayBuffer>"u")return oi(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function Cd(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function yO(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var gn=Ft?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:_a(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),s=0;for(e=0,t=0;e<r.length;t+=s,++e)if(s=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function wO(r){for(var e=[],t=0,n=r.length+250,s=al(r.length+255),a=0;a<r.length;++a){var o=r.charCodeAt(a);if(o<128)s[t++]=o;else if(o<2048)s[t++]=192|o>>6&31,s[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var u=r.charCodeAt(++a)&1023;s[t++]=240|o>>8&7,s[t++]=128|o>>2&63,s[t++]=128|u>>6&15|(o&3)<<4,s[t++]=128|u&63}else s[t++]=224|o>>12&15,s[t++]=128|o>>6&63,s[t++]=128|o&63;t>n&&(e.push(s.slice(0,t)),t=0,s=al(65535),n=65530)}return e.push(s.slice(0,t)),gn(e)}var zu=/\u0000/g,tf=/[\u0001-\u0006]/g;function xc(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function ci(r,e){var t=""+r;return t.length>=e?t:wr("0",e-t.length)+t}function nv(r,e){var t=""+r;return t.length>=e?t:wr(" ",e-t.length)+t}function qf(r,e){var t=""+r;return t.length>=e?t:t+wr(" ",e-t.length)}function _O(r,e){var t=""+Math.round(r);return t.length>=e?t:wr("0",e-t.length)+t}function EO(r,e){var t=""+r;return t.length>=e?t:wr("0",e-t.length)+t}var M_=Math.pow(2,32);function rc(r,e){if(r>M_||r<-M_)return _O(r,e);var t=Math.round(r);return EO(t,e)}function Kf(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var U_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function bO(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var _r={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},V_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},TO={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Yf(r,e,t){for(var n=r<0?-1:1,s=r*n,a=0,o=1,u=0,h=1,f=0,p=0,x=Math.floor(s);f<e&&(x=Math.floor(s),u=x*o+a,p=x*f+h,!(s-x<5e-8));)s=1/(s-x),a=o,o=u,h=f,f=p;if(p>e&&(f>e?(p=h,u=a):(p=f,u=o)),!t)return[0,n*u,p];var v=Math.floor(n*u/p);return[v,n*u-v*p,p]}function rf(r,e,t){if(r>2958465||r<0)return null;var n=r|0,s=Math.floor(86400*(r-n)),a=0,o=[],u={D:n,T:s,u:86400*(r-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),e&&e.date1904&&(n+=1462),u.u>.9999&&(u.u=0,++s==86400&&(u.T=s=0,++n,++u.D)),n===60)o=t?[1317,10,29]:[1900,2,29],a=3;else if(n===0)o=t?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var h=new Date(1900,0,1);h.setDate(h.getDate()+n-1),o=[h.getFullYear(),h.getMonth()+1,h.getDate()],a=h.getDay(),n<60&&(a=(a+6)%7),t&&(a=RO(h,o))}return u.y=o[0],u.m=o[1],u.d=o[2],u.S=s%60,s=Math.floor(s/60),u.M=s%60,s=Math.floor(s/60),u.H=s,u.q=a,u}var VT=new Date(1899,11,31,0,0,0),NO=VT.getTime(),SO=new Date(1900,2,1,0,0,0);function BT(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=SO&&(t+=1440*60*1e3),(t-(NO+(r.getTimezoneOffset()-VT.getTimezoneOffset())*6e4))/(1440*60*1e3)}function sv(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function CO(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function AO(r){var e=r<0?12:11,t=sv(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function IO(r){var e=sv(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function kO(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=AO(r):e===10?t=r.toFixed(10).substr(0,12):t=IO(r),sv(CO(t.toUpperCase()))}function Pg(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):kO(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return vo(14,BT(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function RO(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function PO(r,e,t,n){var s="",a=0,o=0,u=t.y,h,f=0;switch(r){case 98:u=t.y+543;case 121:switch(e.length){case 1:case 2:h=u%100,f=2;break;default:h=u%1e4,f=4;break}break;case 109:switch(e.length){case 1:case 2:h=t.m,f=e.length;break;case 3:return zp[t.m-1][1];case 5:return zp[t.m-1][0];default:return zp[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:h=t.d,f=e.length;break;case 3:return U_[t.q][0];default:return U_[t.q][1]}break;case 104:switch(e.length){case 1:case 2:h=1+(t.H+11)%12,f=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:h=t.H,f=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:h=t.M,f=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?ci(t.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,a=Math.round(o*(t.S+t.u)),a>=60*o&&(a=0),e==="s"?a===0?"0":""+a/o:(s=ci(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":h=t.D*24+t.H;break;case"[m]":case"[mm]":h=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":h=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}f=e.length===3?1:2;break;case 101:h=u,f=1;break}var p=f>0?ci(h,f):"";return p}function no(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var zT=/%/g;function jO(r,e,t){var n=e.replace(zT,""),s=e.length-n.length;return ca(r,n,t*Math.pow(10,2*s))+wr("%",s)}function DO(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ca(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function $T(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+$T(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),t=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),t.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+a):t+="E+"+(o-a);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,s)+"."+t.substr(2+s),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,h,f,p){return h+f+p.substr(0,(s+a)%s)+"."+p.substr(a)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var WT=/# (\?+)( ?)\/( ?)(\d+)/;function OO(r,e,t){var n=parseInt(r[4],10),s=Math.round(e*n),a=Math.floor(s/n),o=s-a*n,u=n;return t+(a===0?"":""+a)+" "+(o===0?wr(" ",r[1].length+1+r[4].length):nv(o,r[1].length)+r[2]+"/"+r[3]+ci(u,r[4].length))}function FO(r,e,t){return t+(e===0?"":""+e)+wr(" ",r[1].length+2+r[4].length)}var HT=/^#*0*\.([0#]+)/,GT=/\).*[0#]/,qT=/\(###\) ###\\?-####/;function Vn(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function B_(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function z_(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function LO(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function MO(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function Ms(r,e,t){if(r.charCodeAt(0)===40&&!e.match(GT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ms("n",n,t):"("+Ms("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return DO(r,e,t);if(e.indexOf("%")!==-1)return jO(r,e,t);if(e.indexOf("E")!==-1)return $T(e,t);if(e.charCodeAt(0)===36)return"$"+Ms(r,e.substr(e.charAt(1)==" "?2:1),t);var s,a,o,u,h=Math.abs(t),f=t<0?"-":"";if(e.match(/^00+$/))return f+rc(h,e.length);if(e.match(/^[#?]+$/))return s=rc(t,0),s==="0"&&(s=""),s.length>e.length?s:Vn(e.substr(0,e.length-s.length))+s;if(a=e.match(WT))return OO(a,h,f);if(e.match(/^#+0+$/))return f+rc(h,e.length-e.indexOf("0"));if(a=e.match(HT))return s=B_(t,a[1].length).replace(/^([^\.]+)$/,"$1."+Vn(a[1])).replace(/\.$/,"."+Vn(a[1])).replace(/\.(\d*)$/,function(N,_){return"."+_+wr("0",Vn(a[1]).length-_.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return f+B_(h,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return f+no(rc(h,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ms(r,e,-t):no(""+(Math.floor(t)+LO(t,a[1].length)))+"."+ci(z_(t,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Ms(r,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=xc(Ms(r,e.replace(/[\\-]/g,""),t)),o=0,xc(xc(e.replace(/\\/g,"")).replace(/[0#]/g,function(N){return o<s.length?s.charAt(o++):N==="0"?"0":""}));if(e.match(qT))return s=Ms(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),u=Yf(h,Math.pow(10,o)-1,!1),s=""+f,p=ca("n",a[1],u[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+a[2]+"/"+a[3],p=qf(u[2],o),p.length<a[4].length&&(p=Vn(a[4].substr(a[4].length-p.length))+p),s+=p,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),u=Yf(h,Math.pow(10,o)-1,!0),f+(u[0]||(u[1]?"":"0"))+" "+(u[1]?nv(u[1],o)+a[2]+"/"+a[3]+qf(u[2],o):wr(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=rc(t,0),e.length<=s.length?s:Vn(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var x=e.indexOf(".")-o,v=e.length-s.length-x;return Vn(e.substr(0,x)+s+e.substr(e.length-v))}if(a=e.match(/^00,000\.([#0]*0)$/))return o=z_(t,a[1].length),t<0?"-"+Ms(r,e,-t):no(MO(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?ci(0,3-N.length):"")+N})+"."+ci(o,a[1].length);switch(e){case"###,##0.00":return Ms(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var w=no(rc(h,0));return w!=="0"?f+w:"";case"###,###.00":return Ms(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Ms(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function UO(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ca(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function VO(r,e,t){var n=e.replace(zT,""),s=e.length-n.length;return ca(r,n,t*Math.pow(10,2*s))+wr("%",s)}function KT(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+KT(r,-e);var s=r.indexOf(".");s===-1&&(s=r.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),t=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!t.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+a):t+="E+"+(o-a),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,h,f,p){return h+f+p.substr(0,(s+a)%s)+"."+p.substr(a)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Si(r,e,t){if(r.charCodeAt(0)===40&&!e.match(GT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Si("n",n,t):"("+Si("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return UO(r,e,t);if(e.indexOf("%")!==-1)return VO(r,e,t);if(e.indexOf("E")!==-1)return KT(e,t);if(e.charCodeAt(0)===36)return"$"+Si(r,e.substr(e.charAt(1)==" "?2:1),t);var s,a,o,u,h=Math.abs(t),f=t<0?"-":"";if(e.match(/^00+$/))return f+ci(h,e.length);if(e.match(/^[#?]+$/))return s=""+t,t===0&&(s=""),s.length>e.length?s:Vn(e.substr(0,e.length-s.length))+s;if(a=e.match(WT))return FO(a,h,f);if(e.match(/^#+0+$/))return f+ci(h,e.length-e.indexOf("0"));if(a=e.match(HT))return s=(""+t).replace(/^([^\.]+)$/,"$1."+Vn(a[1])).replace(/\.$/,"."+Vn(a[1])),s=s.replace(/\.(\d*)$/,function(N,_){return"."+_+wr("0",Vn(a[1]).length-_.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return f+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return f+no(""+h);if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Si(r,e,-t):no(""+t)+"."+wr("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Si(r,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=xc(Si(r,e.replace(/[\\-]/g,""),t)),o=0,xc(xc(e.replace(/\\/g,"")).replace(/[0#]/g,function(N){return o<s.length?s.charAt(o++):N==="0"?"0":""}));if(e.match(qT))return s=Si(r,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),u=Yf(h,Math.pow(10,o)-1,!1),s=""+f,p=ca("n",a[1],u[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+a[2]+"/"+a[3],p=qf(u[2],o),p.length<a[4].length&&(p=Vn(a[4].substr(a[4].length-p.length))+p),s+=p,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),u=Yf(h,Math.pow(10,o)-1,!0),f+(u[0]||(u[1]?"":"0"))+" "+(u[1]?nv(u[1],o)+a[2]+"/"+a[3]+qf(u[2],o):wr(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+t,e.length<=s.length?s:Vn(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var x=e.indexOf(".")-o,v=e.length-s.length-x;return Vn(e.substr(0,x)+s+e.substr(e.length-v))}if(a=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Si(r,e,-t):no(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?ci(0,3-N.length):"")+N})+"."+ci(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var w=no(""+h);return w!=="0"?f+w:"";default:if(e.match(/\.[0#?]*$/))return Si(r,e.slice(0,e.lastIndexOf(".")),t)+Vn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ca(r,e,t){return(t|0)===t?Si(r,e,t):Ms(r,e,t)}function BO(r){for(var e=[],t=!1,n=0,s=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(s,n-s),s=n+1}if(e[e.length]=r.substr(s),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var YT=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function XT(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":Kf(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(YT))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function zO(r,e,t,n){for(var s=[],a="",o=0,u="",h="t",f,p,x,v="H";o<r.length;)switch(u=r.charAt(o)){case"G":if(!Kf(r,o))throw new Error("unrecognized character "+u+" in "+r);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(a="";(x=r.charCodeAt(++o))!==34&&o<r.length;)a+=String.fromCharCode(x);s[s.length]={t:"t",v:a},++o;break;case"\\":var w=r.charAt(++o),N=w==="("||w===")"?w:"t";s[s.length]={t:N,v:w},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:e},++o;break;case"B":case"b":if(r.charAt(o+1)==="1"||r.charAt(o+1)==="2"){if(f==null&&(f=rf(e,t,r.charAt(o+1)==="2"),f==null))return"";s[s.length]={t:"X",v:r.substr(o,2)},h=u,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||f==null&&(f=rf(e,t),f==null))return"";for(a=u;++o<r.length&&r.charAt(o).toLowerCase()===u;)a+=u;u==="m"&&h.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=v),s[s.length]={t:u,v:a},h=u;break;case"A":case"a":case"":var _={t:u,v:u};if(f==null&&(f=rf(e,t)),r.substr(o,3).toUpperCase()==="A/P"?(f!=null&&(_.v=f.H>=12?"P":"A"),_.t="T",v="h",o+=3):r.substr(o,5).toUpperCase()==="AM/PM"?(f!=null&&(_.v=f.H>=12?"PM":"AM"),_.t="T",o+=5,v="h"):r.substr(o,5).toUpperCase()==="/"?(f!=null&&(_.v=f.H>=12?"":""),_.t="T",o+=5,v="h"):(_.t="t",++o),f==null&&_.t==="T")return"";s[s.length]=_,h=u;break;case"[":for(a=u;r.charAt(o++)!=="]"&&o<r.length;)a+=r.charAt(o);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(YT)){if(f==null&&(f=rf(e,t),f==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},h=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",XT(r)||(s[s.length]={t:"t",v:a}));break;case".":if(f!=null){for(a=u;++o<r.length&&(u=r.charAt(o))==="0";)a+=u;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=u;++o<r.length&&"0#?.,E+-%".indexOf(u=r.charAt(o))>-1;)a+=u;s[s.length]={t:"n",v:a};break;case"?":for(a=u;r.charAt(++o)===u;)a+=u;s[s.length]={t:u,v:a},h=u;break;case"*":++o,(r.charAt(o)==" "||r.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":u,v:u},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=u;o<r.length&&"0123456789".indexOf(r.charAt(++o))>-1;)a+=r.charAt(o);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:u,v:u},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+r);s[s.length]={t:"t",v:u},++o;break}var T=0,D=0,U;for(o=s.length-1,h="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=v,h="h",T<1&&(T=1);break;case"s":(U=s[o].v.match(/\.0+$/))&&(D=Math.max(D,U[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":h=s[o].t;break;case"m":h==="s"&&(s[o].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&s[o].v.match(/[Hh]/)&&(T=1),T<2&&s[o].v.match(/[Mm]/)&&(T=2),T<3&&s[o].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var k="",F;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=PO(s[o].t.charCodeAt(0),s[o].v,f,D),s[o].t="t";break;case"n":case"?":for(F=o+1;s[F]!=null&&((u=s[F].t)==="?"||u==="D"||(u===" "||u==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[o].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[o].v+=s[F].v,s[F]={v:"",t:";"},++F;k+=s[o].v,o=F-1;break;case"G":s[o].t="t",s[o].v=Pg(e,t);break}var J="",ee,S;if(k.length>0){k.charCodeAt(0)==40?(ee=e<0&&k.charCodeAt(0)===45?-e:e,S=ca("n",k,ee)):(ee=e<0&&n>1?-e:e,S=ca("n",k,ee),ee<0&&s[0]&&s[0].t=="t"&&(S=S.substr(1),s[0].v="-"+s[0].v)),F=S.length-1;var I=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){I=o;break}var A=s.length;if(I===s.length&&S.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(F>=s[o].v.length-1?(F-=s[o].v.length,s[o].v=S.substr(F+1,s[o].v.length)):F<0?s[o].v="":(s[o].v=S.substr(0,F+1),F=-1),s[o].t="t",A=o);F>=0&&A<s.length&&(s[A].v=S.substr(0,F+1)+s[A].v)}else if(I!==s.length&&S.indexOf("E")===-1){for(F=S.indexOf(".")-1,o=I;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(p=s[o].v.indexOf(".")>-1&&o===I?s[o].v.indexOf(".")-1:s[o].v.length-1,J=s[o].v.substr(p+1);p>=0;--p)F>=0&&(s[o].v.charAt(p)==="0"||s[o].v.charAt(p)==="#")&&(J=S.charAt(F--)+J);s[o].v=J,s[o].t="t",A=o}for(F>=0&&A<s.length&&(s[A].v=S.substr(0,F+1)+s[A].v),F=S.indexOf(".")+1,o=I;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==I)){for(p=s[o].v.indexOf(".")>-1&&o===I?s[o].v.indexOf(".")+1:0,J=s[o].v.substr(0,p);p<s[o].v.length;++p)F<S.length&&(J+=S.charAt(F++));s[o].v=J,s[o].t="t",A=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(ee=n>1&&e<0&&o>0&&s[o-1].v==="-"?-e:e,s[o].v=ca(s[o].t,s[o].v,ee),s[o].t="t");var j="";for(o=0;o!==s.length;++o)s[o]!=null&&(j+=s[o].v);return j}var $_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function W_(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function $O(r,e){var t=BO(r),n=t.length,s=t[n-1].indexOf("@");if(n<4&&s>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||s>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=s>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=s>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=s>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var a=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,a];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match($_),u=t[1].match($_);return W_(e,o)?[n,t[0]]:W_(e,u)?[n,t[1]]:[n,t[o!=null&&u!=null?2:1]]}return[n,a]}function vo(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:_r)[r],n==null&&(n=t.table&&t.table[V_[r]]||_r[V_[r]]),n==null&&(n=TO[r]||"General");break}if(Kf(n,0))return Pg(e,t);e instanceof Date&&(e=BT(e,t.date1904));var s=$O(n,e);if(Kf(s[1]))return Pg(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return zO(s[1],e,t,s[0])}function QT(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(_r[t]==null){e<0&&(e=t);continue}if(_r[t]==r){e=t;break}}e<0&&(e=391)}return _r[e]=r,e}function U0(r){for(var e=0;e!=392;++e)r[e]!==void 0&&QT(r[e],e)}function V0(){_r=bO()}var JT=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function WO(r){var e=typeof r=="number"?_r[r]:r;return e=e.replace(JT,"(\\d+)"),new RegExp("^"+e+"$")}function HO(r,e,t){var n=-1,s=-1,a=-1,o=-1,u=-1,h=-1;(e.match(JT)||[]).forEach(function(x,v){var w=parseInt(t[v+1],10);switch(x.toLowerCase().charAt(0)){case"y":n=w;break;case"d":a=w;break;case"h":o=w;break;case"s":h=w;break;case"m":o>=0?u=w:s=w;break}}),h>=0&&u==-1&&s>=0&&(u=s,s=-1);var f=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var p=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return o==-1&&u==-1&&h==-1?f:n==-1&&s==-1&&a==-1?p:f+"T"+p}var GO=(function(){var r={};r.version="1.2.0";function e(){for(var S=0,I=new Array(256),A=0;A!=256;++A)S=A,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,I[A]=S;return typeof Int32Array<"u"?new Int32Array(I):I}var t=e();function n(S){var I=0,A=0,j=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)L[j]=S[j];for(j=0;j!=256;++j)for(A=S[j],I=256+j;I<4096;I+=256)A=L[I]=A>>>8^S[A&255];var V=[];for(j=1;j!=16;++j)V[j-1]=typeof Int32Array<"u"?L.subarray(j*256,j*256+256):L.slice(j*256,j*256+256);return V}var s=n(t),a=s[0],o=s[1],u=s[2],h=s[3],f=s[4],p=s[5],x=s[6],v=s[7],w=s[8],N=s[9],_=s[10],T=s[11],D=s[12],U=s[13],k=s[14];function F(S,I){for(var A=I^-1,j=0,L=S.length;j<L;)A=A>>>8^t[(A^S.charCodeAt(j++))&255];return~A}function J(S,I){for(var A=I^-1,j=S.length-15,L=0;L<j;)A=k[S[L++]^A&255]^U[S[L++]^A>>8&255]^D[S[L++]^A>>16&255]^T[S[L++]^A>>>24]^_[S[L++]]^N[S[L++]]^w[S[L++]]^v[S[L++]]^x[S[L++]]^p[S[L++]]^f[S[L++]]^h[S[L++]]^u[S[L++]]^o[S[L++]]^a[S[L++]]^t[S[L++]];for(j+=15;L<j;)A=A>>>8^t[(A^S[L++])&255];return~A}function ee(S,I){for(var A=I^-1,j=0,L=S.length,V=0,O=0;j<L;)V=S.charCodeAt(j++),V<128?A=A>>>8^t[(A^V)&255]:V<2048?(A=A>>>8^t[(A^(192|V>>6&31))&255],A=A>>>8^t[(A^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,O=S.charCodeAt(j++)&1023,A=A>>>8^t[(A^(240|V>>8&7))&255],A=A>>>8^t[(A^(128|V>>2&63))&255],A=A>>>8^t[(A^(128|O>>6&15|(V&3)<<4))&255],A=A>>>8^t[(A^(128|O&63))&255]):(A=A>>>8^t[(A^(224|V>>12&15))&255],A=A>>>8^t[(A^(128|V>>6&63))&255],A=A>>>8^t[(A^(128|V&63))&255]);return~A}return r.table=t,r.bstr=F,r.buf=J,r.str=ee,r})(),Kt=(function(){var e={};e.version="1.2.1";function t(P,G){for(var W=P.split("/"),H=G.split("/"),K=0,Y=0,le=Math.min(W.length,H.length);K<le;++K){if(Y=W[K].length-H[K].length)return Y;if(W[K]!=H[K])return W[K]<H[K]?-1:1}return W.length-H.length}function n(P){if(P.charAt(P.length-1)=="/")return P.slice(0,-1).indexOf("/")===-1?P:n(P.slice(0,-1));var G=P.lastIndexOf("/");return G===-1?P:P.slice(0,G+1)}function s(P){if(P.charAt(P.length-1)=="/")return s(P.slice(0,-1));var G=P.lastIndexOf("/");return G===-1?P:P.slice(G+1)}function a(P,G){typeof G=="string"&&(G=new Date(G));var W=G.getHours();W=W<<6|G.getMinutes(),W=W<<5|G.getSeconds()>>>1,P.write_shift(2,W);var H=G.getFullYear()-1980;H=H<<4|G.getMonth()+1,H=H<<5|G.getDate(),P.write_shift(2,H)}function o(P){var G=P.read_shift(2)&65535,W=P.read_shift(2)&65535,H=new Date,K=W&31;W>>>=5;var Y=W&15;W>>>=4,H.setMilliseconds(0),H.setFullYear(W+1980),H.setMonth(Y-1),H.setDate(K);var le=G&31;G>>>=5;var ve=G&63;return G>>>=6,H.setHours(G),H.setMinutes(ve),H.setSeconds(le<<1),H}function u(P){ys(P,0);for(var G={},W=0;P.l<=P.length-4;){var H=P.read_shift(2),K=P.read_shift(2),Y=P.l+K,le={};switch(H){case 21589:W=P.read_shift(1),W&1&&(le.mtime=P.read_shift(4)),K>5&&(W&2&&(le.atime=P.read_shift(4)),W&4&&(le.ctime=P.read_shift(4))),le.mtime&&(le.mt=new Date(le.mtime*1e3));break}P.l=Y,G[H]=le}return G}var h;function f(){return h||(h={})}function p(P,G){if(P[0]==80&&P[1]==75)return vt(P,G);if((P[0]|32)==109&&(P[1]|32)==105)return So(P,G);if(P.length<512)throw new Error("CFB file size "+P.length+" < 512");var W=3,H=512,K=0,Y=0,le=0,ve=0,ce=0,he=[],fe=P.slice(0,512);ys(fe,0);var Re=x(fe);switch(W=Re[0],W){case 3:H=512;break;case 4:H=4096;break;case 0:if(Re[1]==0)return vt(P,G);default:throw new Error("Major Version: Expected 3 or 4 saw "+W)}H!==512&&(fe=P.slice(0,H),ys(fe,28));var Me=P.slice(0,H);v(fe,W);var Ge=fe.read_shift(4,"i");if(W===3&&Ge!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ge);fe.l+=4,le=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),ve=fe.read_shift(4,"i"),K=fe.read_shift(4,"i"),ce=fe.read_shift(4,"i"),Y=fe.read_shift(4,"i");for(var Oe=-1,Pe=0;Pe<109&&(Oe=fe.read_shift(4,"i"),!(Oe<0));++Pe)he[Pe]=Oe;var ut=w(P,H);T(ce,Y,ut,H,he);var Ot=U(ut,le,he,H);Ot[le].name="!Directory",K>0&&ve!==O&&(Ot[ve].name="!MiniFAT"),Ot[he[0]].name="!FAT",Ot.fat_addrs=he,Ot.ssz=H;var Pt={},Vt=[],Hs=[],gi=[];k(le,Ot,ut,Vt,K,Pt,Hs,ve),N(Hs,gi,Vt),Vt.shift();var ds={FileIndex:Hs,FullPaths:gi};return G&&G.raw&&(ds.raw={header:Me,sectors:ut}),ds}function x(P){if(P[P.l]==80&&P[P.l+1]==75)return[0,0];P.chk(Be,"Header Signature: "),P.l+=16;var G=P.read_shift(2,"u");return[P.read_shift(2,"u"),G]}function v(P,G){var W=9;switch(P.l+=2,W=P.read_shift(2)){case 9:if(G!=3)throw new Error("Sector Shift: Expected 9 saw "+W);break;case 12:if(G!=4)throw new Error("Sector Shift: Expected 12 saw "+W);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+W)}P.chk("0600","Mini Sector Shift: "),P.chk("000000000000","Reserved: ")}function w(P,G){for(var W=Math.ceil(P.length/G)-1,H=[],K=1;K<W;++K)H[K-1]=P.slice(K*G,(K+1)*G);return H[W-1]=P.slice(W*G),H}function N(P,G,W){for(var H=0,K=0,Y=0,le=0,ve=0,ce=W.length,he=[],fe=[];H<ce;++H)he[H]=fe[H]=H,G[H]=W[H];for(;ve<fe.length;++ve)H=fe[ve],K=P[H].L,Y=P[H].R,le=P[H].C,he[H]===H&&(K!==-1&&he[K]!==K&&(he[H]=he[K]),Y!==-1&&he[Y]!==Y&&(he[H]=he[Y])),le!==-1&&(he[le]=H),K!==-1&&H!=he[H]&&(he[K]=he[H],fe.lastIndexOf(K)<ve&&fe.push(K)),Y!==-1&&H!=he[H]&&(he[Y]=he[H],fe.lastIndexOf(Y)<ve&&fe.push(Y));for(H=1;H<ce;++H)he[H]===H&&(Y!==-1&&he[Y]!==Y?he[H]=he[Y]:K!==-1&&he[K]!==K&&(he[H]=he[K]));for(H=1;H<ce;++H)if(P[H].type!==0){if(ve=H,ve!=he[ve])do ve=he[ve],G[H]=G[ve]+"/"+G[H];while(ve!==0&&he[ve]!==-1&&ve!=he[ve]);he[H]=-1}for(G[0]+="/",H=1;H<ce;++H)P[H].type!==2&&(G[H]+="/")}function _(P,G,W){for(var H=P.start,K=P.size,Y=[],le=H;W&&K>0&&le>=0;)Y.push(G.slice(le*V,le*V+V)),K-=V,le=Ko(W,le*4);return Y.length===0?we(0):gn(Y).slice(0,P.size)}function T(P,G,W,H,K){var Y=O;if(P===O){if(G!==0)throw new Error("DIFAT chain shorter than expected")}else if(P!==-1){var le=W[P],ve=(H>>>2)-1;if(!le)return;for(var ce=0;ce<ve&&(Y=Ko(le,ce*4))!==O;++ce)K.push(Y);T(Ko(le,H-4),G-1,W,H,K)}}function D(P,G,W,H,K){var Y=[],le=[];K||(K=[]);var ve=H-1,ce=0,he=0;for(ce=G;ce>=0;){K[ce]=!0,Y[Y.length]=ce,le.push(P[ce]);var fe=W[Math.floor(ce*4/H)];if(he=ce*4&ve,H<4+he)throw new Error("FAT boundary crossed: "+ce+" 4 "+H);if(!P[fe])break;ce=Ko(P[fe],he)}return{nodes:Y,data:J_([le])}}function U(P,G,W,H){var K=P.length,Y=[],le=[],ve=[],ce=[],he=H-1,fe=0,Re=0,Me=0,Ge=0;for(fe=0;fe<K;++fe)if(ve=[],Me=fe+G,Me>=K&&(Me-=K),!le[Me]){ce=[];var Oe=[];for(Re=Me;Re>=0;){Oe[Re]=!0,le[Re]=!0,ve[ve.length]=Re,ce.push(P[Re]);var Pe=W[Math.floor(Re*4/H)];if(Ge=Re*4&he,H<4+Ge)throw new Error("FAT boundary crossed: "+Re+" 4 "+H);if(!P[Pe]||(Re=Ko(P[Pe],Ge),Oe[Re]))break}Y[Me]={nodes:ve,data:J_([ce])}}return Y}function k(P,G,W,H,K,Y,le,ve){for(var ce=0,he=H.length?2:0,fe=G[P].data,Re=0,Me=0,Ge;Re<fe.length;Re+=128){var Oe=fe.slice(Re,Re+128);ys(Oe,64),Me=Oe.read_shift(2),Ge=cv(Oe,0,Me-he),H.push(Ge);var Pe={name:Ge,type:Oe.read_shift(1),color:Oe.read_shift(1),L:Oe.read_shift(4,"i"),R:Oe.read_shift(4,"i"),C:Oe.read_shift(4,"i"),clsid:Oe.read_shift(16),state:Oe.read_shift(4,"i"),start:0,size:0},ut=Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2);ut!==0&&(Pe.ct=F(Oe,Oe.l-8));var Ot=Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2);Ot!==0&&(Pe.mt=F(Oe,Oe.l-8)),Pe.start=Oe.read_shift(4,"i"),Pe.size=Oe.read_shift(4,"i"),Pe.size<0&&Pe.start<0&&(Pe.size=Pe.type=0,Pe.start=O,Pe.name=""),Pe.type===5?(ce=Pe.start,K>0&&ce!==O&&(G[ce].name="!StreamData")):Pe.size>=4096?(Pe.storage="fat",G[Pe.start]===void 0&&(G[Pe.start]=D(W,Pe.start,G.fat_addrs,G.ssz)),G[Pe.start].name=Pe.name,Pe.content=G[Pe.start].data.slice(0,Pe.size)):(Pe.storage="minifat",Pe.size<0?Pe.size=0:ce!==O&&Pe.start!==O&&G[ce]&&(Pe.content=_(Pe,G[ce].data,(G[ve]||{}).data))),Pe.content&&ys(Pe.content,0),Y[Ge]=Pe,le.push(Pe)}}function F(P,G){return new Date((_s(P,G+4)/1e7*Math.pow(2,32)+_s(P,G)/1e7-11644473600)*1e3)}function J(P,G){return f(),p(h.readFileSync(P),G)}function ee(P,G){var W=G&&G.type;switch(W||Ft&&Buffer.isBuffer(P)&&(W="buffer"),W||"base64"){case"file":return J(P,G);case"base64":return p(oi(va(P)),G);case"binary":return p(oi(P),G)}return p(P,G)}function S(P,G){var W=G||{},H=W.root||"Root Entry";if(P.FullPaths||(P.FullPaths=[]),P.FileIndex||(P.FileIndex=[]),P.FullPaths.length!==P.FileIndex.length)throw new Error("inconsistent CFB structure");P.FullPaths.length===0&&(P.FullPaths[0]=H+"/",P.FileIndex[0]={name:H,type:5}),W.CLSID&&(P.FileIndex[0].clsid=W.CLSID),I(P)}function I(P){var G="Sh33tJ5";if(!Kt.find(P,"/"+G)){var W=we(4);W[0]=55,W[1]=W[3]=50,W[2]=54,P.FileIndex.push({name:G,type:2,content:W,size:4,L:69,R:69,C:69}),P.FullPaths.push(P.FullPaths[0]+G),A(P)}}function A(P,G){S(P);for(var W=!1,H=!1,K=P.FullPaths.length-1;K>=0;--K){var Y=P.FileIndex[K];switch(Y.type){case 0:H?W=!0:(P.FileIndex.pop(),P.FullPaths.pop());break;case 1:case 2:case 5:H=!0,isNaN(Y.R*Y.L*Y.C)&&(W=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(W=!0);break;default:W=!0;break}}if(!(!W&&!G)){var le=new Date(1987,1,19),ve=0,ce=Object.create?Object.create(null):{},he=[];for(K=0;K<P.FullPaths.length;++K)ce[P.FullPaths[K]]=!0,P.FileIndex[K].type!==0&&he.push([P.FullPaths[K],P.FileIndex[K]]);for(K=0;K<he.length;++K){var fe=n(he[K][0]);H=ce[fe],H||(he.push([fe,{name:s(fe).replace("/",""),type:1,clsid:Se,ct:le,mt:le,content:null}]),ce[fe]=!0)}for(he.sort(function(Ge,Oe){return t(Ge[0],Oe[0])}),P.FullPaths=[],P.FileIndex=[],K=0;K<he.length;++K)P.FullPaths[K]=he[K][0],P.FileIndex[K]=he[K][1];for(K=0;K<he.length;++K){var Re=P.FileIndex[K],Me=P.FullPaths[K];if(Re.name=s(Me).replace("/",""),Re.L=Re.R=Re.C=-(Re.color=1),Re.size=Re.content?Re.content.length:0,Re.start=0,Re.clsid=Re.clsid||Se,K===0)Re.C=he.length>1?1:-1,Re.size=0,Re.type=5;else if(Me.slice(-1)=="/"){for(ve=K+1;ve<he.length&&n(P.FullPaths[ve])!=Me;++ve);for(Re.C=ve>=he.length?-1:ve,ve=K+1;ve<he.length&&n(P.FullPaths[ve])!=n(Me);++ve);Re.R=ve>=he.length?-1:ve,Re.type=1}else n(P.FullPaths[K+1]||"")==n(Me)&&(Re.R=K+1),Re.type=2}}}function j(P,G){var W=G||{};if(W.fileType=="mad")return mr(P,W);switch(A(P),W.fileType){case"zip":return Tt(P,W)}var H=(function(Ge){for(var Oe=0,Pe=0,ut=0;ut<Ge.FileIndex.length;++ut){var Ot=Ge.FileIndex[ut];if(Ot.content){var Pt=Ot.content.length;Pt>0&&(Pt<4096?Oe+=Pt+63>>6:Pe+=Pt+511>>9)}}for(var Vt=Ge.FullPaths.length+3>>2,Hs=Oe+7>>3,gi=Oe+127>>7,ds=Hs+Pe+Vt+gi,Cr=ds+127>>7,Ta=Cr<=109?0:Math.ceil((Cr-109)/127);ds+Cr+Ta+127>>7>Cr;)Ta=++Cr<=109?0:Math.ceil((Cr-109)/127);var sr=[1,Ta,Cr,gi,Vt,Pe,Oe,0];return Ge.FileIndex[0].size=Oe<<6,sr[7]=(Ge.FileIndex[0].start=sr[0]+sr[1]+sr[2]+sr[3]+sr[4]+sr[5])+(sr[6]+7>>3),sr})(P),K=we(H[7]<<9),Y=0,le=0;{for(Y=0;Y<8;++Y)K.write_shift(1,De[Y]);for(Y=0;Y<8;++Y)K.write_shift(2,0);for(K.write_shift(2,62),K.write_shift(2,3),K.write_shift(2,65534),K.write_shift(2,9),K.write_shift(2,6),Y=0;Y<3;++Y)K.write_shift(2,0);for(K.write_shift(4,0),K.write_shift(4,H[2]),K.write_shift(4,H[0]+H[1]+H[2]+H[3]-1),K.write_shift(4,0),K.write_shift(4,4096),K.write_shift(4,H[3]?H[0]+H[1]+H[2]-1:O),K.write_shift(4,H[3]),K.write_shift(-4,H[1]?H[0]-1:O),K.write_shift(4,H[1]),Y=0;Y<109;++Y)K.write_shift(-4,Y<H[2]?H[1]+Y:-1)}if(H[1])for(le=0;le<H[1];++le){for(;Y<236+le*127;++Y)K.write_shift(-4,Y<H[2]?H[1]+Y:-1);K.write_shift(-4,le===H[1]-1?O:le+1)}var ve=function(Ge){for(le+=Ge;Y<le-1;++Y)K.write_shift(-4,Y+1);Ge&&(++Y,K.write_shift(-4,O))};for(le=Y=0,le+=H[1];Y<le;++Y)K.write_shift(-4,We.DIFSECT);for(le+=H[2];Y<le;++Y)K.write_shift(-4,We.FATSECT);ve(H[3]),ve(H[4]);for(var ce=0,he=0,fe=P.FileIndex[0];ce<P.FileIndex.length;++ce)fe=P.FileIndex[ce],fe.content&&(he=fe.content.length,!(he<4096)&&(fe.start=le,ve(he+511>>9)));for(ve(H[6]+7>>3);K.l&511;)K.write_shift(-4,We.ENDOFCHAIN);for(le=Y=0,ce=0;ce<P.FileIndex.length;++ce)fe=P.FileIndex[ce],fe.content&&(he=fe.content.length,!(!he||he>=4096)&&(fe.start=le,ve(he+63>>6)));for(;K.l&511;)K.write_shift(-4,We.ENDOFCHAIN);for(Y=0;Y<H[4]<<2;++Y){var Re=P.FullPaths[Y];if(!Re||Re.length===0){for(ce=0;ce<17;++ce)K.write_shift(4,0);for(ce=0;ce<3;++ce)K.write_shift(4,-1);for(ce=0;ce<12;++ce)K.write_shift(4,0);continue}fe=P.FileIndex[Y],Y===0&&(fe.start=fe.size?fe.start-1:O);var Me=Y===0&&W.root||fe.name;if(he=2*(Me.length+1),K.write_shift(64,Me,"utf16le"),K.write_shift(2,he),K.write_shift(1,fe.type),K.write_shift(1,fe.color),K.write_shift(-4,fe.L),K.write_shift(-4,fe.R),K.write_shift(-4,fe.C),fe.clsid)K.write_shift(16,fe.clsid,"hex");else for(ce=0;ce<4;++ce)K.write_shift(4,0);K.write_shift(4,fe.state||0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,0),K.write_shift(4,fe.start),K.write_shift(4,fe.size),K.write_shift(4,0)}for(Y=1;Y<P.FileIndex.length;++Y)if(fe=P.FileIndex[Y],fe.size>=4096)if(K.l=fe.start+1<<9,Ft&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+511&-512;else{for(ce=0;ce<fe.size;++ce)K.write_shift(1,fe.content[ce]);for(;ce&511;++ce)K.write_shift(1,0)}for(Y=1;Y<P.FileIndex.length;++Y)if(fe=P.FileIndex[Y],fe.size>0&&fe.size<4096)if(Ft&&Buffer.isBuffer(fe.content))fe.content.copy(K,K.l,0,fe.size),K.l+=fe.size+63&-64;else{for(ce=0;ce<fe.size;++ce)K.write_shift(1,fe.content[ce]);for(;ce&63;++ce)K.write_shift(1,0)}if(Ft)K.l=K.length;else for(;K.l<K.length;)K.write_shift(1,0);return K}function L(P,G){var W=P.FullPaths.map(function(ce){return ce.toUpperCase()}),H=W.map(function(ce){var he=ce.split("/");return he[he.length-(ce.slice(-1)=="/"?2:1)]}),K=!1;G.charCodeAt(0)===47?(K=!0,G=W[0].slice(0,-1)+G):K=G.indexOf("/")!==-1;var Y=G.toUpperCase(),le=K===!0?W.indexOf(Y):H.indexOf(Y);if(le!==-1)return P.FileIndex[le];var ve=!Y.match(tf);for(Y=Y.replace(zu,""),ve&&(Y=Y.replace(tf,"!")),le=0;le<W.length;++le)if((ve?W[le].replace(tf,"!"):W[le]).replace(zu,"")==Y||(ve?H[le].replace(tf,"!"):H[le]).replace(zu,"")==Y)return P.FileIndex[le];return null}var V=64,O=-2,Be="d0cf11e0a1b11ae1",De=[208,207,17,224,161,177,26,225],Se="00000000000000000000000000000000",We={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:Be,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ne(P,G,W){f();var H=j(P,W);h.writeFileSync(G,H)}function Ee(P){for(var G=new Array(P.length),W=0;W<P.length;++W)G[W]=String.fromCharCode(P[W]);return G.join("")}function q(P,G){var W=j(P,G);switch(G&&G.type||"buffer"){case"file":return f(),h.writeFileSync(G.filename,W),W;case"binary":return typeof W=="string"?W:Ee(W);case"base64":return ad(typeof W=="string"?W:Ee(W));case"buffer":if(Ft)return Buffer.isBuffer(W)?W:_a(W);case"array":return typeof W=="string"?oi(W):W}return W}var se;function z(P){try{var G=P.InflateRaw,W=new G;if(W._processChunk(new Uint8Array([3,0]),W._finishFlushFlag),W.bytesRead)se=P;else throw new Error("zlib does not expose bytesRead")}catch(H){console.error("cannot use native zlib: "+(H.message||H))}}function te(P,G){if(!se)return ye(P,G);var W=se.InflateRaw,H=new W,K=H._processChunk(P.slice(P.l),H._finishFlushFlag);return P.l+=H.bytesRead,K}function Q(P){return se?se.deflateRawSync(P):En(P)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(P){var G=(P<<1|P<<11)&139536|(P<<5|P<<15)&558144;return(G>>16|G>>8|G)&255}for(var pe=typeof Uint8Array<"u",ge=pe?new Uint8Array(256):[],Xe=0;Xe<256;++Xe)ge[Xe]=oe(Xe);function tt(P,G){var W=ge[P&255];return G<=8?W>>>8-G:(W=W<<8|ge[P>>8&255],G<=16?W>>>16-G:(W=W<<8|ge[P>>16&255],W>>>24-G))}function mt(P,G){var W=G&7,H=G>>>3;return(P[H]|(W<=6?0:P[H+1]<<8))>>>W&3}function it(P,G){var W=G&7,H=G>>>3;return(P[H]|(W<=5?0:P[H+1]<<8))>>>W&7}function tr(P,G){var W=G&7,H=G>>>3;return(P[H]|(W<=4?0:P[H+1]<<8))>>>W&15}function Ct(P,G){var W=G&7,H=G>>>3;return(P[H]|(W<=3?0:P[H+1]<<8))>>>W&31}function ze(P,G){var W=G&7,H=G>>>3;return(P[H]|(W<=1?0:P[H+1]<<8))>>>W&127}function fr(P,G,W){var H=G&7,K=G>>>3,Y=(1<<W)-1,le=P[K]>>>H;return W<8-H||(le|=P[K+1]<<8-H,W<16-H)||(le|=P[K+2]<<16-H,W<24-H)||(le|=P[K+3]<<24-H),le&Y}function Rr(P,G,W){var H=G&7,K=G>>>3;return H<=5?P[K]|=(W&7)<<H:(P[K]|=W<<H&255,P[K+1]=(W&7)>>8-H),G+3}function Tr(P,G,W){var H=G&7,K=G>>>3;return W=(W&1)<<H,P[K]|=W,G+1}function Nr(P,G,W){var H=G&7,K=G>>>3;return W<<=H,P[K]|=W&255,W>>>=8,P[K+1]=W,G+8}function As(P,G,W){var H=G&7,K=G>>>3;return W<<=H,P[K]|=W&255,W>>>=8,P[K+1]=W&255,P[K+2]=W>>>8,G+16}function _n(P,G){var W=P.length,H=2*W>G?2*W:G+5,K=0;if(W>=G)return P;if(Ft){var Y=L_(H);if(P.copy)P.copy(Y);else for(;K<P.length;++K)Y[K]=P[K];return Y}else if(pe){var le=new Uint8Array(H);if(le.set)le.set(P);else for(;K<W;++K)le[K]=P[K];return le}return P.length=H,P}function Sr(P){for(var G=new Array(P),W=0;W<P;++W)G[W]=0;return G}function cs(P,G,W){var H=1,K=0,Y=0,le=0,ve=0,ce=P.length,he=pe?new Uint16Array(32):Sr(32);for(Y=0;Y<32;++Y)he[Y]=0;for(Y=ce;Y<W;++Y)P[Y]=0;ce=P.length;var fe=pe?new Uint16Array(ce):Sr(ce);for(Y=0;Y<ce;++Y)he[K=P[Y]]++,H<K&&(H=K),fe[Y]=0;for(he[0]=0,Y=1;Y<=H;++Y)he[Y+16]=ve=ve+he[Y-1]<<1;for(Y=0;Y<ce;++Y)ve=P[Y],ve!=0&&(fe[Y]=he[ve+16]++);var Re=0;for(Y=0;Y<ce;++Y)if(Re=P[Y],Re!=0)for(ve=tt(fe[Y],H)>>H-Re,le=(1<<H+4-Re)-1;le>=0;--le)G[ve|le<<Re]=Re&15|Y<<4;return H}var Gt=pe?new Uint16Array(512):Sr(512),qt=pe?new Uint16Array(32):Sr(32);if(!pe){for(var Yt=0;Yt<512;++Yt)Gt[Yt]=0;for(Yt=0;Yt<32;++Yt)qt[Yt]=0}(function(){for(var P=[],G=0;G<32;G++)P.push(5);cs(P,qt,32);var W=[];for(G=0;G<=143;G++)W.push(8);for(;G<=255;G++)W.push(9);for(;G<=279;G++)W.push(7);for(;G<=287;G++)W.push(8);cs(W,Gt,288)})();var Is=(function(){for(var G=pe?new Uint8Array(32768):[],W=0,H=0;W<Ce.length-1;++W)for(;H<Ce[W+1];++H)G[H]=W;for(;H<32768;++H)G[H]=29;var K=pe?new Uint8Array(259):[];for(W=0,H=0;W<ue.length-1;++W)for(;H<ue[W+1];++H)K[H]=W;function Y(ve,ce){for(var he=0;he<ve.length;){var fe=Math.min(65535,ve.length-he),Re=he+fe==ve.length;for(ce.write_shift(1,+Re),ce.write_shift(2,fe),ce.write_shift(2,~fe&65535);fe-- >0;)ce[ce.l++]=ve[he++]}return ce.l}function le(ve,ce){for(var he=0,fe=0,Re=pe?new Uint16Array(32768):[];fe<ve.length;){var Me=Math.min(65535,ve.length-fe);if(Me<10){for(he=Rr(ce,he,+(fe+Me==ve.length)),he&7&&(he+=8-(he&7)),ce.l=he/8|0,ce.write_shift(2,Me),ce.write_shift(2,~Me&65535);Me-- >0;)ce[ce.l++]=ve[fe++];he=ce.l*8;continue}he=Rr(ce,he,+(fe+Me==ve.length)+2);for(var Ge=0;Me-- >0;){var Oe=ve[fe];Ge=(Ge<<5^Oe)&32767;var Pe=-1,ut=0;if((Pe=Re[Ge])&&(Pe|=fe&-32768,Pe>fe&&(Pe-=32768),Pe<fe))for(;ve[Pe+ut]==ve[fe+ut]&&ut<250;)++ut;if(ut>2){Oe=K[ut],Oe<=22?he=Nr(ce,he,ge[Oe+1]>>1)-1:(Nr(ce,he,3),he+=5,Nr(ce,he,ge[Oe-23]>>5),he+=3);var Ot=Oe<8?0:Oe-4>>2;Ot>0&&(As(ce,he,ut-ue[Oe]),he+=Ot),Oe=G[fe-Pe],he=Nr(ce,he,ge[Oe]>>3),he-=3;var Pt=Oe<4?0:Oe-2>>1;Pt>0&&(As(ce,he,fe-Pe-Ce[Oe]),he+=Pt);for(var Vt=0;Vt<ut;++Vt)Re[Ge]=fe&32767,Ge=(Ge<<5^ve[fe])&32767,++fe;Me-=ut-1}else Oe<=143?Oe=Oe+48:he=Tr(ce,he,1),he=Nr(ce,he,ge[Oe]),Re[Ge]=fe&32767,++fe}he=Nr(ce,he,0)-1}return ce.l=(he+7)/8|0,ce.l}return function(ce,he){return ce.length<8?Y(ce,he):le(ce,he)}})();function En(P){var G=we(50+Math.floor(P.length*1.1)),W=Is(P,G);return G.slice(0,W)}var He=pe?new Uint16Array(32768):Sr(32768),bt=pe?new Uint16Array(32768):Sr(32768),At=pe?new Uint16Array(128):Sr(128),Pr=1,us=1;function bn(P,G){var W=Ct(P,G)+257;G+=5;var H=Ct(P,G)+1;G+=5;var K=tr(P,G)+4;G+=4;for(var Y=0,le=pe?new Uint8Array(19):Sr(19),ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ce=1,he=pe?new Uint8Array(8):Sr(8),fe=pe?new Uint8Array(8):Sr(8),Re=le.length,Me=0;Me<K;++Me)le[Z[Me]]=Y=it(P,G),ce<Y&&(ce=Y),he[Y]++,G+=3;var Ge=0;for(he[0]=0,Me=1;Me<=ce;++Me)fe[Me]=Ge=Ge+he[Me-1]<<1;for(Me=0;Me<Re;++Me)(Ge=le[Me])!=0&&(ve[Me]=fe[Ge]++);var Oe=0;for(Me=0;Me<Re;++Me)if(Oe=le[Me],Oe!=0){Ge=ge[ve[Me]]>>8-Oe;for(var Pe=(1<<7-Oe)-1;Pe>=0;--Pe)At[Ge|Pe<<Oe]=Oe&7|Me<<3}var ut=[];for(ce=1;ut.length<W+H;)switch(Ge=At[ze(P,G)],G+=Ge&7,Ge>>>=3){case 16:for(Y=3+mt(P,G),G+=2,Ge=ut[ut.length-1];Y-- >0;)ut.push(Ge);break;case 17:for(Y=3+it(P,G),G+=3;Y-- >0;)ut.push(0);break;case 18:for(Y=11+ze(P,G),G+=7;Y-- >0;)ut.push(0);break;default:ut.push(Ge),ce<Ge&&(ce=Ge);break}var Ot=ut.slice(0,W),Pt=ut.slice(W);for(Me=W;Me<286;++Me)Ot[Me]=0;for(Me=H;Me<30;++Me)Pt[Me]=0;return Pr=cs(Ot,He,286),us=cs(Pt,bt,30),G}function rr(P,G){if(P[0]==3&&!(P[1]&3))return[al(G),2];for(var W=0,H=0,K=L_(G||1<<18),Y=0,le=K.length>>>0,ve=0,ce=0;(H&1)==0;){if(H=it(P,W),W+=3,H>>>1)H>>1==1?(ve=9,ce=5):(W=bn(P,W),ve=Pr,ce=us);else{W&7&&(W+=8-(W&7));var he=P[W>>>3]|P[(W>>>3)+1]<<8;if(W+=32,he>0)for(!G&&le<Y+he&&(K=_n(K,Y+he),le=K.length);he-- >0;)K[Y++]=P[W>>>3],W+=8;continue}for(;;){!G&&le<Y+32767&&(K=_n(K,Y+32767),le=K.length);var fe=fr(P,W,ve),Re=H>>>1==1?Gt[fe]:He[fe];if(W+=Re&15,Re>>>=4,(Re>>>8&255)===0)K[Y++]=Re;else{if(Re==256)break;Re-=257;var Me=Re<8?0:Re-4>>2;Me>5&&(Me=0);var Ge=Y+ue[Re];Me>0&&(Ge+=fr(P,W,Me),W+=Me),fe=fr(P,W,ce),Re=H>>>1==1?qt[fe]:bt[fe],W+=Re&15,Re>>>=4;var Oe=Re<4?0:Re-2>>1,Pe=Ce[Re];for(Oe>0&&(Pe+=fr(P,W,Oe),W+=Oe),!G&&le<Ge&&(K=_n(K,Ge+100),le=K.length);Y<Ge;)K[Y]=K[Y-Pe],++Y}}}return G?[K,W+7>>>3]:[K.slice(0,Y),W+7>>>3]}function ye(P,G){var W=P.slice(P.l||0),H=rr(W,G);return P.l+=H[1],H[0]}function Ze(P,G){if(P)typeof console<"u"&&console.error(G);else throw new Error(G)}function vt(P,G){var W=P;ys(W,0);var H=[],K=[],Y={FileIndex:H,FullPaths:K};S(Y,{root:G.root});for(var le=W.length-4;(W[le]!=80||W[le+1]!=75||W[le+2]!=5||W[le+3]!=6)&&le>=0;)--le;W.l=le+4,W.l+=4;var ve=W.read_shift(2);W.l+=6;var ce=W.read_shift(4);for(W.l=ce,le=0;le<ve;++le){W.l+=20;var he=W.read_shift(4),fe=W.read_shift(4),Re=W.read_shift(2),Me=W.read_shift(2),Ge=W.read_shift(2);W.l+=8;var Oe=W.read_shift(4),Pe=u(W.slice(W.l+Re,W.l+Re+Me));W.l+=Re+Me+Ge;var ut=W.l;W.l=Oe+4,gt(W,he,fe,Y,Pe),W.l=ut}return Y}function gt(P,G,W,H,K){P.l+=2;var Y=P.read_shift(2),le=P.read_shift(2),ve=o(P);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var ce=P.read_shift(4),he=P.read_shift(4),fe=P.read_shift(4),Re=P.read_shift(2),Me=P.read_shift(2),Ge="",Oe=0;Oe<Re;++Oe)Ge+=String.fromCharCode(P[P.l++]);if(Me){var Pe=u(P.slice(P.l,P.l+Me));(Pe[21589]||{}).mt&&(ve=Pe[21589].mt),((K||{})[21589]||{}).mt&&(ve=K[21589].mt)}P.l+=Me;var ut=P.slice(P.l,P.l+he);switch(le){case 8:ut=te(P,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+le)}var Ot=!1;Y&8&&(ce=P.read_shift(4),ce==134695760&&(ce=P.read_shift(4),Ot=!0),he=P.read_shift(4),fe=P.read_shift(4)),he!=G&&Ze(Ot,"Bad compressed size: "+G+" != "+he),fe!=W&&Ze(Ot,"Bad uncompressed size: "+W+" != "+fe),On(H,Ge,ut,{unsafe:!0,mt:ve})}function Tt(P,G){var W=G||{},H=[],K=[],Y=we(1),le=W.compression?8:0,ve=0,ce=0,he=0,fe=0,Re=0,Me=P.FullPaths[0],Ge=Me,Oe=P.FileIndex[0],Pe=[],ut=0;for(ce=1;ce<P.FullPaths.length;++ce)if(Ge=P.FullPaths[ce].slice(Me.length),Oe=P.FileIndex[ce],!(!Oe.size||!Oe.content||Ge=="Sh33tJ5")){var Ot=fe,Pt=we(Ge.length);for(he=0;he<Ge.length;++he)Pt.write_shift(1,Ge.charCodeAt(he)&127);Pt=Pt.slice(0,Pt.l),Pe[Re]=GO.buf(Oe.content,0);var Vt=Oe.content;le==8&&(Vt=Q(Vt)),Y=we(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,ve),Y.write_shift(2,le),Oe.mt?a(Y,Oe.mt):Y.write_shift(4,0),Y.write_shift(-4,Pe[Re]),Y.write_shift(4,Vt.length),Y.write_shift(4,Oe.content.length),Y.write_shift(2,Pt.length),Y.write_shift(2,0),fe+=Y.length,H.push(Y),fe+=Pt.length,H.push(Pt),fe+=Vt.length,H.push(Vt),Y=we(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,ve),Y.write_shift(2,le),Y.write_shift(4,0),Y.write_shift(-4,Pe[Re]),Y.write_shift(4,Vt.length),Y.write_shift(4,Oe.content.length),Y.write_shift(2,Pt.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,Ot),ut+=Y.l,K.push(Y),ut+=Pt.length,K.push(Pt),++Re}return Y=we(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,Re),Y.write_shift(2,Re),Y.write_shift(4,ut),Y.write_shift(4,fe),Y.write_shift(2,0),gn([gn(H),gn(K),Y])}var Nt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Jt(P,G){if(P.ctype)return P.ctype;var W=P.name||"",H=W.match(/\.([^\.]+)$/);return H&&Nt[H[1]]||G&&(H=(W=G).match(/[\.\\]([^\.\\])+$/),H&&Nt[H[1]])?Nt[H[1]]:"application/octet-stream"}function nr(P){for(var G=ad(P),W=[],H=0;H<G.length;H+=76)W.push(G.slice(H,H+76));return W.join(`\r
`)+`\r
`}function Gn(P){var G=P.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(he){var fe=he.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});G=G.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),G.charAt(0)==`
`&&(G="=0D"+G.slice(1)),G=G.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var W=[],H=G.split(`\r
`),K=0;K<H.length;++K){var Y=H[K];if(Y.length==0){W.push("");continue}for(var le=0;le<Y.length;){var ve=76,ce=Y.slice(le,le+ve);ce.charAt(ve-1)=="="?ve--:ce.charAt(ve-2)=="="?ve-=2:ce.charAt(ve-3)=="="&&(ve-=3),ce=Y.slice(le,le+ve),le+=ve,le<Y.length&&(ce+="="),W.push(ce)}}return W.join(`\r
`)}function No(P){for(var G=[],W=0;W<P.length;++W){for(var H=P[W];W<=P.length&&H.charAt(H.length-1)=="=";)H=H.slice(0,H.length-1)+P[++W];G.push(H)}for(var K=0;K<G.length;++K)G[K]=G[K].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return oi(G.join(`\r
`))}function Ws(P,G,W){for(var H="",K="",Y="",le,ve=0;ve<10;++ve){var ce=G[ve];if(!ce||ce.match(/^\s*$/))break;var he=ce.match(/^(.*?):\s*([^\s].*)$/);if(he)switch(he[1].toLowerCase()){case"content-location":H=he[2].trim();break;case"content-type":Y=he[2].trim();break;case"content-transfer-encoding":K=he[2].trim();break}}switch(++ve,K.toLowerCase()){case"base64":le=oi(va(G.slice(ve).join("")));break;case"quoted-printable":le=No(G.slice(ve));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+K)}var fe=On(P,H.slice(W.length),le,{unsafe:!0});Y&&(fe.ctype=Y)}function So(P,G){if(Ee(P.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var W=G&&G.root||"",H=(Ft&&Buffer.isBuffer(P)?P.toString("binary"):Ee(P)).split(`\r
`),K=0,Y="";for(K=0;K<H.length;++K)if(Y=H[K],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),W||(W=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,W.length)!=W))for(;W.length>0&&(W=W.slice(0,W.length-1),W=W.slice(0,W.lastIndexOf("/")+1),Y.slice(0,W.length)!=W););var le=(H[1]||"").match(/boundary="(.*?)"/);if(!le)throw new Error("MAD cannot find boundary");var ve="--"+(le[1]||""),ce=[],he=[],fe={FileIndex:ce,FullPaths:he};S(fe);var Re,Me=0;for(K=0;K<H.length;++K){var Ge=H[K];Ge!==ve&&Ge!==ve+"--"||(Me++&&Ws(fe,H.slice(Re,K),W),Re=K)}return fe}function mr(P,G){var W=G||{},H=W.boundary||"SheetJS";H="------="+H;for(var K=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+H.slice(2)+'"',"","",""],Y=P.FullPaths[0],le=Y,ve=P.FileIndex[0],ce=1;ce<P.FullPaths.length;++ce)if(le=P.FullPaths[ce].slice(Y.length),ve=P.FileIndex[ce],!(!ve.size||!ve.content||le=="Sh33tJ5")){le=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ut){return"_x"+ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ut){return"_u"+ut.charCodeAt(0).toString(16)+"_"});for(var he=ve.content,fe=Ft&&Buffer.isBuffer(he)?he.toString("binary"):Ee(he),Re=0,Me=Math.min(1024,fe.length),Ge=0,Oe=0;Oe<=Me;++Oe)(Ge=fe.charCodeAt(Oe))>=32&&Ge<128&&++Re;var Pe=Re>=Me*4/5;K.push(H),K.push("Content-Location: "+(W.root||"file:///C:/SheetJS/")+le),K.push("Content-Transfer-Encoding: "+(Pe?"quoted-printable":"base64")),K.push("Content-Type: "+Jt(ve,le)),K.push(""),K.push(Pe?Gn(fe):nr(fe))}return K.push(H+`--\r
`),K.join(`\r
`)}function Ea(P){var G={};return S(G,P),G}function On(P,G,W,H){var K=H&&H.unsafe;K||S(P);var Y=!K&&Kt.find(P,G);if(!Y){var le=P.FullPaths[0];G.slice(0,le.length)==le?le=G:(le.slice(-1)!="/"&&(le+="/"),le=(le+G).replace("//","/")),Y={name:s(G),type:2},P.FileIndex.push(Y),P.FullPaths.push(le),K||Kt.utils.cfb_gc(P)}return Y.content=W,Y.size=W?W.length:0,H&&(H.CLSID&&(Y.clsid=H.CLSID),H.mt&&(Y.mt=H.mt),H.ct&&(Y.ct=H.ct)),Y}function Bi(P,G){S(P);var W=Kt.find(P,G);if(W){for(var H=0;H<P.FileIndex.length;++H)if(P.FileIndex[H]==W)return P.FileIndex.splice(H,1),P.FullPaths.splice(H,1),!0}return!1}function zi(P,G,W){S(P);var H=Kt.find(P,G);if(H){for(var K=0;K<P.FileIndex.length;++K)if(P.FileIndex[K]==H)return P.FileIndex[K].name=s(W),P.FullPaths[K]=W,!0}return!1}function ba(P){A(P,!0)}return e.find=L,e.read=ee,e.parse=p,e.write=q,e.writeFile=Ne,e.utils={cfb_new:Ea,cfb_add:On,cfb_del:Bi,cfb_mov:zi,cfb_gc:ba,ReadShift:Wu,CheckField:gN,prep_blob:ys,bconcat:gn,use_zlib:z,_deflateRaw:En,_inflateRaw:ye,consts:We},e})();function qO(r){return typeof r=="string"?M0(r):Array.isArray(r)?yO(r):r}function Ad(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=M0(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?ld(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var s=new Blob([qO(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,r);if(typeof saveAs<"u")return saveAs(s,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:r,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=r,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(r);return u.open("w"),u.encoding="binary",Array.isArray(e)&&(e=Cd(e)),u.write(e),u.close(),e}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+r)}function wn(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function H_(r,e){for(var t=[],n=wn(r),s=0;s!==n.length;++s)t[r[n[s]][e]]==null&&(t[r[n[s]][e]]=n[s]);return t}function iv(r){for(var e=[],t=wn(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function B0(r){for(var e=[],t=wn(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function KO(r){for(var e=[],t=wn(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var Xf=new Date(1899,11,30,0,0,0);function os(r,e){var t=r.getTime(),n=Xf.getTime()+(r.getTimezoneOffset()-Xf.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var ZT=new Date,YO=Xf.getTime()+(ZT.getTimezoneOffset()-Xf.getTimezoneOffset())*6e4,G_=ZT.getTimezoneOffset();function eN(r){var e=new Date;return e.setTime(r*24*60*60*1e3+YO),e.getTimezoneOffset()!==G_&&e.setTime(e.getTime()+(e.getTimezoneOffset()-G_)*6e4),e}var q_=new Date("2017-02-19T19:06:09.000Z"),tN=isNaN(q_.getFullYear())?new Date("2/19/17"):q_,XO=tN.getFullYear()==2017;function Hn(r,e){var t=new Date(r);if(XO)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(tN.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var s=r.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return r.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function z0(r,e){if(Ft&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(a){return t[a]||a})}catch{}for(var n=[],s=0;s!=r.length;++s)n.push(String.fromCharCode(r[s]));return n.join("")}function ls(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=ls(r[t]));return e}function wr(r,e){for(var t="";t.length<e;)t+=r;return t}function ua(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return t=-t,a}),!isNaN(e=Number(n)))?e/t:e}var QO=["january","february","march","april","may","june","july","august","september","october","november","december"];function od(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return t;var o=r.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&QO.indexOf(o)==-1)return t}else if(o.match(/[a-z]/))return t;return n<0||n>8099?t:(s>0||a>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function xt(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return Ft?n=_a(t):n=wO(t),Kt.utils.cfb_add(r,e,n)}Kt.utils.cfb_add(r,e,t)}else r.file(e,t)}function av(){return Kt.utils.cfb_new()}var $r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,JO={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ov=iv(JO),lv=/[&<>'"]/g,ZO=/[\u0000-\u0008\u000b-\u001f]/g;function Wt(r){var e=r+"";return e.replace(lv,function(t){return ov[t]}).replace(ZO,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function K_(r){return Wt(r).replace(/ /g,"_x0020_")}var rN=/[\u0000-\u001f]/g;function e5(r){var e=r+"";return e.replace(lv,function(t){return ov[t]}).replace(/\n/g,"<br/>").replace(rN,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function t5(r){var e=r+"";return e.replace(lv,function(t){return ov[t]}).replace(rN,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function r5(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function n5(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $p(r){for(var e="",t=0,n=0,s=0,a=0,o=0,u=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(s=r.charCodeAt(t++),n>191&&n<224){o=(n&31)<<6,o|=s&63,e+=String.fromCharCode(o);continue}if(a=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}o=r.charCodeAt(t++),u=((n&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(u>>>10&1023)),e+=String.fromCharCode(56320+(u&1023))}return e}function Y_(r){var e=al(2*r.length),t,n,s=1,a=0,o=0,u;for(n=0;n<r.length;n+=s)s=1,(u=r.charCodeAt(n))<128?t=u:u<224?(t=(u&31)*64+(r.charCodeAt(n+1)&63),s=2):u<240?(t=(u&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),s=3):(s=4,t=(u&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(e[a++]=o&255,e[a++]=o>>>8,o=0),e[a++]=t%256,e[a++]=t>>>8;return e.slice(0,a).toString("ucs2")}function X_(r){return _a(r,"binary").toString("utf8")}var nf="foo bar baz",$u=Ft&&(X_(nf)==$p(nf)&&X_||Y_(nf)==$p(nf)&&Y_)||$p,ld=Ft?function(r){return _a(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,s=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},s5=(function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<r.length;++s)n=n.replace(r[s][0],r[s][1]);return n}})(),nN=/(^\s|\s$|\n)/;function xn(r,e){return"<"+r+(e.match(nN)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function cd(r){return wn(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function Le(r,e,t){return"<"+r+(t!=null?cd(t):"")+(e!=null?(e.match(nN)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function jg(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function i5(r,e){switch(typeof r){case"string":var t=Le("vt:lpwstr",Wt(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Le((r|0)==r?"vt:i4":"vt:r8",Wt(String(r)));case"boolean":return Le("vt:bool",r?"true":"false")}if(r instanceof Date)return Le("vt:filetime",jg(r));throw new Error("Unable to serialize "+r)}var nn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Bc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ws={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function a5(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),s=r[e+6]&15,a=5;a>=0;--a)s=s*256+r[e+a];return n==2047?s==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),t*Math.pow(2,n-52)*s)}function o5(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,o=n?-e:e;isFinite(o)?o==0?s=a=0:(s=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var u=0;u<=5;++u,a/=256)r[t+u]=a&255;r[t+6]=(s&15)<<4|a&15,r[t+7]=s>>4|n}var Q_=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var s=0,a=r[0][n].length;s<a;s+=t)e.push.apply(e,r[0][n].slice(s,s+t));return e},J_=Ft?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:_a(e)})):Q_(r)}:Q_,Z_=function(r,e,t){for(var n=[],s=e;s<t;s+=2)n.push(String.fromCharCode(Pu(r,s)));return n.join("").replace(zu,"")},cv=Ft?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(zu,""):Z_(r,e,t)}:Z_,e2=function(r,e,t){for(var n=[],s=e;s<e+t;++s)n.push(("0"+r[s].toString(16)).slice(-2));return n.join("")},sN=Ft?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):e2(r,e,t)}:e2,t2=function(r,e,t){for(var n=[],s=e;s<t;s++)n.push(String.fromCharCode(cc(r,s)));return n.join("")},Id=Ft?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):t2(e,t,n)}:t2,iN=function(r,e){var t=_s(r,e);return t>0?Id(r,e+4,e+4+t-1):""},aN=iN,oN=function(r,e){var t=_s(r,e);return t>0?Id(r,e+4,e+4+t-1):""},lN=oN,cN=function(r,e){var t=2*_s(r,e);return t>0?Id(r,e+4,e+4+t-1):""},uN=cN,dN=function(e,t){var n=_s(e,t);return n>0?cv(e,t+4,t+4+n):""},hN=dN,fN=function(r,e){var t=_s(r,e);return t>0?Id(r,e+4,e+4+t):""},mN=fN,pN=function(r,e){return a5(r,e)},Qf=pN,uv=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ft&&(aN=function(e,t){if(!Buffer.isBuffer(e))return iN(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},lN=function(e,t){if(!Buffer.isBuffer(e))return oN(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},uN=function(e,t){if(!Buffer.isBuffer(e))return cN(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},hN=function(e,t){if(!Buffer.isBuffer(e))return dN(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},mN=function(e,t){if(!Buffer.isBuffer(e))return fN(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Qf=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):pN(e,t)},uv=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var cc=function(r,e){return r[e]},Pu=function(r,e){return r[e+1]*256+r[e]},l5=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},_s=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},Ko=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},c5=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function Wu(r,e){var t="",n,s,a=[],o,u,h,f;switch(e){case"dbcs":if(f=this.l,Ft&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(h=0;h<r;++h)t+=String.fromCharCode(Pu(this,f)),f+=2;r*=2;break;case"utf8":t=Id(this,this.l,this.l+r);break;case"utf16le":r*=2,t=cv(this,this.l,this.l+r);break;case"wstr":return Wu.call(this,r,"dbcs");case"lpstr-ansi":t=aN(this,this.l),r=4+_s(this,this.l);break;case"lpstr-cp":t=lN(this,this.l),r=4+_s(this,this.l);break;case"lpwstr":t=uN(this,this.l),r=4+2*_s(this,this.l);break;case"lpp4":r=4+_s(this,this.l),t=hN(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+_s(this,this.l),t=mN(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(o=cc(this,this.l+r++))!==0;)a.push(ef(o));t=a.join("");break;case"_wstr":for(r=0,t="";(o=Pu(this,this.l+r))!==0;)a.push(ef(o)),r+=2;r+=2,t=a.join("");break;case"dbcs-cont":for(t="",f=this.l,h=0;h<r;++h){if(this.lens&&this.lens.indexOf(f)!==-1)return o=cc(this,f),this.l=f+1,u=Wu.call(this,r-h,o?"dbcs-cont":"sbcs-cont"),a.join("")+u;a.push(ef(Pu(this,f))),f+=2}t=a.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",f=this.l,h=0;h!=r;++h){if(this.lens&&this.lens.indexOf(f)!==-1)return o=cc(this,f),this.l=f+1,u=Wu.call(this,r-h,o?"dbcs-cont":"sbcs-cont"),a.join("")+u;a.push(ef(cc(this,f))),f+=1}t=a.join("");break;default:switch(r){case 1:return n=cc(this,this.l),this.l++,n;case 2:return n=(e==="i"?l5:Pu)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(r>0?Ko:c5)(this,this.l),this.l+=4,n):(s=_s(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return r==8?s=Qf(this,this.l):s=Qf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;r=8;case 16:t=sN(this,this.l,r);break}}return this.l+=r,t}var u5=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},d5=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},h5=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function f5(r,e,t){var n=0,s=0;if(t==="dbcs"){for(s=0;s!=e.length;++s)h5(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(t==="hex"){for(;s<r;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(t==="utf16le"){var a=Math.min(this.l+r,this.length);for(s=0;s<Math.min(e.length,r);++s){var o=e.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,u5(this,e,this.l);break;case 8:if(n=8,t==="f"){o5(this,e,this.l);break}case 16:break;case-4:n=4,d5(this,e,this.l);break}return this.l+=n,this}function gN(r,e){var t=sN(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function ys(r,e){r.l=e,r.read_shift=Wu,r.chk=gN,r.write_shift=f5}function Oi(r,e){r.l+=e}function we(r){var e=al(r);return ys(e,0),e}function as(){var r=[],e=Ft?256:2048,t=function(f){var p=we(f);return ys(p,0),p},n=t(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},a=function(f){return n&&f<n.length-n.l?n:(s(),n=t(Math.max(f+1,e)))},o=function(){return s(),gn(r)},u=function(f){s(),n=f,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:u,end:o,_bufs:r}}function Te(r,e,t,n){var s=+e,a;if(!isNaN(s)){n||(n=a7[s].p||(t||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var o=r.next(a);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var u=0;u!=4;++u)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&uv(t)&&r.push(t)}}function Hu(r,e,t){var n=ls(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function r2(r,e,t){var n=ls(r);return n.s=Hu(n.s,e.s,t),n.e=Hu(n.e,e.s,t),n}function Gu(r,e){if(r.cRel&&r.c<0)for(r=ls(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=ls(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=Ht(r);return!r.cRel&&r.cRel!=null&&(t=g5(t)),!r.rRel&&r.rRel!=null&&(t=m5(t)),t}function Wp(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+Pn(r.s.c)+":"+(r.e.cRel?"":"$")+Pn(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+yn(r.s.r)+":"+(r.e.rRel?"":"$")+yn(r.e.r):Gu(r.s,e.biff)+":"+Gu(r.e,e.biff)}function dv(r){return parseInt(p5(r),10)-1}function yn(r){return""+(r+1)}function m5(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function p5(r){return r.replace(/\$(\d+)$/,"$1")}function hv(r){for(var e=x5(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function Pn(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function g5(r){return r.replace(/^([A-Z])/,"$$$1")}function x5(r){return r.replace(/^\$([A-Z])/,"$1")}function v5(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function sn(r){for(var e=0,t=0,n=0;n<r.length;++n){var s=r.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(t=26*t+(s-64))}return{c:t-1,r:e-1}}function Ht(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function Cs(r){var e=r.indexOf(":");return e==-1?{s:sn(r),e:sn(r)}:{s:sn(r.slice(0,e)),e:sn(r.slice(e+1))}}function zr(r,e){return typeof e>"u"||typeof e=="number"?zr(r.s,r.e):(typeof r!="string"&&(r=Ht(r)),typeof e!="string"&&(e=Ht(e)),r==e?r:r+":"+e)}function or(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,s=0,a=r.length;for(t=0;n<a&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.s.c=--t,t=0;n<a&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;if(e.s.r=--t,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=a&&!((s=r.charCodeAt(n)-64)<1||s>26);++n)t=26*t+s;for(e.e.c=--t,t=0;n!=a&&!((s=r.charCodeAt(n)-48)<0||s>9);++n)t=10*t+s;return e.e.r=--t,e}function n2(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=vo(r.z,t?os(e):e)}catch{}try{return r.w=vo((r.XF||{}).numFmtId||(t?14:0),t?os(e):e)}catch{return""+e}}function ya(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?kd[r.v]||r.v:e==null?n2(r,r.v):n2(r,e))}function vl(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function xN(r,e,t){var n=t||{},s=r?Array.isArray(r):n.dense,a=r||(s?[]:{}),o=0,u=0;if(a&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var h=typeof n.origin=="string"?sn(n.origin):n.origin;o=h.r,u=h.c}a["!ref"]||(a["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var p=or(a["!ref"]);f.s.c=p.s.c,f.s.r=p.s.r,f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(f.e.r=o=p.e.r+1)}for(var x=0;x!=e.length;++x)if(e[x]){if(!Array.isArray(e[x]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=e[x].length;++v)if(!(typeof e[x][v]>"u")){var w={v:e[x][v]},N=o+x,_=u+v;if(f.s.r>N&&(f.s.r=N),f.s.c>_&&(f.s.c=_),f.e.r<N&&(f.e.r=N),f.e.c<_&&(f.e.c=_),e[x][v]&&typeof e[x][v]=="object"&&!Array.isArray(e[x][v])&&!(e[x][v]instanceof Date))w=e[x][v];else if(Array.isArray(w.v)&&(w.f=e[x][v][1],w.v=w.v[0]),w.v===null)if(w.f)w.t="n";else if(n.nullError)w.t="e",w.v=0;else if(n.sheetStubs)w.t="z";else continue;else typeof w.v=="number"?w.t="n":typeof w.v=="boolean"?w.t="b":w.v instanceof Date?(w.z=n.dateNF||_r[14],n.cellDates?(w.t="d",w.w=vo(w.z,os(w.v))):(w.t="n",w.v=os(w.v),w.w=vo(w.z,w.v))):w.t="s";if(s)a[N]||(a[N]=[]),a[N][_]&&a[N][_].z&&(w.z=a[N][_].z),a[N][_]=w;else{var T=Ht({c:_,r:N});a[T]&&a[T].z&&(w.z=a[T].z),a[T]=w}}}return f.s.c<1e7&&(a["!ref"]=zr(f)),a}function zc(r,e){return xN(null,r,e)}function y5(r){return r.read_shift(4,"i")}function fi(r,e){return e||(e=we(4)),e.write_shift(4,r),e}function jn(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function an(r,e){var t=!1;return e==null&&(t=!0,e=we(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function w5(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function _5(r,e){return e||(e=we(4)),e.write_shift(2,0),e.write_shift(2,0),e}function fv(r,e){var t=r.l,n=r.read_shift(1),s=jn(r),a=[],o={t:s,h:s};if((n&1)!==0){for(var u=r.read_shift(4),h=0;h!=u;++h)a.push(w5(r));o.r=a}else o.r=[{ich:0,ifnt:0}];return r.l=t+e,o}function E5(r,e){var t=!1;return e==null&&(t=!0,e=we(15+4*r.t.length)),e.write_shift(1,0),an(r.t,e),t?e.slice(0,e.l):e}var b5=fv;function T5(r,e){var t=!1;return e==null&&(t=!0,e=we(23+4*r.t.length)),e.write_shift(1,1),an(r.t,e),e.write_shift(4,1),_5({},e),t?e.slice(0,e.l):e}function $s(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function yl(r,e){return e==null&&(e=we(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function wl(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function _l(r,e){return e==null&&(e=we(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var N5=jn,vN=an;function mv(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function Jf(r,e){var t=!1;return e==null&&(t=!0,e=we(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var S5=jn,Dg=mv,pv=Jf;function yN(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var s=n===0?Qf([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ko(e,0)>>2;return t?s/100:s}function wN(r,e){e==null&&(e=we(4));var t=0,n=0,s=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?s:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function _N(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function C5(r,e){return e||(e=we(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var El=_N,$c=C5;function Wc(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function ol(r,e){return(e||we(8)).write_shift(8,r,"f")}function A5(r){var e={},t=r.read_shift(1),n=t>>>1,s=r.read_shift(1),a=r.read_shift(2,"i"),o=r.read_shift(1),u=r.read_shift(1),h=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var f=L5[s];f&&(e.rgb=m2(f));break;case 2:e.rgb=m2([o,u,h]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Zf(r,e){if(e||(e=we(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function I5(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function k5(r,e){e||(e=we(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var EN=2,vs=3,sf=11,e0=19,af=64,R5=65,P5=71,j5=4108,D5=4126,mn=80,s2={1:{n:"CodePage",t:EN},2:{n:"Category",t:mn},3:{n:"PresentationFormat",t:mn},4:{n:"ByteCount",t:vs},5:{n:"LineCount",t:vs},6:{n:"ParagraphCount",t:vs},7:{n:"SlideCount",t:vs},8:{n:"NoteCount",t:vs},9:{n:"HiddenCount",t:vs},10:{n:"MultimediaClipCount",t:vs},11:{n:"ScaleCrop",t:sf},12:{n:"HeadingPairs",t:j5},13:{n:"TitlesOfParts",t:D5},14:{n:"Manager",t:mn},15:{n:"Company",t:mn},16:{n:"LinksUpToDate",t:sf},17:{n:"CharacterCount",t:vs},19:{n:"SharedDoc",t:sf},22:{n:"HyperlinksChanged",t:sf},23:{n:"AppVersion",t:vs,p:"version"},24:{n:"DigSig",t:R5},26:{n:"ContentType",t:mn},27:{n:"ContentStatus",t:mn},28:{n:"Language",t:mn},29:{n:"Version",t:mn},255:{},2147483648:{n:"Locale",t:e0},2147483651:{n:"Behavior",t:e0},1919054434:{}},i2={1:{n:"CodePage",t:EN},2:{n:"Title",t:mn},3:{n:"Subject",t:mn},4:{n:"Author",t:mn},5:{n:"Keywords",t:mn},6:{n:"Comments",t:mn},7:{n:"Template",t:mn},8:{n:"LastAuthor",t:mn},9:{n:"RevNumber",t:mn},10:{n:"EditTime",t:af},11:{n:"LastPrinted",t:af},12:{n:"CreatedDate",t:af},13:{n:"ModifiedDate",t:af},14:{n:"PageCount",t:vs},15:{n:"WordCount",t:vs},16:{n:"CharCount",t:vs},17:{n:"Thumbnail",t:P5},18:{n:"Application",t:mn},19:{n:"DocSecurity",t:vs},255:{},2147483648:{n:"Locale",t:e0},2147483651:{n:"Behavior",t:e0},1919054434:{}};function O5(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var F5=O5([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),L5=ls(F5),kd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},M5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},of={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function bN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function TN(r,e){var t=KO(M5),n=[],s;n[n.length]=$r,n[n.length]=Le("Types",null,{xmlns:nn.CT,"xmlns:xsd":nn.xsd,"xmlns:xsi":nn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return Le("Default",null,{Extension:h[0],ContentType:h[1]})}));var a=function(h){r[h]&&r[h].length>0&&(s=r[h][0],n[n.length]=Le("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:of[h][e.bookType]||of[h].xlsx}))},o=function(h){(r[h]||[]).forEach(function(f){n[n.length]=Le("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:of[h][e.bookType]||of[h].xlsx})})},u=function(h){(r[h]||[]).forEach(function(f){n[n.length]=Le("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:t[h][0]})})};return a("workbooks"),o("sheets"),o("charts"),u("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(u),u("vba"),u("comments"),u("threadedcomments"),u("drawings"),o("metadata"),u("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Dt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function NN(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function vc(r){var e=[$r,Le("Relationships",null,{xmlns:nn.RELS})];return wn(r["!id"]).forEach(function(t){e[e.length]=Le("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function $t(r,e,t,n,s,a){if(s||(s={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=t,[Dt.HLINK,Dt.XPATH,Dt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),r["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][s.Id]=s,r[("/"+s.Target).replace("//","/")]=s,e}function U5(r){var e=[$r];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function a2(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function V5(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function B5(r){var e=[$r];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(a2(r[t][0],r[t][1])),e.push(V5("",r[t][0]));return e.push(a2("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function SN(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Hf.version+"</meta:generator></office:meta></office:document-meta>"}var Jo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Hp(r,e,t,n,s){s[r]!=null||e==null||e===""||(s[r]=e,e=Wt(e),n[n.length]=t?Le(r,e,t):xn(r,e))}function CN(r,e){var t=e||{},n=[$r,Le("cp:coreProperties",null,{"xmlns:cp":nn.CORE_PROPS,"xmlns:dc":nn.dc,"xmlns:dcterms":nn.dcterms,"xmlns:dcmitype":nn.dcmitype,"xmlns:xsi":nn.xsi})],s={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&Hp("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:jg(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),r.ModifiedDate!=null&&Hp("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:jg(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Jo.length;++a){var o=Jo[a],u=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:r?r[o[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&Hp(o[0],u,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var yc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],AN=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function IN(r){var e=[],t=Le;return r||(r={}),r.Application="SheetJS",e[e.length]=$r,e[e.length]=Le("Properties",null,{xmlns:nn.EXT_PROPS,"xmlns:vt":nn.vt}),yc.forEach(function(n){if(r[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Wt(String(r[n[1]]));break;case"bool":s=r[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=t(n[0],s))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+Wt(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function kN(r){var e=[$r,Le("Properties",null,{xmlns:nn.CUST_PROPS,"xmlns:vt":nn.vt})];if(!r)return e.join("");var t=1;return wn(r).forEach(function(s){++t,e[e.length]=Le("property",i5(r[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Wt(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var o2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function z5(r,e){var t=[];return wn(o2).map(function(n){for(var s=0;s<Jo.length;++s)if(Jo[s][1]==n)return Jo[s];for(s=0;s<yc.length;++s)if(yc[s][1]==n)return yc[s];throw n}).forEach(function(n){if(r[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),t.push(xn(o2[n[1]]||n[1],s))}}),Le("DocumentProperties",t.join(""),{xmlns:ws.o})}function $5(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return r&&wn(r).forEach(function(a){if(Object.prototype.hasOwnProperty.call(r,a)){for(var o=0;o<Jo.length;++o)if(a==Jo[o][1])return;for(o=0;o<yc.length;++o)if(a==yc[o][1])return;for(o=0;o<t.length;++o)if(a==t[o])return;var u=r[a],h="string";typeof u=="number"?(h="float",u=String(u)):u===!0||u===!1?(h="boolean",u=u?"1":"0"):u=String(u),s.push(Le(K_(a),u,{"dt:dt":h}))}}),e&&wn(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(r&&Object.prototype.hasOwnProperty.call(r,a))){var o=e[a],u="string";typeof o=="number"?(u="float",o=String(o)):o===!0||o===!1?(u="boolean",o=o?"1":"0"):o instanceof Date?(u="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Le(K_(a),o,{"dt:dt":u}))}}),"<"+n+' xmlns="'+ws.o+'">'+s.join("")+"</"+n+">"}function W5(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),s=(t-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var o=we(8);return o.write_shift(4,n),o.write_shift(4,s),o}function l2(r,e){var t=we(4),n=we(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=we(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=W5(e);break;case 31:case 80:for(n=we(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return gn([t,n])}var RN=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function H5(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function c2(r,e,t){var n=we(8),s=[],a=[],o=8,u=0,h=we(8),f=we(8);if(h.write_shift(4,2),h.write_shift(4,1200),f.write_shift(4,1),a.push(h),s.push(f),o+=8+h.length,!e){f=we(8),f.write_shift(4,0),s.unshift(f);var p=[we(4)];for(p[0].write_shift(4,r.length),u=0;u<r.length;++u){var x=r[u][0];for(h=we(8+2*(x.length+1)+(x.length%2?0:2)),h.write_shift(4,u+2),h.write_shift(4,x.length+1),h.write_shift(0,x,"dbcs");h.l!=h.length;)h.write_shift(1,0);p.push(h)}h=gn(p),a.unshift(h),o+=8+h.length}for(u=0;u<r.length;++u)if(!(e&&!e[r[u][0]])&&!(RN.indexOf(r[u][0])>-1||AN.indexOf(r[u][0])>-1)&&r[u][1]!=null){var v=r[u][1],w=0;if(e){w=+e[r[u][0]];var N=t[w];if(N.p=="version"&&typeof v=="string"){var _=v.split(".");v=(+_[0]<<16)+(+_[1]||0)}h=l2(N.t,v)}else{var T=H5(v);T==-1&&(T=31,v=String(v)),h=l2(T,v)}a.push(h),f=we(8),f.write_shift(4,e?w:2+u),s.push(f),o+=8+h.length}var D=8*(a.length+1);for(u=0;u<a.length;++u)s[u].write_shift(4,D),D+=a[u].length;return n.write_shift(4,o),n.write_shift(4,a.length),gn([n].concat(s).concat(a))}function u2(r,e,t,n,s,a){var o=we(s?68:48),u=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Kt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,s?68:48);var h=c2(r,t,n);if(u.push(h),s){var f=c2(s,null,null);o.write_shift(16,a,"hex"),o.write_shift(4,68+h.length),u.push(f)}return gn(u)}function G5(r,e){e||(e=we(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function q5(r,e){return r.read_shift(e)===1}function Bn(r,e){return e||(e=we(2)),e.write_shift(2,+!!r),e}function PN(r){return r.read_shift(2,"u")}function Us(r,e){return e||(e=we(2)),e.write_shift(2,r),e}function jN(r,e,t){return t||(t=we(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function DN(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),s="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var a=r.read_shift(1);a&&(s="dbcs-cont")}else t.biff==12&&(s="wstr");t.biff>=2&&t.biff<=5&&(s="cpstr");var o=n?r.read_shift(n,s):"";return o}function K5(r){var e=r.t||"",t=we(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=we(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[t,n];return gn(s)}function Y5(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var s=r.read_shift(1);return s===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function X5(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):Y5(r,n,t)}function Q5(r,e,t){if(t.biff>5)return X5(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function ON(r,e,t){return t||(t=we(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function d2(r,e){e||(e=we(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function J5(r){var e=we(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var o=[8,6815827,6619237,4849780,83];for(t=0;t<o.length;++t)e.write_shift(4,o[t]);if(a==28)n=n.slice(1),d2(n,e);else if(a&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));var u=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(u.length+1)),t=0;t<u.length;++t)e.write_shift(2,u.charCodeAt(t));e.write_shift(2,0),a&8&&d2(s>-1?n.slice(s+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));for(var h=0;n.slice(h*3,h*3+3)=="../"||n.slice(h*3,h*3+3)=="..\\";)++h;for(e.write_shift(2,h),e.write_shift(4,n.length-3*h+1),t=0;t<n.length-3*h;++t)e.write_shift(1,n.charCodeAt(t+3*h)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function ll(r,e,t,n){return n||(n=we(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function Z5(r,e,t){var n=t.biff>8?4:2,s=r.read_shift(n),a=r.read_shift(n,"i"),o=r.read_shift(n,"i");return[s,a,o]}function eF(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),s=r.read_shift(2);return{s:{c:n,r:e},e:{c:s,r:t}}}function FN(r,e){return e||(e=we(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function gv(r,e,t){var n=1536,s=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=we(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function tF(r,e){var t=!e||e.biff==8,n=we(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function rF(r,e){var t=!e||e.biff>=8?2:1,n=we(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function nF(r,e){var t=we(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],s=0;s<r.length;++s)n[s]=K5(r[s]);var a=gn([t].concat(n));return a.parts=[t.length].concat(n.map(function(o){return o.length})),a}function sF(){var r=we(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function iF(r){var e=we(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function aF(r,e){var t=r.name||"Arial",n=e&&e.biff==5,s=n?15+t.length:16+2*t.length,a=we(s);return a.write_shift(2,r.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,t.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),a}function oF(r,e,t,n){var s=we(10);return ll(r,e,n,s),s.write_shift(4,t),s}function lF(r,e,t,n,s){var a=!s||s.biff==8,o=we(8+ +a+(1+a)*t.length);return ll(r,e,n,o),o.write_shift(2,t.length),a&&o.write_shift(1,1),o.write_shift((1+a)*t.length,t,a?"utf16le":"sbcs"),o}function cF(r,e,t,n){var s=t&&t.biff==5;n||(n=we(s?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}function uF(r,e){var t=e.biff==8||!e.biff?4:2,n=we(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function h2(r,e,t,n){var s=t&&t.biff==5;n||(n=we(s?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var a=0;return r.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function dF(r){var e=we(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function hF(r,e,t,n,s,a){var o=we(8);return ll(r,e,n,o),jN(t,a,o),o}function fF(r,e,t,n){var s=we(14);return ll(r,e,n,s),ol(t,s),s}function mF(r,e,t){if(t.biff<8)return pF(r,e,t);for(var n=[],s=r.l+e,a=r.read_shift(t.biff>8?4:2);a--!==0;)n.push(Z5(r,t.biff>8?12:6,t));if(r.l!=s)throw new Error("Bad ExternSheet: "+r.l+" != "+s);return n}function pF(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=DN(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function gF(r){var e=we(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)FN(r[t],e);return e}function xF(r){var e=we(24),t=sn(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return gn([e,J5(r[1])])}function vF(r){var e=r[1].Tooltip,t=we(10+2*(e.length+1));t.write_shift(2,2048);var n=sn(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var s=0;s<e.length;++s)t.write_shift(2,e.charCodeAt(s));return t.write_shift(2,0),t}function yF(r){return r||(r=we(4)),r.write_shift(2,1),r.write_shift(2,1),r}function wF(r,e,t){if(!t.cellStyles)return Oi(r,e);var n=t&&t.biff>=12?4:2,s=r.read_shift(n),a=r.read_shift(n),o=r.read_shift(n),u=r.read_shift(n),h=r.read_shift(2);n==2&&(r.l+=2);var f={s,e:a,w:o,ixfe:u,flags:h};return(t.biff>=5||!t.biff)&&(f.level=h>>8&7),f}function _F(r,e){var t=we(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function EF(r){for(var e=we(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function bF(r,e,t){var n=we(15);return Pd(n,r,e),n.write_shift(8,t,"f"),n}function TF(r,e,t){var n=we(9);return Pd(n,r,e),n.write_shift(2,t),n}var NF=(function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=iv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(u,h){var f=[],p=al(1);switch(h.type){case"base64":p=oi(va(u));break;case"binary":p=oi(u);break;case"buffer":case"array":p=u;break}ys(p,0);var x=p.read_shift(1),v=!!(x&136),w=!1,N=!1;switch(x){case 2:break;case 3:break;case 48:w=!0,v=!0;break;case 49:w=!0,v=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var _=0,T=521;x==2&&(_=p.read_shift(2)),p.l+=3,x!=2&&(_=p.read_shift(4)),_>1048576&&(_=1e6),x!=2&&(T=p.read_shift(2));var D=p.read_shift(2),U=h.codepage||1252;x!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(U=r[p[p.l]]),p.l+=1,p.l+=2),N&&(p.l+=36);for(var k=[],F={},J=Math.min(p.length,x==2?521:T-10-(w?264:0)),ee=N?32:11;p.l<J&&p[p.l]!=13;)switch(F={},F.name=Gf.utils.decode(U,p.slice(p.l,p.l+ee)).replace(/[\u0000\r\n].*$/g,""),p.l+=ee,F.type=String.fromCharCode(p.read_shift(1)),x!=2&&!N&&(F.offset=p.read_shift(4)),F.len=p.read_shift(1),x==2&&(F.offset=p.read_shift(2)),F.dec=p.read_shift(1),F.name.length&&k.push(F),x!=2&&(p.l+=N?13:14),F.type){case"B":(!w||F.len!=8)&&h.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(p[p.l]!==13&&(p.l=T-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=T;var S=0,I=0;for(f[0]=[],I=0;I!=k.length;++I)f[0][I]=k[I].name;for(;_-- >0;){if(p[p.l]===42){p.l+=D;continue}for(++p.l,f[++S]=[],I=0,I=0;I!=k.length;++I){var A=p.slice(p.l,p.l+k[I].len);p.l+=k[I].len,ys(A,0);var j=Gf.utils.decode(U,A);switch(k[I].type){case"C":j.trim().length&&(f[S][I]=j.replace(/\s+$/,""));break;case"D":j.length===8?f[S][I]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):f[S][I]=j;break;case"F":f[S][I]=parseFloat(j.trim());break;case"+":case"I":f[S][I]=N?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":f[S][I]=!0;break;case"N":case"F":f[S][I]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));f[S][I]="##MEMO##"+(N?parseInt(j.trim(),10):A.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(f[S][I]=+j||0);break;case"@":f[S][I]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":f[S][I]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":f[S][I]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[S][I]=-A.read_shift(-8,"f");break;case"B":if(w&&k[I].len==8){f[S][I]=A.read_shift(8,"f");break}case"G":case"P":A.l+=k[I].len;break;case"0":if(k[I].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[I].type)}}}if(x!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return h&&h.sheetRows&&(f=f.slice(0,h.sheetRows)),h.DBF=k,f}function n(u,h){var f=h||{};f.dateNF||(f.dateNF="yyyymmdd");var p=zc(t(u,f),f);return p["!cols"]=f.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete f.DBF,p}function s(u,h){try{return vl(n(u,h),h)}catch(f){if(h&&h.WTF)throw f}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function o(u,h){var f=h||{};if(+f.codepage>=0&&id(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var p=as(),x=i0(u,{header:1,raw:!0,cellDates:!0}),v=x[0],w=x.slice(1),N=u["!cols"]||[],_=0,T=0,D=0,U=1;for(_=0;_<v.length;++_){if(((N[_]||{}).DBF||{}).name){v[_]=N[_].DBF.name,++D;continue}if(v[_]!=null){if(++D,typeof v[_]=="number"&&(v[_]=v[_].toString(10)),typeof v[_]!="string")throw new Error("DBF Invalid column name "+v[_]+" |"+typeof v[_]+"|");if(v.indexOf(v[_])!==_){for(T=0;T<1024;++T)if(v.indexOf(v[_]+"_"+T)==-1){v[_]+="_"+T;break}}}}var k=or(u["!ref"]),F=[],J=[],ee=[];for(_=0;_<=k.e.c-k.s.c;++_){var S="",I="",A=0,j=[];for(T=0;T<w.length;++T)w[T][_]!=null&&j.push(w[T][_]);if(j.length==0||v[_]==null){F[_]="?";continue}for(T=0;T<j.length;++T){switch(typeof j[T]){case"number":I="B";break;case"string":I="C";break;case"boolean":I="L";break;case"object":I=j[T]instanceof Date?"D":"C";break;default:I="C"}A=Math.max(A,String(j[T]).length),S=S&&S!=I?"C":I}A>250&&(A=250),I=((N[_]||{}).DBF||{}).type,I=="C"&&N[_].DBF.len>A&&(A=N[_].DBF.len),S=="B"&&I=="N"&&(S="N",ee[_]=N[_].DBF.dec,A=N[_].DBF.len),J[_]=S=="C"||I=="N"?A:a[S]||0,U+=J[_],F[_]=S}var L=p.next(32);for(L.write_shift(4,318902576),L.write_shift(4,w.length),L.write_shift(2,296+32*D),L.write_shift(2,U),_=0;_<4;++_)L.write_shift(4,0);for(L.write_shift(4,0|(+e[MT]||3)<<8),_=0,T=0;_<v.length;++_)if(v[_]!=null){var V=p.next(32),O=(v[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,O,"sbcs"),V.write_shift(1,F[_]=="?"?"C":F[_],"sbcs"),V.write_shift(4,T),V.write_shift(1,J[_]||a[F[_]]||0),V.write_shift(1,ee[_]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),T+=J[_]||a[F[_]]||0}var Be=p.next(264);for(Be.write_shift(4,13),_=0;_<65;++_)Be.write_shift(4,0);for(_=0;_<w.length;++_){var De=p.next(U);for(De.write_shift(1,0),T=0;T<v.length;++T)if(v[T]!=null)switch(F[T]){case"L":De.write_shift(1,w[_][T]==null?63:w[_][T]?84:70);break;case"B":De.write_shift(8,w[_][T]||0,"f");break;case"N":var Se="0";for(typeof w[_][T]=="number"&&(Se=w[_][T].toFixed(ee[T]||0)),D=0;D<J[T]-Se.length;++D)De.write_shift(1,32);De.write_shift(1,Se,"sbcs");break;case"D":w[_][T]?(De.write_shift(4,("0000"+w[_][T].getFullYear()).slice(-4),"sbcs"),De.write_shift(2,("00"+(w[_][T].getMonth()+1)).slice(-2),"sbcs"),De.write_shift(2,("00"+w[_][T].getDate()).slice(-2),"sbcs")):De.write_shift(8,"00000000","sbcs");break;case"C":var We=String(w[_][T]!=null?w[_][T]:"").slice(0,J[T]);for(De.write_shift(1,We,"sbcs"),D=0;D<J[T]-We.length;++D)De.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),SF=(function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+wn(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(v,w){var N=r[w];return typeof N=="number"?F_(N):N},n=function(v,w,N){var _=w.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return _==59?v:F_(_)};r["|"]=254;function s(v,w){switch(w.type){case"base64":return a(va(v),w);case"binary":return a(v,w);case"buffer":return a(Ft&&Buffer.isBuffer(v)?v.toString("binary"):Cd(v),w);case"array":return a(z0(v),w)}throw new Error("Unrecognized type "+w.type)}function a(v,w){var N=v.split(/[\n\r]+/),_=-1,T=-1,D=0,U=0,k=[],F=[],J=null,ee={},S=[],I=[],A=[],j=0,L;for(+w.codepage>=0&&id(+w.codepage);D!==N.length;++D){j=0;var V=N[D].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),O=V.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),Be=O[0],De;if(V.length>0)switch(Be){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&F.push(V.slice(3).replace(/;;/g,";"));break;case"C":var Se=!1,We=!1,Ne=!1,Ee=!1,q=-1,se=-1;for(U=1;U<O.length;++U)switch(O[U].charAt(0)){case"A":break;case"X":T=parseInt(O[U].slice(1))-1,We=!0;break;case"Y":for(_=parseInt(O[U].slice(1))-1,We||(T=0),L=k.length;L<=_;++L)k[L]=[];break;case"K":De=O[U].slice(1),De.charAt(0)==='"'?De=De.slice(1,De.length-1):De==="TRUE"?De=!0:De==="FALSE"?De=!1:isNaN(ua(De))?isNaN(od(De).getDate())||(De=Hn(De)):(De=ua(De),J!==null&&XT(J)&&(De=eN(De))),Se=!0;break;case"E":Ee=!0;var z=TL(O[U].slice(1),{r:_,c:T});k[_][T]=[k[_][T],z];break;case"S":Ne=!0,k[_][T]=[k[_][T],"S5S"];break;case"G":break;case"R":q=parseInt(O[U].slice(1))-1;break;case"C":se=parseInt(O[U].slice(1))-1;break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+V)}if(Se&&(k[_][T]&&k[_][T].length==2?k[_][T][0]=De:k[_][T]=De,J=null),Ne){if(Ee)throw new Error("SYLK shared formula cannot have own formula");var te=q>-1&&k[q][se];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");k[_][T][1]=NL(te[1],{r:_-q,c:T-se})}break;case"F":var Q=0;for(U=1;U<O.length;++U)switch(O[U].charAt(0)){case"X":T=parseInt(O[U].slice(1))-1,++Q;break;case"Y":for(_=parseInt(O[U].slice(1))-1,L=k.length;L<=_;++L)k[L]=[];break;case"M":j=parseInt(O[U].slice(1))/20;break;case"F":break;case"G":break;case"P":J=F[parseInt(O[U].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=O[U].slice(1).split(" "),L=parseInt(A[0],10);L<=parseInt(A[1],10);++L)j=parseInt(A[2],10),I[L-1]=j===0?{hidden:!0}:{wch:j},xv(I[L-1]);break;case"C":T=parseInt(O[U].slice(1))-1,I[T]||(I[T]={});break;case"R":_=parseInt(O[U].slice(1))-1,S[_]||(S[_]={}),j>0?(S[_].hpt=j,S[_].hpx=BN(j)):j===0&&(S[_].hidden=!0);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+V)}Q<1&&(J=null);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+V)}}return S.length>0&&(ee["!rows"]=S),I.length>0&&(ee["!cols"]=I),w&&w.sheetRows&&(k=k.slice(0,w.sheetRows)),[k,ee]}function o(v,w){var N=s(v,w),_=N[0],T=N[1],D=zc(_,w);return wn(T).forEach(function(U){D[U]=T[U]}),D}function u(v,w){return vl(o(v,w),w)}function h(v,w,N,_){var T="C;Y"+(N+1)+";X"+(_+1)+";K";switch(v.t){case"n":T+=v.v||0,v.f&&!v.F&&(T+=";E"+yv(v.f,{r:N,c:_}));break;case"b":T+=v.v?"TRUE":"FALSE";break;case"e":T+=v.w||v.v;break;case"d":T+='"'+(v.w||v.v)+'"';break;case"s":T+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function f(v,w){w.forEach(function(N,_){var T="F;W"+(_+1)+" "+(_+1)+" ";N.hidden?T+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=t0(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=r0(N.wpx)),typeof N.wch=="number"&&(T+=Math.round(N.wch))),T.charAt(T.length-1)!=" "&&v.push(T)})}function p(v,w){w.forEach(function(N,_){var T="F;";N.hidden?T+="M0;":N.hpt?T+="M"+20*N.hpt+";":N.hpx&&(T+="M"+20*n0(N.hpx)+";"),T.length>2&&v.push(T+"R"+(_+1))})}function x(v,w){var N=["ID;PWXL;N;E"],_=[],T=or(v["!ref"]),D,U=Array.isArray(v),k=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),v["!cols"]&&f(N,v["!cols"]),v["!rows"]&&p(N,v["!rows"]),N.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var F=T.s.r;F<=T.e.r;++F)for(var J=T.s.c;J<=T.e.c;++J){var ee=Ht({r:F,c:J});D=U?(v[F]||[])[J]:v[ee],!(!D||D.v==null&&(!D.f||D.F))&&_.push(h(D,v,F,J))}return N.join(k)+k+_.join(k)+k+"E"+k}return{to_workbook:u,to_sheet:o,from_sheet:x}})(),CF=(function(){function r(a,o){switch(o.type){case"base64":return e(va(a),o);case"binary":return e(a,o);case"buffer":return e(Ft&&Buffer.isBuffer(a)?a.toString("binary"):Cd(a),o);case"array":return e(z0(a),o)}throw new Error("Unrecognized type "+o.type)}function e(a,o){for(var u=a.split(`
`),h=-1,f=-1,p=0,x=[];p!==u.length;++p){if(u[p].trim()==="BOT"){x[++h]=[],f=0;continue}if(!(h<0)){var v=u[p].trim().split(","),w=v[0],N=v[1];++p;for(var _=u[p]||"";(_.match(/["]/g)||[]).length&1&&p<u.length-1;)_+=`
`+u[++p];switch(_=_.trim(),+w){case-1:if(_==="BOT"){x[++h]=[],f=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?x[h][f]=!0:_==="FALSE"?x[h][f]=!1:isNaN(ua(N))?isNaN(od(N).getDate())?x[h][f]=N:x[h][f]=Hn(N):x[h][f]=ua(N),++f;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),x[h][f++]=_!==""?_:null;break}if(_==="EOD")break}}return o&&o.sheetRows&&(x=x.slice(0,o.sheetRows)),x}function t(a,o){return zc(r(a,o),o)}function n(a,o){return vl(t(a,o),o)}var s=(function(){var a=function(h,f,p,x,v){h.push(f),h.push(p+","+x),h.push('"'+v.replace(/"/g,'""')+'"')},o=function(h,f,p,x){h.push(f+","+p),h.push(f==1?'"'+x.replace(/"/g,'""')+'"':x)};return function(h){var f=[],p=or(h["!ref"]),x,v=Array.isArray(h);a(f,"TABLE",0,1,"sheetjs"),a(f,"VECTORS",0,p.e.r-p.s.r+1,""),a(f,"TUPLES",0,p.e.c-p.s.c+1,""),a(f,"DATA",0,0,"");for(var w=p.s.r;w<=p.e.r;++w){o(f,-1,0,"BOT");for(var N=p.s.c;N<=p.e.c;++N){var _=Ht({r:w,c:N});if(x=v?(h[w]||[])[N]:h[_],!x){o(f,1,0,"");continue}switch(x.t){case"n":var T=x.w;!T&&x.v!=null&&(T=x.v),T==null?x.f&&!x.F?o(f,1,0,"="+x.f):o(f,1,0,""):o(f,0,T,"V");break;case"b":o(f,0,x.v?1:0,x.v?"TRUE":"FALSE");break;case"s":o(f,1,0,isNaN(x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=vo(x.z||_r[14],os(Hn(x.v)))),o(f,0,x.w,"V");break;default:o(f,1,0,"")}}}o(f,-1,0,"EOD");var D=`\r
`,U=f.join(D);return U}})();return{to_workbook:n,to_sheet:t,from_sheet:s}})(),LN=(function(){function r(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(x,v){for(var w=x.split(`
`),N=-1,_=-1,T=0,D=[];T!==w.length;++T){var U=w[T].trim().split(":");if(U[0]==="cell"){var k=sn(U[1]);if(D.length<=k.r)for(N=D.length;N<=k.r;++N)D[N]||(D[N]=[]);switch(N=k.r,_=k.c,U[2]){case"t":D[N][_]=r(U[3]);break;case"v":D[N][_]=+U[3];break;case"vtf":var F=U[U.length-1];case"vtc":switch(U[3]){case"nl":D[N][_]=!!+U[4];break;default:D[N][_]=+U[4];break}U[2]=="vtf"&&(D[N][_]=[D[N][_],F])}}}return v&&v.sheetRows&&(D=D.slice(0,v.sheetRows)),D}function n(x,v){return zc(t(x,v),v)}function s(x,v){return vl(n(x,v),v)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function f(x){if(!x||!x["!ref"])return"";for(var v=[],w=[],N,_="",T=Cs(x["!ref"]),D=Array.isArray(x),U=T.s.r;U<=T.e.r;++U)for(var k=T.s.c;k<=T.e.c;++k)if(_=Ht({r:U,c:k}),N=D?(x[U]||[])[k]:x[_],!(!N||N.v==null||N.t==="z")){switch(w=["cell",_,"t"],N.t){case"s":case"str":w.push(e(N.v));break;case"n":N.f?(w[2]="vtf",w[3]="n",w[4]=N.v,w[5]=e(N.f)):(w[2]="v",w[3]=N.v);break;case"b":w[2]="vt"+(N.f?"f":"c"),w[3]="nl",w[4]=N.v?"1":"0",w[5]=e(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var F=os(Hn(N.v));w[2]="vtc",w[3]="nd",w[4]=""+F,w[5]=N.w||vo(N.z||_r[14],F);break;case"e":continue}v.push(w.join(":"))}return v.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function p(x){return[a,o,u,o,f(x),h].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:p}})(),AF=(function(){function r(p,x,v,w,N){N.raw?x[v][w]=p:p===""||(p==="TRUE"?x[v][w]=!0:p==="FALSE"?x[v][w]=!1:isNaN(ua(p))?isNaN(od(p).getDate())?x[v][w]=p:x[v][w]=Hn(p):x[v][w]=ua(p))}function e(p,x){var v=x||{},w=[];if(!p||p.length===0)return w;for(var N=p.split(/[\r\n]/),_=N.length-1;_>=0&&N[_].length===0;)--_;for(var T=10,D=0,U=0;U<=_;++U)D=N[U].indexOf(" "),D==-1?D=N[U].length:D++,T=Math.max(T,D);for(U=0;U<=_;++U){w[U]=[];var k=0;for(r(N[U].slice(0,T).trim(),w,U,k,v),k=1;k<=(N[U].length-T)/10+1;++k)r(N[U].slice(T+(k-1)*10,T+k*10).trim(),w,U,k,v)}return v.sheetRows&&(w=w.slice(0,v.sheetRows)),w}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(p){for(var x={},v=!1,w=0,N=0;w<p.length;++w)(N=p.charCodeAt(w))==34?v=!v:!v&&N in t&&(x[N]=(x[N]||0)+1);N=[];for(w in x)Object.prototype.hasOwnProperty.call(x,w)&&N.push([x[w],w]);if(!N.length){x=n;for(w in x)Object.prototype.hasOwnProperty.call(x,w)&&N.push([x[w],w])}return N.sort(function(_,T){return _[0]-T[0]||n[_[1]]-n[T[1]]}),t[N.pop()[1]]||44}function a(p,x){var v=x||{},w="",N=v.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(w=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(w=p.charAt(4),p=p.slice(6)):w=s(p.slice(0,1024)):v&&v.FS?w=v.FS:w=s(p.slice(0,1024));var T=0,D=0,U=0,k=0,F=0,J=w.charCodeAt(0),ee=!1,S=0,I=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var A=v.dateNF!=null?WO(v.dateNF):null;function j(){var L=p.slice(k,F),V={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)V.t="z";else if(v.raw)V.t="s",V.v=L;else if(L.trim().length===0)V.t="s",V.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(V.t="s",V.v=L.slice(2,-1).replace(/""/g,'"')):SL(L)?(V.t="n",V.f=L.slice(1)):(V.t="s",V.v=L);else if(L=="TRUE")V.t="b",V.v=!0;else if(L=="FALSE")V.t="b",V.v=!1;else if(!isNaN(U=ua(L)))V.t="n",v.cellText!==!1&&(V.w=L),V.v=U;else if(!isNaN(od(L).getDate())||A&&L.match(A)){V.z=v.dateNF||_r[14];var O=0;A&&L.match(A)&&(L=HO(L,v.dateNF,L.match(A)||[]),O=1),v.cellDates?(V.t="d",V.v=Hn(L,O)):(V.t="n",V.v=os(Hn(L,O))),v.cellText!==!1&&(V.w=vo(V.z,V.v instanceof Date?os(V.v):V.v)),v.cellNF||delete V.z}else V.t="s",V.v=L;if(V.t=="z"||(v.dense?(N[T]||(N[T]=[]),N[T][D]=V):N[Ht({c:D,r:T})]=V),k=F+1,I=p.charCodeAt(k),_.e.c<D&&(_.e.c=D),_.e.r<T&&(_.e.r=T),S==J)++D;else if(D=0,++T,v.sheetRows&&v.sheetRows<=T)return!0}e:for(;F<p.length;++F)switch(S=p.charCodeAt(F)){case 34:I===34&&(ee=!ee);break;case J:case 10:case 13:if(!ee&&j())break e;break}return F-k>0&&j(),N["!ref"]=zr(_),N}function o(p,x){return!(x&&x.PRN)||x.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?a(p,x):zc(e(p,x),x)}function u(p,x){var v="",w=x.type=="string"?[0,0,0,0]:V7(p,x);switch(x.type){case"base64":v=va(p);break;case"binary":v=p;break;case"buffer":x.codepage==65001?v=p.toString("utf8"):x.codepage&&typeof Gf<"u"||(v=Ft&&Buffer.isBuffer(p)?p.toString("binary"):Cd(p));break;case"array":v=z0(p);break;case"string":v=p;break;default:throw new Error("Unrecognized type "+x.type)}return w[0]==239&&w[1]==187&&w[2]==191?v=$u(v.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?v=$u(v):x.type=="binary"&&typeof Gf<"u",v.slice(0,19)=="socialcalc:version:"?LN.to_sheet(x.type=="string"?v:$u(v),x):o(v,x)}function h(p,x){return vl(u(p,x),x)}function f(p){for(var x=[],v=or(p["!ref"]),w,N=Array.isArray(p),_=v.s.r;_<=v.e.r;++_){for(var T=[],D=v.s.c;D<=v.e.c;++D){var U=Ht({r:_,c:D});if(w=N?(p[_]||[])[D]:p[U],!w||w.v==null){T.push("          ");continue}for(var k=(w.w||(ya(w),w.w)||"").slice(0,10);k.length<10;)k+=" ";T.push(k+(D===0?" ":""))}x.push(T.join(""))}return x.join(`
`)}return{to_workbook:h,to_sheet:u,from_sheet:f}})(),f2=(function(){function r(z,te,Q){if(z){ys(z,z.l||0);for(var Z=Q.Enum||q;z.l<z.length;){var ue=z.read_shift(2),Ce=Z[ue]||Z[65535],oe=z.read_shift(2),pe=z.l+oe,ge=Ce.f&&Ce.f(z,oe,Q);if(z.l=pe,te(ge,Ce,ue))return}}}function e(z,te){switch(te.type){case"base64":return t(oi(va(z)),te);case"binary":return t(oi(z),te);case"buffer":case"array":return t(z,te)}throw"Unsupported type "+te.type}function t(z,te){if(!z)return z;var Q=te||{},Z=Q.dense?[]:{},ue="Sheet1",Ce="",oe=0,pe={},ge=[],Xe=[],tt={s:{r:0,c:0},e:{r:0,c:0}},mt=Q.sheetRows||0;if(z[2]==0&&(z[3]==8||z[3]==9)&&z.length>=16&&z[14]==5&&z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(z[2]==2)Q.Enum=q,r(z,function(ze,fr,Rr){switch(Rr){case 0:Q.vers=ze,ze>=4096&&(Q.qpro=!0);break;case 6:tt=ze;break;case 204:ze&&(Ce=ze);break;case 222:Ce=ze;break;case 15:case 51:Q.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:Rr==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=Q.dateNF||_r[14],Q.cellDates&&(ze[1].t="d",ze[1].v=eN(ze[1].v))),Q.qpro&&ze[3]>oe&&(Z["!ref"]=zr(tt),pe[ue]=Z,ge.push(ue),Z=Q.dense?[]:{},tt={s:{r:0,c:0},e:{r:0,c:0}},oe=ze[3],ue=Ce||"Sheet"+(oe+1),Ce="");var Tr=Q.dense?(Z[ze[0].r]||[])[ze[0].c]:Z[Ht(ze[0])];if(Tr){Tr.t=ze[1].t,Tr.v=ze[1].v,ze[1].z!=null&&(Tr.z=ze[1].z),ze[1].f!=null&&(Tr.f=ze[1].f);break}Q.dense?(Z[ze[0].r]||(Z[ze[0].r]=[]),Z[ze[0].r][ze[0].c]=ze[1]):Z[Ht(ze[0])]=ze[1];break}},Q);else if(z[2]==26||z[2]==14)Q.Enum=se,z[2]==14&&(Q.qpro=!0,z.l=0),r(z,function(ze,fr,Rr){switch(Rr){case 204:ue=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>oe&&(Z["!ref"]=zr(tt),pe[ue]=Z,ge.push(ue),Z=Q.dense?[]:{},tt={s:{r:0,c:0},e:{r:0,c:0}},oe=ze[3],ue="Sheet"+(oe+1)),mt>0&&ze[0].r>=mt)break;Q.dense?(Z[ze[0].r]||(Z[ze[0].r]=[]),Z[ze[0].r][ze[0].c]=ze[1]):Z[Ht(ze[0])]=ze[1],tt.e.c<ze[0].c&&(tt.e.c=ze[0].c),tt.e.r<ze[0].r&&(tt.e.r=ze[0].r);break;case 27:ze[14e3]&&(Xe[ze[14e3][0]]=ze[14e3][1]);break;case 1537:Xe[ze[0]]=ze[1],ze[0]==oe&&(ue=ze[1]);break}},Q);else throw new Error("Unrecognized LOTUS BOF "+z[2]);if(Z["!ref"]=zr(tt),pe[Ce||ue]=Z,ge.push(Ce||ue),!Xe.length)return{SheetNames:ge,Sheets:pe};for(var it={},tr=[],Ct=0;Ct<Xe.length;++Ct)pe[ge[Ct]]?(tr.push(Xe[Ct]||ge[Ct]),it[Xe[Ct]]=pe[Xe[Ct]]||pe[ge[Ct]]):(tr.push(Xe[Ct]),it[Xe[Ct]]={"!ref":"A1"});return{SheetNames:tr,Sheets:it}}function n(z,te){var Q=te||{};if(+Q.codepage>=0&&id(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=as(),ue=or(z["!ref"]),Ce=Array.isArray(z),oe=[];Ue(Z,0,a(1030)),Ue(Z,6,h(ue));for(var pe=Math.min(ue.e.r,8191),ge=ue.s.r;ge<=pe;++ge)for(var Xe=yn(ge),tt=ue.s.c;tt<=ue.e.c;++tt){ge===ue.s.r&&(oe[tt]=Pn(tt));var mt=oe[tt]+Xe,it=Ce?(z[ge]||[])[tt]:z[mt];if(!(!it||it.t=="z"))if(it.t=="n")(it.v|0)==it.v&&it.v>=-32768&&it.v<=32767?Ue(Z,13,w(ge,tt,it.v)):Ue(Z,14,_(ge,tt,it.v));else{var tr=ya(it);Ue(Z,15,x(ge,tt,tr.slice(0,239)))}}return Ue(Z,1),Z.end()}function s(z,te){var Q=te||{};if(+Q.codepage>=0&&id(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=as();Ue(Z,0,o(z));for(var ue=0,Ce=0;ue<z.SheetNames.length;++ue)(z.Sheets[z.SheetNames[ue]]||{})["!ref"]&&Ue(Z,27,Ee(z.SheetNames[ue],Ce++));var oe=0;for(ue=0;ue<z.SheetNames.length;++ue){var pe=z.Sheets[z.SheetNames[ue]];if(!(!pe||!pe["!ref"])){for(var ge=or(pe["!ref"]),Xe=Array.isArray(pe),tt=[],mt=Math.min(ge.e.r,8191),it=ge.s.r;it<=mt;++it)for(var tr=yn(it),Ct=ge.s.c;Ct<=ge.e.c;++Ct){it===ge.s.r&&(tt[Ct]=Pn(Ct));var ze=tt[Ct]+tr,fr=Xe?(pe[it]||[])[Ct]:pe[ze];if(!(!fr||fr.t=="z"))if(fr.t=="n")Ue(Z,23,j(it,Ct,oe,fr.v));else{var Rr=ya(fr);Ue(Z,22,S(it,Ct,oe,Rr.slice(0,239)))}}++oe}}return Ue(Z,1),Z.end()}function a(z){var te=we(2);return te.write_shift(2,z),te}function o(z){var te=we(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var Q=0,Z=0,ue=0,Ce=0;Ce<z.SheetNames.length;++Ce){var oe=z.SheetNames[Ce],pe=z.Sheets[oe];if(!(!pe||!pe["!ref"])){++ue;var ge=Cs(pe["!ref"]);Q<ge.e.r&&(Q=ge.e.r),Z<ge.e.c&&(Z=ge.e.c)}}return Q>8191&&(Q=8191),te.write_shift(2,Q),te.write_shift(1,ue),te.write_shift(1,Z),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function u(z,te,Q){var Z={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&Q.qpro?(Z.s.c=z.read_shift(1),z.l++,Z.s.r=z.read_shift(2),Z.e.c=z.read_shift(1),z.l++,Z.e.r=z.read_shift(2),Z):(Z.s.c=z.read_shift(2),Z.s.r=z.read_shift(2),te==12&&Q.qpro&&(z.l+=2),Z.e.c=z.read_shift(2),Z.e.r=z.read_shift(2),te==12&&Q.qpro&&(z.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function h(z){var te=we(8);return te.write_shift(2,z.s.c),te.write_shift(2,z.s.r),te.write_shift(2,z.e.c),te.write_shift(2,z.e.r),te}function f(z,te,Q){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return Q.qpro&&Q.vers!=20768?(Z[0].c=z.read_shift(1),Z[3]=z.read_shift(1),Z[0].r=z.read_shift(2),z.l+=2):(Z[2]=z.read_shift(1),Z[0].c=z.read_shift(2),Z[0].r=z.read_shift(2)),Z}function p(z,te,Q){var Z=z.l+te,ue=f(z,te,Q);if(ue[1].t="s",Q.vers==20768){z.l++;var Ce=z.read_shift(1);return ue[1].v=z.read_shift(Ce,"utf8"),ue}return Q.qpro&&z.l++,ue[1].v=z.read_shift(Z-z.l,"cstr"),ue}function x(z,te,Q){var Z=we(7+Q.length);Z.write_shift(1,255),Z.write_shift(2,te),Z.write_shift(2,z),Z.write_shift(1,39);for(var ue=0;ue<Z.length;++ue){var Ce=Q.charCodeAt(ue);Z.write_shift(1,Ce>=128?95:Ce)}return Z.write_shift(1,0),Z}function v(z,te,Q){var Z=f(z,te,Q);return Z[1].v=z.read_shift(2,"i"),Z}function w(z,te,Q){var Z=we(7);return Z.write_shift(1,255),Z.write_shift(2,te),Z.write_shift(2,z),Z.write_shift(2,Q,"i"),Z}function N(z,te,Q){var Z=f(z,te,Q);return Z[1].v=z.read_shift(8,"f"),Z}function _(z,te,Q){var Z=we(13);return Z.write_shift(1,255),Z.write_shift(2,te),Z.write_shift(2,z),Z.write_shift(8,Q,"f"),Z}function T(z,te,Q){var Z=z.l+te,ue=f(z,te,Q);if(ue[1].v=z.read_shift(8,"f"),Q.qpro)z.l=Z;else{var Ce=z.read_shift(2);F(z.slice(z.l,z.l+Ce),ue),z.l+=Ce}return ue}function D(z,te,Q){var Z=te&32768;return te&=-32769,te=(Z?z:0)+(te>=8192?te-16384:te),(Z?"":"$")+(Q?Pn(te):yn(te))}var U={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(z,te){ys(z,0);for(var Q=[],Z=0,ue="",Ce="",oe="",pe="";z.l<z.length;){var ge=z[z.l++];switch(ge){case 0:Q.push(z.read_shift(8,"f"));break;case 1:Ce=D(te[0].c,z.read_shift(2),!0),ue=D(te[0].r,z.read_shift(2),!1),Q.push(Ce+ue);break;case 2:{var Xe=D(te[0].c,z.read_shift(2),!0),tt=D(te[0].r,z.read_shift(2),!1);Ce=D(te[0].c,z.read_shift(2),!0),ue=D(te[0].r,z.read_shift(2),!1),Q.push(Xe+tt+":"+Ce+ue)}break;case 3:if(z.l<z.length){console.error("WK1 premature formula end");return}break;case 4:Q.push("("+Q.pop()+")");break;case 5:Q.push(z.read_shift(2));break;case 6:{for(var mt="";ge=z[z.l++];)mt+=String.fromCharCode(ge);Q.push('"'+mt.replace(/"/g,'""')+'"')}break;case 8:Q.push("-"+Q.pop());break;case 23:Q.push("+"+Q.pop());break;case 22:Q.push("NOT("+Q.pop()+")");break;case 20:case 21:pe=Q.pop(),oe=Q.pop(),Q.push(["AND","OR"][ge-20]+"("+oe+","+pe+")");break;default:if(ge<32&&k[ge])pe=Q.pop(),oe=Q.pop(),Q.push(oe+k[ge]+pe);else if(U[ge]){if(Z=U[ge][1],Z==69&&(Z=z[z.l++]),Z>Q.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+Q.join("|")+"|");return}var it=Q.slice(-Z);Q.length-=Z,Q.push(U[ge][0]+"("+it.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}Q.length==1?te[1].f=""+Q[0]:console.error("WK1 bad formula parse |"+Q.join("|")+"|")}function J(z){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=z.read_shift(2),te[3]=z[z.l++],te[0].c=z[z.l++],te}function ee(z,te){var Q=J(z);return Q[1].t="s",Q[1].v=z.read_shift(te-4,"cstr"),Q}function S(z,te,Q,Z){var ue=we(6+Z.length);ue.write_shift(2,z),ue.write_shift(1,Q),ue.write_shift(1,te),ue.write_shift(1,39);for(var Ce=0;Ce<Z.length;++Ce){var oe=Z.charCodeAt(Ce);ue.write_shift(1,oe>=128?95:oe)}return ue.write_shift(1,0),ue}function I(z,te){var Q=J(z);Q[1].v=z.read_shift(2);var Z=Q[1].v>>1;if(Q[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return Q[1].v=Z,Q}function A(z,te){var Q=J(z),Z=z.read_shift(4),ue=z.read_shift(4),Ce=z.read_shift(2);if(Ce==65535)return Z===0&&ue===3221225472?(Q[1].t="e",Q[1].v=15):Z===0&&ue===3489660928?(Q[1].t="e",Q[1].v=42):Q[1].v=0,Q;var oe=Ce&32768;return Ce=(Ce&32767)-16446,Q[1].v=(1-oe*2)*(ue*Math.pow(2,Ce+32)+Z*Math.pow(2,Ce)),Q}function j(z,te,Q,Z){var ue=we(14);if(ue.write_shift(2,z),ue.write_shift(1,Q),ue.write_shift(1,te),Z==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var Ce=0,oe=0,pe=0,ge=0;return Z<0&&(Ce=1,Z=-Z),oe=Math.log2(Z)|0,Z/=Math.pow(2,oe-31),ge=Z>>>0,(ge&2147483648)==0&&(Z/=2,++oe,ge=Z>>>0),Z-=ge,ge|=2147483648,ge>>>=0,Z*=Math.pow(2,32),pe=Z>>>0,ue.write_shift(4,pe),ue.write_shift(4,ge),oe+=16383+(Ce?32768:0),ue.write_shift(2,oe),ue}function L(z,te){var Q=A(z);return z.l+=te-14,Q}function V(z,te){var Q=J(z),Z=z.read_shift(4);return Q[1].v=Z>>6,Q}function O(z,te){var Q=J(z),Z=z.read_shift(8,"f");return Q[1].v=Z,Q}function Be(z,te){var Q=O(z);return z.l+=te-10,Q}function De(z,te){return z[z.l+te-1]==0?z.read_shift(te,"cstr"):""}function Se(z,te){var Q=z[z.l++];Q>te-1&&(Q=te-1);for(var Z="";Z.length<Q;)Z+=String.fromCharCode(z[z.l++]);return Z}function We(z,te,Q){if(!(!Q.qpro||te<21)){var Z=z.read_shift(1);z.l+=17,z.l+=1,z.l+=2;var ue=z.read_shift(te-21,"cstr");return[Z,ue]}}function Ne(z,te){for(var Q={},Z=z.l+te;z.l<Z;){var ue=z.read_shift(2);if(ue==14e3){for(Q[ue]=[0,""],Q[ue][0]=z.read_shift(2);z[z.l];)Q[ue][1]+=String.fromCharCode(z[z.l]),z.l++;z.l++}}return Q}function Ee(z,te){var Q=we(5+z.length);Q.write_shift(2,14e3),Q.write_shift(2,te);for(var Z=0;Z<z.length;++Z){var ue=z.charCodeAt(Z);Q[Q.l++]=ue>127?95:ue}return Q[Q.l++]=0,Q}var q={0:{n:"BOF",f:PN},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:N},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:De},222:{n:"SHEETNAMELP",f:Se},65535:{n:""}},se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ee},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:I},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ne},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:Be},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:De},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:We},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}})(),IF=/^\s|\s$|[\t\n\r]/;function MN(r,e){if(!e.bookSST)return"";var t=[$r];t[t.length]=Le("sst",null,{xmlns:Bc[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var s=r[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(IF)&&(a+=' xml:space="preserve"'),a+=">"+Wt(s.t)+"</t>"),a+="</si>",t[t.length]=a}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function kF(r){return[r.read_shift(4),r.read_shift(4)]}function RF(r,e){return e||(e=we(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var PF=E5;function jF(r){var e=as();Te(e,159,RF(r));for(var t=0;t<r.length;++t)Te(e,19,PF(r[t]));return Te(e,160),e.end()}function DF(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function UN(r){var e=0,t,n=DF(r),s=n.length+1,a,o,u,h,f;for(t=al(s),t[0]=n.length,a=1;a!=s;++a)t[a]=n[a-1];for(a=s-1;a>=0;--a)o=t[a],u=(e&16384)===0?0:1,h=e<<1&32767,f=u|h,e=f^o;return e^52811}var OF=(function(){function r(s,a){switch(a.type){case"base64":return e(va(s),a);case"binary":return e(s,a);case"buffer":return e(Ft&&Buffer.isBuffer(s)?s.toString("binary"):Cd(s),a);case"array":return e(z0(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var o=a||{},u=o.dense?[]:{},h=s.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(p,x){Array.isArray(u)&&(u[x]=[]);for(var v=/\\\w+\b/g,w=0,N,_=-1;N=v.exec(p);){switch(N[0]){case"\\cell":var T=p.slice(w,v.lastIndex-N[0].length);if(T[0]==" "&&(T=T.slice(1)),++_,T.length){var D={v:T,t:"s"};Array.isArray(u)?u[x][_]=D:u[Ht({r:x,c:_})]=D}break}w=v.lastIndex}_>f.e.c&&(f.e.c=_)}),u["!ref"]=zr(f),u}function t(s,a){return vl(r(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],o=or(s["!ref"]),u,h=Array.isArray(s),f=o.s.r;f<=o.e.r;++f){a.push("\\trowd\\trautofit1");for(var p=o.s.c;p<=o.e.c;++p)a.push("\\cellx"+(p+1));for(a.push("\\pard\\intbl"),p=o.s.c;p<=o.e.c;++p){var x=Ht({r:f,c:p});u=h?(s[f]||[])[p]:s[x],!(!u||u.v==null&&(!u.f||u.F))&&(a.push(" "+(u.w||(ya(u),u.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}})();function m2(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var FF=6,da=FF;function t0(r){return Math.floor((r+Math.round(128/da)/256)*da)}function r0(r){return Math.floor((r-5)/da*100+.5)/100}function Og(r){return Math.round((r*da+5)/da*256)/256}function xv(r){r.width?(r.wpx=t0(r.width),r.wch=r0(r.wpx),r.MDW=da):r.wpx?(r.wch=r0(r.wpx),r.width=Og(r.wch),r.MDW=da):typeof r.wch=="number"&&(r.width=Og(r.wch),r.wpx=t0(r.width),r.MDW=da),r.customWidth&&delete r.customWidth}var LF=96,VN=LF;function n0(r){return r*96/VN}function BN(r){return r*VN/96}function MF(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=Le("numFmt",null,{numFmtId:n,formatCode:Wt(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Le("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function UF(r){var e=[];return e[e.length]=Le("cellXfs",null),r.forEach(function(t){e[e.length]=Le("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Le("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function zN(r,e){var t=[$r,Le("styleSheet",null,{xmlns:Bc[0],"xmlns:vt":nn.vt})],n;return r.SSF&&(n=MF(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=UF(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function VF(r,e){var t=r.read_shift(2),n=jn(r);return[t,n]}function BF(r,e,t){t||(t=we(6+4*e.length)),t.write_shift(2,r),an(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function zF(r,e,t){var n={};n.sz=r.read_shift(2)/20;var s=I5(r);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=r.read_shift(2);switch(a===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=r.read_shift(1);o!=0&&(n.underline=o);var u=r.read_shift(1);u>0&&(n.family=u);var h=r.read_shift(1);switch(h>0&&(n.charset=h),r.l++,n.color=A5(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=jn(r),n}function $F(r,e){e||(e=we(153)),e.write_shift(2,r.sz*20),k5(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),Zf(r.color,e);var n=0;return n=2,e.write_shift(1,n),an(r.name,e),e.length>e.l?e.slice(0,e.l):e}var WF=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Gp,HF=Oi;function p2(r,e){e||(e=we(84)),Gp||(Gp=iv(WF));var t=Gp[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(Zf({auto:1},e),Zf({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function GF(r,e){var t=r.l+e,n=r.read_shift(2),s=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:s}}function $N(r,e,t){t||(t=we(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Tu(r,e){return e||(e=we(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var qF=Oi;function KF(r,e){return e||(e=we(51)),e.write_shift(1,0),Tu(null,e),Tu(null,e),Tu(null,e),Tu(null,e),Tu(null,e),e.length>e.l?e.slice(0,e.l):e}function YF(r,e){return e||(e=we(52)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Jf(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function XF(r,e,t){var n=we(2052);return n.write_shift(4,r),Jf(e,n),Jf(t,n),n.length>n.l?n.slice(0,n.l):n}function QF(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++t}),t!=0&&(Te(r,615,fi(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Te(r,44,BF(s,e[s]))}),Te(r,616))}}function JF(r){var e=1;Te(r,611,fi(e)),Te(r,43,$F({sz:12,color:{theme:1},name:"Calibri",family:2})),Te(r,612)}function ZF(r){var e=2;Te(r,603,fi(e)),Te(r,45,p2({patternType:"none"})),Te(r,45,p2({patternType:"gray125"})),Te(r,604)}function eL(r){var e=1;Te(r,613,fi(e)),Te(r,46,KF()),Te(r,614)}function tL(r){var e=1;Te(r,626,fi(e)),Te(r,47,$N({numFmtId:0},65535)),Te(r,627)}function rL(r,e){Te(r,617,fi(e.length)),e.forEach(function(t){Te(r,47,$N(t,0))}),Te(r,618)}function nL(r){var e=1;Te(r,619,fi(e)),Te(r,48,YF({xfId:0,name:"Normal"})),Te(r,620)}function sL(r){var e=0;Te(r,505,fi(e)),Te(r,506)}function iL(r){var e=0;Te(r,508,XF(e,"TableStyleMedium9","PivotStyleMedium4")),Te(r,509)}function aL(r,e){var t=as();return Te(t,278),QF(t,r.SSF),JF(t),ZF(t),eL(t),tL(t),rL(t,e.cellXfs),nL(t),sL(t),iL(t),Te(t,279),t.end()}function WN(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[$r];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function oL(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:jn(r)}}function lL(r){var e=we(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),an(r.name,e),e.slice(0,e.l)}function cL(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function uL(r){var e=we(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function dL(r,e){var t=we(8+2*e.length);return t.write_shift(4,r),an(e,t),t.slice(0,t.l)}function hL(r){return r.l+=4,r.read_shift(4)!=0}function fL(r,e){var t=we(8);return t.write_shift(4,r),t.write_shift(4,1),t}function mL(){var r=as();return Te(r,332),Te(r,334,fi(1)),Te(r,335,lL({name:"XLDAPR",version:12e4,flags:3496657072})),Te(r,336),Te(r,339,dL(1,"XLDAPR")),Te(r,52),Te(r,35,fi(514)),Te(r,4096,fi(0)),Te(r,4097,Us(1)),Te(r,36),Te(r,53),Te(r,340),Te(r,337,fL(1)),Te(r,51,uL([[1,0]])),Te(r,338),Te(r,333),r.end()}function HN(){var r=[$r];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function pL(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=Ht(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var dc=1024;function GN(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),s=[Le("xml",null,{"xmlns:v":ws.v,"xmlns:o":ws.o,"xmlns:x":ws.x,"xmlns:mv":ws.mv}).replace(/\/>/,">"),Le("o:shapelayout",Le("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),Le("v:shapetype",[Le("v:stroke",null,{joinstyle:"miter"}),Le("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];dc<r*1e3;)dc+=1e3;return e.forEach(function(a){var o=sn(a[0]),u={color2:"#BEFF82",type:"gradient"};u.type=="gradient"&&(u.angle="-180");var h=u.type=="gradient"?Le("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,f=Le("v:fill",h,u),p={on:"t",obscured:"t"};++dc,s=s.concat(["<v:shape"+cd({id:"_x0000_s"+dc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",f,Le("v:shadow",null,p),Le("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xn("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),xn("x:AutoFill","False"),xn("x:Row",String(o.r)),xn("x:Column",String(o.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function qN(r){var e=[$r,Le("comments",null,{xmlns:Bc[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(s){var a=Wt(s.a);t.indexOf(a)==-1&&(t.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&t.indexOf("tc="+s.ID)==-1&&(t.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(h){h.a&&(s=t.indexOf(Wt(h.a))),a.push(h.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(xn("t",Wt(a[0]||"")));else{for(var o=`Comment:
    `+a[0]+`
`,u=1;u<a.length;++u)o+=`Reply:
    `+a[u]+`
`;e.push(xn("t",Wt(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function gL(r,e,t){var n=[$r,Le("ThreadedComments",null,{xmlns:nn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(s){var a="";(s[1]||[]).forEach(function(o,u){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var h={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};u==0?a=h.id:h.parentId=a,o.ID=h.id,o.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Le("threadedComment",xn("text",o.t||""),h))})}),n.push("</ThreadedComments>"),n.join("")}function xL(r){var e=[$r,Le("personList",null,{xmlns:nn.TCMNT,"xmlns:x":Bc[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(Le("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function vL(r){var e={};e.iauthor=r.read_shift(4);var t=El(r);return e.rfx=t.s,e.ref=Ht(t.s),r.l+=16,e}function yL(r,e){return e==null&&(e=we(36)),e.write_shift(4,r[1].iauthor),$c(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var wL=jn;function _L(r){return an(r.slice(0,54))}function EL(r){var e=as(),t=[];return Te(e,628),Te(e,630),r.forEach(function(n){n[1].forEach(function(s){t.indexOf(s.a)>-1||(t.push(s.a.slice(0,54)),Te(e,632,_L(s.a)))})}),Te(e,631),Te(e,633),r.forEach(function(n){n[1].forEach(function(s){s.iauthor=t.indexOf(s.a);var a={s:sn(n[0]),e:sn(n[0])};Te(e,635,yL([a,s])),s.t&&s.t.length>0&&Te(e,637,T5(s)),Te(e,636),delete s.iauthor})}),Te(e,634),Te(e,629),e.end()}function bL(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var s=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Kt.utils.cfb_add(r,s,e.FileIndex[n].content)}})}var KN=["xlsb","xlsm","xlam","biff8","xla"],TL=(function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,s,a,o){var u=!1,h=!1;a.length==0?h=!0:a.charAt(0)=="["&&(h=!0,a=a.slice(1,-1)),o.length==0?u=!0:o.charAt(0)=="["&&(u=!0,o=o.slice(1,-1));var f=a.length>0?parseInt(a,10)|0:0,p=o.length>0?parseInt(o,10)|0:0;return u?p+=e.c:--p,h?f+=e.r:--f,s+(u?"":"$")+Pn(p)+(h?"":"$")+yn(f)}return function(s,a){return e=a,s.replace(r,t)}})(),vv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,yv=(function(){return function(e,t){return e.replace(vv,function(n,s,a,o,u,h){var f=hv(o)-(a?0:t.c),p=dv(h)-(u?0:t.r),x=p==0?"":u?p+1:"["+p+"]",v=f==0?"":a?f+1:"["+f+"]";return s+"R"+x+"C"+v})}})();function NL(r,e){return r.replace(vv,function(t,n,s,a,o,u){return n+(s=="$"?s+a:Pn(hv(a)+e.c))+(o=="$"?o+u:yn(dv(u)+e.r))})}function SL(r){return r.length!=1}function Or(r){r.l+=1}function yo(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function YN(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return XN(r);t.biff==12&&(n=4)}var s=r.read_shift(n),a=r.read_shift(n),o=yo(r),u=yo(r);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:u[0],cRel:u[1],rRel:u[2]}}}function XN(r){var e=yo(r),t=yo(r),n=r.read_shift(1),s=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:s,cRel:t[1],rRel:t[2]}}}function CL(r,e,t){if(t.biff<8)return XN(r);var n=r.read_shift(t.biff==12?4:2),s=r.read_shift(t.biff==12?4:2),a=yo(r),o=yo(r);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function QN(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return AL(r);var n=r.read_shift(t&&t.biff==12?4:2),s=yo(r);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function AL(r){var e=yo(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function IL(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function kL(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return RL(r);var s=r.read_shift(n>=12?4:2),a=r.read_shift(2),o=(a&16384)>>14,u=(a&32768)>>15;if(a&=16383,u==1)for(;s>524287;)s-=1048576;if(o==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:o,rRel:u}}function RL(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:s,rRel:n}}function PL(r,e,t){var n=(r[r.l++]&96)>>5,s=YN(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,s]}function jL(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2,"i"),a=8;if(t)switch(t.biff){case 5:r.l+=12,a=6;break;case 12:a=12;break}var o=YN(r,a,t);return[n,s,o]}function DL(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function OL(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),a=8;if(t)switch(t.biff){case 5:r.l+=12,a=6;break;case 12:a=12;break}return r.l+=a,[n,s]}function FL(r,e,t){var n=(r[r.l++]&96)>>5,s=CL(r,e-1,t);return[n,s]}function LL(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function g2(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function ML(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(r.read_shift(t&&t.biff==2?1:2));return s}function UL(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function VL(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function BL(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function zL(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function JN(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function $L(r){return r.read_shift(2),JN(r)}function WL(r){return r.read_shift(2),JN(r)}function HL(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=QN(r,0,t);return[n,s]}function GL(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=kL(r,0,t);return[n,s]}function qL(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var a=QN(r,0,t);return[n,s,a]}function KL(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var s=r.read_shift(t&&t.biff<=3?1:2);return[K8[s],t4[s],n]}function YL(r,e,t){var n=r[r.l++],s=r.read_shift(1),a=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:XL(r);return[s,(a[0]===0?t4:q8)[a[1]]]}function XL(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function QL(r,e,t){r.l+=t&&t.biff==2?3:4}function JL(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function ZL(r){return r.l++,kd[r.read_shift(1)]}function e8(r){return r.l++,r.read_shift(2)}function t8(r){return r.l++,r.read_shift(1)!==0}function r8(r){return r.l++,Wc(r)}function n8(r,e,t){return r.l++,DN(r,e-1,t)}function s8(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=q5(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=kd[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Wc(r);break;case 2:t[1]=Q5(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function i8(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((t.biff==12?El:eF)(r));return s}function a8(r,e,t){var n=0,s=0;t.biff==12?(n=r.read_shift(4),s=r.read_shift(4)):(s=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--s==0&&(s=256));for(var a=0,o=[];a!=n&&(o[a]=[]);++a)for(var u=0;u!=s;++u)o[a][u]=s8(r,t.biff);return o}function o8(r,e,t){var n=r.read_shift(1)>>>5&3,s=!t||t.biff>=8?4:2,a=r.read_shift(s);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,a]}function l8(r,e,t){if(t.biff==5)return c8(r);var n=r.read_shift(1)>>>5&3,s=r.read_shift(2),a=r.read_shift(4);return[n,s,a]}function c8(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function u8(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function d8(r,e,t){var n=r.read_shift(1)>>>5&3,s=r.read_shift(t&&t.biff==2?1:2);return[n,s]}function h8(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function f8(r,e,t){var n=(r[r.l++]&96)>>5,s=r.read_shift(2),a=4;if(t)switch(t.biff){case 5:a=15;break;case 12:a=6;break}return r.l+=a,[n,s]}var m8=Oi,p8=Oi,g8=Oi;function Rd(r,e,t){return r.l+=2,[IL(r)]}function wv(r){return r.l+=6,[]}var x8=Rd,v8=wv,y8=wv,w8=Rd;function ZN(r){return r.l+=2,[PN(r),r.read_shift(2)&1]}var _8=Rd,E8=ZN,b8=wv,T8=Rd,N8=Rd,S8=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function C8(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),s=r.read_shift(2),a=r.read_shift(2),o=S8[t>>2&31];return{ixti:e,coltype:t&3,rt:o,idx:n,c:s,C:a}}function A8(r){return r.l+=2,[r.read_shift(4)]}function I8(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function k8(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function R8(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function P8(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function j8(r){return r.l+=4,[0,0]}var x2={1:{n:"PtgExp",f:JL},2:{n:"PtgTbl",f:g8},3:{n:"PtgAdd",f:Or},4:{n:"PtgSub",f:Or},5:{n:"PtgMul",f:Or},6:{n:"PtgDiv",f:Or},7:{n:"PtgPower",f:Or},8:{n:"PtgConcat",f:Or},9:{n:"PtgLt",f:Or},10:{n:"PtgLe",f:Or},11:{n:"PtgEq",f:Or},12:{n:"PtgGe",f:Or},13:{n:"PtgGt",f:Or},14:{n:"PtgNe",f:Or},15:{n:"PtgIsect",f:Or},16:{n:"PtgUnion",f:Or},17:{n:"PtgRange",f:Or},18:{n:"PtgUplus",f:Or},19:{n:"PtgUminus",f:Or},20:{n:"PtgPercent",f:Or},21:{n:"PtgParen",f:Or},22:{n:"PtgMissArg",f:Or},23:{n:"PtgStr",f:n8},26:{n:"PtgSheet",f:I8},27:{n:"PtgEndSheet",f:k8},28:{n:"PtgErr",f:ZL},29:{n:"PtgBool",f:t8},30:{n:"PtgInt",f:e8},31:{n:"PtgNum",f:r8},32:{n:"PtgArray",f:LL},33:{n:"PtgFunc",f:KL},34:{n:"PtgFuncVar",f:YL},35:{n:"PtgName",f:o8},36:{n:"PtgRef",f:HL},37:{n:"PtgArea",f:PL},38:{n:"PtgMemArea",f:u8},39:{n:"PtgMemErr",f:m8},40:{n:"PtgMemNoMem",f:p8},41:{n:"PtgMemFunc",f:d8},42:{n:"PtgRefErr",f:h8},43:{n:"PtgAreaErr",f:DL},44:{n:"PtgRefN",f:GL},45:{n:"PtgAreaN",f:FL},46:{n:"PtgMemAreaN",f:R8},47:{n:"PtgMemNoMemN",f:P8},57:{n:"PtgNameX",f:l8},58:{n:"PtgRef3d",f:qL},59:{n:"PtgArea3d",f:jL},60:{n:"PtgRefErr3d",f:f8},61:{n:"PtgAreaErr3d",f:OL},255:{}},D8={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},O8={1:{n:"PtgElfLel",f:ZN},2:{n:"PtgElfRw",f:T8},3:{n:"PtgElfCol",f:x8},6:{n:"PtgElfRwV",f:N8},7:{n:"PtgElfColV",f:w8},10:{n:"PtgElfRadical",f:_8},11:{n:"PtgElfRadicalS",f:b8},13:{n:"PtgElfColS",f:v8},15:{n:"PtgElfColSV",f:y8},16:{n:"PtgElfRadicalLel",f:E8},25:{n:"PtgList",f:C8},29:{n:"PtgSxName",f:A8},255:{}},F8={0:{n:"PtgAttrNoop",f:j8},1:{n:"PtgAttrSemi",f:zL},2:{n:"PtgAttrIf",f:VL},4:{n:"PtgAttrChoose",f:ML},8:{n:"PtgAttrGoto",f:UL},16:{n:"PtgAttrSum",f:QL},32:{n:"PtgAttrBaxcel",f:g2},33:{n:"PtgAttrBaxcel",f:g2},64:{n:"PtgAttrSpace",f:$L},65:{n:"PtgAttrSpaceSemi",f:WL},128:{n:"PtgAttrIfError",f:BL},255:{}};function L8(r,e,t,n){if(n.biff<8)return Oi(r,e);for(var s=r.l+e,a=[],o=0;o!==t.length;++o)switch(t[o][0]){case"PtgArray":t[o][1]=a8(r,0,n),a.push(t[o][1]);break;case"PtgMemArea":t[o][2]=i8(r,t[o][1],n),a.push(t[o][2]);break;case"PtgExp":n&&n.biff==12&&(t[o][1][1]=r.read_shift(4),a.push(t[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[o][0]}return e=s-r.l,e!==0&&a.push(Oi(r,e)),a}function M8(r,e,t){for(var n=r.l+e,s,a,o=[];n!=r.l;)e=n-r.l,a=r[r.l],s=x2[a]||x2[D8[a]],(a===24||a===25)&&(s=(a===24?O8:F8)[r[r.l+1]]),!s||!s.f?Oi(r,e):o.push([s.n,s.f(r,e,t)]);return o}function U8(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],s=[],a=0;a<n.length;++a){var o=n[a];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var V8={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function B8(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function e4(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(t.biff>8)switch(r[n[0]][0]){case 357:return s=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return r[n[0]][0][3]?(s=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function v2(r,e,t){var n=e4(r,e,t);return n=="#REF"?n:B8(n,t)}function Pc(r,e,t,n,s){var a=s&&s.biff||8,o={s:{c:0,r:0}},u=[],h,f,p,x=0,v=0,w,N="";if(!r[0]||!r[0][0])return"";for(var _=-1,T="",D=0,U=r[0].length;D<U;++D){var k=r[0][D];switch(k[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=u.pop(),f=u.pop(),_>=0){switch(r[0][_][1][0]){case 0:T=wr(" ",r[0][_][1][1]);break;case 1:T=wr("\r",r[0][_][1][1]);break;default:if(T="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}f=f+T,_=-1}u.push(f+V8[k[0]]+h);break;case"PtgIsect":h=u.pop(),f=u.pop(),u.push(f+" "+h);break;case"PtgUnion":h=u.pop(),f=u.pop(),u.push(f+","+h);break;case"PtgRange":h=u.pop(),f=u.pop(),u.push(f+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=Hu(k[1][1],o,s),u.push(Gu(p,a));break;case"PtgRefN":p=t?Hu(k[1][1],t,s):k[1][1],u.push(Gu(p,a));break;case"PtgRef3d":x=k[1][1],p=Hu(k[1][2],o,s),N=v2(n,x,s),u.push(N+"!"+Gu(p,a));break;case"PtgFunc":case"PtgFuncVar":var F=k[1][0],J=k[1][1];F||(F=0),F&=127;var ee=F==0?[]:u.slice(-F);u.length-=F,J==="User"&&(J=ee.shift()),u.push(J+"("+ee.join(",")+")");break;case"PtgBool":u.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(k[1]);break;case"PtgNum":u.push(String(k[1]));break;case"PtgStr":u.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(k[1]);break;case"PtgAreaN":w=r2(k[1][1],t?{s:t}:o,s),u.push(Wp(w,s));break;case"PtgArea":w=r2(k[1][1],o,s),u.push(Wp(w,s));break;case"PtgArea3d":x=k[1][1],w=k[1][2],N=v2(n,x,s),u.push(N+"!"+Wp(w,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=k[1][2];var S=(n.names||[])[v-1]||(n[0]||[])[v],I=S?S.Name:"SH33TJSNAME"+String(v);I&&I.slice(0,6)=="_xlfn."&&!s.xlfn&&(I=I.slice(6)),u.push(I);break;case"PtgNameX":var A=k[1][1];v=k[1][2];var j;if(s.biff<=5)A<0&&(A=-A),n[A]&&(j=n[A][v]);else{var L="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][v]&&n[A][v].itab>0&&(L=n.SheetNames[n[A][v].itab-1]+"!"):L=n.SheetNames[v-1]+"!"),n[A]&&n[A][v])L+=n[A][v].Name;else if(n[0]&&n[0][v])L+=n[0][v].Name;else{var V=(e4(n,A,s)||"").split(";;");V[v-1]?L=V[v-1]:L+="SH33TJSERRX"}u.push(L);break}j||(j={Name:"SH33TJSERRY"}),u.push(j.Name);break;case"PtgParen":var O="(",Be=")";if(_>=0){switch(T="",r[0][_][1][0]){case 2:O=wr(" ",r[0][_][1][1])+O;break;case 3:O=wr("\r",r[0][_][1][1])+O;break;case 4:Be=wr(" ",r[0][_][1][1])+Be;break;case 5:Be=wr("\r",r[0][_][1][1])+Be;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}_=-1}u.push(O+u.pop()+Be);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":p={c:k[1][1],r:k[1][0]};var De={c:t.c,r:t.r};if(n.sharedf[Ht(p)]){var Se=n.sharedf[Ht(p)];u.push(Pc(Se,o,De,n,s))}else{var We=!1;for(h=0;h!=n.arrayf.length;++h)if(f=n.arrayf[h],!(p.c<f[0].s.c||p.c>f[0].e.c)&&!(p.r<f[0].s.r||p.r>f[0].e.r)){u.push(Pc(f[1],o,De,n,s)),We=!0;break}We||u.push(k[1])}break;case"PtgArray":u.push("{"+U8(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=D;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var Ne=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&_>=0&&Ne.indexOf(r[0][D][0])==-1){k=r[0][_];var Ee=!0;switch(k[1][0]){case 4:Ee=!1;case 0:T=wr(" ",k[1][1]);break;case 5:Ee=!1;case 1:T=wr("\r",k[1][1]);break;default:if(T="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}u.push((Ee?T:"")+u.pop()+(Ee?"":T)),_=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function z8(r){if(r==null){var e=we(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return ol(r);return ol(0)}function $8(r,e,t,n,s){var a=ll(e,t,s),o=z8(r.v),u=we(6),h=33;u.write_shift(2,h),u.write_shift(4,0);for(var f=we(r.bf.length),p=0;p<r.bf.length;++p)f[p]=r.bf[p];var x=gn([a,o,u,f]);return x}function $0(r,e,t){var n=r.read_shift(4),s=M8(r,n,t),a=r.read_shift(4),o=a>0?L8(r,a,s,t):null;return[s,o]}var W8=$0,W0=$0,H8=$0,G8=$0,q8={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},t4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},K8={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Y8(r){var e="of:="+r.replace(vv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function X8(r){return r.replace(/\./,"!")}var qu=typeof Map<"u";function _v(r,e,t){var n=0,s=r.length;if(t){if(qu?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var a=qu?t.get(e):t[e];n<a.length;++n)if(r[a[n]].t===e)return r.Count++,a[n]}}else for(;n<s;++n)if(r[n].t===e)return r.Count++,n;return r[s]={t:e},r.Count++,r.Unique++,t&&(qu?(t.has(e)||t.set(e,[]),t.get(e).push(s)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(s))),s}function H0(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(da=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=r0(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=Og(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function r4(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function To(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],s=60,a=r.length;if(n==null&&t.ssf){for(;s<392;++s)if(t.ssf[s]==null){QT(e.z,s),t.ssf[s]=e.z,t.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(r[s].numFmtId===n)return s;return r[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function Q8(r,e,t){if(r&&r["!ref"]){var n=or(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function J8(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+zr(r[t])+'"/>';return e+"</mergeCells>"}function Z8(r,e,t,n,s){var a=!1,o={},u=null;if(n.bookType!=="xlsx"&&e.vbaraw){var h=e.SheetNames[t];try{e.Workbook&&(h=e.Workbook.Sheets[t].CodeName||h)}catch{}a=!0,o.codeName=ld(Wt(h))}if(r&&r["!outline"]){var f={summaryBelow:1,summaryRight:1};r["!outline"].above&&(f.summaryBelow=0),r["!outline"].left&&(f.summaryRight=0),u=(u||"")+Le("outlinePr",null,f)}!a&&!u||(s[s.length]=Le("sheetPr",u,o))}var eM=["objects","scenarios","selectLockedCells","selectUnlockedCells"],tM=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function rM(r){var e={sheet:1};return eM.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),tM.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=UN(r.password).toString(16).toUpperCase()),Le("sheetProtection",null,e)}function nM(r){return r4(r),Le("pageMargins",null,r)}function sM(r,e){for(var t=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(t[t.length]=Le("col",null,H0(s,n)));return t[t.length]="</cols>",t.join("")}function iM(r,e,t,n){var s=typeof r.ref=="string"?r.ref:zr(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Cs(s);o.s.r==o.e.r&&(o.e.r=Cs(e["!ref"]).e.r,s=zr(o));for(var u=0;u<a.length;++u){var h=a[u];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+t.SheetNames[n]+"'!"+s;break}}return u==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),Le("autoFilter",null,{ref:s})}function aM(r,e,t,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Le("sheetViews",Le("sheetView",null,s),{})}function oM(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var s="",a=r.t,o=r.v;if(r.t!=="z")switch(r.t){case"b":s=r.v?"1":"0";break;case"n":s=""+r.v;break;case"e":s=kd[r.v];break;case"d":n&&n.cellDates?s=Hn(r.v,-1).toISOString():(r=ls(r),r.t="n",s=""+(r.v=os(Hn(r.v)))),typeof r.z>"u"&&(r.z=_r[14]);break;default:s=r.v;break}var u=xn("v",Wt(s)),h={r:e},f=To(n.cellXfs,r,n);switch(f!==0&&(h.s=f),r.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){u=xn("v",""+_v(n.Strings,r.v,n.revStrings)),h.t="s";break}h.t="str";break}if(r.t!=a&&(r.t=a,r.v=o),typeof r.f=="string"&&r.f){var p=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;u=Le("f",Wt(r.f),p)+(r.v!=null?u:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(h.cm=1),Le("c",u,h)}function lM(r,e,t,n){var s=[],a=[],o=or(r["!ref"]),u="",h,f="",p=[],x=0,v=0,w=r["!rows"],N=Array.isArray(r),_={r:f},T,D=-1;for(v=o.s.c;v<=o.e.c;++v)p[v]=Pn(v);for(x=o.s.r;x<=o.e.r;++x){for(a=[],f=yn(x),v=o.s.c;v<=o.e.c;++v){h=p[v]+f;var U=N?(r[x]||[])[v]:r[h];U!==void 0&&(u=oM(U,h,r,e))!=null&&a.push(u)}(a.length>0||w&&w[x])&&(_={r:f},w&&w[x]&&(T=w[x],T.hidden&&(_.hidden=1),D=-1,T.hpx?D=n0(T.hpx):T.hpt&&(D=T.hpt),D>-1&&(_.ht=D,_.customHeight=1),T.level&&(_.outlineLevel=T.level)),s[s.length]=Le("row",a.join(""),_))}if(w)for(;x<w.length;++x)w&&w[x]&&(_={r:x+1},T=w[x],T.hidden&&(_.hidden=1),D=-1,T.hpx?D=n0(T.hpx):T.hpt&&(D=T.hpt),D>-1&&(_.ht=D,_.customHeight=1),T.level&&(_.outlineLevel=T.level),s[s.length]=Le("row","",_));return s.join("")}function n4(r,e,t,n){var s=[$r,Le("worksheet",null,{xmlns:Bc[0],"xmlns:r":nn.r})],a=t.SheetNames[r],o=0,u="",h=t.Sheets[a];h==null&&(h={});var f=h["!ref"]||"A1",p=or(f);if(p.e.c>16383||p.e.r>1048575){if(e.WTF)throw new Error("Range "+f+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),f=zr(p)}n||(n={}),h["!comments"]=[];var x=[];Z8(h,t,r,e,s),s[s.length]=Le("dimension",null,{ref:f}),s[s.length]=aM(h,e,r,t),e.sheetFormat&&(s[s.length]=Le("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(s[s.length]=sM(h,h["!cols"])),s[o=s.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(u=lM(h,e),u.length>0&&(s[s.length]=u)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),h["!protect"]&&(s[s.length]=rM(h["!protect"])),h["!autofilter"]!=null&&(s[s.length]=iM(h["!autofilter"],h,t,r)),h["!merges"]!=null&&h["!merges"].length>0&&(s[s.length]=J8(h["!merges"]));var v=-1,w,N=-1;return h["!links"].length>0&&(s[s.length]="<hyperlinks>",h["!links"].forEach(function(_){_[1].Target&&(w={ref:_[0]},_[1].Target.charAt(0)!="#"&&(N=$t(n,-1,Wt(_[1].Target).replace(/#.*$/,""),Dt.HLINK),w["r:id"]="rId"+N),(v=_[1].Target.indexOf("#"))>-1&&(w.location=Wt(_[1].Target.slice(v+1))),_[1].Tooltip&&(w.tooltip=Wt(_[1].Tooltip)),s[s.length]=Le("hyperlink",null,w))}),s[s.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(s[s.length]=nM(h["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=xn("ignoredErrors",Le("ignoredError",null,{numberStoredAsText:1,sqref:f}))),x.length>0&&(N=$t(n,-1,"../drawings/drawing"+(r+1)+".xml",Dt.DRAW),s[s.length]=Le("drawing",null,{"r:id":"rId"+N}),h["!drawing"]=x),h["!comments"].length>0&&(N=$t(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Dt.VML),s[s.length]=Le("legacyDrawing",null,{"r:id":"rId"+N}),h["!legacy"]=N),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function cM(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var s=r.read_shift(2);r.l+=1;var a=r.read_shift(1);return r.l=n,a&7&&(t.level=a&7),a&16&&(t.hidden=!0),a&32&&(t.hpt=s/20),t}function uM(r,e,t){var n=we(145),s=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var a=320;s.hpx?a=n0(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var u=0,h=n.l;n.l+=4;for(var f={r,c:0},p=0;p<16;++p)if(!(e.s.c>p+1<<10||e.e.c<p<<10)){for(var x=-1,v=-1,w=p<<10;w<p+1<<10;++w){f.c=w;var N=Array.isArray(t)?(t[f.r]||[])[f.c]:t[Ht(f)];N&&(x<0&&(x=w),v=w)}x<0||(++u,n.write_shift(4,x),n.write_shift(4,v))}var _=n.l;return n.l=h,n.write_shift(4,u),n.l=_,n.length>n.l?n.slice(0,n.l):n}function dM(r,e,t,n){var s=uM(n,t,e);(s.length>17||(e["!rows"]||[])[n])&&Te(r,0,s)}var hM=El,fM=$c;function mM(){}function pM(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=N5(r),t}function gM(r,e,t){t==null&&(t=we(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var s=1;s<3;++s)t.write_shift(1,0);return Zf({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),vN(r,t),t.slice(0,t.l)}function xM(r){var e=$s(r);return[e]}function vM(r,e,t){return t==null&&(t=we(8)),yl(e,t)}function yM(r){var e=wl(r);return[e]}function wM(r,e,t){return t==null&&(t=we(4)),_l(e,t)}function _M(r){var e=$s(r),t=r.read_shift(1);return[e,t,"b"]}function EM(r,e,t){return t==null&&(t=we(9)),yl(e,t),t.write_shift(1,r.v?1:0),t}function bM(r){var e=wl(r),t=r.read_shift(1);return[e,t,"b"]}function TM(r,e,t){return t==null&&(t=we(5)),_l(e,t),t.write_shift(1,r.v?1:0),t}function NM(r){var e=$s(r),t=r.read_shift(1);return[e,t,"e"]}function SM(r,e,t){return t==null&&(t=we(9)),yl(e,t),t.write_shift(1,r.v),t}function CM(r){var e=wl(r),t=r.read_shift(1);return[e,t,"e"]}function AM(r,e,t){return t==null&&(t=we(8)),_l(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function IM(r){var e=$s(r),t=r.read_shift(4);return[e,t,"s"]}function kM(r,e,t){return t==null&&(t=we(12)),yl(e,t),t.write_shift(4,e.v),t}function RM(r){var e=wl(r),t=r.read_shift(4);return[e,t,"s"]}function PM(r,e,t){return t==null&&(t=we(8)),_l(e,t),t.write_shift(4,e.v),t}function jM(r){var e=$s(r),t=Wc(r);return[e,t,"n"]}function DM(r,e,t){return t==null&&(t=we(16)),yl(e,t),ol(r.v,t),t}function OM(r){var e=wl(r),t=Wc(r);return[e,t,"n"]}function FM(r,e,t){return t==null&&(t=we(12)),_l(e,t),ol(r.v,t),t}function LM(r){var e=$s(r),t=yN(r);return[e,t,"n"]}function MM(r,e,t){return t==null&&(t=we(12)),yl(e,t),wN(r.v,t),t}function UM(r){var e=wl(r),t=yN(r);return[e,t,"n"]}function VM(r,e,t){return t==null&&(t=we(8)),_l(e,t),wN(r.v,t),t}function BM(r){var e=$s(r),t=fv(r);return[e,t,"is"]}function zM(r){var e=$s(r),t=jn(r);return[e,t,"str"]}function $M(r,e,t){return t==null&&(t=we(12+4*r.v.length)),yl(e,t),an(r.v,t),t.length>t.l?t.slice(0,t.l):t}function WM(r){var e=wl(r),t=jn(r);return[e,t,"str"]}function HM(r,e,t){return t==null&&(t=we(8+4*r.v.length)),_l(e,t),an(r.v,t),t.length>t.l?t.slice(0,t.l):t}function GM(r,e,t){var n=r.l+e,s=$s(r);s.r=t["!row"];var a=r.read_shift(1),o=[s,a,"b"];if(t.cellFormula){r.l+=2;var u=W0(r,n-r.l,t);o[3]=Pc(u,null,s,t.supbooks,t)}else r.l=n;return o}function qM(r,e,t){var n=r.l+e,s=$s(r);s.r=t["!row"];var a=r.read_shift(1),o=[s,a,"e"];if(t.cellFormula){r.l+=2;var u=W0(r,n-r.l,t);o[3]=Pc(u,null,s,t.supbooks,t)}else r.l=n;return o}function KM(r,e,t){var n=r.l+e,s=$s(r);s.r=t["!row"];var a=Wc(r),o=[s,a,"n"];if(t.cellFormula){r.l+=2;var u=W0(r,n-r.l,t);o[3]=Pc(u,null,s,t.supbooks,t)}else r.l=n;return o}function YM(r,e,t){var n=r.l+e,s=$s(r);s.r=t["!row"];var a=jn(r),o=[s,a,"str"];if(t.cellFormula){r.l+=2;var u=W0(r,n-r.l,t);o[3]=Pc(u,null,s,t.supbooks,t)}else r.l=n;return o}var XM=El,QM=$c;function JM(r,e){return e==null&&(e=we(4)),e.write_shift(4,r),e}function ZM(r,e){var t=r.l+e,n=El(r),s=mv(r),a=jn(r),o=jn(r),u=jn(r);r.l=t;var h={rfx:n,relId:s,loc:a,display:u};return o&&(h.Tooltip=o),h}function e9(r,e){var t=we(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));$c({s:sn(r[0]),e:sn(r[0])},t),pv("rId"+e,t);var n=r[1].Target.indexOf("#"),s=n==-1?"":r[1].Target.slice(n+1);return an(s||"",t),an(r[1].Tooltip||"",t),an("",t),t.slice(0,t.l)}function t9(){}function r9(r,e,t){var n=r.l+e,s=_N(r),a=r.read_shift(1),o=[s];if(o[2]=a,t.cellFormula){var u=W8(r,n-r.l,t);o[1]=u}else r.l=n;return o}function n9(r,e,t){var n=r.l+e,s=El(r),a=[s];if(t.cellFormula){var o=G8(r,n-r.l,t);a[1]=o,r.l=n}else r.l=n;return a}function s9(r,e,t){t==null&&(t=we(18));var n=H0(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),t.write_shift(2,s),t}var s4=["left","right","top","bottom","header","footer"];function i9(r){var e={};return s4.forEach(function(t){e[t]=Wc(r)}),e}function a9(r,e){return e==null&&(e=we(48)),r4(r),s4.forEach(function(t){ol(r[t],e)}),e}function o9(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function l9(r,e,t){t==null&&(t=we(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function c9(r){var e=we(24);return e.write_shift(4,4),e.write_shift(4,1),$c(r,e),e}function u9(r,e){return e==null&&(e=we(66)),e.write_shift(2,r.password?UN(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function d9(){}function h9(){}function f9(r,e,t,n,s,a,o){if(e.v===void 0)return!1;var u="";switch(e.t){case"b":u=e.v?"1":"0";break;case"d":e=ls(e),e.z=e.z||_r[14],e.v=os(Hn(e.v)),e.t="n";break;case"n":case"e":u=""+e.v;break;default:u=e.v;break}var h={r:t,c:n};switch(h.s=To(s.cellXfs,e,s),e.l&&a["!links"].push([Ht(h),e.l]),e.c&&a["!comments"].push([Ht(h),e.c]),e.t){case"s":case"str":return s.bookSST?(u=_v(s.Strings,e.v,s.revStrings),h.t="s",h.v=u,o?Te(r,18,PM(e,h)):Te(r,7,kM(e,h))):(h.t="str",o?Te(r,17,HM(e,h)):Te(r,6,$M(e,h))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?Te(r,13,VM(e,h)):Te(r,2,MM(e,h)):o?Te(r,16,FM(e,h)):Te(r,5,DM(e,h)),!0;case"b":return h.t="b",o?Te(r,15,TM(e,h)):Te(r,4,EM(e,h)),!0;case"e":return h.t="e",o?Te(r,14,AM(e,h)):Te(r,3,SM(e,h)),!0}return o?Te(r,12,wM(e,h)):Te(r,1,vM(e,h)),!0}function m9(r,e,t,n){var s=or(e["!ref"]||"A1"),a,o="",u=[];Te(r,145);var h=Array.isArray(e),f=s.e.r;e["!rows"]&&(f=Math.max(s.e.r,e["!rows"].length-1));for(var p=s.s.r;p<=f;++p){o=yn(p),dM(r,e,s,p);var x=!1;if(p<=s.e.r)for(var v=s.s.c;v<=s.e.c;++v){p===s.s.r&&(u[v]=Pn(v)),a=u[v]+o;var w=h?(e[p]||[])[v]:e[a];if(!w){x=!1;continue}x=f9(r,w,p,v,n,e,x)}}Te(r,146)}function p9(r,e){!e||!e["!merges"]||(Te(r,177,JM(e["!merges"].length)),e["!merges"].forEach(function(t){Te(r,176,QM(t))}),Te(r,178))}function g9(r,e){!e||!e["!cols"]||(Te(r,390),e["!cols"].forEach(function(t,n){t&&Te(r,60,s9(n,t))}),Te(r,391))}function x9(r,e){!e||!e["!ref"]||(Te(r,648),Te(r,649,c9(or(e["!ref"]))),Te(r,650))}function v9(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var s=$t(t,-1,n[1].Target.replace(/#.*$/,""),Dt.HLINK);Te(r,494,e9(n,s))}}),delete e["!links"]}function y9(r,e,t,n){if(e["!comments"].length>0){var s=$t(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Dt.VML);Te(r,551,pv("rId"+s)),e["!legacy"]=s}}function w9(r,e,t,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:zr(s.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,u=Cs(a);u.s.r==u.e.r&&(u.e.r=Cs(e["!ref"]).e.r,a=zr(u));for(var h=0;h<o.length;++h){var f=o[h];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==n){f.Ref="'"+t.SheetNames[n]+"'!"+a;break}}h==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+a}),Te(r,161,$c(or(a))),Te(r,162)}}function _9(r,e,t){Te(r,133),Te(r,137,l9(e,t)),Te(r,138),Te(r,134)}function E9(r,e){e["!protect"]&&Te(r,535,u9(e["!protect"]))}function b9(r,e,t,n){var s=as(),a=t.SheetNames[r],o=t.Sheets[a]||{},u=a;try{t&&t.Workbook&&(u=t.Workbook.Sheets[r].CodeName||u)}catch{}var h=or(o["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Te(s,129),(t.vbaraw||o["!outline"])&&Te(s,147,gM(u,o["!outline"])),Te(s,148,fM(h)),_9(s,o,t.Workbook),g9(s,o),m9(s,o,r,e),E9(s,o),w9(s,o,t,r),p9(s,o),v9(s,o,n),o["!margins"]&&Te(s,476,a9(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&x9(s,o),y9(s,o,r,n),Te(s,130),s.end()}function T9(r,e){r.l+=10;var t=jn(r);return{name:t}}var N9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function S9(r){return!r.Workbook||!r.Workbook.WBProps?"false":n5(r.Workbook.WBProps.date1904)?"true":"false"}var C9="][*?/\\".split("");function i4(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return C9.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function A9(r,e,t){r.forEach(function(n,s){i4(n);for(var a=0;a<s;++a)if(n==r[a])throw new Error("Duplicate Sheet Name: "+n);if(t){var o=e&&e[s]&&e[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function I9(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];A9(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)Q8(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function a4(r){var e=[$r];e[e.length]=Le("workbook",null,{xmlns:Bc[0],"xmlns:r":nn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(N9.forEach(function(u){r.Workbook.WBProps[u[0]]!=null&&r.Workbook.WBProps[u[0]]!=u[1]&&(n[u[0]]=r.Workbook.WBProps[u[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Le("workbookPr",null,n);var s=r.Workbook&&r.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=r.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==r.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=r.SheetNames.length;++a){var o={name:Wt(r.SheetNames[a].slice(0,31))};if(o.sheetId=""+(a+1),o["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Le("sheet",null,o)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(u){var h={name:u.Name};u.Comment&&(h.comment=u.Comment),u.Sheet!=null&&(h.localSheetId=""+u.Sheet),u.Hidden&&(h.hidden="1"),u.Ref&&(e[e.length]=Le("definedName",Wt(u.Ref),h))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function k9(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=Dg(r),t.name=jn(r),t}function R9(r,e){return e||(e=we(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),pv(r.strRelID,e),an(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function P9(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var s=e>8?jn(r):"";return s.length>0&&(t.CodeName=s),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function j9(r,e){e||(e=we(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),vN(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function D9(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var s=r.read_shift(4),a=S5(r),o=H8(r,0,t),u=mv(r);r.l=n;var h={Name:a,Ptg:o};return s<268435455&&(h.Sheet=s),u&&(h.Comment=u),h}function O9(r,e){Te(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,s={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Te(r,156,R9(s))}Te(r,144)}function F9(r,e){e||(e=we(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return an("SheetJS",e),an(Hf.version,e),an(Hf.version,e),an("7262",e),e.length>e.l?e.slice(0,e.l):e}function L9(r,e){e||(e=we(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function M9(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,s=-1,a=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&s==-1?s=n:t[n].Hidden==1&&a==-1&&(a=n);a>s||(Te(r,135),Te(r,158,L9(s)),Te(r,136))}}function U9(r,e){var t=as();return Te(t,131),Te(t,128,F9()),Te(t,153,j9(r.Workbook&&r.Workbook.WBProps||null)),M9(t,r),O9(t,r),Te(t,132),t.end()}function V9(r,e,t){return(e.slice(-4)===".bin"?U9:a4)(r)}function B9(r,e,t,n,s){return(e.slice(-4)===".bin"?b9:n4)(r,t,n,s)}function z9(r,e,t){return(e.slice(-4)===".bin"?aL:zN)(r,t)}function $9(r,e,t){return(e.slice(-4)===".bin"?jF:MN)(r,t)}function W9(r,e,t){return(e.slice(-4)===".bin"?EL:qN)(r)}function H9(r){return(r.slice(-4)===".bin"?mL:HN)()}function G9(r,e){var t=[];return r.Props&&t.push(z5(r.Props,e)),r.Custprops&&t.push($5(r.Props,r.Custprops)),t.join("")}function q9(){return""}function K9(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(Le("NumberFormat",null,{"ss:Format":Wt(_r[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};t.push(Le("Style",a.join(""),o))}),Le("Styles",t.join(""))}function o4(r){return Le("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+yv(r.Ref,{r:0,c:0})})}function Y9(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||t.push(o4(s)))}return Le("Names",t.join(""))}function X9(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],o=0;o<s.length;++o){var u=s[o];u.Sheet==t&&(u.Name.match(/^_xlfn\./)||a.push(o4(u)))}return a.join("")}function Q9(r,e,t,n){if(!r)return"";var s=[];if(r["!margins"]&&(s.push("<PageSetup>"),r["!margins"].header&&s.push(Le("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&s.push(Le("Footer",null,{"x:Margin":r["!margins"].footer})),s.push(Le("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)s.push(Le("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<t&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==t&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),r["!protect"]&&(s.push(xn("ProtectContents","True")),r["!protect"].objects&&s.push(xn("ProtectObjects","True")),r["!protect"].scenarios&&s.push(xn("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?s.push(xn("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&s.push(xn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){r["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Le("WorksheetOptions",s.join(""),{xmlns:ws.x})}function J9(r){return r.map(function(e){var t=r5(e.t||""),n=Le("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Le("Comment",n,{"ss:Author":e.a})}).join("")}function Z9(r,e,t,n,s,a,o){if(!r||r.v==null&&r.f==null)return"";var u={};if(r.f&&(u["ss:Formula"]="="+Wt(yv(r.f,o))),r.F&&r.F.slice(0,e.length)==e){var h=sn(r.F.slice(e.length+1));u["ss:ArrayRange"]="RC:R"+(h.r==o.r?"":"["+(h.r-o.r)+"]")+"C"+(h.c==o.c?"":"["+(h.c-o.c)+"]")}if(r.l&&r.l.Target&&(u["ss:HRef"]=Wt(r.l.Target),r.l.Tooltip&&(u["x:HRefScreenTip"]=Wt(r.l.Tooltip))),t["!merges"])for(var f=t["!merges"],p=0;p!=f.length;++p)f[p].s.c!=o.c||f[p].s.r!=o.r||(f[p].e.c>f[p].s.c&&(u["ss:MergeAcross"]=f[p].e.c-f[p].s.c),f[p].e.r>f[p].s.r&&(u["ss:MergeDown"]=f[p].e.r-f[p].s.r));var x="",v="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":x="Number",v=String(r.v);break;case"b":x="Boolean",v=r.v?"1":"0";break;case"e":x="Error",v=kd[r.v];break;case"d":x="DateTime",v=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||_r[14]);break;case"s":x="String",v=t5(r.v||"");break}var w=To(n.cellXfs,r,n);u["ss:StyleID"]="s"+(21+w),u["ss:Index"]=o.c+1;var N=r.v!=null?v:"",_=r.t=="z"?"":'<Data ss:Type="'+x+'">'+N+"</Data>";return(r.c||[]).length>0&&(_+=J9(r.c)),Le("Cell",_,u)}function e7(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=BN(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function t7(r,e,t,n){if(!r["!ref"])return"";var s=or(r["!ref"]),a=r["!merges"]||[],o=0,u=[];r["!cols"]&&r["!cols"].forEach(function(T,D){xv(T);var U=!!T.width,k=H0(D,T),F={"ss:Index":D+1};U&&(F["ss:Width"]=t0(k.width)),T.hidden&&(F["ss:Hidden"]="1"),u.push(Le("Column",null,F))});for(var h=Array.isArray(r),f=s.s.r;f<=s.e.r;++f){for(var p=[e7(f,(r["!rows"]||[])[f])],x=s.s.c;x<=s.e.c;++x){var v=!1;for(o=0;o!=a.length;++o)if(!(a[o].s.c>x)&&!(a[o].s.r>f)&&!(a[o].e.c<x)&&!(a[o].e.r<f)){(a[o].s.c!=x||a[o].s.r!=f)&&(v=!0);break}if(!v){var w={r:f,c:x},N=Ht(w),_=h?(r[f]||[])[x]:r[N];p.push(Z9(_,N,r,e,t,n,w))}}p.push("</Row>"),p.length>2&&u.push(p.join(""))}return u.join("")}function r7(r,e,t){var n=[],s=t.SheetNames[r],a=t.Sheets[s],o=a?X9(a,e,r,t):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=a?t7(a,e,r,t):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(Q9(a,e,r,t)),n.join("")}function n7(r,e){e||(e={}),r.SSF||(r.SSF=ls(_r)),r.SSF&&(V0(),U0(r.SSF),e.revssf=B0(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],To(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(G9(r,e)),t.push(q9()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(Le("Worksheet",r7(n,e,r),{"ss:Name":Wt(r.SheetNames[n])}));return t[2]=K9(r,e),t[3]=Y9(r),$r+Le("Workbook",t.join(""),{xmlns:ws.ss,"xmlns:o":ws.o,"xmlns:x":ws.x,"xmlns:ss":ws.ss,"xmlns:dt":ws.dt,"xmlns:html":ws.html})}var qp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function s7(r,e){var t=[],n=[],s=[],a=0,o,u=H_(s2,"n"),h=H_(i2,"n");if(r.Props)for(o=wn(r.Props),a=0;a<o.length;++a)(Object.prototype.hasOwnProperty.call(u,o[a])?t:Object.prototype.hasOwnProperty.call(h,o[a])?n:s).push([o[a],r.Props[o[a]]]);if(r.Custprops)for(o=wn(r.Custprops),a=0;a<o.length;++a)Object.prototype.hasOwnProperty.call(r.Props||{},o[a])||(Object.prototype.hasOwnProperty.call(u,o[a])?t:Object.prototype.hasOwnProperty.call(h,o[a])?n:s).push([o[a],r.Custprops[o[a]]]);var f=[];for(a=0;a<s.length;++a)RN.indexOf(s[a][0])>-1||AN.indexOf(s[a][0])>-1||s[a][1]!=null&&f.push(s[a]);n.length&&Kt.utils.cfb_add(e,"/SummaryInformation",u2(n,qp.SI,h,i2)),(t.length||f.length)&&Kt.utils.cfb_add(e,"/DocumentSummaryInformation",u2(t,qp.DSI,u,s2,f.length?f:null,qp.UDI))}function i7(r,e){var t=e||{},n=Kt.utils.cfb_new({root:"R"}),s="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":s="/Workbook",t.biff=8;break;case"biff5":s="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Kt.utils.cfb_add(n,s,l4(r,t)),t.biff==8&&(r.Props||r.Custprops)&&s7(r,n),t.biff==8&&r.vbaraw&&bL(n,Kt.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var a7={0:{f:cM},1:{f:xM},2:{f:LM},3:{f:NM},4:{f:_M},5:{f:jM},6:{f:zM},7:{f:IM},8:{f:YM},9:{f:KM},10:{f:GM},11:{f:qM},12:{f:yM},13:{f:UM},14:{f:CM},15:{f:bM},16:{f:OM},17:{f:WM},18:{f:RM},19:{f:fv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:D9},40:{},42:{},43:{f:zF},44:{f:VF},45:{f:HF},46:{f:qF},47:{f:GF},48:{},49:{f:y5},50:{},51:{f:cL},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wF},62:{f:BM},63:{f:pL},64:{f:d9},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Oi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:o9},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:pM},148:{f:hM,p:16},151:{f:t9},152:{},153:{f:P9},154:{},155:{},156:{f:k9},157:{},158:{},159:{T:1,f:kF},160:{T:-1},161:{T:1,f:El},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:XM},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:oL},336:{T:-1},337:{f:hL,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Dg},357:{},358:{},359:{},360:{T:1},361:{},362:{f:mF},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:r9},427:{f:n9},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:i9},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:mM},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ZM},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Dg},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wL},633:{T:1},634:{T:-1},635:{T:1,f:vL},636:{T:-1},637:{f:b5},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:T9},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:h9},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ue(r,e,t,n){var s=e;if(!isNaN(s)){var a=n||(t||[]).length||0,o=r.next(4);o.write_shift(2,s),o.write_shift(2,a),a>0&&uv(t)&&r.push(t)}}function o7(r,e,t,n){var s=(t||[]).length||0;if(s<=8224)return Ue(r,e,t,s);var a=e;if(!isNaN(a)){for(var o=t.parts||[],u=0,h=0,f=0;f+(o[u]||8224)<=8224;)f+=o[u]||8224,u++;var p=r.next(4);for(p.write_shift(2,a),p.write_shift(2,f),r.push(t.slice(h,h+f)),h+=f;h<s;){for(p=r.next(4),p.write_shift(2,60),f=0;f+(o[u]||8224)<=8224;)f+=o[u]||8224,u++;p.write_shift(2,f),r.push(t.slice(h,h+f)),h+=f}}}function Pd(r,e,t){return r||(r=we(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function l7(r,e,t,n){var s=we(9);return Pd(s,r,e),jN(t,n||"b",s),s}function c7(r,e,t){var n=we(8+2*t.length);return Pd(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function u7(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?os(Hn(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Ue(r,2,TF(t,n,s)):Ue(r,3,bF(t,n,s));return;case"b":case"e":Ue(r,5,l7(t,n,e.v,e.t));return;case"s":case"str":Ue(r,4,c7(t,n,(e.v||"").slice(0,255)));return}Ue(r,1,Pd(null,t,n))}function d7(r,e,t,n){var s=Array.isArray(e),a=or(e["!ref"]||"A1"),o,u="",h=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),o=zr(a)}for(var f=a.s.r;f<=a.e.r;++f){u=yn(f);for(var p=a.s.c;p<=a.e.c;++p){f===a.s.r&&(h[p]=Pn(p)),o=h[p]+u;var x=s?(e[f]||[])[p]:e[o];x&&u7(r,x,f,p)}}}function h7(r,e){for(var t=e||{},n=as(),s=0,a=0;a<r.SheetNames.length;++a)r.SheetNames[a]==t.sheet&&(s=a);if(s==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Ue(n,t.biff==4?1033:t.biff==3?521:9,gv(r,16,t)),d7(n,r.Sheets[r.SheetNames[s]],s,t),Ue(n,10),n.end()}function f7(r,e,t){Ue(r,49,aF({sz:12,name:"Arial"},t))}function m7(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Ue(r,1054,cF(s,e[s],t))})}function p7(r,e){var t=we(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Ue(r,2151,t),t=we(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),FN(or(e["!ref"]||"A1"),t),t.write_shift(4,4),Ue(r,2152,t)}function g7(r,e){for(var t=0;t<16;++t)Ue(r,224,h2({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ue(r,224,h2(n,0,e))})}function x7(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];Ue(r,440,xF(n)),n[1].Tooltip&&Ue(r,2048,vF(n))}delete e["!links"]}function v7(r,e){if(e){var t=0;e.forEach(function(n,s){++t<=256&&n&&Ue(r,125,_F(H0(s,n),s))})}}function y7(r,e,t,n,s){var a=16+To(s.cellXfs,e,s);if(e.v==null&&!e.bf){Ue(r,513,ll(t,n,a));return}if(e.bf)Ue(r,6,$8(e,t,n,s,a));else switch(e.t){case"d":case"n":var o=e.t=="d"?os(Hn(e.v)):e.v;Ue(r,515,fF(t,n,o,a));break;case"b":case"e":Ue(r,517,hF(t,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var u=_v(s.Strings,e.v,s.revStrings);Ue(r,253,oF(t,n,u,a))}else Ue(r,516,lF(t,n,(e.v||"").slice(0,255),a,s));break;default:Ue(r,513,ll(t,n,a))}}function w7(r,e,t){var n=as(),s=t.SheetNames[r],a=t.Sheets[s]||{},o=(t||{}).Workbook||{},u=(o.Sheets||[])[r]||{},h=Array.isArray(a),f=e.biff==8,p,x="",v=[],w=or(a["!ref"]||"A1"),N=f?65536:16384;if(w.e.c>255||w.e.r>=N){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");w.e.c=Math.min(w.e.c,255),w.e.r=Math.min(w.e.c,N-1)}Ue(n,2057,gv(t,16,e)),Ue(n,13,Us(1)),Ue(n,12,Us(100)),Ue(n,15,Bn(!0)),Ue(n,17,Bn(!1)),Ue(n,16,ol(.001)),Ue(n,95,Bn(!0)),Ue(n,42,Bn(!1)),Ue(n,43,Bn(!1)),Ue(n,130,Us(1)),Ue(n,128,dF()),Ue(n,131,Bn(!1)),Ue(n,132,Bn(!1)),f&&v7(n,a["!cols"]),Ue(n,512,uF(w,e)),f&&(a["!links"]=[]);for(var _=w.s.r;_<=w.e.r;++_){x=yn(_);for(var T=w.s.c;T<=w.e.c;++T){_===w.s.r&&(v[T]=Pn(T)),p=v[T]+x;var D=h?(a[_]||[])[T]:a[p];D&&(y7(n,D,_,T,e),f&&D.l&&a["!links"].push([p,D.l]))}}var U=u.CodeName||u.name||s;return f&&Ue(n,574,iF((o.Views||[])[0])),f&&(a["!merges"]||[]).length&&Ue(n,229,gF(a["!merges"])),f&&x7(n,a),Ue(n,442,ON(U)),f&&p7(n,a),Ue(n,10),n.end()}function _7(r,e,t){var n=as(),s=(r||{}).Workbook||{},a=s.Sheets||[],o=s.WBProps||{},u=t.biff==8,h=t.biff==5;if(Ue(n,2057,gv(r,5,t)),t.bookType=="xla"&&Ue(n,135),Ue(n,225,u?Us(1200):null),Ue(n,193,G5(2)),h&&Ue(n,191),h&&Ue(n,192),Ue(n,226),Ue(n,92,tF("SheetJS",t)),Ue(n,66,Us(u?1200:1252)),u&&Ue(n,353,Us(0)),u&&Ue(n,448),Ue(n,317,EF(r.SheetNames.length)),u&&r.vbaraw&&Ue(n,211),u&&r.vbaraw){var f=o.CodeName||"ThisWorkbook";Ue(n,442,ON(f))}Ue(n,156,Us(17)),Ue(n,25,Bn(!1)),Ue(n,18,Bn(!1)),Ue(n,19,Us(0)),u&&Ue(n,431,Bn(!1)),u&&Ue(n,444,Us(0)),Ue(n,61,sF()),Ue(n,64,Bn(!1)),Ue(n,141,Us(0)),Ue(n,34,Bn(S9(r)=="true")),Ue(n,14,Bn(!0)),u&&Ue(n,439,Bn(!1)),Ue(n,218,Us(0)),f7(n,r,t),m7(n,r.SSF,t),g7(n,t),u&&Ue(n,352,Bn(!1));var p=n.end(),x=as();u&&Ue(x,140,yF()),u&&t.Strings&&o7(x,252,nF(t.Strings)),Ue(x,10);var v=x.end(),w=as(),N=0,_=0;for(_=0;_<r.SheetNames.length;++_)N+=(u?12:11)+(u?2:1)*r.SheetNames[_].length;var T=p.length+N+v.length;for(_=0;_<r.SheetNames.length;++_){var D=a[_]||{};Ue(w,133,rF({pos:T,hs:D.Hidden||0,dt:0,name:r.SheetNames[_]},t)),T+=e[_].length}var U=w.end();if(N!=U.length)throw new Error("BS8 "+N+" != "+U.length);var k=[];return p.length&&k.push(p),U.length&&k.push(U),v.length&&k.push(v),gn(k)}function E7(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=ls(_r)),r&&r.SSF&&(V0(),U0(r.SSF),t.revssf=B0(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Ev(t),t.cellXfs=[],To(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var s=0;s<r.SheetNames.length;++s)n[n.length]=w7(s,t,r);return n.unshift(_7(r,n,t)),gn(n)}function l4(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var s=Cs(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return E7(r,e);case 4:case 3:case 2:return h7(r,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function b7(r,e,t,n){for(var s=r["!merges"]||[],a=[],o=e.s.c;o<=e.e.c;++o){for(var u=0,h=0,f=0;f<s.length;++f)if(!(s[f].s.r>t||s[f].s.c>o)&&!(s[f].e.r<t||s[f].e.c<o)){if(s[f].s.r<t||s[f].s.c<o){u=-1;break}u=s[f].e.r-s[f].s.r+1,h=s[f].e.c-s[f].s.c+1;break}if(!(u<0)){var p=Ht({r:t,c:o}),x=n.dense?(r[t]||[])[o]:r[p],v=x&&x.v!=null&&(x.h||e5(x.w||(ya(x),x.w)||""))||"",w={};u>1&&(w.rowspan=u),h>1&&(w.colspan=h),n.editable?v='<span contenteditable="true">'+v+"</span>":x&&(w["data-t"]=x&&x.t||"z",x.v!=null&&(w["data-v"]=x.v),x.z!=null&&(w["data-z"]=x.z),x.l&&(x.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+x.l.Target+'">'+v+"</a>")),w.id=(n.id||"sjs")+"-"+p,a.push(Le("td",v,w))}}var N="<tr>";return N+a.join("")+"</tr>"}var T7='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',N7="</body></html>";function S7(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function c4(r,e){var t=e||{},n=t.header!=null?t.header:T7,s=t.footer!=null?t.footer:N7,a=[n],o=Cs(r["!ref"]);t.dense=Array.isArray(r),a.push(S7(r,o,t));for(var u=o.s.r;u<=o.e.r;++u)a.push(b7(r,o,u,t));return a.push("</table>"+s),a.join("")}function u4(r,e,t){var n=t||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?sn(n.origin):n.origin;s=o.r,a=o.c}var u=e.getElementsByTagName("tr"),h=Math.min(n.sheetRows||1e7,u.length),f={s:{r:0,c:0},e:{r:s,c:a}};if(r["!ref"]){var p=Cs(r["!ref"]);f.s.r=Math.min(f.s.r,p.s.r),f.s.c=Math.min(f.s.c,p.s.c),f.e.r=Math.max(f.e.r,p.e.r),f.e.c=Math.max(f.e.c,p.e.c),s==-1&&(f.e.r=s=p.e.r+1)}var x=[],v=0,w=r["!rows"]||(r["!rows"]=[]),N=0,_=0,T=0,D=0,U=0,k=0;for(r["!cols"]||(r["!cols"]=[]);N<u.length&&_<h;++N){var F=u[N];if(y2(F)){if(n.display)continue;w[_]={hidden:!0}}var J=F.children;for(T=D=0;T<J.length;++T){var ee=J[T];if(!(n.display&&y2(ee))){var S=ee.hasAttribute("data-v")?ee.getAttribute("data-v"):ee.hasAttribute("v")?ee.getAttribute("v"):s5(ee.innerHTML),I=ee.getAttribute("data-z")||ee.getAttribute("z");for(v=0;v<x.length;++v){var A=x[v];A.s.c==D+a&&A.s.r<_+s&&_+s<=A.e.r&&(D=A.e.c+1-a,v=-1)}k=+ee.getAttribute("colspan")||1,((U=+ee.getAttribute("rowspan")||1)>1||k>1)&&x.push({s:{r:_+s,c:D+a},e:{r:_+s+(U||1)-1,c:D+a+(k||1)-1}});var j={t:"s",v:S},L=ee.getAttribute("data-t")||ee.getAttribute("t")||"";S!=null&&(S.length==0?j.t=L||"z":n.raw||S.trim().length==0||L=="s"||(S==="TRUE"?j={t:"b",v:!0}:S==="FALSE"?j={t:"b",v:!1}:isNaN(ua(S))?isNaN(od(S).getDate())||(j={t:"d",v:Hn(S)},n.cellDates||(j={t:"n",v:os(j.v)}),j.z=n.dateNF||_r[14]):j={t:"n",v:ua(S)})),j.z===void 0&&I!=null&&(j.z=I);var V="",O=ee.getElementsByTagName("A");if(O&&O.length)for(var Be=0;Be<O.length&&!(O[Be].hasAttribute("href")&&(V=O[Be].getAttribute("href"),V.charAt(0)!="#"));++Be);V&&V.charAt(0)!="#"&&(j.l={Target:V}),n.dense?(r[_+s]||(r[_+s]=[]),r[_+s][D+a]=j):r[Ht({c:D+a,r:_+s})]=j,f.e.c<D+a&&(f.e.c=D+a),D+=k}}++_}return x.length&&(r["!merges"]=(r["!merges"]||[]).concat(x)),f.e.r=Math.max(f.e.r,_-1+s),r["!ref"]=zr(f),_>=h&&(r["!fullref"]=zr((f.e.r=u.length-N+_-1+s,f))),r}function d4(r,e){var t=e||{},n=t.dense?[]:{};return u4(n,r,e)}function C7(r,e){return vl(d4(r,e),e)}function y2(r){var e="",t=A7(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function A7(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var I7=(function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+cd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return $r+e}})(),w2=(function(){var r=function(a){return Wt(a).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(a,o,u){var h=[];h.push('      <table:table table:name="'+Wt(o.SheetNames[u])+`" table:style-name="ta1">
`);var f=0,p=0,x=Cs(a["!ref"]||"A1"),v=a["!merges"]||[],w=0,N=Array.isArray(a);if(a["!cols"])for(p=0;p<=x.e.c;++p)h.push("        <table:table-column"+(a["!cols"][p]?' table:style-name="co'+a["!cols"][p].ods+'"':"")+`></table:table-column>
`);var _="",T=a["!rows"]||[];for(f=0;f<x.s.r;++f)_=T[f]?' table:style-name="ro'+T[f].ods+'"':"",h.push("        <table:table-row"+_+`></table:table-row>
`);for(;f<=x.e.r;++f){for(_=T[f]?' table:style-name="ro'+T[f].ods+'"':"",h.push("        <table:table-row"+_+`>
`),p=0;p<x.s.c;++p)h.push(e);for(;p<=x.e.c;++p){var D=!1,U={},k="";for(w=0;w!=v.length;++w)if(!(v[w].s.c>p)&&!(v[w].s.r>f)&&!(v[w].e.c<p)&&!(v[w].e.r<f)){(v[w].s.c!=p||v[w].s.r!=f)&&(D=!0),U["table:number-columns-spanned"]=v[w].e.c-v[w].s.c+1,U["table:number-rows-spanned"]=v[w].e.r-v[w].s.r+1;break}if(D){h.push(t);continue}var F=Ht({r:f,c:p}),J=N?(a[f]||[])[p]:a[F];if(J&&J.f&&(U["table:formula"]=Wt(Y8(J.f)),J.F&&J.F.slice(0,F.length)==F)){var ee=Cs(J.F);U["table:number-matrix-columns-spanned"]=ee.e.c-ee.s.c+1,U["table:number-matrix-rows-spanned"]=ee.e.r-ee.s.r+1}if(!J){h.push(e);continue}switch(J.t){case"b":k=J.v?"TRUE":"FALSE",U["office:value-type"]="boolean",U["office:boolean-value"]=J.v?"true":"false";break;case"n":k=J.w||String(J.v||0),U["office:value-type"]="float",U["office:value"]=J.v||0;break;case"s":case"str":k=J.v==null?"":J.v,U["office:value-type"]="string";break;case"d":k=J.w||Hn(J.v).toISOString(),U["office:value-type"]="date",U["office:date-value"]=Hn(J.v).toISOString(),U["table:style-name"]="ce1";break;default:h.push(e);continue}var S=r(k);if(J.l&&J.l.Target){var I=J.l.Target;I=I.charAt(0)=="#"?"#"+X8(I.slice(1)):I,I.charAt(0)!="#"&&!I.match(/^\w+:/)&&(I="../"+I),S=Le("text:a",S,{"xlink:href":I.replace(/&/g,"&amp;")})}h.push("          "+Le("table:table-cell",Le("text:p",S,{}),U)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},s=function(a,o){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var u=0;o.SheetNames.map(function(f){return o.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var p=0;p<f["!cols"].length;++p)if(f["!cols"][p]){var x=f["!cols"][p];if(x.width==null&&x.wpx==null&&x.wch==null)continue;xv(x),x.ods=u;var v=f["!cols"][p].wpx+"px";a.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),a.push(`  </style:style>
`),++u}}});var h=0;o.SheetNames.map(function(f){return o.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var p=0;p<f["!rows"].length;++p)if(f["!rows"][p]){f["!rows"][p].ods=h;var x=f["!rows"][p].hpx+"px";a.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+x+`"/>
`),a.push(`  </style:style>
`),++h}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(o,u){var h=[$r],f=cd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=cd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(h.push("<office:document"+f+p+`>
`),h.push(SN().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+f+`>
`),s(h,o),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var x=0;x!=o.SheetNames.length;++x)h.push(n(o.Sheets[o.SheetNames[x]],o,x));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),u.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}})();function h4(r,e){if(e.bookType=="fods")return w2(r,e);var t=av(),n="",s=[],a=[];return n="mimetype",xt(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",xt(t,n,w2(r,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",xt(t,n,I7(r,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",xt(t,n,$r+SN()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",xt(t,n,B5(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",xt(t,n,U5(s)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function s0(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function k7(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):oi(ld(r))}function R7(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function wo(r){var e=r.reduce(function(s,a){return s+a.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(s){t.set(s,n),n+=s.length}),t}function P7(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,s=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)r[e+a]=s&255;r[e+15]|=t>=0?0:128}function ud(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function zt(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function wc(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function qr(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],s=ud(r,t),a=s&7;s=Math.floor(s/8);var o=0,u;if(s==0)break;switch(a){case 0:{for(var h=t[0];r[t[0]++]>=128;);u=r.slice(h,t[0])}break;case 5:o=4,u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 1:o=8,u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 2:o=ud(r,t),u=r.slice(t[0],t[0]+o),t[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var f={data:u,type:a};e[s]==null?e[s]=[f]:e[s].push(f)}return e}function fn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(s){s.data&&(e.push(zt(n*8+s.type)),s.type==2&&e.push(zt(s.data.length)),e.push(s.data))})}),wo(e)}function ni(r){for(var e,t=[],n=[0];n[0]<r.length;){var s=ud(r,n),a=qr(r.slice(n[0],n[0]+s));n[0]+=s;var o={id:wc(a[1][0].data),messages:[]};a[2].forEach(function(u){var h=qr(u.data),f=wc(h[3][0].data);o.messages.push({meta:h,data:r.slice(n[0],n[0]+f)}),n[0]+=f}),(e=a[3])!=null&&e[0]&&(o.merge=wc(a[3][0].data)>>>0>0),t.push(o)}return t}function nc(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:zt(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:zt(+!!t.merge),type:0}]);var s=[];t.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:zt(o.data.length)}],n[2].push({data:fn(o.meta),type:2})});var a=fn(n);e.push(zt(a.length)),e.push(a),s.forEach(function(o){return e.push(o)})}),wo(e)}function j7(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=ud(e,t),s=[];t[0]<e.length;){var a=e[t[0]]&3;if(a==0){var o=e[t[0]++]>>2;if(o<60)++o;else{var u=o-59;o=e[t[0]],u>1&&(o|=e[t[0]+1]<<8),u>2&&(o|=e[t[0]+2]<<16),u>3&&(o|=e[t[0]+3]<<24),o>>>=0,o++,t[0]+=u}s.push(e.slice(t[0],t[0]+o)),t[0]+=o;continue}else{var h=0,f=0;if(a==1?(f=(e[t[0]]>>2&7)+4,h=(e[t[0]++]&224)<<3,h|=e[t[0]++]):(f=(e[t[0]++]>>2)+1,a==2?(h=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(h=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),s=[wo(s)],h==0)throw new Error("Invalid offset 0");if(h>s[0].length)throw new Error("Invalid offset beyond length");if(f>=h)for(s.push(s[0].slice(-h)),f-=h;f>=s[s.length-1].length;)s.push(s[s.length-1]),f-=s[s.length-1].length;s.push(s[0].slice(-h,-h+f))}}var p=wo(s);if(p.length!=n)throw new Error("Unexpected length: ".concat(p.length," != ").concat(n));return p}function si(r){for(var e=[],t=0;t<r.length;){var n=r[t++],s=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(j7(n,r.slice(t,t+s))),t+=s}if(t!==r.length)throw new Error("data is not a valid framed stream!");return wo(e)}function sc(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),s=new Uint8Array(4);e.push(s);var a=zt(n),o=a.length;e.push(a),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,t+=n}return wo(e)}function Kp(r,e){var t=new Uint8Array(32),n=s0(t),s=12,a=0;switch(t[0]=5,r.t){case"n":t[1]=2,P7(t,s,r.v),a|=1,s+=16;break;case"b":t[1]=6,n.setFloat64(s,r.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(s,e.indexOf(r.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,a,!0),t.slice(0,s)}function Yp(r,e){var t=new Uint8Array(32),n=s0(t),s=12,a=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(s,r.v,!0),a|=32,s+=8;break;case"b":t[2]=6,n.setFloat64(s,r.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(s,e.indexOf(r.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,a,!0),t.slice(0,s)}function Ka(r){var e=qr(r);return ud(e[1][0].data)}function D7(r,e,t){var n,s,a,o;if(!((n=r[6])!=null&&n[0])||!((s=r[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var u=((o=(a=r[8])==null?void 0:a[0])==null?void 0:o.data)&&wc(r[8][0].data)>0||!1;if(u)throw"Math only works with normal offsets";for(var h=0,f=s0(r[7][0].data),p=0,x=[],v=s0(r[4][0].data),w=0,N=[],_=0;_<e.length;++_){if(e[_]==null){f.setUint16(_*2,65535,!0),v.setUint16(_*2,65535);continue}f.setUint16(_*2,p,!0),v.setUint16(_*2,w,!0);var T,D;switch(typeof e[_]){case"string":T=Kp({t:"s",v:e[_]},t),D=Yp({t:"s",v:e[_]},t);break;case"number":T=Kp({t:"n",v:e[_]},t),D=Yp({t:"n",v:e[_]},t);break;case"boolean":T=Kp({t:"b",v:e[_]},t),D=Yp({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}x.push(T),p+=T.length,N.push(D),w+=D.length,++h}for(r[2][0].data=zt(h);_<r[7][0].data.length/2;++_)f.setUint16(_*2,65535,!0),v.setUint16(_*2,65535,!0);return r[6][0].data=wo(x),r[3][0].data=wo(N),h}function O7(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Cs(t["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(zr(n)));var a=i0(t,{range:n,header:1}),o=["~Sh33tJ5~"];a.forEach(function(te){return te.forEach(function(Q){typeof Q=="string"&&o.push(Q)})});var u={},h=[],f=Kt.read(e.numbers,{type:"base64"});f.FileIndex.map(function(te,Q){return[te,f.FullPaths[Q]]}).forEach(function(te){var Q=te[0],Z=te[1];if(Q.type==2&&Q.name.match(/\.iwa/)){var ue=Q.content,Ce=si(ue),oe=ni(Ce);oe.forEach(function(pe){h.push(pe.id),u[pe.id]={deps:[],location:Z,type:wc(pe.messages[0].meta[1][0].data)}})}}),h.sort(function(te,Q){return te-Q});var p=h.filter(function(te){return te>1}).map(function(te){return[te,zt(te)]});f.FileIndex.map(function(te,Q){return[te,f.FullPaths[Q]]}).forEach(function(te){var Q=te[0];if(te[1],!!Q.name.match(/\.iwa/)){var Z=ni(si(Q.content));Z.forEach(function(ue){ue.messages.forEach(function(Ce){p.forEach(function(oe){ue.messages.some(function(pe){return wc(pe.meta[1][0].data)!=11006&&R7(pe.data,oe[1])})&&u[oe[0]].deps.push(ue.id)})})})}});for(var x=Kt.find(f,u[1].location),v=ni(si(x.content)),w,N=0;N<v.length;++N){var _=v[N];_.id==1&&(w=_)}var T=Ka(qr(w.messages[0].data)[1][0].data);for(x=Kt.find(f,u[T].location),v=ni(si(x.content)),N=0;N<v.length;++N)_=v[N],_.id==T&&(w=_);for(T=Ka(qr(w.messages[0].data)[2][0].data),x=Kt.find(f,u[T].location),v=ni(si(x.content)),N=0;N<v.length;++N)_=v[N],_.id==T&&(w=_);for(T=Ka(qr(w.messages[0].data)[2][0].data),x=Kt.find(f,u[T].location),v=ni(si(x.content)),N=0;N<v.length;++N)_=v[N],_.id==T&&(w=_);var D=qr(w.messages[0].data);{D[6][0].data=zt(n.e.r+1),D[7][0].data=zt(n.e.c+1);var U=Ka(D[46][0].data),k=Kt.find(f,u[U].location),F=ni(si(k.content));{for(var J=0;J<F.length&&F[J].id!=U;++J);if(F[J].id!=U)throw"Bad ColumnRowUIDMapArchive";var ee=qr(F[J].messages[0].data);ee[1]=[],ee[2]=[],ee[3]=[];for(var S=0;S<=n.e.c;++S){var I=[];I[1]=I[2]=[{type:0,data:zt(S+420690)}],ee[1].push({type:2,data:fn(I)}),ee[2].push({type:0,data:zt(S)}),ee[3].push({type:0,data:zt(S)})}ee[4]=[],ee[5]=[],ee[6]=[];for(var A=0;A<=n.e.r;++A)I=[],I[1]=I[2]=[{type:0,data:zt(A+726270)}],ee[4].push({type:2,data:fn(I)}),ee[5].push({type:0,data:zt(A)}),ee[6].push({type:0,data:zt(A)});F[J].messages[0].data=fn(ee)}k.content=sc(nc(F)),k.size=k.content.length,delete D[46];var j=qr(D[4][0].data);{j[7][0].data=zt(n.e.r+1);var L=qr(j[1][0].data),V=Ka(L[2][0].data);k=Kt.find(f,u[V].location),F=ni(si(k.content));{if(F[0].id!=V)throw"Bad HeaderStorageBucket";var O=qr(F[0].messages[0].data);for(A=0;A<a.length;++A){var Be=qr(O[2][0].data);Be[1][0].data=zt(A),Be[4][0].data=zt(a[A].length),O[2][A]={type:O[2][0].type,data:fn(Be)}}F[0].messages[0].data=fn(O)}k.content=sc(nc(F)),k.size=k.content.length;var De=Ka(j[2][0].data);k=Kt.find(f,u[De].location),F=ni(si(k.content));{if(F[0].id!=De)throw"Bad HeaderStorageBucket";for(O=qr(F[0].messages[0].data),S=0;S<=n.e.c;++S)Be=qr(O[2][0].data),Be[1][0].data=zt(S),Be[4][0].data=zt(n.e.r+1),O[2][S]={type:O[2][0].type,data:fn(Be)};F[0].messages[0].data=fn(O)}k.content=sc(nc(F)),k.size=k.content.length;var Se=Ka(j[4][0].data);(function(){for(var te=Kt.find(f,u[Se].location),Q=ni(si(te.content)),Z,ue=0;ue<Q.length;++ue){var Ce=Q[ue];Ce.id==Se&&(Z=Ce)}var oe=qr(Z.messages[0].data);{oe[3]=[];var pe=[];o.forEach(function(tt,mt){pe[1]=[{type:0,data:zt(mt)}],pe[2]=[{type:0,data:zt(1)}],pe[3]=[{type:2,data:k7(tt)}],oe[3].push({type:2,data:fn(pe)})})}Z.messages[0].data=fn(oe);var ge=nc(Q),Xe=sc(ge);te.content=Xe,te.size=te.content.length})();var We=qr(j[3][0].data);{var Ne=We[1][0];delete We[2];var Ee=qr(Ne.data);{var q=Ka(Ee[2][0].data);(function(){for(var te=Kt.find(f,u[q].location),Q=ni(si(te.content)),Z,ue=0;ue<Q.length;++ue){var Ce=Q[ue];Ce.id==q&&(Z=Ce)}var oe=qr(Z.messages[0].data);{delete oe[6],delete We[7];var pe=new Uint8Array(oe[5][0].data);oe[5]=[];for(var ge=0,Xe=0;Xe<=n.e.r;++Xe){var tt=qr(pe);ge+=D7(tt,a[Xe],o),tt[1][0].data=zt(Xe),oe[5].push({data:fn(tt),type:2})}oe[1]=[{type:0,data:zt(n.e.c+1)}],oe[2]=[{type:0,data:zt(n.e.r+1)}],oe[3]=[{type:0,data:zt(ge)}],oe[4]=[{type:0,data:zt(n.e.r+1)}]}Z.messages[0].data=fn(oe);var mt=nc(Q),it=sc(mt);te.content=it,te.size=te.content.length})()}Ne.data=fn(Ee)}j[3][0].data=fn(We)}D[4][0].data=fn(j)}w.messages[0].data=fn(D);var se=nc(v),z=sc(se);return x.content=z,x.size=x.content.length,f}function F7(r){return function(t){for(var n=0;n!=r.length;++n){var s=r[n];t[s[0]]===void 0&&(t[s[0]]=s[1]),s[2]==="n"&&(t[s[0]]=Number(t[s[0]]))}}}function Ev(r){F7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function L7(r,e){return e.bookType=="ods"?h4(r,e):e.bookType=="numbers"?O7(r,e):e.bookType=="xlsb"?M7(r,e):U7(r,e)}function M7(r,e){dc=1024,r&&!r.SSF&&(r.SSF=ls(_r)),r&&r.SSF&&(V0(),U0(r.SSF),e.revssf=B0(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,qu?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=KN.indexOf(e.bookType)>-1,s=bN();Ev(e=e||{});var a=av(),o="",u=0;if(e.cellXfs=[],To(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",xt(a,o,CN(r.Props,e)),s.coreprops.push(o),$t(e.rels,2,o,Dt.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var h=[],f=0;f<r.SheetNames.length;++f)(r.Workbook.Sheets[f]||{}).Hidden!=2&&h.push(r.SheetNames[f]);r.Props.SheetNames=h}for(r.Props.Worksheets=r.Props.SheetNames.length,xt(a,o,IN(r.Props)),s.extprops.push(o),$t(e.rels,3,o,Dt.EXT_PROPS),r.Custprops!==r.Props&&wn(r.Custprops||{}).length>0&&(o="docProps/custom.xml",xt(a,o,kN(r.Custprops)),s.custprops.push(o),$t(e.rels,4,o,Dt.CUST_PROPS)),u=1;u<=r.SheetNames.length;++u){var p={"!id":{}},x=r.Sheets[r.SheetNames[u-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:o="xl/worksheets/sheet"+u+"."+t,xt(a,o,B9(u-1,o,e,r,p)),s.sheets.push(o),$t(e.wbrels,-1,"worksheets/sheet"+u+"."+t,Dt.WS[0])}if(x){var w=x["!comments"],N=!1,_="";w&&w.length>0&&(_="xl/comments"+u+"."+t,xt(a,_,W9(w,_)),s.comments.push(_),$t(p,-1,"../comments"+u+"."+t,Dt.CMNT),N=!0),x["!legacy"]&&N&&xt(a,"xl/drawings/vmlDrawing"+u+".vml",GN(u,x["!comments"])),delete x["!comments"],delete x["!legacy"]}p["!id"].rId1&&xt(a,NN(o),vc(p))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,xt(a,o,$9(e.Strings,o,e)),s.strs.push(o),$t(e.wbrels,-1,"sharedStrings."+t,Dt.SST)),o="xl/workbook."+t,xt(a,o,V9(r,o)),s.workbooks.push(o),$t(e.rels,1,o,Dt.WB),o="xl/theme/theme1.xml",xt(a,o,WN(r.Themes,e)),s.themes.push(o),$t(e.wbrels,-1,"theme/theme1.xml",Dt.THEME),o="xl/styles."+t,xt(a,o,z9(r,o,e)),s.styles.push(o),$t(e.wbrels,-1,"styles."+t,Dt.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",xt(a,o,r.vbaraw),s.vba.push(o),$t(e.wbrels,-1,"vbaProject.bin",Dt.VBA)),o="xl/metadata."+t,xt(a,o,H9(o)),s.metadata.push(o),$t(e.wbrels,-1,"metadata."+t,Dt.XLMETA),xt(a,"[Content_Types].xml",TN(s,e)),xt(a,"_rels/.rels",vc(e.rels)),xt(a,"xl/_rels/workbook."+t+".rels",vc(e.wbrels)),delete e.revssf,delete e.ssf,a}function U7(r,e){dc=1024,r&&!r.SSF&&(r.SSF=ls(_r)),r&&r.SSF&&(V0(),U0(r.SSF),e.revssf=B0(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,qu?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=KN.indexOf(e.bookType)>-1,s=bN();Ev(e=e||{});var a=av(),o="",u=0;if(e.cellXfs=[],To(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",xt(a,o,CN(r.Props,e)),s.coreprops.push(o),$t(e.rels,2,o,Dt.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var h=[],f=0;f<r.SheetNames.length;++f)(r.Workbook.Sheets[f]||{}).Hidden!=2&&h.push(r.SheetNames[f]);r.Props.SheetNames=h}r.Props.Worksheets=r.Props.SheetNames.length,xt(a,o,IN(r.Props)),s.extprops.push(o),$t(e.rels,3,o,Dt.EXT_PROPS),r.Custprops!==r.Props&&wn(r.Custprops||{}).length>0&&(o="docProps/custom.xml",xt(a,o,kN(r.Custprops)),s.custprops.push(o),$t(e.rels,4,o,Dt.CUST_PROPS));var p=["SheetJ5"];for(e.tcid=0,u=1;u<=r.SheetNames.length;++u){var x={"!id":{}},v=r.Sheets[r.SheetNames[u-1]],w=(v||{})["!type"]||"sheet";switch(w){case"chart":default:o="xl/worksheets/sheet"+u+"."+t,xt(a,o,n4(u-1,e,r,x)),s.sheets.push(o),$t(e.wbrels,-1,"worksheets/sheet"+u+"."+t,Dt.WS[0])}if(v){var N=v["!comments"],_=!1,T="";if(N&&N.length>0){var D=!1;N.forEach(function(U){U[1].forEach(function(k){k.T==!0&&(D=!0)})}),D&&(T="xl/threadedComments/threadedComment"+u+"."+t,xt(a,T,gL(N,p,e)),s.threadedcomments.push(T),$t(x,-1,"../threadedComments/threadedComment"+u+"."+t,Dt.TCMNT)),T="xl/comments"+u+"."+t,xt(a,T,qN(N)),s.comments.push(T),$t(x,-1,"../comments"+u+"."+t,Dt.CMNT),_=!0}v["!legacy"]&&_&&xt(a,"xl/drawings/vmlDrawing"+u+".vml",GN(u,v["!comments"])),delete v["!comments"],delete v["!legacy"]}x["!id"].rId1&&xt(a,NN(o),vc(x))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,xt(a,o,MN(e.Strings,e)),s.strs.push(o),$t(e.wbrels,-1,"sharedStrings."+t,Dt.SST)),o="xl/workbook."+t,xt(a,o,a4(r)),s.workbooks.push(o),$t(e.rels,1,o,Dt.WB),o="xl/theme/theme1.xml",xt(a,o,WN(r.Themes,e)),s.themes.push(o),$t(e.wbrels,-1,"theme/theme1.xml",Dt.THEME),o="xl/styles."+t,xt(a,o,zN(r,e)),s.styles.push(o),$t(e.wbrels,-1,"styles."+t,Dt.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",xt(a,o,r.vbaraw),s.vba.push(o),$t(e.wbrels,-1,"vbaProject.bin",Dt.VBA)),o="xl/metadata."+t,xt(a,o,HN()),s.metadata.push(o),$t(e.wbrels,-1,"metadata."+t,Dt.XLMETA),p.length>1&&(o="xl/persons/person.xml",xt(a,o,xL(p)),s.people.push(o),$t(e.wbrels,-1,"persons/person.xml",Dt.PEOPLE)),xt(a,"[Content_Types].xml",TN(s,e)),xt(a,"_rels/.rels",vc(e.rels)),xt(a,"xl/_rels/workbook."+t+".rels",vc(e.wbrels)),delete e.revssf,delete e.ssf,a}function V7(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=va(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function f4(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Ad(e.file,Kt.write(r,{type:Ft?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Kt.write(r,e)}function B7(r,e){var t=ls(e||{}),n=L7(r,t);return z7(n,t)}function z7(r,e){var t={},n=Ft?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=r.FullPaths?Kt.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(M0(s))}return e.password&&typeof encrypt_agile<"u"?f4(encrypt_agile(s,e.password),e):e.type==="file"?Ad(e.file,s):e.type=="string"?$u(s):s}function $7(r,e){var t=e||{},n=i7(r,t);return f4(n,t)}function Ci(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return ad(ld(n));case"binary":return ld(n);case"string":return r;case"file":return Ad(e.file,n,"utf8");case"buffer":return Ft?_a(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ci(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function W7(r,e){switch(e.type){case"base64":return ad(r);case"binary":return r;case"string":return r;case"file":return Ad(e.file,r,"binary");case"buffer":return Ft?_a(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function lf(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?ad(t):e.type=="string"?$u(t):t;case"file":return Ad(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function m4(r,e){vO(),I9(r);var t=ls(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=m4(r,t);return t.type="array",M0(n)}var s=0;if(t.sheet&&(typeof t.sheet=="number"?s=t.sheet:s=r.SheetNames.indexOf(t.sheet),!r.SheetNames[s]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Ci(n7(r,t),t);case"slk":case"sylk":return Ci(SF.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"htm":case"html":return Ci(c4(r.Sheets[r.SheetNames[s]],t),t);case"txt":return W7(g4(r.Sheets[r.SheetNames[s]],t),t);case"csv":return Ci(bv(r.Sheets[r.SheetNames[s]],t),t,"\uFEFF");case"dif":return Ci(CF.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"dbf":return lf(NF.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"prn":return Ci(AF.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"rtf":return Ci(OF.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"eth":return Ci(LN.from_sheet(r.Sheets[r.SheetNames[s]],t),t);case"fods":return Ci(h4(r,t),t);case"wk1":return lf(f2.sheet_to_wk1(r.Sheets[r.SheetNames[s]],t),t);case"wk3":return lf(f2.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),lf(l4(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),$7(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return B7(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function H7(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function p4(r,e,t){var n={};return n.type="file",n.file=e,H7(n),m4(r,n)}function G7(r,e,t,n,s,a,o,u){var h=yn(t),f=u.defval,p=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),x=!0,v=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:t,enumerable:!1})}catch{v.__rowNum__=t}else v.__rowNum__=t;if(!o||r[t])for(var w=e.s.c;w<=e.e.c;++w){var N=o?r[t][w]:r[n[w]+h];if(N===void 0||N.t===void 0){if(f===void 0)continue;a[w]!=null&&(v[a[w]]=f);continue}var _=N.v;switch(N.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(a[w]!=null){if(_==null)if(N.t=="e"&&_===null)v[a[w]]=null;else if(f!==void 0)v[a[w]]=f;else if(p&&_===null)v[a[w]]=null;else continue;else v[a[w]]=p&&(N.t!=="n"||N.t==="n"&&u.rawNumbers!==!1)?_:ya(N,_,u);_!=null&&(x=!1)}}return{row:v,isempty:x}}function i0(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,s=1,a=[],o=0,u="",h={s:{r:0,c:0},e:{r:0,c:0}},f=e||{},p=f.range!=null?f.range:r["!ref"];switch(f.header===1?n=1:f.header==="A"?n=2:Array.isArray(f.header)?n=3:f.header==null&&(n=0),typeof p){case"string":h=or(p);break;case"number":h=or(r["!ref"]),h.s.r=p;break;default:h=p}n>0&&(s=0);var x=yn(h.s.r),v=[],w=[],N=0,_=0,T=Array.isArray(r),D=h.s.r,U=0,k={};T&&!r[D]&&(r[D]=[]);var F=f.skipHidden&&r["!cols"]||[],J=f.skipHidden&&r["!rows"]||[];for(U=h.s.c;U<=h.e.c;++U)if(!(F[U]||{}).hidden)switch(v[U]=Pn(U),t=T?r[D][U]:r[v[U]+x],n){case 1:a[U]=U-h.s.c;break;case 2:a[U]=v[U];break;case 3:a[U]=f.header[U-h.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),u=o=ya(t,null,f),_=k[o]||0,!_)k[o]=1;else{do u=o+"_"+_++;while(k[u]);k[o]=_,k[u]=1}a[U]=u}for(D=h.s.r+s;D<=h.e.r;++D)if(!(J[D]||{}).hidden){var ee=G7(r,h,D,v,n,a,T,f);(ee.isempty===!1||(n===1?f.blankrows!==!1:f.blankrows))&&(w[N++]=ee.row)}return w.length=N,w}var _2=/"/g;function q7(r,e,t,n,s,a,o,u){for(var h=!0,f=[],p="",x=yn(t),v=e.s.c;v<=e.e.c;++v)if(n[v]){var w=u.dense?(r[t]||[])[v]:r[n[v]+x];if(w==null)p="";else if(w.v!=null){h=!1,p=""+(u.rawNumbers&&w.t=="n"?w.v:ya(w,null,u));for(var N=0,_=0;N!==p.length;++N)if((_=p.charCodeAt(N))===s||_===a||_===34||u.forceQuotes){p='"'+p.replace(_2,'""')+'"';break}p=="ID"&&(p='"ID"')}else w.f!=null&&!w.F?(h=!1,p="="+w.f,p.indexOf(",")>=0&&(p='"'+p.replace(_2,'""')+'"')):p="";f.push(p)}return u.blankrows===!1&&h?null:f.join(o)}function bv(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var s=or(r["!ref"]),a=n.FS!==void 0?n.FS:",",o=a.charCodeAt(0),u=n.RS!==void 0?n.RS:`
`,h=u.charCodeAt(0),f=new RegExp((a=="|"?"\\|":a)+"+$"),p="",x=[];n.dense=Array.isArray(r);for(var v=n.skipHidden&&r["!cols"]||[],w=n.skipHidden&&r["!rows"]||[],N=s.s.c;N<=s.e.c;++N)(v[N]||{}).hidden||(x[N]=Pn(N));for(var _=0,T=s.s.r;T<=s.e.r;++T)(w[T]||{}).hidden||(p=q7(r,s,T,x,o,h,a,n),p!=null&&(n.strip&&(p=p.replace(f,"")),(p||n.blankrows!==!1)&&t.push((_++?u:"")+p)));return delete n.dense,t.join("")}function g4(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=bv(r,e);return t}function K7(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var s=or(r["!ref"]),a="",o=[],u,h=[],f=Array.isArray(r);for(u=s.s.c;u<=s.e.c;++u)o[u]=Pn(u);for(var p=s.s.r;p<=s.e.r;++p)for(a=yn(p),u=s.s.c;u<=s.e.c;++u)if(e=o[u]+a,t=f?(r[p]||[])[u]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}h[h.length]=e+"="+n}return h}function x4(r,e,t){var n=t||{},s=+!n.skipHeader,a=r||{},o=0,u=0;if(a&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var h=typeof n.origin=="string"?sn(n.origin):n.origin;o=h.r,u=h.c}var f,p={s:{c:0,r:0},e:{c:u,r:o+e.length-1+s}};if(a["!ref"]){var x=or(a["!ref"]);p.e.c=Math.max(p.e.c,x.e.c),p.e.r=Math.max(p.e.r,x.e.r),o==-1&&(o=x.e.r+1,p.e.r=o+e.length-1+s)}else o==-1&&(o=0,p.e.r=e.length-1+s);var v=n.header||[],w=0;e.forEach(function(_,T){wn(_).forEach(function(D){(w=v.indexOf(D))==-1&&(v[w=v.length]=D);var U=_[D],k="z",F="",J=Ht({c:u+w,r:o+T+s});f=dd(a,J),U&&typeof U=="object"&&!(U instanceof Date)?a[J]=U:(typeof U=="number"?k="n":typeof U=="boolean"?k="b":typeof U=="string"?k="s":U instanceof Date?(k="d",n.cellDates||(k="n",U=os(U)),F=n.dateNF||_r[14]):U===null&&n.nullError&&(k="e",U=0),f?(f.t=k,f.v=U,delete f.w,delete f.R,F&&(f.z=F)):a[J]=f={t:k,v:U},F&&(f.z=F))})}),p.e.c=Math.max(p.e.c,u+v.length-1);var N=yn(o);if(s)for(w=0;w<v.length;++w)a[Pn(w+u)+N]={t:"s",v:v[w]};return a["!ref"]=zr(p),a}function Y7(r,e){return x4(null,r,e)}function dd(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=sn(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?dd(r,Ht(e)):dd(r,Ht({r:e,c:t||0}))}function X7(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Q7(){return{SheetNames:[],Sheets:{}}}function J7(r,e,t,n){var s=1;if(!t)for(;s<=65535&&r.SheetNames.indexOf(t="Sheet"+s)!=-1;++s,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var a=t.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var o=a&&a[1]||t;for(++s;s<=65535&&r.SheetNames.indexOf(t=o+s)!=-1;++s);}if(i4(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function Z7(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=X7(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function eU(r,e){return r.z=e,r}function v4(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function tU(r,e,t){return v4(r,"#"+e,t)}function rU(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function nU(r,e,t,n){for(var s=typeof e!="string"?e:or(e),a=typeof e=="string"?e:zr(e),o=s.s.r;o<=s.e.r;++o)for(var u=s.s.c;u<=s.e.c;++u){var h=dd(r,o,u);h.t="n",h.F=a,delete h.v,o==s.s.r&&u==s.s.c&&(h.f=t,n&&(h.D=!0))}return r}var _c={encode_col:Pn,encode_row:yn,encode_cell:Ht,encode_range:zr,decode_col:hv,decode_row:dv,split_cell:v5,decode_cell:sn,decode_range:Cs,format_cell:ya,sheet_add_aoa:xN,sheet_add_json:x4,sheet_add_dom:u4,aoa_to_sheet:zc,json_to_sheet:Y7,table_to_sheet:d4,table_to_book:C7,sheet_to_csv:bv,sheet_to_txt:g4,sheet_to_json:i0,sheet_to_html:c4,sheet_to_formulae:K7,sheet_to_row_object_array:i0,sheet_get_cell:dd,book_new:Q7,book_append_sheet:J7,book_set_sheet_visibility:Z7,cell_set_number_format:eU,cell_set_hyperlink:v4,cell_set_internal_link:tU,cell_add_comment:rU,sheet_set_array_formula:nU,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const sU=({club:r,user:e,isSuccess:t,onSubmit:n,onClose:s})=>{var p;const[a,o]=M.useState({}),u=r.recruitmentQuestions&&r.recruitmentQuestions.length>0,h=(x,v)=>{o(w=>({...w,[x]:v}))},f=x=>{var w;x.preventDefault();const v=((w=r.recruitmentQuestions)==null?void 0:w.map((N,_)=>({question:N,answer:a[_]||""})))||[];n(v)};return c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-lg w-full relative animate-form-enter",onClick:x=>x.stopPropagation(),children:t?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-green-500/10 rounded-full flex items-center justify-center animate-circle-pulse",children:c.jsx("svg",{className:"w-16 h-16 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{className:"checkmark-path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Application Submitted!"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"The club admins will review your application shortly."})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:""}),c.jsxs("div",{className:"p-8",children:[c.jsxs("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:["Apply to ",r.name]}),c.jsx("p",{className:"text-gray-400 text-center mb-6",children:"Your complete profile information will be shared with the admin."}),c.jsxs("form",{onSubmit:f,className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[u?(p=r.recruitmentQuestions)==null?void 0:p.map((x,v)=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:x}),c.jsx("textarea",{required:!0,rows:3,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a[v]||"",onChange:w=>h(v,w.target.value)})]},v)):c.jsx("div",{className:"text-center text-gray-300 bg-slate-800/50 p-4 rounded-md border border-slate-700",children:c.jsx("p",{children:"This club has no specific application questions. Click submit to send your joining request directly."})}),c.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:"Submit Application"})]})]})]})})})},cf=({label:r,id:e,...t})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("input",{id:e,...t,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),iU=({label:r,id:e,...t})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("textarea",{id:e,...t,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),aU=({application:r,onClose:e})=>c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full relative max-h-[80vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[c.jsx("div",{className:"p-6 border-b border-slate-700 flex-shrink-0",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:r.userImageUrl,className:"w-14 h-14 rounded-full mr-4",alt:r.userName}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-white",children:r.userName}),c.jsx("p",{className:"text-sm text-gray-400",children:r.userEmail}),c.jsxs("p",{className:"text-sm text-gray-400",children:[r.userBranch," - ",r.userYear]})]})]}),c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-2xl",children:""})]})}),c.jsxs("div",{className:"p-6 overflow-y-auto",children:[c.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Application Responses"}),c.jsx("div",{className:"space-y-4",children:r.answers.map((t,n)=>c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-300",children:t.question}),c.jsx("p",{className:"text-gray-400 bg-slate-800 p-3 rounded-md mt-1 whitespace-pre-wrap",children:t.answer})]},n))})]})]})}),oU=({members:r,clubName:e,onClose:t,isClosing:n})=>c.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-backdrop-fade-in",onClick:t,children:c.jsxs("div",{className:`bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col ${n?"animate-modal-content-exit":"animate-form-enter"}`,onClick:s=>s.stopPropagation(),children:[c.jsx("div",{className:"p-5 border-b border-slate-700 flex-shrink-0",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-white",children:"All Members"}),c.jsxs("p",{className:"text-gray-400",children:["of ",e]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:""})]})}),c.jsx("div",{className:"p-6 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-4",children:r.map(s=>c.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[c.jsx("p",{className:"font-semibold text-white truncate",children:s.name}),c.jsx("p",{className:"text-sm text-indigo-400 truncate",children:s.position||"Member"})]},s.id))})})]})}),lU=({club:r,clubEvents:e,setEvents:t,user:n,applications:s,allUsers:a=[],onUpdateClub:o,onApplicationStatusChange:u,onNewApplication:h,onCreateEvent:f,onUpdateEvent:p,registrations:x,onAddClubMember:v,onRemoveClubMember:w,onUpdateClubMember:N})=>{var rr;const[_,T]=M.useState("ongoing"),[D,U]=M.useState("recruitment"),[k,F]=M.useState("idle"),[J,ee]=M.useState(!1),[S,I]=M.useState(null),[A,j]=M.useState(null),[L,V]=M.useState(!1),[O,Be]=M.useState(!1),De=zs(),[Se,We]=M.useState(r),[Ne,Ee]=M.useState(!1);M.useEffect(()=>{We(r)},[r]);const[q,se]=M.useState(!0),[z,te]=M.useState({rollNumber:"",position:"",imageUrl:""}),[Q,Z]=M.useState([]),[ue,Ce]=M.useState(null),oe=ye=>{const Ze=ye.target.value;if(te(vt=>({...vt,rollNumber:Ze})),Ze.length>=3){const vt=a.filter(gt=>gt.rollNumber&&gt.rollNumber.toLowerCase().includes(Ze.toLowerCase()));Z(vt)}else Z([]);Ce(null)},pe=ye=>{Ce(ye),te(Ze=>({...Ze,rollNumber:ye.rollNumber||"",imageUrl:ye.imageUrl||""})),Z([])},ge=()=>{if(!ue||!z.position){alert("Please select a user and enter position.");return}if(Se.team.some(Ze=>Ze.id===ue.id)){alert("This user is already a member.");return}const ye={id:ue.id,name:ue.name,position:z.position,imageUrl:ue.imageUrl||void 0,rollNumber:ue.rollNumber};We(Ze=>({...Ze,team:[...Ze.team,ye]})),te({rollNumber:"",position:"",imageUrl:""}),Ce(null),Z([])},Xe=M.useMemo(()=>["president","vice president","secretary","treasurer","head","lead","coordinator"],[]),tt=M.useCallback(ye=>ye?Xe.some(Ze=>ye.toLowerCase().includes(Ze)):!1,[Xe]),mt=M.useMemo(()=>{const ye=Se.team.filter(gt=>tt(gt.position)),Ze=Se.team.filter(gt=>!tt(gt.position));return[...ye,...Ze].slice(0,4)},[Se.team,tt]);M.useEffect(()=>{if(k==="success"){const ye=setTimeout(()=>{F("idle")},2500);return()=>clearTimeout(ye)}},[k]);const it=ye=>{n&&(h({userId:n.id,userName:n.name,userImageUrl:`https://picsum.photos/seed/${n.name.replace(/\s+/g,"")}/200/200`,userEmail:n.email||"not-provided@college.edu",userYear:n.year||"N/A",userBranch:n.branch||"N/A",userMobile:n.mobile||"N/A",clubId:r.id,status:"pending",answers:ye}),F("success"),Ee(!0))},tr=M.useMemo(()=>e.filter(ye=>ye.status===pt.Upcoming||ye.status===pt.Ongoing),[e]),Ct=M.useMemo(()=>e.filter(ye=>ye.status===pt.Past),[e]),ze=(ye,Ze)=>{We(vt=>({...vt,[ye]:Ze}))},fr=(ye,Ze)=>{We(vt=>{const gt=[...vt.recruitmentQuestions||[]];return gt[ye]=Ze,{...vt,recruitmentQuestions:gt}})},Rr=()=>{We(ye=>({...ye,recruitmentQuestions:[...ye.recruitmentQuestions||[],""]}))},Tr=ye=>{We(Ze=>{const vt=[...Ze.recruitmentQuestions||[]];return vt.length>1?{...Ze,recruitmentQuestions:vt.filter((gt,Tt)=>Tt!==ye)}:Ze})},Nr=async()=>{const ye=Se.team.map(Tt=>{const Nt=a.find(Jt=>Jt.id===Tt.id);return Nt?{id:Nt.id,name:Nt.name,rollNumber:Nt.rollNumber,imageUrl:Tt.imageUrl||Nt.imageUrl,position:Tt.position}:Tt}),Ze=r.team||[],vt=Se.team||[],gt=Ze.filter(Tt=>!vt.some(Nt=>Nt.id===Tt.id));console.log("hola",gt);for(const Tt of gt)if(Tt.id)try{const Nt=a.find(Jt=>Jt.id===Tt.id);if(Nt&&Array.isArray(Nt.managedClubIds)){const Jt=Nt.managedClubIds.filter(Gn=>Gn!==Se.id),nr=Jt.length===0?"student":Nt.role;await hr.updateClubMemberProfile(Tt.id,{managedClubIds:Jt,role:nr})}}catch{}if(await o({...Se,team:ye}),n&&Se.team&&Se.id){for(const Tt of Se.team)if(Tt.id)try{const Nt=a.find(Jt=>Jt.id===Tt.id);if(Nt){const Jt=Array.isArray(Nt.managedClubIds)?Array.from(new Set([...Nt.managedClubIds,Se.id])):[Se.id],nr=Nt.role==="admin"?"admin":"contributor";await hr.updateClubMemberProfile(Tt.id,{managedClubIds:Jt,role:nr,name:Tt.name})}}catch{}}},As=()=>{Be(!0),setTimeout(()=>{V(!1),Be(!1)},300)},_n=M.useMemo(()=>s.filter(ye=>ye.status==="pending"),[s]),Sr=M.useMemo(()=>Se.team.some(ye=>ye.name===(n==null?void 0:n.name)),[Se.team,n]),Gt=M.useMemo(()=>s.some(ye=>ye.userId===(n==null?void 0:n.id)),[s,n])||Ne,qt=(n==null?void 0:n.role)==="contributor"&&((rr=n==null?void 0:n.managedClubIds)==null?void 0:rr.includes(Se.id)),Yt=M.useMemo(()=>{var ye;if(!n)return!1;if(n.role==="admin"||r.adminIds&&r.adminIds.includes(n.id))return!0;if(n.role==="contributor"){const Ze=(ye=r.team)==null?void 0:ye.find(vt=>vt.id===n.id);if(Ze&&Ze.position&&Ze.position.toLowerCase().includes("admin"))return!0}return!1},[n,r]),Is=M.useRef(null),En=M.useRef(null),[He,bt]=M.useState(!1),[At,Pr]=M.useState(!1),us=async(ye,Ze)=>{var gt;const vt=(gt=ye.target.files)==null?void 0:gt[0];if(vt){Ze==="logoUrl"&&bt(!0),Ze==="bannerUrl"&&Pr(!0);try{const Tt=await mO(vt,r.id,Ze==="logoUrl"?"logo":"banner");We(Nt=>({...Nt,[Ze]:Tt}))}catch{alert("Image upload failed")}finally{Ze==="logoUrl"&&bt(!1),Ze==="bannerUrl"&&Pr(!1)}}},bn=async(ye,Ze)=>{const vt=r.id;try{const gt=await L0(()=>Promise.resolve().then(()=>y4),void 0).then(nr=>nr.eventRegistrationService.getEventRegistrations(ye,vt));if(!gt||gt.length===0){alert("No registrations found for this event.");return}const Tt=gt.map(nr=>{var Gn;return{Name:nr.userName,Email:nr.userEmail,Phone:nr.userPhone||"",RollNumber:nr.userRollNumber||"",Branch:nr.userBranch||"",Year:nr.userYear||"",RegistrationDate:(Gn=nr.registrationDate)!=null&&Gn.seconds?new Date(nr.registrationDate.seconds*1e3).toLocaleString():"",Status:nr.status,PaymentStatus:nr.paymentStatus||"",CheckIn:nr.checkInStatus==="checked_in"?"Yes":"No"}}),Nt=_c.json_to_sheet(Tt),Jt=_c.book_new();_c.book_append_sheet(Jt,Nt,"Registrations"),p4(Jt,`${Ze.replace(/\s+/g,"_")}_registrations.xlsx`)}catch(gt){alert("Failed to download registrations."),console.error(gt)}};return c.jsxs(c.Fragment,{children:[k!=="idle"&&n&&c.jsx(sU,{club:Se,user:n,isSuccess:k==="success",onSubmit:it,onClose:()=>F("idle")}),J&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:c.jsx(Rg,{clubId:r.id,onClose:()=>ee(!1),onCreateEvent:ye=>{f(ye),ee(!1)}})})}),S&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:c.jsx(Rg,{clubId:r.id,eventToEdit:S,onUpdateEvent:ye=>{p(ye),I(null)},onClose:()=>I(null)})})}),A&&c.jsx(aU,{application:A,onClose:()=>j(null)}),L&&c.jsx(oU,{members:Se.team,clubName:Se.name,onClose:As,isClosing:O}),c.jsxs("div",{className:"bg-slate-950 text-white",children:[c.jsxs("div",{className:"relative h-64 md:h-80 w-full",children:[c.jsx("img",{src:Se.bannerUrl,alt:`${Se.name} banner`,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/70 to-transparent"})]}),c.jsx("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"relative -mt-20 md:-mt-24 flex flex-col md:flex-row items-center md:items-end gap-6",children:[c.jsx("img",{src:Se.logoUrl,alt:`${Se.name} logo`,className:"w-32 h-32 md:w-48 md:h-48 rounded-2xl border-4 border-slate-800 shadow-lg object-cover"}),c.jsxs("div",{className:"text-center md:text-left pb-4",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold",children:Se.name}),c.jsx("p",{className:"text-lg text-gray-400 mt-1",children:Se.tagline})]})]})}),c.jsx("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-8 lg:sticky lg:top-24",children:[c.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"About Us"}),c.jsx("p",{className:"text-gray-400 whitespace-pre-wrap",children:Se.description})]}),!qt&&c.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800 text-center",children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Interested in Joining?"}),Sr?c.jsx("p",{className:"text-green-400 font-semibold",children:"You are a member of this club!"}):Gt?c.jsx("p",{className:"text-yellow-400 font-semibold",children:"Your application is pending."}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:Se.recruitmentOpen?"Recruitment is currently open!":"Recruitment is closed, but you can still send a joining request."}),c.jsx("button",{onClick:()=>F("applying"),className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:Se.recruitmentOpen?"Apply Now":"Send Request"})]})]}),c.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Our Team"}),Se.team.length>4&&c.jsx("button",{onClick:()=>V(!0),className:"text-sm text-indigo-400 hover:underline",children:"View All"})]}),c.jsx("div",{className:"space-y-4",children:mt.map(ye=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:ye.imageUrl||`https://picsum.photos/seed/${ye.name.replace(/\s+/g,"")}/200/200`,alt:ye.name,className:"w-12 h-12 rounded-full object-cover"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:ye.name}),c.jsx("p",{className:"text-sm text-indigo-400",children:ye.position})]})]},ye.id))})]})]}),c.jsx("div",{className:"lg:col-span-2",children:Yt?c.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-800",children:[c.jsxs("div",{className:"p-4 border-b border-slate-800 flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>U("recruitment"),className:`px-4 py-2 rounded-lg text-sm font-semibold ${D==="recruitment"?"bg-indigo-600":"hover:bg-slate-800"}`,children:["Recruitment (",_n.length,")"]}),c.jsx("button",{onClick:()=>U("members"),className:`px-4 py-2 rounded-lg text-sm font-semibold ${D==="members"?"bg-indigo-600":"hover:bg-slate-800"}`,children:"Members"}),c.jsx("button",{onClick:()=>U("events"),className:`px-4 py-2 rounded-lg text-sm font-semibold ${D==="events"?"bg-indigo-600":"hover:bg-slate-800"}`,children:"Events"}),c.jsx("button",{onClick:()=>U("payments"),className:`px-4 py-2 rounded-lg text-sm font-semibold ${D==="payments"?"bg-indigo-600":"hover:bg-slate-800"}`,children:"Payments"}),c.jsx("button",{onClick:()=>U("settings"),className:`px-4 py-2 rounded-lg text-sm font-semibold ${D==="settings"?"bg-indigo-600":"hover:bg-slate-800"}`,children:"Settings"})]}),c.jsxs("div",{className:"p-6",children:[D==="recruitment"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Pending Applications"}),_n.length>0?_n.map(ye=>c.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:ye.userImageUrl,alt:ye.userName,className:"w-10 h-10 rounded-full"}),c.jsx("p",{className:"font-semibold",children:ye.userName})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>j(ye),className:"text-xs px-3 py-1.5 rounded-md bg-slate-700 hover:bg-slate-600",children:"View"}),c.jsx("button",{onClick:()=>u(Se.id,ye,"accepted"),className:"text-xs px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700",children:"Accept"}),c.jsx("button",{onClick:()=>u(Se.id,ye,"rejected"),className:"text-xs px-3 py-1.5 rounded-md bg-red-600 hover:bg-red-700",children:"Reject"})]})]},ye.id)):c.jsx("p",{className:"text-gray-400",children:"No pending applications."})]}),D==="members"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Manage Members"}),c.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-2 mb-4",children:Se.team.map(ye=>c.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsx("p",{className:"font-semibold text-white truncate",children:ye.name}),c.jsx("input",{type:"text",value:ye.position,onChange:Ze=>{We(vt=>({...vt,team:vt.team.map(gt=>gt.id===ye.id?{...gt,position:Ze.target.value}:gt)}))},placeholder:"Position",className:"flex-1 min-w-0 px-2 py-1 bg-slate-700 border border-slate-600 rounded-md text-sm",disabled:!Yt})]}),Yt&&c.jsx("button",{onClick:()=>We(Ze=>({...Ze,team:Ze.team.filter(vt=>vt.id!==ye.id)})),className:"text-xs px-3 py-1.5 rounded-md bg-red-600/50 hover:bg-red-600/80 text-red-300 flex-shrink-0",children:"Remove"})]},ye.id))}),Yt&&c.jsxs("div",{className:"border-t border-slate-700 pt-4 mt-4",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Add New Member"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Roll Number"}),c.jsx("input",{type:"text",value:z.rollNumber,onChange:oe,placeholder:"Enter roll number",className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"}),Q.length>0&&c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-md mt-1 max-h-40 overflow-y-auto z-10 absolute",children:Q.map(ye=>c.jsxs("div",{className:"px-3 py-2 hover:bg-slate-800 cursor-pointer flex items-center gap-2",onClick:()=>pe(ye),children:[c.jsx("img",{src:ye.imageUrl||`https://picsum.photos/seed/${ye.name.replace(/\s+/g,"")}/40/40`,alt:ye.name,className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"font-semibold",children:ye.name}),c.jsx("span",{className:"text-xs text-gray-400",children:ye.rollNumber})]},ye.id))}),ue&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx("img",{src:ue.imageUrl||`https://picsum.photos/seed/${ue.name.replace(/\s+/g,"")}/40/40`,alt:ue.name,className:"w-6 h-6 rounded-full"}),c.jsx("span",{className:"font-semibold",children:ue.name}),c.jsx("span",{className:"text-xs text-gray-400",children:ue.rollNumber})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Position"}),c.jsx("input",{type:"text",value:z.position,onChange:ye=>te(Ze=>({...Ze,position:ye.target.value})),placeholder:"Position",className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"})]})]}),c.jsx("button",{onClick:ge,className:"mt-4 text-sm px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md font-semibold",children:"+ Add Member"})]}),Yt&&c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:Nr,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700",children:"Save All Changes"})})]}),D==="events"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Manage Events"}),c.jsx("button",{onClick:()=>ee(!0),className:"px-4 py-2 text-sm font-bold bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"+ New Event"})]}),c.jsx("div",{className:"space-y-4",children:e.map(ye=>{ye.status,pt.Past;const Ze=ye.status===pt.Upcoming||ye.status===pt.Ongoing;return c.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:ye.name}),c.jsxs("p",{className:"text-xs text-gray-400",children:[ye.date," - ",x[ye.id]||0," registrations"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>De(`/events/${ye.id}`),className:"text-xs px-3 py-1.5 rounded-md bg-slate-700 hover:bg-slate-600",children:"View"}),Ze&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>I(ye),className:"text-xs px-3 py-1.5 rounded-md bg-indigo-600 hover:bg-indigo-700",children:"Edit"}),c.jsx("button",{onClick:()=>bn(ye.id,ye.name),className:"text-xs px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700",children:"Download List"})]})]})]},ye.id)})})]}),D==="payments"&&c.jsx("div",{children:c.jsx(fO,{clubId:Se.id,clubName:Se.name,isAdmin:Yt})}),D==="settings"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Club Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Logo Image"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:Se.logoUrl,alt:"Logo",className:"w-16 h-16 rounded-lg object-cover border border-slate-700"}),c.jsx("input",{type:"file",accept:"image/*",ref:Is,onChange:ye=>us(ye,"logoUrl"),className:"block",disabled:He}),He&&c.jsx("span",{className:"text-xs text-indigo-400",children:"Uploading..."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Banner Image"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:Se.bannerUrl,alt:"Banner",className:"w-32 h-16 rounded-lg object-cover border border-slate-700"}),c.jsx("input",{type:"file",accept:"image/*",ref:En,onChange:ye=>us(ye,"bannerUrl"),className:"block",disabled:At}),At&&c.jsx("span",{className:"text-xs text-indigo-400",children:"Uploading..."})]})]}),c.jsx(cf,{label:"Club Name",id:"clubName",value:Se.name,onChange:ye=>ze("name",ye.target.value)}),c.jsx(cf,{label:"Tagline",id:"tagline",value:Se.tagline,onChange:ye=>ze("tagline",ye.target.value)}),c.jsx(cf,{label:"Logo Image URL",id:"logoUrl",value:Se.logoUrl,onChange:ye=>ze("logoUrl",ye.target.value)}),c.jsx(cf,{label:"Banner Image URL",id:"bannerUrl",value:Se.bannerUrl,onChange:ye=>ze("bannerUrl",ye.target.value)}),c.jsx(iU,{label:"Description",id:"description",value:Se.description,onChange:ye=>ze("description",ye.target.value),rows:5}),c.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Recruitment Status"}),c.jsx("button",{type:"button",onClick:()=>ze("recruitmentOpen",!Se.recruitmentOpen),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${Se.recruitmentOpen?"bg-indigo-600":"bg-slate-700"}`,children:c.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${Se.recruitmentOpen?"translate-x-6":"translate-x-1"}`})}),c.jsx("span",{className:"ml-3 text-sm text-gray-400",children:Se.recruitmentOpen?"Open":"Closed"})]}),c.jsx("h4",{className:"font-semibold pt-4 border-t border-slate-700",children:"Recruitment Questions"}),(Se.recruitmentQuestions||[]).map((ye,Ze)=>c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"text",value:ye,onChange:vt=>fr(Ze,vt.target.value),className:"flex-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"}),c.jsx("button",{onClick:()=>Tr(Ze),className:"p-2 bg-red-600/20 text-red-400 rounded-md",children:""})]},Ze)),c.jsx("button",{onClick:Rr,className:"text-sm px-3 py-1.5 rounded-md bg-slate-700 hover:bg-slate-600",children:"+ Add Question"})]}),n&&c.jsx("div",{className:"mt-8 pt-6 border-t border-slate-700",children:c.jsx(hO,{currentUser:n,club:Se,contributors:a.filter(ye=>ye.role==="contributor"),onContributorUpdate:()=>{}})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:Nr,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700",children:"Save Settings"})})]})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex border-b border-slate-800 mb-6",children:[c.jsx("button",{onClick:()=>T("ongoing"),className:`px-6 py-3 font-semibold ${_==="ongoing"?"text-white border-b-2 border-indigo-500":"text-gray-400"}`,children:"Upcoming"}),c.jsx("button",{onClick:()=>T("past"),className:`px-6 py-3 font-semibold ${_==="past"?"text-white border-b-2 border-indigo-500":"text-gray-400"}`,children:"Past Events"})]}),_==="ongoing"&&c.jsx(D_,{title:"",events:tr,noEventsMessage:"No upcoming events scheduled."}),_==="past"&&c.jsx(D_,{title:"",events:Ct,noEventsMessage:"No past events found."})]})})]})})]})]})},Xp=({label:r,id:e,...t})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-300 mb-1",children:r}),c.jsx("input",{id:e,...t,className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),cU=[{value:"Technical",label:"Technical"},{value:"Cultural",label:"Cultural"},{value:"Sports",label:"Sports"}],uU=({isOpen:r,onClose:e,students:t,onCreateClub:n})=>{const[s,a]=M.useState(""),[o,u]=M.useState(""),[h,f]=M.useState(""),[p,x]=M.useState(""),[v,w]=M.useState(""),[N,_]=M.useState([]),[T,D]=M.useState([]),[U,k]=M.useState(void 0),[F,J]=M.useState([]),[ee,S]=M.useState(null),[I,A]=M.useState(""),[j,L]=M.useState(null),[V,O]=M.useState(""),[Be,De]=M.useState("Technical"),Se=async()=>{const Ee=await hr.getStudentByRollNumber(I);S(Ee||null),Ee?(L(Ee),O(""),console.log(Ee)):(L(null),O("Student with this roll number not found."))},We=()=>{s&&o&&j&&n({name:s,tagline:o,description:h,logoUrl:p,bannerUrl:v,achievements:N,team:[{id:j.id,name:j.name,position:"Admin"}],recruitmentOpen:U,recruitmentQuestions:F,category:Be},j.id)};if(!r)return null;const Ne=(Ee,q)=>{var z;const se=(z=Ee.target.files)==null?void 0:z[0];if(se&&se.type.startsWith("image/")){const te=new FileReader;te.onloadend=()=>{q==="logo"?x(te.result):w(te.result)},te.readAsDataURL(se)}else se&&alert("Please select a valid image file.")};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:e,children:c.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-form-enter",onClick:Ee=>Ee.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b border-slate-800 flex-shrink-0",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create a New Club"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Provide basic details and assign an initial admin. More details can be added by the admin later."})]}),c.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1",children:[c.jsx(Xp,{label:"Club Name",id:"clubName",type:"text",value:s,onChange:Ee=>a(Ee.target.value),required:!0,placeholder:"e.g., The Photography Club"}),c.jsx(Xp,{label:"Club Tagline",id:"tagline",type:"text",value:o,onChange:Ee=>u(Ee.target.value),required:!0,placeholder:"e.g., Capturing moments, creating memories."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Club Category"}),c.jsx("select",{value:Be,onChange:Ee=>De(Ee.target.value),className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md",children:cU.map(Ee=>c.jsx("option",{value:Ee.value,children:Ee.label},Ee.value))})]}),c.jsx(Xp,{label:"Description",id:"description",type:"text",value:h,onChange:Ee=>f(Ee.target.value),placeholder:"Short description"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-300 mb-1",children:"Club Logo (Optional)"}),c.jsx("input",{id:"logo",type:"file",accept:"image/*",onChange:Ee=>Ne(Ee,"logo"),className:"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-slate-700 file:text-white hover:file:bg-slate-600"})]}),p&&c.jsx("img",{src:p,alt:"Logo preview",className:"w-20 h-20 rounded-full object-cover border-2 border-slate-700 justify-self-center md:justify-self-start"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner",className:"block text-sm font-medium text-gray-300 mb-1",children:"Club Banner (Optional)"}),c.jsx("input",{id:"banner",type:"file",accept:"image/*",onChange:Ee=>Ne(Ee,"banner"),className:"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-slate-700 file:text-white hover:file:bg-slate-600"}),v&&c.jsx("img",{src:v,alt:"Banner preview",className:"w-full h-20 rounded-md object-cover border-2 border-slate-700 mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Recruitment Open"}),c.jsxs("select",{value:U===void 0?"":String(U),onChange:Ee=>k(Ee.target.value===""?void 0:Ee.target.value==="true"),className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md",children:[c.jsx("option",{value:"",children:" Not set "}),c.jsx("option",{value:"true",children:"Yes"}),c.jsx("option",{value:"false",children:"No"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Recruitment Questions (comma separated)"}),c.jsx("input",{className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md",value:F.join(", "),onChange:Ee=>J(Ee.target.value.split(",").map(q=>q.trimStart()))})]}),c.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Assign Initial Admin"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Search student by Roll Number...",value:I,onChange:Ee=>A(Ee.target.value),className:"flex-grow px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"}),c.jsx("button",{onClick:Se,className:"px-4 py-2 bg-slate-700 rounded-md font-semibold hover:bg-slate-600",children:"Search"})]}),V&&c.jsx("p",{className:"text-red-500 text-sm mt-2",children:V}),!j&&c.jsx("p",{className:"text-amber-400 text-xs mt-2",children:"Selecting the initial admin is required to create the club."}),j&&c.jsxs("div",{className:"mt-3 p-4 bg-green-900/50 border border-green-500/30 rounded-lg animate-fade-in-content flex items-center gap-3",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:ee==null?void 0:ee.name}),c.jsxs("p",{className:"text-sm text-gray-300",children:["Roll Number: ",(ee==null?void 0:ee.rollNumber)||"N/A"]}),c.jsx("p",{className:"text-sm text-green-300",children:"Student found and selected as admin."})]})]})]})]}),c.jsxs("div",{className:"p-6 border-t border-slate-800 flex justify-end gap-3 flex-shrink-0",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 rounded-md font-semibold hover:bg-slate-600",children:"Cancel"}),c.jsx("button",{onClick:We,disabled:!s||!o||!j,className:"px-4 py-2 bg-indigo-600 rounded-md font-semibold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Club & Assign"})]})]})})},Qp=({club:r,reverse:e=!1,user:t,applications:n})=>{const a=(o=>{const u=n.find(h=>h.clubId===o&&h.userId===t.id);return console.log(u),u?u.status==="pending"?"Application Pending":u.status==="accepted"?"Application Accepted":u.status==="rejected"?"Application Rejected":null:null})(r.id);return c.jsx(Mr,{to:`/clubs/${r.id}`,className:"group block cursor-pointer bg-slate-900/50 hover:bg-slate-800/60 border border-slate-800 rounded-xl overflow-hidden shadow-lg hover:shadow-indigo-500/20 transition-all duration-300 transform hover:-translate-y-1 w-full",children:c.jsxs("div",{className:`flex flex-col ${e?"md:flex-row-reverse":"md:flex-row"} items-stretch`,children:[c.jsxs("div",{className:"md:w-2/5 relative overflow-hidden",style:{minHeight:256,maxHeight:256,height:256,display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("img",{src:r.bannerUrl,alt:`${r.name} banner`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",style:{minHeight:256,maxHeight:256,height:256}}),c.jsx("img",{src:r.logoUrl,alt:`${r.name} logo`,className:"absolute bottom-4 left-4 w-20 h-20 rounded-full border-4 border-slate-800 shadow-lg object-cover bg-slate-900",style:{objectFit:"cover"}})]}),c.jsxs("div",{className:"md:w-3/5 p-8 text-left flex flex-col justify-center",style:{minHeight:256},children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-extrabold text-white",children:r.name}),c.jsx("p",{className:"mt-2 text-gray-300",children:r.tagline}),c.jsx("p",{className:"mt-4 text-gray-400 text-sm line-clamp-3",children:r.description}),c.jsx("div",{className:"mt-6",children:c.jsxs("span",{className:"text-indigo-500 font-semibold group-hover:text-indigo-400 transition-colors flex items-center",children:["View Details",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2 transform group-hover:translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]}),c.jsx("div",{className:"mt-4",children:a?c.jsx("span",{className:a==="Application Pending"?"text-yellow-400 font-semibold":a==="Application Accepted"?"text-green-400 font-semibold":"text-red-400 font-semibold",children:a}):c.jsx("span",{className:"text-gray-400",children:"Interested in Joining?"})})]})]})})},dU=({clubs:r,user:e,allUsers:t,applications:n,onCreateClub:s})=>{const[a,o]=M.useState(!1),u=M.useMemo(()=>t.filter(x=>x.role==="student"),[t]),h=r.filter(x=>x.category==="Technical"),f=r.filter(x=>x.category==="Cultural"),p=r.filter(x=>x.category==="Other");return c.jsxs("section",{className:"py-16 relative container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[c.jsx(uU,{isOpen:a,onClose:()=>o(!1),students:u,onCreateClub:(x,v)=>{s(x,v),o(!1)}}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex justify-between items-start mb-12",children:[c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tighter",children:"Student Clubs"}),c.jsx("p",{className:"mt-4 max-w-2xl text-lg text-gray-400",children:"Explore our vibrant student community and find your passion. All clubs, one hub."})]}),(e==null?void 0:e.role)==="admin"&&c.jsxs("button",{onClick:()=>o(!0),className:"flex-shrink-0 bg-indigo-600 text-white font-bold py-3 px-5 rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New Club"]})]}),p.length>0&&c.jsx("div",{className:"mb-16",children:c.jsx("div",{className:"space-y-12",children:p.map((x,v)=>c.jsx(Qp,{club:x,reverse:v%2!==0,user:e,applications:n},x.id))})}),c.jsxs("div",{className:"mb-16",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-8 border-l-4 border-indigo-500 pl-4",children:"Technical Clubs"}),c.jsx("div",{className:"space-y-12",children:h.map((x,v)=>c.jsx(Qp,{club:x,reverse:v%2!==0,user:e,applications:n},x.id))})]}),f.length>0&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-8 border-l-4 border-pink-500 pl-4",children:"Arts & Culture"}),c.jsx("div",{className:"space-y-12",children:f.map((x,v)=>c.jsx(Qp,{club:x,reverse:v%2!==0,user:e,applications:n},x.id))})]})]})]})},hU=r=>{var e;return r.isGuest?r.id:((e=zn.currentUser)==null?void 0:e.uid)||r.id},Lr={registerForEvent:async(r,e,t,n)=>{var p,x;const s=t.organizerClubId;if(t.registrationFee&&t.registrationFee>0)throw new Error("Registration for paid events should be created after payment is successful.");if(!e.id)throw new Error("User ID is required for registration");const o=e.isGuest?e.id:((p=zn.currentUser)==null?void 0:p.uid)||e.id,u={eventId:r,clubId:s,userId:o,userName:e.name,userEmail:e.email??"",userPhone:e.mobile,status:"confirmed",additionalInfo:n||"",registrationDate:Kr(),eventName:t.name,eventDate:t.date,eventLocation:t.location,registrationFee:t.registrationFee||0,checkInStatus:"not_checked_in",isGuest:e.isGuest||!1};e.isGuest&&e.collegeName&&(u.guestCollege=e.collegeName),console.log("Creating registration with data:",u),console.log("User ID:",u.userId),console.log("Auth UID:",(x=zn.currentUser)==null?void 0:x.uid),console.log("User object:",e),console.log("Is guest user?",e.isGuest);let h;e.isGuest?h=nt(Ie,"events",s,"clubEvents",r,"guestRegistrations"):h=nt(Ie,"events",s,"clubEvents",r,"registrations"),console.log("Creating registration in collection:",h.path),console.log("Registration data being stored:",u);const f=await bs(h,u);return console.log("Registration created successfully with ID:",f.id),f.id},registerForPaidEvent:async(r,e,t,n,s)=>{var p;const a=t.organizerClubId;if(!e.id)throw new Error("User ID is required for registration");const o=e.id,u={eventId:r,clubId:a,userId:o,userName:e.name,userEmail:e.email??"",userPhone:e.mobile,status:"confirmed",additionalInfo:s||"",registrationDate:Kr(),eventName:t.name,eventDate:t.date,eventLocation:t.location,registrationFee:t.registrationFee||0,paymentStatus:"paid",paymentId:n,checkInStatus:"not_checked_in",isGuest:e.isGuest||!1};e.isGuest&&e.collegeName&&(u.guestCollege=e.collegeName),console.log("Creating registration with data:",u),console.log("User ID:",u.userId),console.log("Auth UID:",(p=zn.currentUser)==null?void 0:p.uid),console.log("User object:",e),console.log("Is guest user?",e.isGuest);let h;e.isGuest?h=nt(Ie,"events",a,"clubEvents",r,"guestRegistrations"):h=nt(Ie,"events",a,"clubEvents",r,"registrations"),console.log("Creating registration in collection:",h.path),console.log("Registration data being stored:",u);const f=await bs(h,u);return console.log("Registration created successfully with ID:",f.id),f.id},isUserRegistered:async(r,e,t)=>{if(!t||!r||!e)return!1;try{const n=e.startsWith("guest_");console.log("isUserRegistered:",{eventId:r,userId:e,clubId:t,isGuest:n});let s=[];if(n){const a=ur(nt(Ie,"events",t,"clubEvents",r,"guestRegistrations"),dr("userId","==",e));console.log("Querying guest registrations for userId:",e);const o=await Mt(a);console.log("Guest registrations found:",o.docs.length),s=o.docs.filter(u=>{const h=u.data();return console.log("Guest registration data:",{id:u.id,userId:h.userId,status:h.status}),h.status!=="cancelled"})}else{const a=ur(nt(Ie,"events",t,"clubEvents",r,"registrations"),dr("userId","==",e));console.log("Querying regular registrations for userId:",e);const o=await Mt(a);console.log("Regular registrations found:",o.docs.length),s=o.docs.filter(u=>{const h=u.data();return console.log("Regular registration data:",{id:u.id,userId:h.userId,status:h.status}),h.status!=="cancelled"})}return console.log("Active registrations:",s.length),s.length>0}catch(n){return console.error("Error checking user registration:",n,{eventId:r,userId:e,clubId:t}),!1}},isUserRegisteredWithUser:async(r,e,t)=>{const n=hU(e);console.log("isUserRegisteredWithUser:",{eventId:r,user:e,correctUserId:n,clubId:t,isGuest:e.isGuest});const s=await Lr.isUserRegistered(r,n,t);return console.log("Registration check result:",s),s},getUserRegistrations:async(r,e,t)=>{if(!r||!e||!t)return console.warn("getUserRegistrations called with missing params:",{userId:r,clubId:e,eventId:t}),[];const n=[];try{if(r.startsWith("guest_")){console.log(r),console.log("Querying guest registrations for:",{userId:r,clubId:e,eventId:t});const a=await Mt(ur(nt(Ie,"events",e,"clubEvents",t,"guestRegistrations"),dr("userId","==",r)));console.log("Guest registrations query result:",a.docs.length,"documents found");for(const o of a.docs){const u=o.data();console.log("Found guest registration:",{id:o.id,userId:u.userId,eventId:u.eventId}),n.push({id:o.id,...u})}}else{const a=await Mt(ur(nt(Ie,"events",e,"clubEvents",t,"registrations"),dr("userId","==",r)));for(const o of a.docs){const u=o.data();n.push({id:o.id,...u})}}return n.sort((a,o)=>a.registrationDate&&o.registrationDate?(o.registrationDate.seconds||0)-(a.registrationDate.seconds||0):0),n}catch(s){return console.error("Error getting user registrations:",s,{userId:r,clubId:e,eventId:t}),[]}},getEventRegistrations:async(r,e)=>{const t=[];try{const n=nt(Ie,"events",e,"clubEvents",r,"registrations");(await Mt(n)).docs.forEach(u=>{t.push({id:u.id,...u.data()})});const a=nt(Ie,"events",e,"clubEvents",r,"guestRegistrations");return(await Mt(a)).docs.forEach(u=>{t.push({id:u.id,...u.data()})}),t}catch(n){return console.error("Error getting event registrations:",n),[]}},getEventRegistrationStats:async(r,e)=>{const t=await Lr.getEventRegistrations(r,e);return{totalRegistrations:t.length,confirmedRegistrations:t.filter(s=>s.status==="confirmed").length,pendingRegistrations:t.filter(s=>s.status==="pending").length,cancelledRegistrations:t.filter(s=>s.status==="cancelled").length,checkedInCount:t.filter(s=>s.checkInStatus==="checked_in").length}},getEventRegistrationCount:async(r,e)=>{try{const t=nt(Ie,"events",e,"clubEvents",r,"registrations");return(await fT(t)).data().count}catch(t){return console.error("Error getting registration count:",t),0}},updateRegistrationStatus:async(r,e,t,n)=>{const s=lt(Ie,"events",t,"clubEvents",n,"registrations",r);await Yr(s,{status:e})},cancelRegistration:async(r,e,t)=>{try{await Lr.updateRegistrationStatus(r,"cancelled",e,t)}catch(n){throw console.error("Error cancelling registration:",n),n}},checkInUser:async(r,e,t)=>{try{const n=lt(Ie,"events",e,"clubEvents",t,"registrations",r);await Yr(n,{checkInStatus:"checked_in",checkInTime:Kr()}),console.log("User checked in successfully")}catch(n){throw console.error("Error checking in user:",n),n}},updatePaymentStatus:async(r,e,t,n,s)=>{const a=lt(Ie,"events",n,"clubEvents",s,"registrations",r),o={paymentStatus:e,paymentId:t};e==="paid"&&(o.status="confirmed"),await Yr(a,o)},getRegistrationById:async(r,e,t)=>{try{const n=lt(Ie,"events",e,"clubEvents",t,"registrations",r),s=await Vr(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){return console.error("Error getting registration by ID:",n),null}},deleteRegistration:async(r,e,t)=>{try{const n=lt(Ie,"events",e,"clubEvents",t,"registrations",r);await Wx(n),console.log("Registration deleted successfully")}catch(n){throw console.error("Error deleting registration:",n),n}},storeEventPayment:async r=>{if(!r.eventId||!r.clubId||!r.registrationId){console.warn("storeEventPayment: Missing required fields",r);return}try{const e={...r,paymentStatus:"paid",timestamp:Kr()},t=r.userId.startsWith("guest_"),n=t?"guest_payments":"payments",s=lt(Ie,"events",r.clubId,"clubEvents",r.eventId,n,r.paymentId);console.log("Storing payment record:",e),console.log("Payment ref:",s.path),console.log("Is guest user?",t),console.log("Using collection:",n),await sl(s,e),console.log("Payment record stored successfully in",n)}catch(e){console.error("Error storing payment record:",e),console.error("Payment data:",r),console.warn("Continuing with registration despite payment record storage failure")}},createTeam:async(r,e,t,n)=>{const s=nt(Ie,"events",e,"clubEvents",r,"teams"),a={name:t,eventId:r,clubId:e,members:[n],createdBy:n.userId,createdAt:Kr()};return(await bs(s,a)).id},joinTeam:async(r,e,t,n)=>{const s=lt(Ie,"events",e,"clubEvents",r,"teams",t),a=await Vr(s);if(!a.exists())throw new Error("Team not found");const o=a.data();o.members.some(u=>u.userId===n.userId)||await Yr(s,{members:[...o.members,n]})},searchTeams:async(r,e,t)=>{const n=nt(Ie,"events",e,"clubEvents",r,"teams"),s=ur(n,dr("name",">=",t),dr("name","<=",t+""));return(await Mt(s)).docs.map(o=>({id:o.id,...o.data()}))},registerForTeamEvent:async(r,e,t,n,s)=>{const a=t.organizerClubId,o={eventId:r,clubId:a,userId:e.id??"",userName:e.name,userEmail:e.email??"",userPhone:e.mobile,status:"confirmed",additionalInfo:s||"",registrationDate:Kr(),eventName:t.name,eventDate:t.date,eventLocation:t.location,registrationFee:t.registrationFee||0,checkInStatus:"not_checked_in",teamId:n},u=nt(Ie,"events",a,"clubEvents",r,"registrations");return(await bs(u,o)).id},registerGuestForEvent:async(r,e,t,n,s)=>{const a=`guest_${t.email.replace(/[^a-zA-Z0-9]/g,"_")}`;if(await Lr.isUserRegistered(r,a,e))throw new Error("You are already registered for this event!");const u=new Date,h=new Date(u.getTime()+2160*60*60*1e3),f={eventId:r,clubId:e,userId:a,userName:t.name,userEmail:t.email,userPhone:t.phone,userYear:t.year,userBranch:t.department,status:"confirmed",additionalInfo:s||"",registrationDate:Kr(),eventName:n.name,eventDate:n.date,eventLocation:n.location,registrationFee:n.registrationFee||0,checkInStatus:"not_checked_in",isGuest:!0,guestCollege:t.college,expiresAt:h},p=nt(Ie,"events",e,"clubEvents",r,"guestRegistrations");console.log("Creating guest registration in collection:",p.path),console.log("Registration data being stored:",f);const x=await bs(p,f);return console.log("Guest registration created successfully with ID:",x.id),x.id},batchCheckUserRegistrations:async(r,e)=>{if(!r||e.length===0)return[];try{const t=r.startsWith("guest_"),n=[],s=10;for(let a=0;a<e.length;a+=s){const u=e.slice(a,a+s).map(async f=>{try{return await Lr.isUserRegistered(f.id,r,f.organizerClubId)?f.id:null}catch(p){return console.error(`Error checking registration for event ${f.id}:`,p),null}}),h=await Promise.all(u);n.push(...h.filter(f=>f!==null))}return n}catch(t){return console.error("Error in batch check user registrations:",t),[]}},getUserRegisteredEvents:async(r,e)=>({upcoming:await Lr.batchCheckUserRegistrations(r,e),past:[]})},y4=Object.freeze(Object.defineProperty({__proto__:null,eventRegistrationService:Lr},Symbol.toStringTag,{value:"Module"})),ic=3,fU=({event:r,onClose:e,onSave:t})=>{var ee,S,I,A;const[n,s]=M.useState(((ee=r.highlights)==null?void 0:ee.images)||[]),[a,o]=M.useState(((S=r.highlights)==null?void 0:S.guests)||[]),[u,h]=M.useState(((I=r.highlights)==null?void 0:I.winners)||[]),[f,p]=M.useState(((A=r.highlights)==null?void 0:A.galleryDriveLink)||""),[x,v]=M.useState(!1),w=j=>{const L=j.target.files;if(!L)return;const V=Array.from(L).filter(O=>O.type.startsWith("image/"));if(n.length+V.length>ic){alert(`You can upload a maximum of ${ic} images.`);return}s(O=>[...O,...V])},N=j=>s(L=>L.filter((V,O)=>O!==j)),_=(j,L)=>{o(V=>V.map((O,Be)=>Be===j?L:O))},T=()=>o(j=>[...j,""]),D=j=>o(L=>L.filter((V,O)=>O!==j)),U=(j,L,V)=>{h(O=>O.map((Be,De)=>De===j?{...Be,[L]:V}:Be))},k=()=>h(j=>[...j,{position:"",name:"",details:""}]),F=j=>h(L=>L.filter((V,O)=>O!==j)),J=async()=>{v(!0);const j=await Promise.all(n.map(async De=>{if(De instanceof File)try{return await pO(De,r.organizerClubId,r.id)}catch{return alert("Failed to upload image. Please try again."),null}return De}));v(!1);const L=j.filter(De=>De&&/^https?:\/\/.+/i.test(De)),V=u.filter(De=>De.position&&De.name).map(De=>({position:De.position,name:De.name,details:De.details||""})),O=a.filter(Boolean),Be={images:L,guests:O,winners:V};f&&f.trim()&&(Be.galleryDriveLink=f.trim()),await t(Be),e()};return c.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Edit Event Highlights"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:["Gallery Images ",c.jsxs("span",{className:"text-xs text-gray-400",children:["(max ",ic,")"]})]}),c.jsx("div",{className:"flex flex-wrap gap-4 mb-2",children:n.map((j,L)=>c.jsxs("div",{className:"relative",children:[j instanceof File?c.jsx("img",{src:URL.createObjectURL(j),alt:`Highlight ${L+1}`,className:"w-32 h-20 object-cover rounded"}):c.jsx("img",{src:j,alt:`Highlight ${L+1}`,className:"w-32 h-20 object-cover rounded"}),c.jsx("button",{onClick:()=>N(L),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center",title:"Remove",disabled:x,children:""})]},L))}),c.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:w,className:"block mt-2",disabled:x||n.length>=ic}),x&&c.jsx("div",{className:"text-indigo-400 text-xs mt-2",children:"Uploading images..."}),n.length>=ic&&c.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["Maximum ",ic," images allowed."]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Special Guests"}),a.map((j,L)=>c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:j,onChange:V=>_(L,V.target.value),placeholder:"Guest Name",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",disabled:x}),c.jsx("button",{onClick:()=>D(L),className:"px-2 py-1 bg-red-600 text-white rounded",disabled:x,children:"Remove"})]},L)),c.jsx("button",{onClick:T,className:"mt-2 px-3 py-1 bg-indigo-600 text-white rounded",disabled:x,children:"+ Add Guest"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Winners"}),u.map((j,L)=>c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:j.position,onChange:V=>U(L,"position",V.target.value),placeholder:"Position",className:"w-1/4 px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",disabled:x}),c.jsx("input",{type:"text",value:j.name,onChange:V=>U(L,"name",V.target.value),placeholder:"Name",className:"w-1/3 px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",disabled:x}),c.jsx("input",{type:"text",value:j.details||"",onChange:V=>U(L,"details",V.target.value),placeholder:"Details",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",disabled:x}),c.jsx("button",{onClick:()=>F(L),className:"px-2 py-1 bg-red-600 text-white rounded",disabled:x,children:"Remove"})]},L)),c.jsx("button",{onClick:k,className:"mt-2 px-3 py-1 bg-indigo-600 text-white rounded",disabled:x,children:"+ Add Winner"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:["Gallery Drive Link ",c.jsx("span",{className:"text-xs text-gray-400",children:"(optional)"})]}),c.jsx("input",{type:"text",value:f,onChange:j=>p(j.target.value),placeholder:"Google Drive Gallery Link",className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",disabled:x})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 text-white rounded",disabled:x,children:"Cancel"}),c.jsx("button",{onClick:J,className:"px-4 py-2 bg-indigo-600 text-white rounded",disabled:x,children:"Save Changes"})]})]})};class mU{constructor(){this.baseUrl="https://us-central1-evnty-124fb.cloudfunctions.net"}async createPaymentOrder(e){try{const t=await fetch(`${this.baseUrl}/createRazorpayOrder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.text();throw new Error(`HTTP error! status: ${t.status}, message: ${s}`)}return await t.json()}catch(t){throw console.error("Razorpay payment order creation failed:",t),t}}async verifyPaymentStatus(e){try{const t=await fetch(`${this.baseUrl}/getRazorpayPaymentStatus?orderId=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const s=await t.text();throw new Error(`HTTP error! status: ${t.status}, message: ${s}`)}return await t.json()}catch(t){throw console.error("Razorpay payment status verification failed:",t),t}}async handlePaymentCallback(e){try{const t=await fetch(`${this.baseUrl}/handleRazorpayCallback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.text();throw new Error(`HTTP error! status: ${t.status}, message: ${s}`)}return(await t.json()).success===!0}catch(t){throw console.error("Razorpay payment callback handling failed:",t),t}}createPaymentRequest(e,t,n,s="sandbox"){return{amount:e.registrationFee||0,currency:"INR",orderId:n,customerId:t.id||"unknown",customerName:t.name,customerEmail:t.email||"",customerPhone:t.mobile||"",eventId:e.id,eventName:e.name,description:`Registration for ${e.name}`,mode:s}}async initializePayment(e){return new Promise((t,n)=>{const s=document.createElement("script");s.src="https://checkout.razorpay.com/v1/checkout.js",s.onload=()=>{const a={key:e.key,amount:e.amount,currency:e.currency,name:e.name,description:e.description,order_id:e.razorpayOrderId,prefill:e.prefill,notes:e.notes,handler:function(u){t(u)},modal:{ondismiss:function(){n(new Error("Payment cancelled by user"))}}};new window.Razorpay(a).open()},s.onerror=()=>{n(new Error("Failed to load Razorpay SDK"))},document.head.appendChild(s)})}}const _f=new mU;class pU{async initiatePayment(e){try{const t=`EVENT_${e.eventId}_${Date.now()}`,n={amount:e.amount,currency:e.currency,orderId:t,customerId:e.customerId,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone,eventId:e.eventId,eventName:e.eventName,description:e.description,clubId:e.clubId,subMerchantAccountId:e.subMerchantAccountId,mode:"sandbox"},s=await _f.createPaymentOrder(n);return s.success&&s.razorpayOrderId?{success:!0,paymentId:s.razorpayOrderId,paymentUrl:s.razorpayOrderId,orderId:s.orderId||t}:{success:!1,error:s.error||"Failed to initiate payment"}}catch(t){return console.error("Payment initiation failed:",t),{success:!1,error:"Failed to initiate payment. Please try again."}}}async checkPaymentStatus(e){try{return await _f.verifyPaymentStatus(e)}catch(t){throw console.error("Payment status check failed:",t),new Error("Failed to check payment status")}}async verifyPaymentCallback(e){try{return await _f.handlePaymentCallback(e)}catch(t){return console.error("Payment verification failed:",t),!1}}async getSubMerchantAccountId(e){try{const t=lt(Ie,"clubs",e,"paymentDetails","razorpay"),n=await Vr(t);return n.exists()&&n.data().linked_account_id||null}catch(t){return console.error("Error fetching sub-merchant account ID:",t),null}}async createPaymentRequest(e,t,n){const s=await this.getSubMerchantAccountId(e.organizerClubId);return{amount:e.registrationFee||0,currency:"INR",orderId:n,customerId:t.id||"unknown",customerName:t.name,customerEmail:t.email||"",customerPhone:t.mobile||"",eventId:e.id,eventName:e.name,description:`Registration for ${e.name}`,clubId:e.organizerClubId,subMerchantAccountId:s}}}const gU=new pU,xU=({event:r,user:e,registrationId:t,isOpen:n,onClose:s,onPaymentSuccess:a,onPaymentFailure:o})=>{const[u,h]=M.useState(!1),[f,p]=M.useState(null),x=M.useRef(null);M.useEffect(()=>{n&&p(null)},[n]),M.useEffect(()=>{let N=!0;return new Promise((T,D)=>{if(window.Razorpay){T(window.Razorpay);return}const U=document.createElement("script");U.src="https://checkout.razorpay.com/v1/checkout.js",U.async=!0,U.onload=()=>{window.Razorpay?T(window.Razorpay):D(new Error("Razorpay SDK failed to initialize"))},U.onerror=()=>{D(new Error("Failed to load Razorpay SDK"))},document.head.appendChild(U)}).then(T=>{N&&(console.log("Razorpay SDK loaded:",T),x.current=T)}).catch(T=>{console.error("Razorpay SDK load error:",T),N&&(x.current={open:D=>{console.log("Mock Razorpay open called with:",D),setTimeout(()=>{const U={razorpay_payment_id:"mock_payment_id_"+Date.now(),razorpay_order_id:D.order_id,razorpay_signature:"mock_signature"};D.handler&&D.handler(U)},2e3)}})}),()=>{N=!1,x.current=null}},[]);const v=async()=>{r.registrationFee;const N=t&&t.trim()?t:`EVT_${r.id}_${Date.now()}`;try{const _=await gU.createPaymentRequest(r,e,N),T=await _f.createPaymentOrder(_);if(!T.success||!T.razorpayOrderId)throw new Error(T.error||"Failed to create payment order");return T}catch(_){throw console.error("Failed to create Razorpay payment order:",_),new Error(_.message||"Razorpay backend not configured. Please implement POST /api/payments/razorpay/order to return a razorpayOrderId.")}},w=async()=>{h(!0),p(null);try{const N=await v();if(!x.current)throw new Error("Razorpay SDK not loaded. Please refresh and try again.");const _=x.current;if(console.log("Available Razorpay methods:",Object.keys(_)),N.razorpayOrderId.startsWith("order_")&&N.razorpayOrderId.includes("_test")){console.log("Using mock payment form for demo order");const T=document.getElementById("razorpay-dropin-container");if(T)T.innerHTML=`
            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px; background: #f9f9f9; color: #333;">
              <h3 style="margin: 0 0 15px 0; color: #333;">Demo Payment Form</h3>
              <p style="margin: 5px 0;"><strong>Amount:</strong> ${r.registrationFee||1}</p>
              <p style="margin: 5px 0;"><strong>Order ID:</strong> ${N.razorpayOrderId}</p>
              <p style="margin: 5px 0 15px 0; color: #666; font-size: 14px;">This is a demo payment form. Click "Pay Now" to simulate payment success.</p>
              <button onclick="window.mockPaymentSuccess('${N.razorpayOrderId}')" 
                      style="background: #4CAF50; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%;">
                Pay Now (Demo)
              </button>
            </div>
          `,window.mockPaymentSuccess=D=>{h(!1),a(D)};else throw new Error("Payment container not found")}else{console.log("Using Razorpay SDK for payment");const T={key:N.key,amount:N.amount,currency:N.currency,name:N.name,description:N.description,order_id:N.razorpayOrderId,prefill:N.prefill,notes:N.notes,handler:function(D){console.log("Payment successful:",D),h(!1),a(D.razorpay_payment_id)},modal:{ondismiss:function(){console.log("Payment cancelled by user"),h(!1),o("Payment cancelled by user")}}};_.open(T)}}catch(N){console.error(N),h(!1);const _=(N==null?void 0:N.message)||"Failed to initiate payment. Please try again.";p(_),o(_)}};return n?c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-6 border-b border-slate-700 flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Payment"}),c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",disabled:u,children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"text-gray-300 mb-2",children:"Please complete your payment to confirm your registration."}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 p-4 rounded-lg",children:[c.jsx("span",{className:"text-white font-semibold",children:"Amount"}),c.jsxs("span",{className:"text-green-400 font-bold text-lg",children:["",r.registrationFee||1]})]})]}),f&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-4",children:f}),c.jsx("div",{id:"razorpay-dropin-container",className:"mb-4"}),c.jsxs("button",{onClick:w,disabled:u,className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[u&&c.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u?"Processing...":"Pay with Razorpay"]}),c.jsx("div",{className:"text-xs text-gray-400 mt-4",children:c.jsxs("span",{children:["Mode: ","Sandbox (Test)",". A backend endpoint must return a Razorpay orderId."]})})]})]})}):null},vU=({event:r,user:e,isOpen:t,onClose:n,onRegistrationSuccess:s})=>{const[a,o]=M.useState(!1),[u,h]=M.useState(!1),[f,p]=M.useState(null),[x,v]=M.useState(""),[w,N]=M.useState(null),[_,T]=M.useState(!1),[D,U]=M.useState(null),[k,F]=M.useState(null),[J,ee]=M.useState(""),[S,I]=M.useState(""),[A,j]=M.useState([]),[L,V]=M.useState(null);M.useEffect(()=>{t&&e&&r.id&&(console.log("Modal opened for event:",r.id,"checking registration status..."),O())},[t,e,r.id]);const O=async()=>{try{console.log("Checking registration status for:",{eventId:r.id,userId:e.id,clubId:r.organizerClubId,isGuest:e.isGuest});const se=e.isGuest?e.id:e.id||"",z=await sd.isUserRegistered(se,r.id);console.log("Registration status result:",z),h(z),p(null),console.log(z?"User is registered for this event":"User is not registered for this event")}catch(se){console.error("Error checking registration status:",se)}},Be=async se=>{var z,te;se.preventDefault(),o(!0),N(null);try{if(r.registrationFee&&r.registrationFee>0){T(!0),o(!1);return}let Q;e.isGuest?Q=await Lr.registerGuestForEvent(r.id,r.organizerClubId,{name:e.name,email:e.email||"",phone:e.mobile||"",college:e.collegeName||"GCET",year:e.year||"1",department:e.branch||"CSE"},{name:r.name||r.title||"Untitled Event",date:r.date||"TBD",location:r.location||"TBD",registrationFee:r.registrationFee},x.trim()||void 0):Q=await Lr.registerForEvent(r.id,e,{name:r.name||r.title||"Untitled Event",date:r.date||"TBD",location:r.location||"TBD",registrationFee:r.registrationFee,organizerClubId:r.organizerClubId},x.trim()||void 0);const Z=e.isGuest?e.id:e.id||"";await sd.registerUserForEvent(Z,r.id,r.organizerClubId),h(!0),setTimeout(()=>{s(Q)},2e3)}catch(Q){if(r.registrationFee&&r.registrationFee>0&&((z=Q==null?void 0:Q.message)!=null&&z.includes("should be created after payment"))){T(!0),U(""),N(null),o(!1);return}else(te=Q==null?void 0:Q.message)!=null&&te.includes("already registered")?(N("You are already registered for this event!"),h(!0)):N("Registration failed. Please try again.");console.error("Registration failed:",Q)}finally{r.registrationFee&&r.registrationFee>0||o(!1)}},De=async()=>{o(!0),N(null);try{const se=await Lr.searchTeams(r.id,r.organizerClubId,S.trim());j(se.map(z=>({id:z.id,name:z.name})))}catch{N("Failed to search teams. Please try again."),j([])}finally{o(!1)}},Se=async se=>{var z;se.preventDefault(),o(!0),N(null);try{let te=null;if(k==="create"){if(o(!0),N(null),r.registrationFee&&r.registrationFee>0){T(!0),o(!1);return}te=await Lr.createTeam(r.id,r.organizerClubId,J.trim(),{userId:e.id,userName:e.name,userEmail:e.email||""})}else k==="join"&&L&&(await Lr.joinTeam(r.id,r.organizerClubId,L,{userId:e.id,userName:e.name,userEmail:e.email||""}),te=L);if(!te)throw new Error("No team selected or created.");const Q=await Lr.registerForTeamEvent(r.id,e,{name:r.name||r.title||"Untitled Event",date:r.date||"TBD",location:r.location||"TBD",registrationFee:r.registrationFee,organizerClubId:r.organizerClubId},te,x.trim()||void 0);h(!0),setTimeout(()=>{s(Q)},2e3)}catch(te){(z=te==null?void 0:te.message)!=null&&z.includes("already registered")?(N("You are already registered for this event!"),h(!0)):N("Team registration failed. Please try again.")}finally{o(!1)}},We=async se=>{try{console.log("Payment successful, creating registration...",{paymentId:se,userId:e.id,isGuest:e.isGuest});const z=await Lr.registerForPaidEvent(r.id,e,{name:r.name||r.title||"Untitled Event",date:r.date||"TBD",location:r.location||"TBD",registrationFee:r.registrationFee,organizerClubId:r.organizerClubId},se,x.trim()||void 0);console.log("Registration created successfully:",z);try{await Lr.storeEventPayment({registrationId:z,eventId:r.id,clubId:r.organizerClubId,userId:e.id,userName:e.name,userEmail:e.email||"",amount:r.registrationFee||0,paymentId:se}),console.log("Payment record stored successfully")}catch(te){console.warn("Payment record storage failed, but continuing:",te)}console.log("Setting registration status to true..."),h(!0),setTimeout(()=>{s(z),T(!1),U(null)},2e3),console.log("Registration completed successfully, skipping status check")}catch(z){console.error("Error updating registration after payment:",z),N("Payment successful but registration update failed. Please contact support.")}},Ne=se=>{N(se),T(!1),U(null)},Ee=()=>{T(!1),U(null)};if(!t)return null;const q=r.registrationType==="team";return c.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[c.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsx("div",{className:"p-6 border-b border-slate-700",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Event Registration"}),c.jsx("p",{className:"text-gray-400 mt-1",children:r.name||r.title||"Untitled Event"})]}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"p-6",children:u?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"You're Registered!"}),c.jsx("p",{className:"text-gray-400 mb-6",children:"You have successfully registered for this event. Check your email for confirmation details."}),f&&c.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg mb-6 text-left",children:[c.jsx("h4",{className:"font-semibold text-white mb-2",children:"Registration Details"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-400",children:"Status:"}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.status==="confirmed"?"bg-green-500/20 text-green-400":f.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-400",children:"Registration ID:"}),c.jsx("span",{className:"text-white font-mono text-xs",children:f.id})]}),f.paymentStatus&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-400",children:"Payment:"}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.paymentStatus==="paid"?"bg-green-500/20 text-green-400":f.paymentStatus==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:f.paymentStatus.charAt(0).toUpperCase()+f.paymentStatus.slice(1)})]})]})]}),c.jsx("div",{className:"flex gap-3 justify-center",children:c.jsx("button",{onClick:n,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Close"})})]}):c.jsx(c.Fragment,{children:q?c.jsxs(c.Fragment,{children:[!k&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"How do you want to register?"}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("button",{className:"bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors",onClick:()=>F("create"),children:"Create a New Team"}),c.jsx("button",{className:"bg-slate-700 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-600 transition-colors",onClick:()=>F("join"),children:"Join an Existing Team"}),c.jsx("button",{className:"bg-slate-800 text-gray-300 font-semibold py-2 px-4 rounded-lg hover:bg-slate-700 transition-colors",onClick:n,children:"Cancel"})]})]}),k==="create"&&c.jsxs("form",{onSubmit:Se,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Team Name"}),c.jsx("input",{type:"text",value:J,onChange:se=>ee(se.target.value),required:!0,className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",placeholder:"Enter your team name"})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{type:"button",onClick:()=>F(null),className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Back"}),c.jsx("button",{type:"submit",disabled:a||!J,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:a?"Creating...":"Create Team & Register"})]})]}),k==="join"&&c.jsxs("form",{onSubmit:Se,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Search Team"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:S,onChange:se=>I(se.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white",placeholder:"Enter team name"}),c.jsx("button",{type:"button",onClick:De,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Search"})]}),A.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Teams Found:"}),c.jsx("ul",{className:"space-y-2",children:A.map(se=>c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-white",children:se.name}),c.jsx("button",{type:"button",onClick:()=>V(se.id),className:`px-3 py-1 rounded ${L===se.id?"bg-green-600 text-white":"bg-slate-700 text-gray-200 hover:bg-slate-600"}`,children:L===se.id?"Selected":"Join"})]},se.id))})]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{type:"button",onClick:()=>F(null),className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Back"}),c.jsx("button",{type:"submit",disabled:a||!L,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:a?"Joining...":"Join Team & Register"})]})]})]}):c.jsxs("form",{onSubmit:Be,className:"space-y-6",children:[c.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-semibold text-white mb-3",children:"Event Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Date:"}),c.jsx("span",{className:"text-white ml-2",children:r.date||"TBD"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Time:"}),c.jsx("span",{className:"text-white ml-2",children:r.time||"TBD"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Location:"}),c.jsx("span",{className:"text-white ml-2",children:r.location||"TBD"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Fee:"}),c.jsx("span",{className:"text-white ml-2",children:r.registrationFee&&r.registrationFee>0?`$${r.registrationFee}`:"Free"})]})]})]}),c.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-semibold text-white mb-3",children:"Your Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",value:e.name,readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:e.email,readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Phone"}),c.jsx("input",{type:"tel",value:e.mobile||"Not provided",readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Roll Number"}),c.jsx("input",{type:"text",value:e.rollNumber||"Not provided",readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Branch"}),c.jsx("input",{type:"text",value:e.branch||"Not provided",readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Year"}),c.jsx("input",{type:"text",value:e.year||"Not provided",readOnly:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"additionalInfo",className:"block text-sm font-medium text-gray-400 mb-2",children:"Additional Information (Optional)"}),c.jsx("textarea",{id:"additionalInfo",value:x,onChange:se=>v(se.target.value),rows:3,placeholder:"Any special requirements, dietary restrictions, or other information...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),w&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg",children:w}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a&&c.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Registering...":"Confirm Registration"]})]})]})})})]}),_&&c.jsx(xU,{event:r,user:e,registrationId:D||"",isOpen:_,onClose:Ee,onPaymentSuccess:We,onPaymentFailure:Ne})]})},yU=({event:r,isManager:e})=>{const[t,n]=M.useState({totalRegistrations:0,confirmedRegistrations:0,pendingRegistrations:0,cancelledRegistrations:0,checkedInCount:0}),[s,a]=M.useState([]),[o,u]=M.useState(!0),[h,f]=M.useState(!1);M.useEffect(()=>{e&&p()},[r.id,e]);const p=async()=>{try{u(!0);const[v,w]=await Promise.all([Lr.getEventRegistrationStats(r.id,r.organizerClubId),Lr.getEventRegistrations(r.id,r.organizerClubId)]);n(v),a(w)}catch(v){console.error("Error loading registration data:",v)}finally{u(!1)}},x=async(v,w)=>{const N=r.organizerClubId;try{const _=await L0(()=>Promise.resolve().then(()=>y4),void 0).then(k=>k.eventRegistrationService.getEventRegistrations(v,N));if(!_||_.length===0){alert("No registrations found for this event.");return}const T=_.map(k=>{var F;return{Name:k.userName,Email:k.userEmail,Phone:k.userPhone||"",RollNumber:k.userRollNumber||"",Branch:k.userBranch||"",Year:k.userYear||"",RegistrationDate:(F=k.registrationDate)!=null&&F.seconds?new Date(k.registrationDate.seconds*1e3).toLocaleString():"",Status:k.status,PaymentStatus:k.paymentStatus||"",CheckIn:k.checkInStatus==="checked_in"?"Yes":"No"}}),D=_c.json_to_sheet(T),U=_c.book_new();_c.book_append_sheet(U,D,"Registrations"),p4(U,`${w.replace(/\s+/g,"_")}_registrations.xlsx`)}catch(_){alert("Failed to download registrations."),console.error(_)}};return e?o?c.jsx("div",{className:"bg-slate-800/50 p-6 rounded-lg border border-slate-700",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-slate-700 rounded w-1/3 mb-4"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[...Array(2)].map((v,w)=>c.jsx("div",{className:"h-20 bg-slate-700 rounded"},w))})]})}):c.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-lg border border-slate-700",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Registration Statistics"}),c.jsx("button",{onClick:()=>f(!h),className:"text-indigo-400 hover:text-indigo-300 text-sm font-medium",children:h?"Hide Details":"Show Details"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-500/30 via-indigo-600/20 to-indigo-900/20 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center hover:scale-105 transition-transform duration-300",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-4xl font-extrabold text-indigo-400",children:t.totalRegistrations})}),c.jsx("div",{className:"text-sm text-gray-300 mt-2 tracking-wide",children:"Total Registrations"})]}),c.jsxs("button",{onClick:()=>x(r.id,r.name),className:"flex flex-col items-center justify-center p-6 rounded-2xl shadow-lg bg-gradient-to-br from-green-500/30 via-green-600/20 to-green-900/20 hover:from-green-500 hover:to-green-700 transition-all duration-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-green-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"})}),c.jsx("h1",{className:"text-sm font-semibold text-gray-200",children:"Download List"})]})]}),h&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-lg font-semibold text-white",children:"Registration Details"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-700",children:[c.jsx("th",{className:"text-left py-2 text-gray-400",children:"Name"}),c.jsx("th",{className:"text-left py-2 text-gray-400",children:"Email"})]})}),c.jsx("tbody",{children:s.map(v=>c.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-900/30 transition",children:[c.jsx("td",{className:"py-2 text-white",children:v.userName}),c.jsx("td",{className:"py-2 text-gray-400",children:v.userEmail})]},v.id))})]})})]})]}):null},wU=({event:r,user:e,onRegistrationUpdate:t})=>{var v;const[n,s]=M.useState(null),[a,o]=M.useState(!0);M.useEffect(()=>{e&&r?u():o(!1)},[e,r.id]);const u=async()=>{try{o(!0);const w=await Lr.isUserRegisteredWithUser(r.id,e,r.organizerClubId);s(null)}catch(w){console.error("Error checking registration status:",w)}finally{o(!1)}};if(!e||a||!n)return null;const f=(w=>{switch(w){case"confirmed":return{bgColor:"bg-green-500/10",borderColor:"border-green-500/30",textColor:"text-green-400",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),title:"Registration Confirmed!",message:"You are successfully registered for this event. Check your email for confirmation details."};case"pending":return{bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30",textColor:"text-yellow-400",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),title:"Registration Pending",message:"Your registration is being reviewed. You will be notified once it's confirmed."};case"cancelled":return{bgColor:"bg-red-500/10",borderColor:"border-red-500/30",textColor:"text-red-400",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),title:"Registration Cancelled",message:"Your registration for this event has been cancelled."};default:return{bgColor:"bg-gray-500/10",borderColor:"border-gray-500/30",textColor:"text-gray-400",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),title:"Registration Status",message:"Your registration status is being processed."}}})(n.status),p=r.whatsappLink,x=r.registrationFee===0||r.registrationFee===null||r.registrationFee===void 0;return c.jsx("div",{className:`${f.bgColor} ${f.borderColor} border rounded-lg p-4 mb-6`,children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`flex-shrink-0 ${f.textColor}`,children:f.icon}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:`text-lg font-semibold ${f.textColor} mb-1`,children:f.title}),c.jsx("p",{className:"text-gray-300 text-sm mb-3",children:f.message}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Registration ID:"}),c.jsx("span",{className:"text-white ml-2 font-mono text-xs",children:((v=n.id)==null?void 0:v.slice(-8))||"N/A"})]}),n.status==="confirmed"?c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Status:"}),c.jsx("span",{className:"ml-2 px-2 py-1 rounded text-xs font-medium bg-green-500/20 text-green-400",children:"Confirmed"})]}):c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Status:"}),c.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),n.paymentStatus&&!x&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Payment:"}),c.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${n.paymentStatus==="paid"?"bg-green-500/20 text-green-400":n.paymentStatus==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:n.paymentStatus.charAt(0).toUpperCase()+n.paymentStatus.slice(1)})]})]}),n.additionalInfo&&c.jsxs("div",{className:"mt-3 p-3 bg-black/20 rounded",children:[c.jsx("span",{className:"text-gray-400 text-sm",children:"Additional Information:"}),c.jsx("p",{className:"text-white text-sm mt-1",children:n.additionalInfo})]}),c.jsx("div",{className:"mt-4 flex gap-3",children:n.status==="confirmed"&&p&&c.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Join WhatsApp Group"})})]})]})})};class _U{constructor(){this.accountsCollection="phonepeAccounts",this.configurationsCollection="paymentConfigurations"}async createOrUpdateAccount(e){try{const t=this.cleanUndefinedValues(e),n=await this.getAccountByUserAndClub(e.userId,e.clubId);if(n){const s=lt(Ie,this.accountsCollection,n.id);return await Yr(s,{...t,updatedAt:Kr()}),n.id}else{const s={...t,createdAt:Kr(),updatedAt:Kr()};return(await bs(nt(Ie,this.accountsCollection),s)).id}}catch(t){throw console.error("Error creating/updating PhonePe account:",t),t}}cleanUndefinedValues(e){const t={};for(const n in e)if(e[n]!==void 0)if(typeof e[n]=="object"&&e[n]!==null&&!Array.isArray(e[n])){const s=this.cleanUndefinedValues(e[n]);Object.keys(s).length>0&&(t[n]=s)}else t[n]=e[n];return t}async getAccountByUserAndClub(e,t){try{const n=ur(nt(Ie,this.accountsCollection),dr("userId","==",e),dr("clubId","==",t),dr("isActive","==",!0)),s=await Mt(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){return console.error("Error getting PhonePe account:",n),null}}async getUserAccounts(e){try{const t=ur(nt(Ie,this.accountsCollection),dr("userId","==",e),dr("isActive","==",!0));return(await Mt(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){return console.error("Error getting user accounts:",t),[]}}async getClubAccounts(e){try{const t=ur(nt(Ie,this.accountsCollection),dr("clubId","==",e),dr("isActive","==",!0));return(await Mt(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){return console.error("Error getting club accounts:",t),[]}}async getAccountById(e){try{const t=ur(nt(Ie,this.accountsCollection),dr("__name__","==",e)),n=await Mt(t);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}catch(t){return console.error("Error getting account by ID:",t),null}}async deactivateAccount(e){try{const t=lt(Ie,this.accountsCollection,e);await Yr(t,{isActive:!1,updatedAt:Kr()})}catch(t){throw console.error("Error deactivating account:",t),t}}async configureEventPayment(e){try{const t={...e,createdAt:Kr(),updatedAt:Kr()};return(await bs(nt(Ie,this.configurationsCollection),t)).id}catch(t){throw console.error("Error configuring event payment:",t),t}}async getEventPaymentConfig(e){try{const t=ur(nt(Ie,this.configurationsCollection),dr("eventId","==",e),dr("isEnabled","==",!0)),n=await Mt(t);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}catch(t){return console.error("Error getting event payment config:",t),null}}async updatePaymentConfig(e,t){try{const n=lt(Ie,this.configurationsCollection,e);await Yr(n,{...t,updatedAt:Kr()})}catch(n){throw console.error("Error updating payment config:",n),n}}async getAccountPaymentStats(e){try{return{totalEvents:0,totalRevenue:0,successfulPayments:0,failedPayments:0,pendingPayments:0}}catch(t){return console.error("Error getting payment stats:",t),{totalEvents:0,totalRevenue:0,successfulPayments:0,failedPayments:0,pendingPayments:0}}}async validateAccountCredentials(e,t,n){try{return!0}catch(s){return console.error("Error validating credentials:",s),!1}}}const hc=new _U;class EU{constructor(){this.collectionName="paymentConfigurations"}async createPaymentConfig(e){try{const n={...this.cleanUndefinedValues(e),createdAt:Kr(),updatedAt:Kr()};return(await bs(nt(Ie,this.collectionName),n)).id}catch(t){throw console.error("Error creating payment config:",t),t}}async getEventPaymentConfig(e){try{const t=ur(nt(Ie,this.collectionName),dr("eventId","==",e)),n=await Mt(t);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}catch(t){return console.error("Error getting event payment config:",t),null}}async updatePaymentConfig(e,t){try{const n=lt(Ie,this.collectionName,e),s=this.cleanUndefinedValues(t);await Yr(n,{...s,updatedAt:Kr()})}catch(n){throw console.error("Error updating payment config:",n),n}}async deletePaymentConfig(e){try{const t=lt(Ie,this.collectionName,e);await Wx(t)}catch(t){throw console.error("Error deleting payment config:",t),t}}async getOrganizerPaymentConfigs(e){try{const t=ur(nt(Ie,this.collectionName),dr("organizerId","==",e),dr("isEnabled","==",!0));return(await Mt(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){return console.error("Error getting organizer payment configs:",t),[]}}async getClubPaymentConfigs(e){try{const t=ur(nt(Ie,this.collectionName),dr("clubId","==",e),dr("isEnabled","==",!0));return(await Mt(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){return console.error("Error getting club payment configs:",t),[]}}cleanUndefinedValues(e){const t={};for(const n in e)if(e[n]!==void 0)if(typeof e[n]=="object"&&e[n]!==null&&!Array.isArray(e[n])){const s=this.cleanUndefinedValues(e[n]);Object.keys(s).length>0&&(t[n]=s)}else t[n]=e[n];return t}}const uf=new EU,bU=({event:r,user:e,clubs:t,onConfigUpdate:n})=>{var J;const[s,a]=M.useState([]),[o,u]=M.useState(null),[h,f]=M.useState(!1),[p,x]=M.useState(!1),[v,w]=M.useState(null),[N,_]=M.useState(null),[T,D]=M.useState({phonePeAccountId:"",isEnabled:!0,customFee:r.registrationFee||0,paymentDescription:`Registration for ${r.name}`,refundPolicy:"",paymentDeadline:"",specialInstructions:""});M.useEffect(()=>{U()},[r.id,e.id]);const U=async()=>{f(!0);try{const ee=await hc.getUserAccounts(e.id);a(ee);const S=await uf.getEventPaymentConfig(r.id);u(S),S&&D({phonePeAccountId:S.phonePeAccountId,isEnabled:S.isEnabled,customFee:S.customFee||r.registrationFee||0,paymentDescription:S.paymentDescription||`Registration for ${r.name}`,refundPolicy:S.refundPolicy||"",paymentDeadline:S.paymentDeadline||"",specialInstructions:S.specialInstructions||""})}catch(ee){console.error("Error loading payment config:",ee),w("Failed to load payment configuration")}finally{f(!1)}},k=async ee=>{ee.preventDefault(),f(!0),w(null),_(null);try{if(!T.phonePeAccountId)throw new Error("Please select a PhonePe account");const S={eventId:r.id,phonePeAccountId:T.phonePeAccountId,isEnabled:T.isEnabled,customFee:T.customFee,paymentDescription:T.paymentDescription,refundPolicy:T.refundPolicy||void 0,paymentDeadline:T.paymentDeadline||void 0,specialInstructions:T.specialInstructions||void 0,organizerId:e.id,clubId:r.organizerClubId};o?(await uf.updatePaymentConfig(o.id,S),_("Payment configuration updated successfully!")):(await uf.createPaymentConfig(S),_("Payment configuration created successfully!")),x(!1),U(),n==null||n()}catch(S){console.error("Error saving payment config:",S),w(S.message||"Failed to save payment configuration")}finally{f(!1)}},F=async()=>{if(!(!o||!window.confirm("Are you sure you want to delete this payment configuration?")))try{await uf.deletePaymentConfig(o.id),_("Payment configuration deleted successfully!"),u(null),D({phonePeAccountId:"",isEnabled:!0,customFee:r.registrationFee||0,paymentDescription:`Registration for ${r.name}`,refundPolicy:"",paymentDeadline:"",specialInstructions:""}),n==null||n()}catch(ee){console.error("Error deleting payment config:",ee),w("Failed to delete payment configuration")}};return h?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-indigo-500 border-t-transparent rounded-full mx-auto"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Loading payment configuration..."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Event Payment Configuration"}),c.jsxs("p",{className:"text-gray-400 mt-1",children:["Configure payment settings for ",r.name]})]}),c.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:o?"Edit Configuration":"Configure Payment"})]}),N&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg",children:N}),v&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg",children:v}),o&&!p&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Configuration"}),c.jsx("p",{className:"text-gray-400",children:"Payment settings for this event"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>x(!0),className:"px-3 py-1 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors text-sm",children:"Edit"}),c.jsx("button",{onClick:F,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"Delete"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Status:"}),c.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${o.isEnabled?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o.isEnabled?"Enabled":"Disabled"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Registration Fee:"}),c.jsxs("span",{className:"text-white ml-2",children:["",o.customFee]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"PhonePe Account:"}),c.jsx("span",{className:"text-white ml-2",children:((J=s.find(ee=>ee.id===o.phonePeAccountId))==null?void 0:J.accountName)||"Unknown"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Payment Description:"}),c.jsx("span",{className:"text-white ml-2",children:o.paymentDescription})]})]}),o.refundPolicy&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"text-gray-400",children:"Refund Policy:"}),c.jsx("p",{className:"text-white mt-1",children:o.refundPolicy})]}),o.paymentDeadline&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"text-gray-400",children:"Payment Deadline:"}),c.jsx("p",{className:"text-white mt-1",children:o.paymentDeadline})]}),o.specialInstructions&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"text-gray-400",children:"Special Instructions:"}),c.jsx("p",{className:"text-white mt-1",children:o.specialInstructions})]})]}),!o&&!p&&c.jsxs("div",{className:"text-center py-8 bg-slate-800/50 rounded-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Payment Configuration"}),c.jsx("p",{className:"text-gray-400 mb-4",children:"This event doesn't have payment configuration yet."}),c.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Configure Payment"})]}),p&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:o?"Edit Payment Configuration":"Create Payment Configuration"}),c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["PhonePe Account ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{value:T.phonePeAccountId,onChange:ee=>D({...T,phonePeAccountId:ee.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select a PhonePe account"}),s.map(ee=>c.jsxs("option",{value:ee.id,children:[ee.accountName," (",ee.environment,")"]},ee.id))]})]}),c.jsx("div",{className:"flex items-center",children:c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:T.isEnabled,onChange:ee=>D({...T,isEnabled:ee.target.checked}),className:"h-4 w-4 rounded bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"text-white",children:"Enable payment for this event"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Registration Fee ()"}),c.jsx("input",{type:"number",value:T.customFee,onChange:ee=>D({...T,customFee:parseFloat(ee.target.value)||0}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01"}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Event default: ",r.registrationFee||0]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Payment Description"}),c.jsx("input",{type:"text",value:T.paymentDescription,onChange:ee=>D({...T,paymentDescription:ee.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Registration for Code-a-thon 2024"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Refund Policy (Optional)"}),c.jsx("textarea",{value:T.refundPolicy,onChange:ee=>D({...T,refundPolicy:ee.target.value}),rows:3,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Full refund if cancelled 24 hours before event"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Payment Deadline (Optional)"}),c.jsx("input",{type:"datetime-local",value:T.paymentDeadline,onChange:ee=>D({...T,paymentDeadline:ee.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Special Instructions (Optional)"}),c.jsx("textarea",{value:T.specialInstructions,onChange:ee=>D({...T,specialInstructions:ee.target.value}),rows:2,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Payment includes lunch and t-shirt"})]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[h&&c.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),h?"Saving...":o?"Update Configuration":"Create Configuration"]})]})]})]})]})},TU={[pt.Upcoming]:"bg-green-500/10 text-green-400",[pt.Ongoing]:"bg-blue-500/10 text-blue-400",[pt.Past]:"bg-gray-500/10 text-gray-400"},NU=({event:r,clubs:e,user:t,onRegister:n,onUpdateEventHighlights:s,onUpdateEvent:a,onRegistrationUpdate:o})=>{var Be,De,Se,We,Ne,Ee;const u=e.find(q=>q.id===r.organizerClubId),[h,f]=M.useState(!1),[p,x]=M.useState(!1),v=(Be=u==null?void 0:u.team)==null?void 0:Be.find(q=>{var se;return((se=q.position)==null?void 0:se.toLowerCase())==="admin"}),w=t&&v&&v.id===t.id,N=(t==null?void 0:t.role)==="contributor"&&((De=t.managedClubIds)==null?void 0:De.includes(r.organizerClubId)),_=(t==null?void 0:t.position)==="admin";console.log(t.role);const[T,D]=M.useState(!1),[U,k]=M.useState(!1),[F,J]=M.useState(!1),[ee,S]=M.useState(null),I=_&&r.status!==pt.Past;M.useEffect(()=>{t&&r?A():f(!1)},[t,r.id]);const A=async()=>{if(!(!t||!r))try{x(!0);const q=await Lr.isUserRegisteredWithUser(r.id,t,r.organizerClubId);f(q)}catch(q){console.error("Error checking registration status:",q),f(!1)}finally{x(!1)}},j=async q=>{if(console.log("yeaa"),q.preventDefault(),!!t){x(!0);try{await Lr.isUserRegisteredWithUser(r.id,t,r.organizerClubId)?o==null||o():J(!0)}catch(se){console.error("Error checking registration status:",se),S({message:"Error checking registration status. Please try again.",type:"error"})}finally{x(!1)}}},L=q=>{f(!0),n(r.id),o==null||o(),J(!1)},V=async q=>{function se(z){if(Array.isArray(z))return z.filter(Boolean).map(se);if(z&&typeof z=="object"){const te={};for(const Q in z){const Z=z[Q];Z!=null&&!(typeof Z=="string"&&Z.trim()==="")&&!(Array.isArray(Z)&&Z.length===0)&&(te[Q]=se(Z))}return te}return z}try{const{firestoreDataService:z}=await L0(async()=>{const{firestoreDataService:te}=await Promise.resolve().then(()=>CD);return{firestoreDataService:te}},void 0);await z.updateClubEvent(r.organizerClubId,r.id,{highlights:se(q)}),a({...r,highlights:se(q)}),D(!1)}catch(z){console.error("Failed to save highlights:",z),alert("Failed to save highlights. Please try again.")}},O=q=>{a(q),k(!1)};return c.jsxs(c.Fragment,{children:[T&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:c.jsx(fU,{event:r,onClose:()=>D(!1),onSave:V})})}),U&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:c.jsx(Rg,{clubId:r.organizerClubId,eventToEdit:r,onUpdateEvent:O,onClose:()=>k(!1)})})}),c.jsx("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"bg-[#1D2434] rounded-lg shadow-xl overflow-hidden my-16",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{className:"h-80 w-full object-cover",src:r.imageUrl,alt:r.name||r.title||"Event"}),c.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),c.jsxs("div",{className:"p-8 md:p-12",children:[c.jsxs("div",{className:"relative -mt-24",children:[t&&c.jsx(wU,{event:r,user:t,onRegistrationUpdate:o}),c.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white",children:r.name||r.title||"Untitled Event"}),u&&c.jsxs(Mr,{to:`/clubs/${u.id}`,className:"text-lg text-indigo-400 hover:underline mt-1",children:["Organized by ",u.name]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[I&&c.jsx("button",{onClick:()=>k(!0),className:"bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Event"}),c.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-md font-semibold ${TU[r.status]} flex-shrink-0`,children:r.status})]})]})]}),c.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-300 border-y border-gray-800 py-6",children:[c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"h-6 w-6 mr-3 text-indigo-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("div",{children:[c.jsx("strong",{children:"Date & Time:"})," ",r.date," at ",r.time]})]}),c.jsxs("div",{className:"flex items-start",children:[c.jsxs("svg",{className:"h-6 w-6 mr-3 text-indigo-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Venue:"})," ",r.location]})]}),c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"h-6 w-6 mr-3 text-indigo-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),c.jsxs("div",{children:[c.jsx("strong",{children:"Fee:"})," ",r.registrationFee&&r.registrationFee>0?`${r.registrationFee}`:"Free"]})]})]}),c.jsx("div",{className:"mt-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"About the Event"}),c.jsx("p",{className:"mt-4 text-gray-400 whitespace-pre-wrap",children:r.description}),r.rules.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-xl font-bold text-white mt-6",children:"Rules & Prerequisites"}),c.jsx("ul",{className:"mt-4 list-disc list-inside space-y-2 text-gray-400",children:r.rules.map((q,se)=>c.jsx("li",{children:q},se))})]}),(Se=r.customSections)==null?void 0:Se.map((q,se)=>c.jsxs("div",{className:"mt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:q.title}),c.jsx("p",{className:"mt-2 text-gray-400 whitespace-pre-wrap",children:q.content})]},se)),r.specialGuests&&r.specialGuests.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-xl font-bold text-white mt-6",children:"Special Guests"}),c.jsx("ul",{className:"mt-4 list-disc list-inside space-y-2 text-gray-400",children:r.specialGuests.map((q,se)=>c.jsx("li",{children:q},se))})]})]}),r.status!==pt.Past&&!N&&c.jsx("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:h?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:" Already Registered!"}),c.jsx("p",{className:"mt-4 text-gray-300",children:"You have successfully registered for this event. Check the status banner above for more details."}),c.jsx("div",{className:"mt-6 flex gap-3 justify-center",children:c.jsx("button",{onClick:()=>J(!0),className:"bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-600 transition-colors",children:"View Details"})})]}):c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Register Now"}),c.jsx("p",{className:"text-gray-400 mt-2 text-sm mb-6",children:"Complete your registration with pre-filled profile information."}),c.jsxs("button",{onClick:j,disabled:p,className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&c.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p?"Checking...":"Register for Event"]})]})}),(t==null?void 0:t.role)==="contributor"&&N&&c.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Event Details"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"You are already a member of the event."})]}),I&&r.registrationFee&&r.registrationFee>0&&c.jsx("div",{className:"mt-8",children:c.jsx(bU,{event:r,user:t,clubs:e,onConfigUpdate:o})}),w&&c.jsx("div",{className:"mt-8",children:c.jsx(yU,{event:r,isManager:!0})})]})}),r.status===pt.Past&&c.jsxs("div",{className:"mt-12",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white border-l-4 border-indigo-500 pl-4",children:"Event Highlights"}),N&&c.jsx("button",{onClick:()=>D(!0),className:"bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:"Add/Edit Highlights"})]}),r.highlights?c.jsxs(c.Fragment,{children:[((We=r.highlights.images)==null?void 0:We.length)>0&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Gallery"}),r.highlights.galleryDriveLink&&c.jsxs("a",{href:r.highlights.galleryDriveLink,target:"_blank",rel:"noopener noreferrer",className:"bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-600 transition-colors flex items-center gap-2 text-sm",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"View More"]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:r.highlights.images.map((q,se)=>c.jsx("img",{src:q,alt:`Highlight ${se+1}`,className:"rounded-lg object-cover w-full h-48 hover:scale-105 transition-transform duration-300"},se))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[((Ne=r.highlights.guests)==null?void 0:Ne.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Special Guests"}),c.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-400",children:r.highlights.guests.map((q,se)=>c.jsx("li",{children:q},se))})]}),((Ee=r.highlights.winners)==null?void 0:Ee.length)>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Winners"}),c.jsx("div",{className:"space-y-3",children:r.highlights.winners.map((q,se)=>c.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[c.jsxs("p",{className:"font-bold text-indigo-400",children:[q.position,": ",c.jsx("span",{className:"text-white",children:q.name})]}),q.details&&c.jsx("p",{className:"text-sm text-gray-400",children:q.details})]},se))})]})]})]}):c.jsx("div",{className:"text-center bg-slate-900 p-8 rounded-lg",children:c.jsx("p",{className:"text-gray-400",children:"No highlights have been added for this event yet."})})]})]})]})}),t&&c.jsx(vU,{event:r,user:t,isOpen:F,onClose:()=>J(!1),onRegistrationSuccess:L})]})},SU=({externalEvents:r})=>c.jsxs("section",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(Rn,{title:"External Opportunities",subtitle:"Explore major hackathons, national-level tech fests, internships, and workshops from other top institutions."}),c.jsx("div",{className:"space-y-6",children:r.map(e=>c.jsxs("div",{className:"bg-slate-900 p-6 rounded-lg shadow-md border border-slate-800 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 hover:border-indigo-500/50 transition-colors",children:[c.jsxs("div",{children:[c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-800 text-gray-300",children:e.category}),c.jsx("h3",{className:"mt-2 text-xl font-bold text-white",children:e.name}),c.jsx("p",{className:"text-sm font-medium text-indigo-400",children:e.organizer}),c.jsx("p",{className:"mt-2 text-gray-400",children:e.description})]}),c.jsx("div",{className:"flex-shrink-0 mt-4 sm:mt-0",children:c.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-300",children:"Visit Site"})})]},e.id))})]}),w4=({label:r,id:e,...t})=>{const[n,s]=M.useState(!1);return c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-400",children:r}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{id:e,...t,type:n?"text":"password",className:"block w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow pr-10"}),c.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-300","aria-label":n?"Hide password":"Show password",children:n?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m0 0l-2.14 2.14"})}):c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})},CU=({isOpen:r,onClose:e})=>{const[t,n]=M.useState(""),[s,a]=M.useState(!1),[o,u]=M.useState(""),[h,f]=M.useState(""),p=async v=>{if(v.preventDefault(),a(!0),f(""),u(""),!/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(t)){f("Only GCET college email addresses are allowed."),a(!1);return}try{await gE(zn,t),u("Password reset email sent! Please check your inbox and follow the instructions."),n("")}catch(N){console.error("Password reset error:",N),f(N.message||"Failed to send password reset email. Please try again.")}finally{a(!1)}},x=()=>{n(""),f(""),u(""),e()};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Forgot Password"}),c.jsx("button",{onClick:x,className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),c.jsx("input",{type:"email",value:t,onChange:v=>n(v.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your email address",required:!0})]}),h&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded",children:h}),o&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded",children:o}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 border border-slate-600 rounded-md text-gray-300 hover:bg-slate-700 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:s||!t,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Sending...":"Send Reset Email"})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-400",children:["Remember your password?"," ",c.jsx("button",{onClick:x,className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:"Sign in instead"})]})})]})}):null};class AU{async generateOTP(e,t){try{return(await Up(Vp,"generateOTP")({email:e,userData:t})).data}catch(n){throw console.error("Error generating OTP:",n),new Error(n.message||"Failed to generate OTP")}}async verifyOTP(e,t){try{return(await Up(Vp,"verifyOTP")({email:e,otp:t})).data}catch(n){throw console.error("Error verifying OTP:",n),new Error(n.message||"Failed to verify OTP")}}async resendOTP(e,t){try{return(await Up(Vp,"resendOTP")({email:e,userData:t})).data}catch(n){throw console.error("Error resending OTP:",n),new Error(n.message||"Failed to resend OTP")}}}const _4=new AU,IU=({isOpen:r,onClose:e,email:t,onVerificationSuccess:n,mode:s,actionCode:a,password:o})=>{const[u,h]=M.useState(["","","","","",""]),[f,p]=M.useState(!1),[x,v]=M.useState(""),[w,N]=M.useState(""),[_,T]=M.useState(!1),[D,U]=M.useState(0),k=M.useRef([]);M.useEffect(()=>{r&&(h(["","","","","",""]),v(""),N(""),U(0))},[r]),M.useEffect(()=>{if(D>0){const j=setTimeout(()=>U(D-1),1e3);return()=>clearTimeout(j)}},[D]);const F=(j,L)=>{var O;if(L.length>1)return;const V=[...u];V[j]=L,h(V),L&&j<5&&((O=k.current[j+1])==null||O.focus())},J=(j,L)=>{var V;L.key==="Backspace"&&!u[j]&&j>0&&((V=k.current[j-1])==null||V.focus())},ee=j=>{var De;j.preventDefault();const L=j.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),V=[...u];for(let Se=0;Se<L.length;Se++)V[Se]=L[Se];h(V);const O=V.findIndex((Se,We)=>!Se&&We<6),Be=O!==-1?O:5;(De=k.current[Be])==null||De.focus()},S=async j=>{if(j.preventDefault(),u.join("").length!==6){v("Please enter all 6 digits");return}p(!0),v("");try{if(s==="email-verification"){const V=u.join(""),O=await _4.verifyOTP(t,V);O.success?(N("OTP verified successfully!"),setTimeout(()=>{n({email:t,verified:!0,userData:O.userData}),e()},1500)):v(O.message||"Invalid OTP. Please try again.")}else s==="password-reset"&&a&&(await wk(zn,a),N("Code verified! You can now reset your password."),setTimeout(()=>{n({email:t,actionCode:a}),e()},1500))}catch(V){console.error("OTP verification error:",V),V.code==="auth/invalid-action-code"?v("Invalid or expired verification code"):V.code==="auth/expired-action-code"?v("Verification code has expired. Please request a new one."):v(V.message||"Verification failed. Please try again.")}finally{p(!1)}},I=async()=>{T(!0),v("");try{v(s==="email-verification"?"Please go back and try registering again to resend OTP.":"Unable to resend verification email. Please try again."),U(60)}catch(j){console.error("Resend verification error:",j),v("Failed to resend verification email. Please try again.")}finally{T(!1)}},A=()=>{h(["","","","","",""]),v(""),N(""),U(0),e()};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:s==="email-verification"?"Verify Email":"Verify Code"}),c.jsx("button",{onClick:A,className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("p",{className:"text-gray-300 mb-2",children:s==="email-verification"?"We sent a 6-digit OTP to":"Enter the verification code sent to"}),c.jsx("p",{className:"text-white font-semibold",children:t}),s==="email-verification"&&c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Please check your email and enter the OTP below."})]}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsx("div",{className:"flex justify-center space-x-2",children:u.map((j,L)=>c.jsx("input",{ref:V=>k.current[L]=V,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:j,onChange:V=>F(L,V.target.value),onKeyDown:V=>J(L,V),onPaste:ee,className:"w-12 h-12 text-center text-xl font-bold bg-slate-700 border border-slate-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",maxLength:1,disabled:f},L))}),x&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded text-center",children:x}),w&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded text-center",children:w}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{type:"submit",disabled:f||u.join("").length!==6,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Verifying...":s==="email-verification"?"Verify OTP":"Verify Code"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-400 mb-2",children:s==="email-verification"?"Didn't receive the OTP?":"Didn't receive the code?"}),c.jsx("button",{type:"button",onClick:I,disabled:_||D>0,className:"text-indigo-400 hover:text-indigo-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?"Sending...":D>0?`Resend in ${D}s`:s==="email-verification"?"Resend OTP":"Resend Code"})]})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-gray-400",children:["Wrong email?"," ",c.jsx("button",{onClick:A,className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:"Go back"})]})})]})}):null};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RU=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),E2=r=>{const e=RU(r);return e.charAt(0).toUpperCase()+e.slice(1)},E4=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),PU=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...u},h)=>M.createElement("svg",{ref:h,...jU,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:E4("lucide",s),...!a&&!PU(u)&&{"aria-hidden":"true"},...u},[...o.map(([f,p])=>M.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=(r,e)=>{const t=M.forwardRef(({className:n,...s},a)=>M.createElement(DU,{ref:a,iconNode:e,className:E4(`lucide-${kU(E2(r))}`,`lucide-${r}`,n),...s}));return t.displayName=E2(r),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],FU=G0("mail",OU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],MU=G0("phone",LU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],b2=G0("user",UU);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],BU=G0("x",VU),zU=({isOpen:r,onClose:e,onGuestLogin:t})=>{const[n,s]=M.useState({name:"",email:"",phone:"",college:"GCET",year:"1",department:"CSE"}),[a,o]=M.useState(!1),[u,h]=M.useState(""),f=async x=>{x.preventDefault(),o(!0),h("");try{if(!n.name.trim()){h("Name is required");return}if(!n.email.trim()){h("Email is required");return}if(!n.phone.trim()){h("Phone number is required");return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n.email)){h("Please enter a valid email address");return}if(!/^[6-9]\d{9}$/.test(n.phone)){h("Please enter a valid 10-digit phone number");return}t(n)}catch(v){h("An error occurred. Please try again."),console.error("Guest login error:",v)}finally{o(!1)}},p=(x,v)=>{s(w=>({...w,[x]:v})),u&&h("")};return r?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-900 rounded-lg shadow-xl w-full max-w-md border border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg",children:c.jsx(b2,{className:"w-5 h-5 text-indigo-400"})}),c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Guest Registration"})]}),c.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:c.jsx(BU,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[u&&c.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm",children:u}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Full Name *"}),c.jsx("input",{type:"text",value:n.name,onChange:x=>p("name",x.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[c.jsx(FU,{className:"w-4 h-4 inline mr-2"}),"Email Address *"]}),c.jsx("input",{type:"email",value:n.email,onChange:x=>p("email",x.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"your.email@gmail.com",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[c.jsx(MU,{className:"w-4 h-4 inline mr-2"}),"Phone Number *"]}),c.jsx("input",{type:"tel",value:n.phone,onChange:x=>p("phone",x.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"9876543210",maxLength:10,required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Year"}),c.jsxs("select",{value:n.year,onChange:x=>p("year",x.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[c.jsx("option",{value:"1",children:"1st Year"}),c.jsx("option",{value:"2",children:"2nd Year"}),c.jsx("option",{value:"3",children:"3rd Year"}),c.jsx("option",{value:"4",children:"4th Year"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Department"}),c.jsxs("select",{value:n.department,onChange:x=>p("department",x.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[c.jsx("option",{value:"CSE",children:"CSE"}),c.jsx("option",{value:"IT",children:"IT"}),c.jsx("option",{value:"ECE",children:"ECE"}),c.jsx("option",{value:"EEE",children:"EEE"}),c.jsx("option",{value:"MECH",children:"MECH"}),c.jsx("option",{value:"CIVIL",children:"CIVIL"}),c.jsx("option",{value:"AERO",children:"AERO"}),c.jsx("option",{value:"AUTO",children:"AUTO"})]})]})]}),c.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1 bg-blue-500/20 rounded",children:c.jsx(b2,{className:"w-4 h-4 text-blue-400"})}),c.jsxs("div",{className:"text-sm text-blue-300",children:[c.jsx("p",{className:"font-medium mb-1",children:"Guest Access"}),c.jsx("p",{className:"text-blue-400/80",children:"As a guest, you can register for events but cannot join clubs or access admin features."})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 text-slate-300 hover:text-white border border-slate-600 hover:border-slate-500 rounded-lg transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-600/50 text-white rounded-lg transition-colors font-medium",children:a?"Registering...":"Register as Guest"})]})]})]})}):null},$U=({onLogin:r,onGuestClick:e,onSignUpClick:t})=>{const[n,s]=M.useState(""),[a,o]=M.useState(""),[u,h]=M.useState(""),[f,p]=M.useState(!1),[x,v]=M.useState(!1),w=async N=>{if(N.preventDefault(),h(""),!n||!a){h("Please enter both email and password.");return}if(console.log(n!=="admin@gmail.com"),n!=="admin@gmail.com"&&!/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(n)){h("Only GCET college email addresses are allowed.");return}p(!0);try{await r(n,a)}catch(T){h(T.message||"Failed to sign in. Please check your credentials."),p(!1)}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-md animate-flip-in",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-5xl font-extrabold text-white tracking-tighter",children:"GCET"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Welcome back! Please sign in to continue."})]}),c.jsxs("div",{className:"bg-gray-900/30 backdrop-blur-sm border border-gray-800 rounded-xl shadow-2xl p-8",children:[c.jsxs("form",{onSubmit:w,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:N=>s(N.target.value),className:"block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md shadow-sm placeholder-gray-500 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})})]}),c.jsx(w4,{label:"Password",id:"password",required:!0,value:a,onChange:N=>o(N.target.value)}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Forgot password?"})}),u&&c.jsx("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 text-sm p-3 rounded-md",children:u}),c.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-indigo-500 transition-colors disabled:opacity-50",children:f?"Signing in...":"Sign in"})]}),c.jsxs("div",{className:"relative my-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:c.jsx("div",{className:"w-full border-t border-slate-700"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-slate-900 text-gray-400",children:"Or continue with"})})]}),c.jsxs("div",{className:"text-center mt-6 space-y-2",children:[c.jsxs("p",{className:"text-sm text-gray-400",children:["New student?"," ",c.jsx("button",{onClick:t,className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Create an account"})]}),c.jsxs("p",{className:"text-sm text-gray-400",children:["Other college student?"," ",c.jsx("button",{onClick:e,className:"font-medium text-indigo-400 hover:text-indigo-300",children:"Continue as a guest"})]})]})]})]}),c.jsx(CU,{isOpen:x,onClose:()=>v(!1)})]})},WU=({onSignUp:r,onCreateProfileForExistingUser:e,onUserRegistered:t,onBack:n})=>{const[s,a]=M.useState({name:"",email:"",password:"",rollNumber:"",year:"1st Year",branch:"CSE",mobile:""}),[o,u]=M.useState(""),[h,f]=M.useState(!1),[p,x]=M.useState(!1),[v,w]=M.useState(null),[N,_]=M.useState(!1),T=k=>{a(F=>({...F,[k.target.name]:k.target.value}))},D=async k=>{if(k.preventDefault(),u(""),f(!0),!s.name||!s.email||!s.password||!s.rollNumber||!s.mobile){u("Please fill in all required fields."),f(!1);return}if(!/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(s.email)){u("Only GCET college email addresses are allowed."),f(!1);return}if(s.password.length<6){u("Password must be at least 6 characters long."),f(!1);return}try{const J=await _4.generateOTP(s.email,s);if(J.success)w(s),_(!0),x(!0),f(!1);else throw new Error(J.message||"Failed to generate OTP")}catch(J){console.error("Registration error:",J),J.code==="auth/email-already-in-use"?u("An account with this email already exists. Please sign in instead."):J.code==="auth/weak-password"?u("Password is too weak. Please choose a stronger password."):J.code==="auth/invalid-email"?u("Please enter a valid email address."):u(J.message||"Failed to create account. Please try again."),f(!1)}},U=async k=>{if(v)try{const{email:F,password:J,...ee}=v,I=(await xE(zn,F,J)).user,A=await vn.createUserProfile(I,{name:ee.name,email:I.email||"",role:"student",...ee});if(A)x(!1),t(A);else throw new Error("Could not create user profile.")}catch(F){console.error("Registration error:",F),F.code==="auth/email-already-in-use"?u("An account with this email already exists. Please sign in instead."):F.code==="auth/weak-password"?u("Password is too weak. Please choose a stronger password."):F.code==="auth/invalid-email"?u("Please enter a valid email address."):u(F.message||"Failed to create account."),x(!1)}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-md animate-flip-in",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-white tracking-tighter",children:"Create Student Account"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Join the campus hub and get started."})]}),c.jsx("div",{className:"bg-gray-900/30 backdrop-blur-sm border border-gray-800 rounded-xl shadow-2xl p-8",children:c.jsxs("form",{onSubmit:D,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),c.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:T,required:!0,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"rollNumber",className:"block text-sm font-medium text-gray-300",children:"Roll Number"}),c.jsx("input",{type:"text",name:"rollNumber",id:"rollNumber",value:s.rollNumber,onChange:T,required:!0,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),c.jsx("input",{type:"email",name:"email",id:"email",value:s.email,onChange:T,required:!0,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"})]}),c.jsx(w4,{label:"Password",id:"password",name:"password",required:!0,value:s.password,onChange:T}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-300",children:"Year"}),c.jsxs("select",{name:"year",id:"year",value:s.year,onChange:T,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md",children:[c.jsx("option",{children:"1st Year"}),c.jsx("option",{children:"2nd Year"}),c.jsx("option",{children:"3rd Year"}),c.jsx("option",{children:"4th Year"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"branch",className:"block text-sm font-medium text-gray-300",children:"Branch"}),c.jsxs("select",{name:"branch",id:"branch",value:s.branch,onChange:T,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md",children:[c.jsx("option",{children:"CSE"}),c.jsx("option",{children:"ECE"}),c.jsx("option",{children:"ME"}),c.jsx("option",{children:"IT"}),c.jsx("option",{children:"ARCH"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-300",children:"Mobile Number"}),c.jsx("input",{type:"tel",name:"mobile",id:"mobile",value:s.mobile,onChange:T,required:!0,className:"mt-1 block w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"})]}),o&&c.jsx("p",{className:"text-sm text-red-500",children:o}),c.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-3 px-4 bg-indigo-600 text-white font-bold rounded-md hover:bg-indigo-700 disabled:opacity-50",children:h?"Creating...":"Create Account"}),c.jsx("button",{type:"button",onClick:n,className:"w-full flex justify-center py-2 px-4 text-sm text-gray-400 hover:text-white",children:"Back to Login"})]})})]}),c.jsx(IU,{isOpen:p,onClose:()=>x(!1),email:s.email,onVerificationSuccess:U,mode:"email-verification",password:s.password})]})},HU=({onLogin:r,onRegisterAndLogin:e,onCreateProfileForExistingUser:t,onUserRegistered:n,onGuestLogin:s})=>{const[a,o]=M.useState("login"),[u,h]=M.useState(!1),f=x=>{s(x),h(!1)},p=()=>{switch(a){case"login":return c.jsx($U,{onLogin:r,onGuestClick:()=>h(!0),onSignUpClick:()=>o("signup")});case"signup":return c.jsx(WU,{onSignUp:e,onCreateProfileForExistingUser:t,onUserRegistered:n,onBack:()=>o("login")});default:return null}};return c.jsxs("div",{className:"min-h-screen bg-[#10141D] flex flex-col items-center justify-center p-4 relative overflow-hidden",style:{perspective:"1200px"},children:[c.jsx("div",{className:"absolute top-0 -left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-soft-light filter blur-2xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 -right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-soft-light filter blur-2xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),c.jsx("div",{className:"absolute -bottom-1/4 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-soft-light filter blur-2xl opacity-20 animate-blob",style:{animationDelay:"4s"}}),c.jsx("div",{className:"relative z-10 w-full max-w-md",children:p()}),c.jsx(zU,{isOpen:u,onClose:()=>h(!1),onGuestLogin:f})]})},GU={Recruitment:"bg-blue-500/10 text-blue-400","Event Result":"bg-green-500/10 text-green-400",Announcement:"bg-yellow-500/10 text-yellow-400"},qU=({news:r})=>c.jsxs("section",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(Rn,{title:"Campus News & Announcements",subtitle:"Stay up-to-date with the latest happenings, from event results to recruitment drives."}),c.jsx("div",{className:"space-y-8 max-w-4xl mx-auto",children:r.map(e=>c.jsxs("div",{className:"bg-slate-900 p-6 rounded-lg shadow-md border border-slate-800 transition-all duration-300 hover:border-indigo-500/50 hover:shadow-indigo-500/10",children:[c.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${GU[e.category]}`,children:e.category}),c.jsx("p",{className:"text-sm text-gray-500",children:e.date})]}),c.jsx("h3",{className:"mt-3 text-2xl font-bold text-white",children:e.title}),c.jsx("p",{className:"mt-2 text-gray-400",children:e.summary}),e.link&&c.jsx("div",{className:"mt-4",children:c.jsxs(Mr,{to:e.link.path,className:"text-indigo-400 font-semibold hover:text-indigo-300 transition-colors flex items-center group",children:[e.link.text,c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1.5 transform group-hover:translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]},e.id))})]}),KU=({isOpen:r,onClose:e,userEmail:t})=>{const[n,s]=M.useState(t||""),[a,o]=M.useState(!1),[u,h]=M.useState(""),[f,p]=M.useState("");ju.useEffect(()=>{t&&s(t)},[t]);const x=async w=>{if(w.preventDefault(),o(!0),h(""),p(""),!n){h("Please enter your email address"),o(!1);return}if(!/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(n)){h("Only GCET college email addresses are allowed."),o(!1);return}try{await gE(zn,n),p("Password reset email sent! Please check your inbox and follow the instructions to set a new password."),s(""),setTimeout(()=>{e()},3e3)}catch(_){console.error("Password reset error:",_),_.code==="auth/user-not-found"?h("No account found with this email address"):_.code==="auth/invalid-email"?h("Please enter a valid email address"):h(_.message||"Failed to send password reset email. Please try again.")}finally{o(!1)}},v=()=>{s(""),h(""),p(""),e()};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),c.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"mb-6",children:c.jsx("p",{className:"text-gray-300 text-sm",children:"Enter your email address and we'll send you a link to reset your password."})}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),c.jsx("input",{type:"email",value:n,onChange:w=>s(w.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your email address",required:!0})]}),u&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded",children:u}),f&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded",children:f}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2 border border-slate-600 rounded-md text-gray-300 hover:bg-slate-700 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:a||!n,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Sending...":"Send Reset Email"})]})]})]})}):null},YU=({user:r,events:e,activeTab:t})=>{const[n,s]=M.useState([]),[a,o]=M.useState(!1),u=M.useRef(!1),h=M.useRef(t);M.useEffect(()=>{if(!r||t!=="events"||u.current)return;(async()=>{o(!0);try{const x=r.isGuest?r.id:r.id||"",v=await sd.getUserRegisteredEvents(x,e);s(v),u.current=!0}catch(x){console.error("Error fetching user registrations:",x)}finally{o(!1)}})()},[r==null?void 0:r.id,e.length,t]),M.useEffect(()=>{h.current!==t&&(h.current=t,t!=="events"&&(u.current=!1,s([])))},[t]),M.useEffect(()=>{r!=null&&r.id&&(u.current=!1,s([]))},[r==null?void 0:r.id]);const f=M.useCallback(async()=>{if(!(!r||t!=="events")){u.current=!1,o(!0);try{const p=r.isGuest?r.id:r.id||"",x=await sd.getUserRegisteredEvents(p,e);s(x),u.current=!0}catch(p){console.error("Error refreshing registrations:",p)}finally{o(!1)}}},[r,e,t]);return{registeredEvents:n,isLoadingRegistrations:a,refreshRegistrations:f}},XU=({user:r,onLogout:e,onOpenChangePassword:t})=>{const n=M.useRef(null),[s,a]=M.useState({}),[o,u]=M.useState(!1),h=M.useMemo(()=>{const w=new Set;return r.managedClubIds&&r.managedClubIds.forEach(N=>w.add(N)),Array.from(w)},[r.managedClubIds]);M.useEffect(()=>{(async()=>{u(!0);const N=await Promise.all(h.map(T=>hr.getClubById(T))),_={};N.forEach((T,D)=>{_[h[D]]=T}),a(_)})()},[r.id]);const f=w=>{const N=w.split(" ");return N.length>1?`${N[0][0]}${N[N.length-1][0]}`.toUpperCase():w.substring(0,2).toUpperCase()},p=M.useMemo(()=>{const w=["Student"];return r.managedClubIds&&r.managedClubIds.length>0&&w.push("Club Admin"),w},[r]),x=w=>{if(!n.current)return;const{left:N,top:_,width:T,height:D}=n.current.getBoundingClientRect(),U=w.clientX-N,F=((w.clientY-_)/D-.5)*-15,J=(U/T-.5)*15;n.current.style.transform=`perspective(1000px) rotateX(${F}deg) rotateY(${J}deg) scale3d(1.05, 1.05, 1.05)`},v=()=>{n.current&&(n.current.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)")};return c.jsxs("div",{ref:n,className:"bg-slate-900/50 p-8 rounded-2xl border border-slate-800 shadow-2xl relative overflow-hidden group transition-transform duration-300 ease-out",onMouseMove:x,onMouseLeave:v,style:{transformStyle:"preserve-3d"},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-transparent to-purple-500/10 opacity-50 group-hover:opacity-100 transition-opacity"}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-5xl font-bold shadow-lg",children:f(r.name)}),c.jsx("div",{className:"absolute inset-0 rounded-full ring-4 ring-indigo-500/50 animate-pulse group-hover:animate-none"})]}),c.jsx("h2",{className:"text-3xl font-extrabold text-white mt-5",children:r.name}),c.jsx("p",{className:"text-gray-400 text-sm",children:r.email}),c.jsx("div",{className:"flex items-center space-x-2 mt-4",children:p.map(w=>c.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-slate-700 rounded-full shadow-sm",children:w},w))}),c.jsxs("div",{className:"mt-6 flex items-center space-x-3 border-t border-slate-700/50 pt-6",children:[c.jsxs("button",{onClick:t,className:"flex-1 text-sm px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-gray-300 flex items-center justify-center gap-2",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 016-6h4a6 6 0 016 6z"})}),"Change Password"]}),c.jsxs("button",{onClick:e,className:"flex-1 text-sm px-4 py-2 rounded-lg bg-red-600/20 hover:bg-red-600/40 transition-colors text-red-400 flex items-center justify-center gap-2",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})},QU=({user:r,onLogout:e,events:t,clubs:n,applications:s})=>{const[a,o]=M.useState("events"),[u,h]=M.useState(!1),f=zs(),{registeredEvents:p,isLoadingRegistrations:x}=YU({user:r,events:t,activeTab:a}),{upcomingEvents:v,pastEvents:w}=M.useMemo(()=>({upcomingEvents:p.filter(k=>k.status===pt.Upcoming||k.status===pt.Ongoing),pastEvents:p.filter(k=>k.status===pt.Past)}),[p]),{managedClubs:N,memberClubs:_}=M.useMemo(()=>{const k=n.filter(J=>{var ee;return(ee=J.team)==null?void 0:ee.some(S=>S.id===r.id&&S.position==="Admin")}),F=n.filter(J=>{var ee;return(ee=J.team)==null?void 0:ee.some(S=>S.id===r.id&&S.position!=="Admin")});return{managedClubs:k,memberClubs:F}},[n,s,r]),T=M.useMemo(()=>s.filter(k=>k.userName===r.name).map(k=>({...k,club:n.find(F=>F.id===k.clubId)})).filter(k=>k.club),[s,r.name,n]);M.useMemo(()=>s.filter(k=>{var F;return((F=r.managedClubIds)==null?void 0:F.includes(k.clubId))&&k.status==="pending"}).length,[s,r.managedClubIds]);const D=({tab:k,children:F,count:J})=>c.jsxs("button",{onClick:()=>o(k),className:`relative flex-1 py-4 text-sm font-bold transition-colors ${a===k?"text-white":"text-gray-400 hover:text-white"}`,children:[F,J&&J>0?c.jsx("span",{className:"absolute top-3 ml-2 text-xs bg-red-500 text-white rounded-full px-1.5 py-0.5",children:J}):null,a===k&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-500"})]}),U={pending:{text:"text-yellow-400",bg:"bg-yellow-500/10",dot:"bg-yellow-500"},accepted:{text:"text-green-400",bg:"bg-green-500/10",dot:"bg-green-500"},rejected:{text:"text-red-400",bg:"bg-red-500/10",dot:"bg-red-500"}};return c.jsxs("div",{className:"container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(KU,{isOpen:u,onClose:()=>h(!1),userEmail:r.email}),c.jsx(XU,{user:r,onLogout:e,onOpenChangePassword:()=>h(!0)}),c.jsxs("div",{className:"mt-12",children:[c.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg flex",children:[c.jsx(D,{tab:"events",children:"Registered Events"}),c.jsx(D,{tab:"clubs",children:"My Clubs"}),c.jsx(D,{tab:"applications",children:"My Applications"})]}),c.jsxs("div",{className:"mt-6 animate-tab-content-enter",children:[a==="events"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-300 text-lg px-2",children:"Upcoming & Ongoing"}),x?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),c.jsx("span",{className:"ml-2 text-gray-400",children:"Loading your events..."})]}):v.length>0?v.map((k,F)=>c.jsxs("button",{onClick:()=>f(`/events/${k.id}`),style:{animationDelay:`${F*100}ms`},className:"animate-staggered-fade-in w-full text-left p-4 rounded-lg bg-slate-900 hover:bg-slate-800 transition-colors border border-slate-800 hover:border-slate-700",children:[c.jsx("p",{className:"font-semibold truncate text-white",children:k.name}),c.jsxs("p",{className:"text-xs text-gray-400",children:[k.date," at ",k.time]})]},k.id)):c.jsx("p",{className:"text-sm text-gray-500 px-2",children:"You have no upcoming events."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-300 text-lg px-2",children:"Past Events"}),x?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),c.jsx("span",{className:"ml-2 text-gray-400",children:"Loading your events..."})]}):w.length>0?w.map((k,F)=>c.jsxs("button",{onClick:()=>f(`/events/${k.id}`),style:{animationDelay:`${F*100}ms`},className:"animate-staggered-fade-in w-full text-left p-4 rounded-lg bg-slate-900 hover:bg-slate-800 transition-colors border border-slate-800 hover:border-slate-700",children:[c.jsx("p",{className:"font-semibold truncate text-white",children:k.name}),c.jsx("p",{className:"text-xs text-gray-400",children:k.date})]},k.id)):c.jsx("p",{className:"text-sm text-gray-500 px-2",children:"You haven't attended any past events."})]})]}),a==="clubs"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-300 text-lg px-2",children:"Managed Clubs"}),N.length>0?N.map((k,F)=>c.jsx("div",{style:{animationDelay:`${F*100}ms`},className:"animate-staggered-fade-in p-4 rounded-lg bg-slate-900 border border-slate-800",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:k.logoUrl,alt:k.name,className:"w-12 h-12 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:k.name}),c.jsx("span",{className:"text-xs font-bold text-indigo-400 bg-indigo-500/10 px-2 py-0.5 rounded-full",children:"Admin"})]})]}),c.jsx("button",{onClick:()=>f(`/clubs/${k.id}`),className:"px-4 py-2 text-xs font-bold bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Manage"})]})},k.id)):c.jsx("p",{className:"text-sm text-gray-500 px-2",children:"You do not manage any clubs."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-300 text-lg px-2",children:"Club Memberships"}),_.length>0?_.map((k,F)=>c.jsxs("button",{onClick:()=>f(`/clubs/${k.id}`),style:{animationDelay:`${F*100}ms`},className:"animate-staggered-fade-in w-full text-left p-4 rounded-lg bg-slate-900 hover:bg-slate-800 transition-colors flex items-center space-x-3 border border-slate-800 hover:border-slate-700",children:[c.jsx("img",{src:k.logoUrl,alt:k.name,className:"w-12 h-12 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:k.name}),c.jsx("span",{className:"text-xs font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded-full",children:"Member"})]})]},k.id)):c.jsx("p",{className:"text-sm text-gray-500 px-2",children:"You are not a member of any other clubs."})]})]}),a==="applications"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-300 text-lg px-2",children:"Your Club Applications"}),T.length>0?T.map((k,F)=>c.jsxs("div",{style:{animationDelay:`${F*100}ms`},className:"animate-staggered-fade-in p-4 rounded-lg bg-slate-900 border border-slate-800 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("img",{src:k.club.logoUrl,alt:k.club.name,className:"w-12 h-12 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:k.club.name}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Application sent on ",new Date().toLocaleDateString()]})]})]}),c.jsxs("div",{className:`${U[k.status].bg} ${U[k.status].text} text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-2`,children:[c.jsx("span",{className:`h-2 w-2 rounded-full ${U[k.status].dot}`}),c.jsx("span",{className:"capitalize",children:k.status})]})]},k.id)):c.jsx("p",{className:"text-sm text-gray-500 px-2",children:"You haven't applied to any clubs yet."})]})]})]})]})},JU=({user:r,clubs:e,onAccountUpdate:t})=>{const[n,s]=M.useState([]),[a,o]=M.useState(!1),[u,h]=M.useState(!1),[f,p]=M.useState(null),[x,v]=M.useState(null),[w,N]=M.useState(null),[_,T]=M.useState({clubId:"",accountName:"",merchantId:"",saltKey:"",saltIndex:"1",environment:"sandbox",phoneNumber:"",email:"",businessName:"",businessType:"",gstNumber:"",panNumber:"",bankAccountNumber:"",ifscCode:"",accountHolderName:""});M.useEffect(()=>{D()},[r.id]);const D=async()=>{o(!0);try{const S=await hc.getUserAccounts(r.id);s(S)}catch(S){console.error("Error loading accounts:",S),v("Failed to load accounts")}finally{o(!1)}},U=async S=>{S.preventDefault(),o(!0),v(null),N(null);try{if(!_.clubId||!_.merchantId||!_.saltKey)throw new Error("Please fill in all required fields");if(!await hc.validateAccountCredentials(_.merchantId,_.saltKey,_.saltIndex))throw new Error("Invalid PhonePe credentials. Please check your Merchant ID, Salt Key, and Salt Index.");const A={userId:r.id,clubId:_.clubId,merchantId:_.merchantId,saltKey:_.saltKey,saltIndex:_.saltIndex,environment:_.environment,isActive:!0,accountName:_.accountName};if(_.phoneNumber.trim()&&(A.phoneNumber=_.phoneNumber),_.email.trim()){if(!/^[a-z0-9._%+-]+@gcet\.edu\.in$/i.test(_.email))throw new Error("Only GCET college email addresses are allowed");A.email=_.email}_.businessName.trim()&&(A.businessName=_.businessName),_.businessType.trim()&&(A.businessType=_.businessType),_.gstNumber.trim()&&(A.gstNumber=_.gstNumber),_.panNumber.trim()&&(A.panNumber=_.panNumber),_.bankAccountNumber.trim()&&(A.bankAccountNumber=_.bankAccountNumber),_.ifscCode.trim()&&(A.ifscCode=_.ifscCode),_.accountHolderName.trim()&&(A.accountHolderName=_.accountHolderName),await hc.createOrUpdateAccount(A),N(f?"Account updated successfully!":"Account created successfully!"),h(!1),p(null),J(),D(),t==null||t()}catch(I){console.error("Error saving account:",I),v(I.message||"Failed to save account")}finally{o(!1)}},k=S=>{p(S),T({clubId:S.clubId,accountName:S.accountName,merchantId:S.merchantId,saltKey:S.saltKey,saltIndex:S.saltIndex,environment:S.environment,phoneNumber:S.phoneNumber||"",email:S.email||"",businessName:S.businessName||"",businessType:S.businessType||"",gstNumber:S.gstNumber||"",panNumber:S.panNumber||"",bankAccountNumber:S.bankAccountNumber||"",ifscCode:S.ifscCode||"",accountHolderName:S.accountHolderName||""}),h(!0)},F=async S=>{if(window.confirm("Are you sure you want to deactivate this account?"))try{await hc.deactivateAccount(S),N("Account deactivated successfully!"),D(),t==null||t()}catch(I){console.error("Error deactivating account:",I),v("Failed to deactivate account")}},J=()=>{T({clubId:"",accountName:"",merchantId:"",saltKey:"",saltIndex:"1",environment:"sandbox",phoneNumber:"",email:"",businessName:"",businessType:"",gstNumber:"",panNumber:"",bankAccountNumber:"",ifscCode:"",accountHolderName:""})},ee=()=>{h(!1),p(null),J(),v(null),N(null)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"PhonePe Account Management"}),c.jsx("p",{className:"text-gray-400 mt-1",children:"Configure your PhonePe account to receive payments directly"})]}),c.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Account"})]}),w&&c.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg",children:w}),x&&c.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg",children:x}),!u&&c.jsx("div",{className:"space-y-4",children:a?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-indigo-500 border-t-transparent rounded-full mx-auto"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Loading accounts..."})]}):n.length===0?c.jsxs("div",{className:"text-center py-8 bg-slate-800/50 rounded-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No PhonePe Accounts"}),c.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't configured any PhonePe accounts yet."}),c.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Your First Account"})]}):c.jsx("div",{className:"grid gap-4",children:n.map(S=>{const I=e.find(A=>A.id===S.clubId);return c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:S.accountName}),c.jsx("p",{className:"text-gray-400",children:(I==null?void 0:I.name)||"Unknown Club"}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S.environment==="production"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:S.environment==="production"?"Production":"Sandbox"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-500/20 text-indigo-400",children:"Active"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>k(S),className:"px-3 py-1 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors text-sm",children:"Edit"}),c.jsx("button",{onClick:()=>F(S.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"Deactivate"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Merchant ID:"}),c.jsx("span",{className:"text-white ml-2 font-mono",children:S.merchantId})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Salt Index:"}),c.jsx("span",{className:"text-white ml-2",children:S.saltIndex})]}),S.businessName&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Business:"}),c.jsx("span",{className:"text-white ml-2",children:S.businessName})]}),S.phoneNumber&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Phone:"}),c.jsx("span",{className:"text-white ml-2",children:S.phoneNumber})]})]})]},S.id)})})}),u&&c.jsxs("div",{className:"bg-slate-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:f?"Edit PhonePe Account":"Add PhonePe Account"}),c.jsxs("form",{onSubmit:U,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Club ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{value:_.clubId,onChange:S=>T({..._,clubId:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[c.jsx("option",{value:"",children:"Select a club"}),e.map(S=>c.jsx("option",{value:S.id,children:S.name},S.id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Account Name ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",value:_.accountName,onChange:S=>T({..._,accountName:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Main Business Account",required:!0})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-white",children:"PhonePe Credentials"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Merchant ID ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",value:_.merchantId,onChange:S=>T({..._,merchantId:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"MERCHANT_ID",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Salt Key ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"password",value:_.saltKey,onChange:S=>T({..._,saltKey:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"SALT_KEY",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Salt Index ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",value:_.saltIndex,onChange:S=>T({..._,saltIndex:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"1",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Environment"}),c.jsxs("select",{value:_.environment,onChange:S=>T({..._,environment:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"sandbox",children:"Sandbox (Testing)"}),c.jsx("option",{value:"production",children:"Production (Live)"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-white",children:"Business Information (Optional)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Business Name"}),c.jsx("input",{type:"text",value:_.businessName,onChange:S=>T({..._,businessName:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your Business Name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Business Type"}),c.jsxs("select",{value:_.businessType,onChange:S=>T({..._,businessType:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"",children:"Select Business Type"}),c.jsx("option",{value:"education",children:"Education"}),c.jsx("option",{value:"technology",children:"Technology"}),c.jsx("option",{value:"entertainment",children:"Entertainment"}),c.jsx("option",{value:"sports",children:"Sports"}),c.jsx("option",{value:"other",children:"Other"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Phone Number"}),c.jsx("input",{type:"tel",value:_.phoneNumber,onChange:S=>T({..._,phoneNumber:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"+91 9876543210"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email"}),c.jsx("input",{type:"email",value:_.email,onChange:S=>T({..._,email:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"business@example.com"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-md font-semibold text-white",children:"Bank Information (Optional)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Account Holder Name"}),c.jsx("input",{type:"text",value:_.accountHolderName,onChange:S=>T({..._,accountHolderName:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Account Holder Name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Account Number"}),c.jsx("input",{type:"text",value:_.bankAccountNumber,onChange:S=>T({..._,bankAccountNumber:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Bank Account Number"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"IFSC Code"}),c.jsx("input",{type:"text",value:_.ifscCode,onChange:S=>T({..._,ifscCode:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"IFSC Code"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"PAN Number"}),c.jsx("input",{type:"text",value:_.panNumber,onChange:S=>T({..._,panNumber:S.target.value}),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"PAN Number"})]})]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{type:"button",onClick:ee,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a&&c.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Saving...":f?"Update Account":"Create Account"]})]})]})]})]})},ZU=({user:r,clubs:e})=>{const[t,n]=M.useState([]),[s,a]=M.useState([]),[o,u]=M.useState({totalRevenue:0,totalEvents:0,successfulPayments:0,failedPayments:0,pendingPayments:0,thisMonthRevenue:0,lastMonthRevenue:0}),[h,f]=M.useState(!1),[p,x]=M.useState("all"),[v,w]=M.useState("30d");M.useEffect(()=>{N()},[r.id,p,v]);const N=async()=>{f(!0);try{const F=await hc.getUserAccounts(r.id);n(F);const J=_();a(J);const ee=T(J);u(ee)}catch(F){console.error("Error loading dashboard data:",F)}finally{f(!1)}},_=()=>{const F=["Code-a-thon 2024","Tech Fest","Hackathon","Workshop","Seminar"],J=["Tech Club","Coding Club","Innovation Club"],ee=["success","success","success","failed","pending"],S=["UPI","Card","Net Banking"];return Array.from({length:50},(I,A)=>({id:`txn_${A+1}`,eventId:`event_${A+1}`,eventName:F[A%F.length],userId:`user_${A+1}`,userName:`User ${A+1}`,amount:Math.floor(Math.random()*1e3)+100,status:ee[A%ee.length],paymentMethod:S[A%S.length],transactionId:`TXN${Date.now()}${A}`,timestamp:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),clubId:`club_${A%J.length+1}`,clubName:J[A%J.length]}))},T=F=>{const J=F.filter(O=>O.status==="success"),ee=F.filter(O=>O.status==="failed"),S=F.filter(O=>O.status==="pending"),I=J.reduce((O,Be)=>O+Be.amount,0),A=new Date,j=new Date(A.getFullYear(),A.getMonth()-1,1),L=J.filter(O=>new Date(O.timestamp)>=new Date(A.getFullYear(),A.getMonth(),1)),V=J.filter(O=>new Date(O.timestamp)>=j&&new Date(O.timestamp)<new Date(A.getFullYear(),A.getMonth(),1));return{totalRevenue:I,totalEvents:new Set(F.map(O=>O.eventId)).size,successfulPayments:J.length,failedPayments:ee.length,pendingPayments:S.length,thisMonthRevenue:L.reduce((O,Be)=>O+Be.amount,0),lastMonthRevenue:V.reduce((O,Be)=>O+Be.amount,0)}},D=s.filter(F=>p!=="all"?F.clubId===p:!0),U=F=>`${F.toLocaleString()}`,k=F=>new Date(F).toLocaleDateString();return h?c.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto"}),c.jsx("p",{className:"text-white mt-4",children:"Loading payment dashboard..."})]})}):c.jsx("div",{className:"min-h-screen bg-slate-900 p-6",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Payment Dashboard"}),c.jsx("p",{className:"text-gray-400",children:"Track your earnings and payment analytics"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx("div",{className:"bg-slate-800 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:U(o.totalRevenue)})]}),c.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),c.jsx("div",{className:"bg-slate-800 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:U(o.thisMonthRevenue)}),c.jsxs("p",{className:"text-xs text-gray-400",children:["vs ",U(o.lastMonthRevenue)," last month"]})]}),c.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),c.jsx("div",{className:"bg-slate-800 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Successful Payments"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:o.successfulPayments}),c.jsxs("p",{className:"text-xs text-green-400",children:[(o.successfulPayments/(o.successfulPayments+o.failedPayments)*100).toFixed(1),"% success rate"]})]}),c.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),c.jsx("div",{className:"bg-slate-800 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-400 text-sm",children:"Total Events"}),c.jsx("p",{className:"text-2xl font-bold text-white",children:o.totalEvents}),c.jsx("p",{className:"text-xs text-gray-400",children:"Events with payments"})]}),c.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})]}),c.jsxs("div",{className:"flex gap-4 mb-6",children:[c.jsxs("select",{value:p,onChange:F=>x(F.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"all",children:"All Clubs"}),e.map(F=>c.jsx("option",{value:F.id,children:F.name},F.id))]}),c.jsxs("select",{value:v,onChange:F=>w(F.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"7d",children:"Last 7 days"}),c.jsx("option",{value:"30d",children:"Last 30 days"}),c.jsx("option",{value:"90d",children:"Last 90 days"}),c.jsx("option",{value:"1y",children:"Last year"})]})]}),c.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-slate-700",children:c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Transactions"})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Event"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"User"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Method"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-700",children:D.slice(0,20).map(F=>c.jsxs("tr",{className:"hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-white",children:F.eventName}),c.jsx("div",{className:"text-sm text-gray-400",children:F.clubName})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-white",children:F.userName})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-white",children:U(F.amount)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.status==="success"?"bg-green-500/20 text-green-400":F.status==="failed"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-400",children:F.paymentMethod})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-400",children:k(F.timestamp)})})]},F.id))})]})})]}),c.jsxs("div",{className:"mt-8 bg-slate-800 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"PhonePe Account Status"}),t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"No PhonePe Accounts"}),c.jsx("p",{className:"text-gray-400 mb-4",children:"You need to configure a PhonePe account to receive payments."})]}):c.jsx("div",{className:"grid gap-4",children:t.map(F=>{const J=e.find(ee=>ee.id===F.clubId);return c.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-medium",children:F.accountName}),c.jsx("p",{className:"text-gray-400 text-sm",children:(J==null?void 0:J.name)||"Unknown Club"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${F.environment==="production"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:F.environment==="production"?"Production":"Sandbox"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-500/20 text-green-400",children:"Active"})]})]},F.id)})})]})]})})},df=({title:r,value:e,icon:t,delay:n})=>c.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-slate-800 flex items-center gap-5 animate-staggered-fade-in",style:{animationDelay:`${n}ms`},children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-600/20 text-indigo-400 rounded-lg flex items-center justify-center",children:t}),c.jsxs("div",{children:[c.jsx("div",{className:"text-3xl font-extrabold text-white",children:e}),c.jsx("div",{className:"text-sm font-semibold text-gray-400",children:r})]})]}),eV=({isOpen:r,onClose:e,students:t,clubs:n,onAssign:s})=>{const[a,o]=M.useState(""),[u,h]=M.useState(null),[f,p]=M.useState([]),[x,v]=M.useState(""),w=()=>{const D=t.find(U=>U.rollNumber===a&&U.role==="student");D?(h(D),v("")):(h(null),v("Student not found or is already a contributor/admin."))},N=D=>{p(U=>U.includes(D)?U.filter(k=>k!==D):[...U,D])},_=()=>{u&&f.length>0&&(s(u.id,f),T())},T=()=>{o(""),h(null),p([]),v(""),e()};return r?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:T,children:c.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-xl w-full max-w-2xl animate-form-enter",onClick:D=>D.stopPropagation(),children:[c.jsx("div",{className:"p-6 border-b border-slate-800",children:c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Assign Contributor Role"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Search student by Roll Number...",value:a,onChange:D=>o(D.target.value),className:"flex-grow px-3 py-2 bg-slate-800 border border-slate-600 rounded-md"}),c.jsx("button",{onClick:w,className:"px-4 py-2 bg-indigo-600 rounded-md font-semibold hover:bg-indigo-700",children:"Search"})]}),x&&c.jsx("p",{className:"text-red-500 text-sm",children:x}),u&&c.jsxs("div",{className:"animate-fade-in-content",children:[c.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[c.jsx("p",{className:"font-bold text-white",children:u.name}),c.jsx("p",{className:"text-sm text-gray-400",children:u.rollNumber})]}),c.jsx("h3",{className:"font-semibold mt-4 mb-2 text-white",children:"Select clubs to manage:"}),c.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-2",children:n.map(D=>c.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-slate-800 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:f.includes(D.id),onChange:()=>N(D.id),className:"h-4 w-4 rounded bg-slate-700 border-slate-500 text-indigo-600 focus:ring-indigo-500"}),c.jsx("img",{src:D.logoUrl,alt:D.name,className:"w-8 h-8 rounded-full"}),c.jsx("span",{className:"text-gray-300",children:D.name})]},D.id))})]})]}),c.jsxs("div",{className:"p-6 border-t border-slate-800 flex justify-end gap-3",children:[c.jsx("button",{onClick:T,className:"px-4 py-2 bg-slate-700 rounded-md font-semibold hover:bg-slate-600",children:"Cancel"}),c.jsx("button",{onClick:_,disabled:!u||f.length===0,className:"px-4 py-2 bg-indigo-600 rounded-md font-semibold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Assign Role"})]})]})}):null},tV=({contributor:r,clubs:e,onRevoke:t,currentUserId:n})=>{const[s,a]=M.useState(!1),o=M.useMemo(()=>e.filter(u=>{var h;return(h=r.managedClubIds)==null?void 0:h.includes(u.id)}),[e,r]);return c.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg transition-all duration-300",children:[c.jsxs("button",{onClick:()=>a(!s),className:"w-full p-4 flex justify-between items-center text-left",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:r.name}),c.jsx("p",{className:"text-sm text-gray-400",children:r.rollNumber})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex -space-x-4",children:o.slice(0,3).map(u=>c.jsx("img",{src:u.logoUrl,alt:u.name,className:"w-8 h-8 rounded-full border-2 border-slate-700"},u.id))}),c.jsx("span",{className:`transform transition-transform duration-300 ${s?"rotate-180":""}`,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${s?"max-h-96":"max-h-0"}`,children:c.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[c.jsx("p",{className:"font-semibold text-gray-300 border-t border-slate-700 pt-3",children:"Managed Clubs:"}),o.map(u=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded-md",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("img",{src:u.logoUrl,alt:u.name,className:"w-8 h-8 rounded-full"}),c.jsx("span",{className:"text-gray-300",children:u.name})]}),c.jsx("button",{onClick:async()=>{try{await ev(r.id,u.id,n),t(r.id,u.id)}catch(h){console.error("Error revoking contributor:",h)}},className:"px-3 py-1 text-xs bg-red-600/50 text-red-300 hover:bg-red-600/80 rounded-md",children:"Revoke"})]},u.id)),c.jsx("button",{onClick:async()=>{try{await tv(r.id,n),t(r.id)}catch(u){console.error("Error revoking all contributor access:",u)}},className:"w-full mt-2 px-3 py-2 text-sm bg-red-800/50 text-red-300 hover:bg-red-800/80 rounded-md font-semibold",children:"Revoke All Contributor Access"})]})})]})},rV=({user:r,events:e,clubs:t,allUsers:n,onAssignRole:s,onRevokeRole:a})=>{const[o,u]=M.useState("management"),[h,f]=M.useState(""),[p,x]=M.useState(!1),{students:v,contributors:w}=M.useMemo(()=>({students:n.filter(J=>J.role==="student"),contributors:n.filter(J=>J.role==="contributor")}),[n]),N=M.useMemo(()=>w.filter(J=>{var ee;return J.name.toLowerCase().includes(h.toLowerCase())||((ee=J.rollNumber)==null?void 0:ee.toLowerCase().includes(h.toLowerCase()))}),[w,h]),[_,T]=M.useState([]),[D,U]=M.useState(!1),k=async()=>{U(!0);try{const J=[];for(const ee of e)if(ee.organizerClubId)try{(await L0(async()=>{const{collection:I,getDocs:A,db:j}=await Promise.resolve().then(()=>$j);return{collection:I,getDocs:A,db:j}},void 0).then(({collection:I,getDocs:A,db:j})=>A(I(j,"events",ee.organizerClubId,"clubEvents",ee.id,"payments")))).forEach(I=>{J.push({eventId:ee.id,eventName:ee.name,...I.data()})})}catch{}T(J)}catch{T([])}finally{U(!1)}},F=({tab:J,children:ee})=>c.jsxs("button",{onClick:()=>u(J),className:`relative flex-1 py-4 text-sm font-bold transition-colors ${o===J?"text-white":"text-gray-400 hover:text-white"}`,children:[ee,o===J&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-500 animate-slide-down-fade"})]});return c.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12",children:[c.jsx(eV,{isOpen:p,onClose:()=>x(!1),students:v,clubs:t,onAssign:s}),c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-4xl font-extrabold text-white",children:"Administrator Dashboard"}),c.jsxs("p",{className:"text-lg text-gray-400",children:["Welcome, ",r.name,"."]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[c.jsx(df,{title:"Total Clubs",value:t.length,delay:100,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),c.jsx(df,{title:"Total Events",value:e.length,delay:200,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx(df,{title:"Student Body",value:v.length,delay:300,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),c.jsx(df,{title:"Contributors",value:w.length,delay:400,icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg flex",children:[c.jsx(F,{tab:"management",children:"User Management"}),c.jsx(F,{tab:"analytics",children:"Analytics"})]}),c.jsxs("div",{className:"mt-8 animate-tab-content-enter",children:[o==="management"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6 space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:"Assign Contributor Role"}),c.jsx("p",{className:"text-sm text-gray-400 italic",children:"Note: Role change requests are handled offline. Use this tool to update the application's contributor mapping."}),c.jsx("button",{onClick:()=>x(!0),className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors",children:"Assign Role to Student"})]}),c.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-white",children:["Current Contributors (",N.length,")"]}),c.jsx("input",{type:"text",placeholder:"Filter by name or roll no...",value:h,onChange:J=>f(J.target.value),className:"px-3 py-1.5 bg-slate-800 border border-slate-600 rounded-md text-sm w-1/2"})]}),c.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-2",children:N.map((J,ee)=>c.jsx(tV,{contributor:J,clubs:t,onRevoke:a,currentUserId:r.id},J.id))})]})]}),o==="analytics"&&c.jsxs("div",{className:"text-center bg-slate-900 p-12 rounded-lg border border-slate-800",children:[c.jsx("div",{className:"inline-block p-4 bg-yellow-500/10 rounded-full mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h2",{className:"text-3xl font-bold text-white",children:"Analytics Section Coming Soon!"}),c.jsx("p",{className:"mt-2 text-gray-400 max-w-lg mx-auto",children:"We are currently building a powerful analytics dashboard to provide insights into event popularity, user engagement, and club growth. Please check back later."})]}),o==="payments"&&c.jsx(ZU,{user:r,clubs:t}),o==="phonepe"&&c.jsx("div",{className:"space-y-6",children:c.jsx(JU,{user:r,clubs:t})}),o==="eventpayments"&&c.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:"Event Payments"}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",disabled:D,children:D?"Loading...":"Refresh"})]}),D?c.jsx("div",{className:"text-gray-400",children:"Loading payments..."}):_.length===0?c.jsx("div",{className:"text-gray-400",children:"No payments found."}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-700",children:[c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Event"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"User"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Email"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Amount"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Payment ID"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Status"}),c.jsx("th",{className:"py-2 text-left text-gray-400",children:"Timestamp"})]})}),c.jsx("tbody",{children:_.map((J,ee)=>c.jsxs("tr",{className:"border-b border-slate-800",children:[c.jsx("td",{className:"py-2 text-white",children:J.eventName}),c.jsx("td",{className:"py-2 text-white",children:J.userName}),c.jsx("td",{className:"py-2 text-gray-400",children:J.userEmail}),c.jsxs("td",{className:"py-2 text-green-400 font-bold",children:["",J.amount]}),c.jsx("td",{className:"py-2 text-xs text-gray-300",children:J.paymentId}),c.jsx("td",{className:"py-2",children:c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-500/20 text-green-400",children:J.paymentStatus})}),c.jsx("td",{className:"py-2 text-gray-400",children:J.timestamp&&J.timestamp.seconds?new Date(J.timestamp.seconds*1e3).toLocaleString():""})]},J.paymentId+ee))})]})})]})]})]})},T2={Technical:{glow:"animate-glow-indigo",border:"hover:border-indigo-500/80"},Cultural:{glow:"animate-glow-pink",border:"hover:border-pink-500/80"},Sports:{glow:"animate-glow-green",border:"hover:border-green-500/80"}},nV=({event:r,index:e})=>{const t=T2[r.category]||T2.Technical;return c.jsxs(Mr,{to:`/annual-events/${r.id}`,className:`animate-card-enter group rounded-2xl overflow-hidden cursor-pointer bg-slate-900 shadow-lg transition-all duration-300 border-2 border-slate-800 ${t.border} hover:shadow-indigo-500/20 transform hover:-translate-y-2 flex flex-col`,style:{animationDelay:`${e*150}ms`},children:[c.jsx("div",{className:"overflow-hidden",children:c.jsx("img",{src:r.bannerUrl,alt:r.name,className:"w-full h-56 object-cover transition-transform duration-500 group-hover:scale-105"})}),c.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[c.jsx("h3",{className:"text-2xl font-extrabold tracking-tight text-white",children:r.name}),c.jsx("p",{className:"mt-2 text-gray-400 line-clamp-3 flex-grow",children:r.shortDescription}),c.jsx("div",{className:"mt-4 pt-4 border-t border-slate-800",children:c.jsxs("div",{className:"inline-flex items-center text-indigo-400 font-bold group-hover:text-indigo-300 transition-colors",children:[c.jsx("span",{children:"Explore History"}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2 transform group-hover:translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]})},sV=({annualEvents:r})=>c.jsxs("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(Rn,{title:"Annual Campus Festivals",subtitle:"Explore the legacy of our biggest and most celebrated events. These are the cornerstones of our campus tradition and spirit."}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((e,t)=>c.jsx(nV,{event:e,index:t},e.id))})]}),iV=({members:r,onClose:e,isClosing:t})=>c.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-backdrop-fade-in",onClick:e,children:c.jsxs("div",{className:`bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-w-lg w-full max-h-[70vh] flex flex-col ${t?"animate-modal-content-exit":"animate-form-enter"}`,onClick:n=>n.stopPropagation(),children:[c.jsxs("div",{className:"p-5 border-b border-slate-700 flex justify-between items-center flex-shrink-0",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Full Organizing Committee"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),c.jsx("div",{className:"p-6 overflow-y-auto",children:c.jsx("ul",{className:"space-y-3",children:r.map((n,s)=>c.jsxs("li",{className:"p-3 bg-slate-800/50 rounded-md",children:[c.jsx("p",{className:"font-semibold text-white",children:n.name}),c.jsx("p",{className:"text-sm text-indigo-400",children:n.position})]},s))})})]})}),aV=({event:r})=>{const e=zs();return c.jsxs("div",{onClick:()=>e(`/events/${r.id}`),className:"bg-slate-800/50 p-4 rounded-lg flex items-center justify-between gap-4 hover:bg-slate-800 transition-colors cursor-pointer border border-slate-700 hover:border-indigo-600",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:r.name}),c.jsx("p",{className:"text-sm text-gray-400",children:r.date})]}),c.jsx("button",{className:"flex-shrink-0 px-4 py-2 text-xs font-bold bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Register"})]})},oV=({rank:r})=>{const e={1:{icon:"",color:"text-yellow-400"},2:{icon:"",color:"text-gray-400"},3:{icon:"",color:"text-yellow-600"}},{icon:t,color:n}=e[r];return c.jsx("span",{className:`text-2xl ${n}`,children:t})},lV=({yearData:r,eventCategory:e,onOpenTeamModal:t})=>{const n=M.useMemo(()=>r.organizingTeam.filter(s=>s.imageUrl),[r.organizingTeam]);return c.jsxs("div",{className:"animate-fade-in-content bg-slate-900/50 p-6 md:p-8 rounded-2xl border border-slate-800 space-y-12",children:[r.theme&&c.jsxs("p",{className:"text-2xl font-semibold text-center text-indigo-400 italic mb-0",children:['Theme: "',r.theme,'"']}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-4 border-l-4 border-indigo-500 pl-4",children:"Gallery Highlights"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.highlightsGallery.previewImages.map((s,a)=>c.jsx("a",{href:r.highlightsGallery.fullGalleryLink,target:"_blank",rel:"noopener noreferrer",className:"overflow-hidden rounded-lg group aspect-w-1 aspect-h-1 block",children:c.jsx("img",{src:s,alt:`Highlight ${a+1}`,className:"object-cover w-full h-full transition-transform duration-300 group-hover:scale-110"})},a))}),c.jsx("a",{href:r.highlightsGallery.fullGalleryLink,target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-block text-indigo-400 hover:text-indigo-300 font-semibold",children:"View Full Gallery "})]}),r.chiefGuests.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-6 border-l-4 border-indigo-500 pl-4",children:e==="Sports"?"Presided By":"Chief Guests"}),c.jsx("div",{className:"space-y-8",children:r.chiefGuests.map(s=>c.jsx("div",{children:s.eventPhotos&&s.eventPhotos.length>0?c.jsxs("div",{className:"bg-slate-800/40 p-6 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-5 mb-4",children:[c.jsx("img",{src:s.profileImageUrl,alt:s.name,className:"w-20 h-20 rounded-full object-cover border-4 border-slate-700"}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-2xl font-bold text-white",children:s.name}),c.jsx("p",{className:"text-md text-indigo-400",children:s.title})]})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.eventPhotos.map((a,o)=>c.jsx("img",{src:a,alt:`${s.name} at the event`,className:"rounded-md object-cover w-full h-32 hover:scale-105 transition-transform"},o))})]}):c.jsxs("div",{className:"bg-slate-800/40 p-6 rounded-lg flex flex-col sm:flex-row items-center text-center sm:text-left gap-6",children:[c.jsx("img",{src:s.profileImageUrl,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-slate-700 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-2xl font-bold text-white",children:s.name}),c.jsx("p",{className:"text-md text-indigo-400",children:s.title})]})]})},s.name))})]}),r.sportsCompetitions&&r.sportsCompetitions.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-6 border-l-4 border-green-500 pl-4",children:"Get in the Game"}),c.jsx("div",{className:"space-y-4",children:r.sportsCompetitions.map(s=>c.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-lg flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("span",{className:"text-4xl mt-1",children:s.icon}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-lg",children:s.name}),c.jsx("p",{className:"text-sm text-gray-400",children:s.description})]})]}),c.jsx("button",{onClick:()=>alert(`Registering for ${s.name}...`),disabled:!s.registrationOpen,className:"w-full sm:w-auto flex-shrink-0 px-5 py-2 text-sm font-bold rounded-lg transition-colors disabled:bg-slate-600 disabled:text-gray-400 disabled:cursor-not-allowed bg-green-600 hover:bg-green-700 text-white",children:s.registrationOpen?"Register Now":"Registration Closed"})]},s.id))})]}),r.performances&&r.performances.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-6 border-l-4 border-pink-500 pl-4",children:"Student Showcase"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.performances.map(s=>c.jsxs("div",{className:"group relative rounded-lg overflow-hidden shadow-lg h-72 bg-slate-800",children:[c.jsx("img",{src:s.imageUrl,alt:s.performer,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),c.jsxs("div",{className:"absolute bottom-0 left-0 p-4 text-white",children:[c.jsx("h4",{className:"font-bold text-lg",children:s.performer}),c.jsx("p",{className:"text-sm opacity-90",children:s.description})]})]},s.performer))})]}),r.awardWinners&&r.awardWinners.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-6 border-l-4 border-yellow-500 pl-4",children:"Academic Excellence Awards"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.awardWinners.map(s=>c.jsxs("div",{className:"bg-slate-800/40 p-5 rounded-lg border border-slate-700/50",children:[c.jsx("h4",{className:"text-xl font-bold text-white mb-4 text-center",children:s.department}),c.jsx("ul",{className:"space-y-3",children:s.winners.map(a=>c.jsxs("li",{className:"flex items-center gap-4 bg-slate-900/50 p-3 rounded-md",children:[c.jsx(oV,{rank:a.rank}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-200",children:a.name}),c.jsx("p",{className:"text-sm text-yellow-400",children:a.achievement})]})]},a.rank))})]},s.department))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-bold text-white mb-6 border-l-4 border-indigo-500 pl-4",children:"Organizing Team"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 text-center",children:n.map(s=>c.jsxs("div",{children:[c.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-24 h-24 rounded-full mx-auto object-cover border-4 border-slate-700"}),c.jsx("p",{className:"mt-2 font-semibold text-white",children:s.name}),c.jsx("p",{className:"text-xs text-indigo-400",children:s.position})]},s.name))}),r.organizingTeam.length>n.length&&c.jsx("div",{className:"text-center mt-8",children:c.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"View Full Committee"})})]})]})},cV=({event:r,allEvents:e,allClubs:t})=>{var T;const n=M.useMemo(()=>r.yearlyData.sort((D,U)=>U.year-D.year),[r.yearlyData]),[s,a]=M.useState(((T=n[0])==null?void 0:T.year)||null),[o,u]=M.useState(!1),[h,f]=M.useState(!1),p=()=>{f(!0),setTimeout(()=>{u(!1),f(!1)},300)},x={Technical:{border:"border-indigo-500",text:"text-indigo-400"},Cultural:{border:"border-pink-500",text:"text-pink-400"},Sports:{border:"border-green-500",text:"text-green-400"}},v=M.useMemo(()=>n.find(D=>D.year===s),[s,n]),w=M.useMemo(()=>e.filter(D=>D.parentAnnualEventId===r.id),[e,r.id]),N=M.useMemo(()=>w.length===0?{}:w.reduce((D,U)=>{const k=U.organizerClubId;return D[k]||(D[k]=[]),D[k].push(U),D},{}),[w]),_=Object.keys(N);return c.jsxs("div",{children:[o&&v&&c.jsx(iV,{members:v.organizingTeam,onClose:p,isClosing:h}),c.jsxs("div",{className:"relative h-[60vh] flex flex-col items-start justify-end p-8 md:p-12 rounded-b-2xl overflow-hidden shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx("img",{src:r.bannerUrl,alt:r.name,className:"w-full h-full object-cover kenburns-active"})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),c.jsxs("div",{className:"relative z-10 animate-fade-in-content",children:[c.jsx("span",{className:`inline-block px-3 py-1 mb-2 text-sm font-semibold border-2 self-start rounded-full ${x[r.category].border} ${x[r.category].text}`,children:r.category}),c.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold text-white tracking-tighter",children:r.name}),c.jsx("p",{className:"mt-2 max-w-2xl text-lg text-gray-300",children:r.shortDescription}),r.registrationEnabled&&c.jsx("button",{onClick:()=>alert("Registration flow initiated!"),className:"mt-6 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors shadow-lg",children:r.id==="bhaswara"?"Register for Events Below":"Register / Join a Team"})]})]}),c.jsxs("div",{className:"container mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx("section",{className:"mb-16",children:c.jsxs("div",{className:"relative bg-slate-900 rounded-2xl border border-slate-800 overflow-hidden p-8 md:p-12",children:[c.jsx("div",{className:"absolute inset-0 z-0 opacity-10",children:c.jsx("img",{src:r.bannerUrl,alt:"",className:"w-full h-full object-cover filter blur-md scale-110"})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-900/80 to-slate-900 z-0"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx(Rn,{title:"Significance of the Fest"}),c.jsx("p",{className:"text-gray-400 text-lg leading-relaxed text-center max-w-3xl mx-auto",children:r.longDescription})]})]})}),w.length>0&&c.jsxs("section",{className:"mb-16",children:[c.jsx(Rn,{title:"Departmental Fests",subtitle:`Explore events hosted by various clubs as part of ${r.name}.`}),c.jsx("div",{className:"space-y-8",children:_.map(D=>{const U=t.find(k=>k.id===D);return U?c.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("img",{src:U.logoUrl,alt:U.name,className:"w-14 h-14 rounded-full"}),c.jsxs("h3",{className:"text-2xl font-bold text-white",children:[U.name," Events"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N[D].map(k=>c.jsx(aV,{event:k},k.id))})]},D):null})})]}),c.jsxs("section",{children:[c.jsx(Rn,{title:"Yearly Archives",subtitle:"Relive the moments from previous editions."}),c.jsx("div",{className:"flex justify-center flex-wrap gap-3 mb-8",children:n.map(D=>c.jsx("button",{onClick:()=>a(D.year),className:`px-6 py-2 rounded-full font-semibold transition-all duration-300 border-2 ${s===D.year?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-slate-800 border-slate-700 text-gray-300 hover:bg-slate-700 hover:border-slate-600"}`,children:D.year},D.year))}),v&&c.jsx(lV,{yearData:v,eventCategory:r.category,onOpenTeamModal:()=>u(!0)})]})]})]})},uV=r=>{const e=new Date(r),t=Math.floor((new Date().getTime()-e.getTime())/1e3);let n=t/31536e3;return n>1?Math.floor(n)+" years ago":(n=t/2592e3,n>1?Math.floor(n)+" months ago":(n=t/86400,n>1?Math.floor(n)+" days ago":(n=t/3600,n>1?Math.floor(n)+" hours ago":(n=t/60,n>1?Math.floor(n)+" minutes ago":Math.floor(t)+" seconds ago"))))},dV=({type:r})=>{const e="w-6 h-6";switch(r){case"application-accepted":case"event-winner":case"access-granted":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-green-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"application-rejected":case"access-revoked":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-red-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":default:return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} text-indigo-400`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},hV=({notifications:r,onMarkAsRead:e})=>{const[t,n]=M.useState("all"),s=zs(),a=M.useMemo(()=>{const u=[...r].sort((h,f)=>new Date(f.timestamp).getTime()-new Date(h.timestamp).getTime());return t==="unread"?u.filter(h=>!h.isRead):u},[r,t]),o=u=>{u.isRead||e(u.id),u.link&&s(u.link)};return c.jsxs("div",{className:"container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx(Rn,{title:"All Notifications",subtitle:"View and manage all your past and present notifications."}),c.jsxs("div",{className:"flex justify-center mb-6 bg-slate-900/50 p-1 rounded-lg border border-slate-800 max-w-xs mx-auto",children:[c.jsx("button",{onClick:()=>n("all"),className:`flex-1 py-2 text-sm font-semibold rounded-md transition-colors ${t==="all"?"bg-indigo-600 text-white":"text-gray-400 hover:bg-slate-800"}`,children:"All"}),c.jsx("button",{onClick:()=>n("unread"),className:`flex-1 py-2 text-sm font-semibold rounded-md transition-colors ${t==="unread"?"bg-indigo-600 text-white":"text-gray-400 hover:bg-slate-800"}`,children:"Unread"})]}),c.jsx("div",{className:"space-y-3",children:a.length>0?a.map(u=>c.jsx("button",{onClick:()=>o(u),className:"w-full text-left p-4 hover:bg-slate-800/80 transition-colors border border-slate-800 bg-slate-900 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 mt-1",children:c.jsx(dV,{type:u.type})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-md text-gray-300",children:u.message}),c.jsx("p",{className:`mt-1 text-xs font-bold ${u.isRead?"text-gray-500":"text-indigo-400"}`,children:uV(u.timestamp)})]}),!u.isRead&&c.jsx("div",{className:"flex-shrink-0 mt-1 self-center",children:c.jsx("span",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full block animate-pulse"})})]})},u.id)):c.jsx("div",{className:"text-center bg-slate-900 p-8 rounded-lg",children:c.jsxs("p",{className:"text-gray-400",children:["No ",t==="unread"?"unread":""," notifications found."]})})})]})},fV=()=>c.jsxs("div",{className:"fixed inset-0 bg-slate-950 flex flex-col items-center justify-center animate-fade-in-content z-50",children:[c.jsx("div",{className:"confetti-container",children:Array.from({length:200}).map((r,e)=>c.jsx("div",{className:`confetti confetti-${e%10}`,style:{left:`${Math.random()*100}%`,animationDuration:`${Math.random()*3+2}s`,animationDelay:`${Math.random()*2}s`}},e))}),c.jsx("h2",{className:"text-6xl md:text-8xl font-extrabold text-white z-10 tracking-tighter animate-scale-in-celebrate",children:"Welcome to GCET Campus Hub!"}),c.jsx("p",{className:"text-xl text-gray-400 mt-4 z-10 animate-scale-in-celebrate",style:{animationDelay:"200ms"},children:"Redirecting to homepage..."})]}),mV=({onLaunchComplete:r})=>{const[e,t]=M.useState("initial"),[n,s]=M.useState(5);M.useEffect(()=>{let u;return e==="counting"&&n>0?u=setTimeout(()=>s(h=>h-1),1e3):e==="counting"&&n===0&&t("celebrating"),()=>clearTimeout(u)},[e,n]),M.useEffect(()=>{let u;return e==="celebrating"&&(u=setTimeout(()=>{r()},4e3)),()=>clearTimeout(u)},[e,r]);const a=()=>{t("counting")},o=()=>{switch(e){case"initial":return c.jsx("div",{className:"text-center animate-fade-in-content",children:c.jsx("button",{onClick:a,className:"px-12 py-6 bg-indigo-600 text-white font-bold text-2xl rounded-xl hover:bg-indigo-700 transition-colors transform hover:scale-105 shadow-lg animate-glow",children:"Launch Website"})});case"counting":return c.jsx("div",{className:"text-9xl font-extrabold text-white animate-ping-once",children:n===0?"":n},n);case"celebrating":return c.jsx(fV,{});default:return null}};return c.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 -left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-soft-light filter blur-2xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 -right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-soft-light filter blur-2xl opacity-20 animate-blob",style:{animationDelay:"2s"}}),o()]})},pV=()=>{const{pathname:r}=ul();return M.useEffect(()=>{window.scrollTo(0,0)},[r]),null},gV=()=>c.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center text-white",children:[c.jsxs("svg",{className:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("p",{className:"mt-4 text-lg",children:"Loading Campus Hub..."})]}),xV=()=>{const[r,e]=M.useState(null),t=zs();ul();const{events:n,clubs:s,applications:a,users:o,annualEvents:u,notifications:h,leadership:f,news:p,externalEvents:x,isLoading:v,updateEvents:w,updateClubs:N,updateApplications:_}=kD({user:r,enableRealtime:!1});M.useEffect(()=>{const oe=Xh.onAuthStateChanged(async pe=>{if(pe){const ge=await P_(pe);ge&&e(ge)}else e(null)});return()=>oe()},[]);const[T,D]=M.useState({ev101:42,ev102:18,ev201:153}),U=async(oe,pe)=>{try{const{user:ge}=await Xh.signIn(oe,pe),Xe=await P_(ge);if(Xe)e(Xe),t("/");else throw new Error("Could not get user profile.")}catch(ge){throw new Error(ge.message||"Login failed")}},k=async oe=>{try{const{email:pe,password:ge,name:Xe,...tt}=oe,{user:mt}=await Xh.signUp(pe,ge),it=await vn.createUserProfile(mt,{name:Xe,email:mt.email||"",role:"student",...tt});if(it)e(it),t("/");else throw new Error("Could not create user profile.")}catch(pe){throw new Error(pe.message||"Registration failed")}},F=async oe=>{try{const pe=zn.currentUser;if(!pe)throw new Error("No authenticated user found");const ge=await vn.createUserProfile(pe,{name:oe.name,email:pe.email||"",role:"student",...oe});if(ge)e(ge),t("/");else throw new Error("Could not create user profile.")}catch(pe){throw new Error(pe.message||"Profile creation failed")}},J=async oe=>{try{const pe=await ND(oe);e(pe),t("/")}catch(pe){console.error("Error creating guest user profile:",pe);const ge={id:`guest_${Date.now()}`,name:oe.name,email:oe.email,mobile:oe.phone,year:oe.year,branch:oe.department,collegeName:oe.college,role:"guest",isGuest:!0};e(ge),t("/")}},ee=async()=>{try{await Xh.signOut(),e(null),t("/")}catch(oe){console.error("Logout error:",oe),e(null),t("/")}},S=oe=>{D(pe=>({...pe,[oe]:(pe[oe]||0)+1}))},I=M.useCallback(()=>{},[]),A=oe=>{alert("Creating event")},j=oe=>{alert("Updated event successfully")},L=async oe=>{try{await hr.updateClub(oe.id,oe);const pe=await hr.getClubs();N(pe),alert("Club details updated successfully!")}catch(pe){console.error("Error updating club:",pe),alert(pe.message||"Failed to update club")}},V=async(oe,pe,ge)=>{try{ge==="accepted"?await kg.acceptAndPromote(oe,pe.id):await kg.updateStatus(oe,pe.id,ge)}catch(Xe){console.error("Failed to update application status",Xe),alert("Failed to update status");return}try{const Xe=await hr.getClubApplications(oe);_(tt=>[...tt.filter(it=>it.clubId!==oe),...Xe])}catch(Xe){console.warn("Status updated, but failed to refresh list",Xe)}},O=async oe=>{try{const pe=await hr.createClubApplication(oe.clubId,{userId:oe.userId,userName:oe.userName,userImageUrl:oe.userImageUrl,userEmail:oe.userEmail,userYear:oe.userYear,userBranch:oe.userBranch,userMobile:oe.userMobile,status:oe.status,answers:oe.answers});_(ge=>[pe,...ge])}catch(pe){console.error("Error creating application:",pe),alert(pe.message||"Failed to submit application")}},Be=async(oe,pe)=>{if(!(r!=null&&r.id)){alert("You must be logged in to assign contributor roles");return}try{if(await RD(oe,pe,r.id)){const Xe=await hr.getUsers();alert("Contributor role assigned successfully!")}else alert("Failed to assign contributor role. Please try again.")}catch(ge){console.error("Error assigning contributor role:",ge),alert(`Error: ${ge.message||"Failed to assign contributor role"}`)}},De=async(oe,pe)=>{if(!(r!=null&&r.id)){alert("You must be logged in as admin to create a club");return}try{const ge=await DD(oe,pe,r.id),Xe=await hr.getClubs();N(Xe),alert(`Club "${ge.name}" created successfully!`),t(`/clubs/${ge.id}`)}catch(ge){console.error("Error creating club:",ge),alert(`Error: ${ge.message||"Failed to create club"}`)}},Se=async(oe,pe)=>{if(!(r!=null&&r.id)){alert("You must be logged in to revoke contributor roles");return}try{let ge;pe?ge=await ev(oe,pe,r.id):ge=await tv(oe,r.id),alert(ge?"Contributor access revoked successfully!":"Failed to revoke contributor access. Please try again.")}catch(ge){console.error("Error revoking contributor access:",ge),alert(`Error: ${ge.message||"Failed to revoke contributor access"}`)}},We=(oe,pe)=>{alert("Update highlights not implemented")},Ne=oe=>{alert("Mark as read not implemented")},Ee=oe=>{alert("Mark all as read not implemented")},q=async(oe,pe)=>{if(!(r!=null&&r.id)){alert("You must be logged in to manage club members");return}try{if(await PD(oe,pe,r.id)){const Xe=await hr.getClubs();N(Xe),alert("Member added successfully!")}else alert("Failed to add member. Please try again.")}catch(ge){console.error("Error adding club member:",ge),alert(`Error: ${ge.message||"Failed to add member"}`)}},se=async(oe,pe)=>{if(!(r!=null&&r.id)){alert("You must be logged in to manage club members");return}try{if(await jD(oe,pe,r.id)){const Xe=await hr.getClubs();N(Xe),alert("Member removed successfully!")}else alert("Failed to remove member. Please try again.")}catch(ge){console.error("Error removing club member:",ge),alert(`Error: ${ge.message||"Failed to remove member"}`)}},z=async(oe,pe,ge)=>{N(Xe=>Xe.map(tt=>tt.id===oe?{...tt,team:tt.team.map(mt=>mt.id===pe?{...mt,...ge}:mt)}:tt))};if(v)return c.jsx(gV,{});if(!r)return c.jsx(HU,{onLogin:U,onRegisterAndLogin:k,onCreateProfileForExistingUser:F,onUserRegistered:e,onGuestLogin:J});const te=h.filter(oe=>oe.userId===(r==null?void 0:r.id)),Q=()=>{const{clubId:oe}=bp();if(!oe)return c.jsx(Ho,{to:"/clubs",replace:!0});const pe=s.find(mt=>mt.id===oe);if(!pe)return c.jsx(Ho,{to:"/clubs",replace:!0});const[ge,Xe]=M.useState([]);M.useEffect(()=>{let mt=!0;return(async()=>{try{const tr=await hr.getClubApplications(pe.id);mt&&Xe(tr)}catch(tr){console.error("Failed to load club applications",tr),mt&&Xe([])}})(),()=>{mt=!1}},[pe.id,a]);const tt=n.filter(mt=>mt.organizerClubId===pe.id);return c.jsx(lU,{club:pe,clubEvents:tt,setEvents:w,user:r,applications:ge,allUsers:o,onUpdateClub:L,onApplicationStatusChange:V,onNewApplication:O,onCreateEvent:A,onUpdateEvent:j,registrations:T,onAddClubMember:q,onRemoveClubMember:se,onUpdateClubMember:z})},Z=()=>{const{eventId:oe}=bp();if(!oe)return c.jsx(Ho,{to:"/events",replace:!0});const pe=n.find(ge=>ge.id===oe);return pe?c.jsx(NU,{event:pe,clubs:s,user:r,onRegister:S,onUpdateEventHighlights:We,onUpdateEvent:j,onRegistrationUpdate:I}):c.jsx(Ho,{to:"/events",replace:!0})},ue=()=>{const{eventId:oe}=bp();if(!oe)return c.jsx(Ho,{to:"/annual-events",replace:!0});const pe=u.find(ge=>ge.id===oe);return pe?c.jsx(cV,{event:pe,allEvents:n,allClubs:s}):c.jsx(Ho,{to:"/annual-events",replace:!0})},Ce=()=>r.role==="admin"?c.jsx(rV,{user:r,clubs:s,events:n,allUsers:o,onAssignRole:Be,onRevokeRole:Se}):c.jsx(QU,{user:r,onLogout:ee,events:n,clubs:s,applications:a});return c.jsxs("div",{className:"font-sans min-h-screen flex flex-col",children:[c.jsx(MD,{user:r,onLogout:ee,applications:a,notifications:te,onMarkAsRead:Ne,onMarkAllAsRead:()=>Ee(r.id)}),c.jsxs("main",{className:"flex-1",children:[c.jsx(pV,{}),c.jsx("div",{className:"animate-fadeIn",children:c.jsxs(SC,{children:[c.jsx(rs,{path:"/",element:c.jsx(tO,{events:n,clubs:s,leadership:f})}),c.jsx(rs,{path:"/clubs",element:c.jsx(dU,{clubs:s,user:r,allUsers:o,applications:a,onCreateClub:De})}),c.jsx(rs,{path:"/clubs/:clubId",element:c.jsx(Q,{})}),c.jsx(rs,{path:"/events",element:c.jsx(cO,{events:n,clubs:s})}),c.jsx(rs,{path:"/events/:eventId",element:c.jsx(Z,{})}),c.jsx(rs,{path:"/annual-events",element:c.jsx(sV,{annualEvents:u})}),c.jsx(rs,{path:"/annual-events/:eventId",element:c.jsx(ue,{})}),c.jsx(rs,{path:"/opportunities",element:c.jsx(SU,{externalEvents:x})}),c.jsx(rs,{path:"/news",element:c.jsx(qU,{news:p})}),c.jsx(rs,{path:"/profile",element:c.jsx(Ce,{})}),c.jsx(rs,{path:"/launch",element:c.jsx(mV,{onLaunchComplete:()=>t("/")})}),c.jsx(rs,{path:"/notifications",element:c.jsx(hV,{notifications:te,onMarkAsRead:Ne})}),c.jsx(rs,{path:"*",element:c.jsx(Ho,{to:"/",replace:!0})})]})})]}),c.jsx(UD,{})]})},b4=document.getElementById("root");if(!b4)throw new Error("Could not find root element to mount to");const vV=FS.createRoot(b4);vV.render(c.jsx(jC,{children:c.jsx(xV,{})}));
